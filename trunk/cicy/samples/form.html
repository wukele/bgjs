<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="../cicylib-all-debug.js"></script>
        <link rel="stylesheet" href="../default/global.css" type="text/css"/>
        <link rel="stylesheet" href="../default/lan_share.css" type="text/css"/>
        <link rel="stylesheet" href="resources/example.css" type="text/css"/>
        <style>
/**Form**/
.g-form {
	margin:10px 0 0 20px;
	padding:0 0 85px;
}
.g-formfields{ list-style-type:none; margin:0;padding:0;width:100%;text-align:left;float:left;position:relative;}

.g-form-ln label.desc 
{border:medium none;color:#222222;display:block;font-weight:bold;line-height:150%;padding:0 0 2px;}

.g-form-hln label.desc {float:left;text-align:right;padding:3px 3px 1px 0;}
:lang(zh) .g-form-hln label.desc{padding:1px 4px 2px 0;}
.g-form-ln {display:block;margin:0;padding:4px 5px 2px 9px;width:62%;position:relative;float:left;}
.g-form-ln .field-ct{position:relative;}
.g-form-mdy {background-repeat:no-repeat;background-position:left top;}

.g-form-error {background-repeat:repeat-x;background-position:center bottom;}

.g-form-el {margin-right:3px;}
.g-form-ln .field-ct .g-form-el{display:block;margin:0 5px 5px 0;}


.g-form-ln label .req {display:none;}
.g-fieldset {float:left;border:1px solid #E0E0E0;padding:10px;margin-bottom:10px;}
.g-fieldset legend{font-weight:bold;color:#001119;font-size:12px;}
        </style>
    </head>
    <body></body>
</html>
<script type="text/javascript">


/**
 *
 */
CC.Tpl.def('CC.ui.form.Line', '<li class="g-form-ln"><label class="desc" id="_lbl"><span id="_tle"></span><span class="req" id="_req">*</span></label><div id="_ctx" class="field-ct"></div></li>')
      .def('CC.ui.form.Layer', '<ul class="g-formfields"></ul>')
      .def('CC.ui.form.FieldsetUL', '<fieldset class="g-fieldset g-corner"><legend id="_tle">标题栏</legend><div id="_ctx" class="fieldset-ct"></div><div class="g-clear"></div></fieldset>');


CC.create('CC.ui.form.Line', CC.ui.ContainerBase, function(spr) {
	return {
/**
 * 指明Label结点ID,不存在时设为false
 * @type {String}
 */
		labelNode: '_lbl',
    
    hlabel:false,
    
    hlabelCS:'g-form-hln',
    
/**
 * 如果字段是必须的,属性指明用于修饰"必须"字段的结点
 */
		reqNode : '_req',

/**
 * 域中标签的htmlFor指向的子项id,默认为0,为首级第一个子项
 */
		labelFor: 0,
		
		ct: '_ctx',
		
		title: false,
		
		initComponent: function() {
			spr.initComponent.call(this);
      
      if(this.hlabel)
      	this.addClass(this.hlabel);
      	
			if (this.title === false && this.labelNode !== false) {
				var d = this.dom(this.labelNode);
				d.parentNode.removeChild(d);
			}
			
/**
 * @name CC.ui.form.FieldLI
 * @property {Boolean} required 值是否必须,
 * 该属性在基类中只起修饰作用,并无验证功能,
 * 并且当属性为真时,存在结点id为this.reqNode用于显示"必须"提示符.
 */
			if(this.required)
				CC.fly(this.reqNode).show().unfly();
		},

		add: function(field, cfg) {
			spr.add.call(this, field, cfg);
			if(this.labelFor !== false && this.$(this.labelFor) === field){
				if(field.element){
				 var lbl =  this.dom(this.labelNode);
				 if(lbl)
				 	lbl.htmlFor = field.element.id;
				}
			}
		}
	};
});



CC.ui.def('fieldline',CC.ui.form.Line);

CC.create('CC.ui.form.Layer', CC.ui.ContainerBase, {
	ItemClass : CC.ui.form.Line,
	ct: '_ctx'
});

CC.ui.def('formlayer', CC.ui.form.Layer);

CC.ui.form.Fieldset = function(opt){
	return new CC.ui.form.Layer(CC.extendIf(opt, {
		template:'CC.ui.form.FieldsetUL',
		ItemClass : CC.ui.form.Layer,
		ct: '_ctx'
	}));
};


CC.ui.form.Line.prototype.ItemClass = CC.ui.form.Layer;

CC.ui.def('fieldset',CC.ui.form.Fieldset);

CC.ready(function(){
  
	var layer = new CC.ui.form.Layer({
		array: [
		
		{title: '单行文本', hlabel:true, css:'^1c', array:[{ctype:'text'}]},
		
		{css:'1c ^c:42', array:[
			{ctype:'fieldset', css:'^1c', array:[{ctype:'text'},{ctype:'text'}]},
			{ctype:'fieldset', css:'^1c $mg:0,5', array:[{ctype:'text'},{ctype:'text'}]}
		]},
		
		{css:'1c ^1c', array:[
		
			{ctype:'fieldlayer', css:'1c ^w:auto',
			 array:[
			  {css:'pdl:0', array:[{ctype:'fieldset', title: '第一列文本', array:[{ctype:'text'},{ctype:'text'},{ctype:'text'}]}]},
			  {title: '第二列文本', array:[{ctype:'combo', array:[
					  			{title:'disabled item',icon:'iconRef',disabled:true},
									{title:'粉红色',icon:'iconUser'},
									{title:'蓝色',icon:'iconEdit'},
									{title:'清除记录',icon:'iconLeaf'},
									{title:'粉红色',icon:'iconTabs'},
									{title:'蓝色',icon:'iconUser'},
									{title:'清除记录',icon:'iconEdit'}
		  	         ]
		  	}]},
			  {title: '第三列文本', css:'^c:100',array:[{ctype:'text'}]}
			 ]
			}
		]}
		
		]
	  });

	var w = new CC.ui.Dialog({
		title: '库表单控件',
		showTo: document.body,
		hidden:true,
		array:[layer],
		width:500,
		height:640,
		buttons : [{title: '取消'}, {title: '确定'}]
	});

	w.render();
	w.show().center();
});
</script>
