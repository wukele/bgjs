function fGo(){}if(window.__debug===undefined)var __debug=false;
(function(){function a(v,f,n){for(var t=0,x=n.length;t<x;t++){var z=n[t];if(C.isArray(z))arguments.callee(v,f,z);else typeof z==="function"?C.extend(v,z(f)):C.extend(v,z)}}var l=window.document,m=navigator.userAgent.toLowerCase(),g=0,h=window.String,i,b=l.compatMode==="CSS1Compat",k=m.indexOf("opera")>-1,o=/webkit|khtml/.test(m);m.indexOf("chrome");var p=!k&&m.indexOf("msie")>-1,u=!k&&m.indexOf("msie 7")>-1,q=!k&&m.indexOf("msie 6")>-1;m=!o&&m.indexOf("gecko")>-1;var w=p&&!b||!p&&!b,D=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,
A=Array.prototype.slice;if(p&&!u)try{l.execCommand("BackgroundImageCache",false,true)}catch(F){}var C={version:"2010.5",$:function(v,f){var n=typeof v==="string"||v instanceof h;if(n&&!f)return l.getElementById(v);if(!n)return v;if(f.id==v)return f;f=f.firstChild;for(n=[];f;){if(f.id==v)return f;f.firstChild&&n.push(f);f=f.nextSibling;if(!f)if(f=n.pop())f=f.firstChild}return null},each:function(v,f){if(v.length===i)for(var n in v){if(f.call(v[n],n,v[n])===false)break}else{n=0;for(var t=v.length,x=
v[0];n<t&&f.call(x,n,x)!==false;x=v[++n]);}return v},eachH:function(v,f,n){v=v;for(var t;v;){t=n.call(v);if(t!==i)return t;v=v[f]}},extend:function(v,f){v||(v={});if(f)for(var n in f)v[n]=f[n];return v},extendIf:function(v,f){v||(v={});if(f)for(var n in f)if(v[n]===i)v[n]=f[n];return v},create:function(){var v=function(){this.initialize.apply(this,arguments)};if(arguments.length===0)return v;var f=v.prototype,n,t,x=this.$A(arguments);if(typeof x[0]==="string"){t=x[0];n=x[1];x.shift()}else n=x[0];
x.shift();if(n)n=n.prototype;else if(__debug)f.toString=function(){return(this.id?this.id:"")+(this.title?"$"+this.title:"")+"@"+this.type};if(n){function z(){}z.prototype=n;v.prototype=f=new z;f.superclass=n;v.superclass=n}if(t){f.type=t;if(t.indexOf(".")>0)this.attr(window,t,v);else window[t]=v}v.constructors=x;a(f,n,x);return f.constructor=v},ajaxRequest:function(){try{if(window.XMLHttpRequest)return new XMLHttpRequest;else if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(v){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){return null}}}catch(n){__debug&&
console.log("createXMLHttpRequest",n);return false}},attr:function(v,f,n){if(typeof f==="string")f=f.split(".");for(var t,x=0,z=f.length-1;x<z;x++){t=v;v=v[f[x]];if(typeof v==="undefined"||v===null)t[f[x]]=v={}}if(n===i)return v[f[x]];v[f[x]]=n},queryString:function(v){if(!v)return"";var f=[];for(var n in v){var t=v[n];n=encodeURIComponent(n);var x=typeof t;if(x==="undefined")f.push(n,"=&");else if(x!="function"&&x!="object")f.push(n,"=",encodeURIComponent(t),"&");else if(this.isArray(t))if(t.length){x=
0;for(var z=t.length;x<z;x++)f.push(n,"=",encodeURIComponent(t[x]===i?"":t[x]),"&")}else f.push(n,"=&")}f.pop();return f.join("")},formQuery:function(v){var f="",n="";v=C.$(v);for(var t=v.elements,x=t.length,z=0;z<x;z++){n=t[z];if(n.tagName==="INPUT")if(n.type==="radio"||n.type==="checkbox")if(!n.checked)continue;if(v=n.name||n.id){if(f!="")f+="&";f+=encodeURIComponent(n.name||n.id)+"="+encodeURIComponent(n.value)}}return f},validate:function(){var v=C.$A(arguments),f=null;if(!C.isArray(v[0])){f=
C.$(v[0]);v.remove(0)}var n=C.isArray(n)?{}:v.pop(),t=n.queryString,x=t?"":{};C.each(v,function(z,y){z=y[0].tagName?y[0]:f?f[y[0]]:C.$(y[0]);var B=z.value,E=y[1],G=typeof y[2]==="function"?y[3]:y[2];if(!G||typeof G!="object")G=n;if(!G.ignoreNull&&(B==""||B==null)){G.callback?G.callback(E,z,f):C.alert(E,z,f);G.nofocus||z.focus();return x=false}if(typeof y[2]==="function"){var H=y[2](B,z,f),J=H!==false;if(typeof H==="string"){E=H;J=false}if(!J){G.callback?G.callback(E,z,f):C.alert(E,z,f);G.nofocus||
z.focus();return x=false}}if(t&&!f)x+=x==""?(typeof z.name==="undefined"||z.name===""?z.id:z.name)+"="+B:"&"+y[0]+"="+B;else f||(x[y[0]]=B)});if(x!==false&&f&&t)x=C.formQuery(f);return x},uniqueID:function(){return g++},templ:function(v,f,n,t){return f.replace(/\{([\w_$]+)\}/g,function(x,z){var y=v[z];if(y===i||y===null){if(n===i)return"";switch(n){case 0:return"";case 1:return z;default:return x}}return t?encodeURIComponent(y):y})},isFunction:function(v){return v instanceof Function||typeof v===
"function"},isString:function(v){return v instanceof h||typeof v==="string"},isArray:function(v){return v instanceof Array},isDate:function(v){return v instanceof Date},alert:function(v){alert(v)},tip:function(v){alert(v)},delAttr:function(v,f){var n=v[f];n!==i&&delete v[f];return n},addClass:function(v,f){var n=v.className.replace(f,"").trim();n+=" "+f;v.className=n},addClassIf:function(v,f){if(!this.hasClass(v,f)){var n=v.className.replace(f,"").trim();n+=" "+f;v.className=n}},delClass:function(v,
f){v.className=v.className.replace(f,"").trim()},hasClass:function(v,f){return f&&(" "+v.className+" ").indexOf(" "+f+" ")!=-1},switchClass:function(v,f,n){C.delClass(v,f);C.addClass(v,n)},setClass:function(v,f){v.className=f},display:function(v,f,n){if(f===i)return C.$(v).style.display!="none";n=n!==i?n:"block";C.$(v).style.display=f?n:"none"},disable:function(v,f){if(f===i)return C.$(v).disabled;C.$(v).disabled=f},insertAfter:function(v,f){var n=f.nextSibling;n==null?f.parentNode.insertBefore(v,
f):f.parentNode.insertBefore(v,n);return v},isNumber:function(v){return v instanceof Number||typeof v=="number"},isMail:function(v){return D.test(v)},dateFormat:function(v,f){if(!f)return v.toLocaleString();var n=f.charAt(2);f=f.split(n);for(var t="",x=0,z=f.length;x<z;x++){switch(f[x]){case "mm":var y=v.getMonth()+1;if(y<10)y="0"+y;t+=y;break;case "yy":t+=v.getFullYear();break;case "dd":y=v.getDate();if(y<10)y="0"+y;t+=y;break}if(x!=z-1)t+=n}return t},dateParse:function(v,f){if(!f)return new Date(v);
var n=[0,0,0],t=f.charAt(2);f=f.split(t);v=v.split(t);for(var x=0,z=f.length;x<z;x++)if(f[x]=="mm")n[0]=v[x];else if(f[x]=="dd")n[1]=v[x];else n[2]=v[x];return new Date(n.join(t))},addDate:function(v,f,n){var t=null;switch(v){case "year":t=new Date(parseInt(f.getFullYear())+1,f.getMonth(),f.getDate());break;case "month":t=new Date(f.getFullYear(),f.getMonth()+n,f.getDate());break;case "day":t=new Date(f.getFullYear(),f.getMonth(),f.getDate()+n);break}return t},$C:function(v,f){if(typeof v==="string")return(f||
l).createElement(v);var n=v.tagName;delete v.tagName;f=this.extend((f||l).createElement(n),v);v.tagName=n;return f},$N:function(v){return l.getElementsByName(v)},$T:function(v,f){return(f||l).getElementsByTagName(v)},tagUp:function(v,f){for(;v&&v.tagName!==f;)if((v=v.parentNode)&&v.tagName==="BODY")return null;return v},getObjectLinkedValues:function(v,f,n){var t=[];n=!!n;var x;if(v.hasOwnProperty(f)){x=v[f];if(!n||x)t.push(v[f])}if(v.constructor.prototype.hasOwnProperty(f)){x=v.constructor.prototype[f];
if(!n||x)t.push(x)}for(v=v.superclass;v;){if(v.hasOwnProperty(f)){x=v[f];if(!n||x)t.push(v[f])}v=v.superclass}return t},loadResource:function(v,f,n,t){var x=C.delAttr(v,"src"),z=C.delAttr(v,"href"),y=this.$C(v,t);if(f||n)if(y.readyState)y.onreadystatechange=function(){if(y.readyState=="loaded"||y.readyState=="complete"){y.onreadystatechange=null;n&&setTimeout(function(){y.parentNode.removeChild(y)},1);f&&f.call(y)}};else y.onload=function(){n&&setTimeout(function(){y.parentNode.removeChild(y)},1);
f&&f.call(y)};if(x)y.src=x;if(z)y.href=z;this.$T("head")[0].appendChild(y);return y},loadScript:function(v,f,n){v=this.loadResource({tagName:"script",src:v,type:"text/javascript"},f,true);if(n)v.id=n;return v},loadCSS:function(v,f,n){v=this.loadResource({tagName:"link",rel:"stylesheet",href:v,type:"text/css"},f);if(n)v.id=n;return v},loadStyle:function(v,f){var n=this._styleEl;if(!n){n=this._styleEl=this.$C({tagName:"style",type:"text/css"});this.$T("head")[0].appendChild(n)}n.styleSheet&&(n.styleSheet.cssText+=
v)||n.appendChild((f||l).createTextNode(v));return n},noCache:function(){return"&noCacheReq="+(new Date).getTime()},$A:function(v){return A.call(v)},frameDoc:function(v){return v.contentWindow?v.contentWindow.document:v.contentDocument},frameWin:function(v){return v.contentWindow},getDocumentHeight:function(){return Math.max(l.compatMode!="CSS1Compat"?l.body.scrollHeight:l.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(l.compatMode!="CSS1Compat"?
l.body.scrollWidth:l.documentElement.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return p?b?l.documentElement.clientHeight:l.body.clientHeight:self.innerHeight},getViewportWidth:function(){return p?b?l.documentElement.clientWidth:l.body.clientWidth:self.innerWidth},getViewport:function(){return{width:this.getViewportWidth(),height:this.getViewportHeight()}},ie:p,ie7:u,ie6:q,strict:b,safari:o,gecko:m,opera:k,borderBox:w};window.CC&&C.extend(C,window.CC);window.CC=C;if(!C.Util)C.Util=
{};C.util={};return C})();
(function(){var a=Array.prototype.slice;CC.extendIf(String.prototype,function(){var l=new RegExp("<script[^>]*>([\\S\\s]*?)<\/script>","img"),m=/<script[^>]*>([\S\s]*?)<\/script>/im,g=new RegExp("<style[^>]*>([\\S\\s]*?)</style>","img"),h=/<style[^>]*>([\S\s]*?)<\/style>/im,i=new RegExp("(?:^\\s*)|(?:\\s*$)","g");return{trim:function(){return this.replace(i,"")},escape:function(){return escape(this)},unescape:function(){return unescape(this)},checkSpecialChar:function(){if(this.search(/[%\'\"\/\\]/)!=-1)return false;
return true},truncate:function(b,k){b=b||30;k=k===undefined?"...":k;return this.length>b?this.slice(0,b-k.length)+k:this},stripScript:function(b){if(!b)return this.replace(l,"");return this.replace(l,function(k){b(k);return""})},stripStyle:function(b){if(!b)return this.replace(g,"");return this.replace(g,function(k){b(k);return""})},innerScript:function(){this.match(m);return RegExp.$1},innerStyle:function(){this.match(h);return RegExp.$1},execScript:function(){return this.replace(l,function(b){b.match(m);
window.execScript?execScript(RegExp.$1):window.eval(RegExp.$1);return""})},execStyle:function(){return this.replace(g,function(b){b.match(h);CC.loadStyle(RegExp.$1);return""})},camelize:function(){var b=this.split("-"),k=b.length;if(k==1)return b[0];for(var o=this.charAt(0)=="-"?b[0].charAt(0).toUpperCase()+b[0].substring(1):b[0],p=1;p<k;p++)o+=b[p].charAt(0).toUpperCase()+b[p].substring(1);return o}}}());CC.extendIf(Function.prototype,{bind:function(){var l=this,m=a.call(arguments,1),g=arguments[0];
return function(){return l.apply(g,m)}},bindAsListener:function(l){var m=this;return function(g){return m.call(l,g||window.event)}},timeout:function(l,m){if(m)return setInterval(this,l||0);return setTimeout(this,l||0)}});CC.extendIf(Array.prototype,{remove:function(l){if(typeof l==="number"){if(l<0||l>=this.length)throw"Index Of Bounds:"+this.length+","+l;this.splice(l,1);return this.length}if(this.length>0&&this[this.length-1]===l)this.pop();else{l=this.indexOf(l);l!=-1&&this.splice(l,1)}return this.length},
indexOf:function(l){for(var m=0,g=this.length;m<g;m++)if(this[m]===l)return m;return-1},insert:function(l,m){return this.splice(l,0,m)},include:function(l){return this.indexOf(l)!=-1},clear:function(){this.splice(0,this.length)}})})();
(function(){var a=window.CC;a.Cache={MAX_ITEM_SIZE:5,callbacks:[],register:function(l,m,g){if(this[l])this[l][1]=m;else this[l]=[null,m];g!==undefined&&this.sizeFor(l,g)},get:function(l){l=this[l];if(l===undefined)return null;var m=l[1];l=l[0];if(l===null)return m();if(l.length>1)return l.pop();if(m)return m();return null},put:function(l,m){var g=this[l];if(g){(l=g[0])||(g[0]=l=[this.MAX_ITEM_SIZE]);l.length-1>=l[0]||l.push(m)}else this[l]=[[this.MAX_ITEM_SIZE,m]]},remove:function(l){this[l]&&delete this[l]},
sizeFor:function(l,m){var g=this[l];g||(this[l]=g=[[]]);g[0]||(g[0]=[]);g[0][0]=m}};a.Cache.register("div",function(){return a.$C("DIV")})})();
(function(){var a={};CC.util.TypeConverter={reg:function(l,m){a[l]=m},get:function(l){var m=a[l];if(!m){m=this.create.apply(this,arguments);if(!m)throw"\u672a\u8bc6\u522b\u7684\u6570\u636e\u7c7b\u578b:"+l;a[l]=m}return m},create:function(l){var m=/[\$,%]/g,g;switch(l){case "":case undefined:g=function(h){return h===null||h===undefined?h:h.toString()};break;case "string":g=function(h){return h===undefined||h===null?"":h.toString()};break;case "int":g=function(h){return h!==undefined&&h!==null&&h!==
""?parseInt(h.toString().replace(m,""),10):""};break;case "float":g=function(h){return h!==undefined&&h!==null&&h!==""?parseFloat(h.toString().replace(m,""),10):""};break;case "bool":g=function(h){return h===true||h==="true"||h==1};break;case "date":g=function(h,i){if(!h)return"";if(CC.isDate(h))return h;if(i){if(i==="timestamp")return new Date(h*1E3);if(i==="time")return new Date(parseInt(h,10));return Date.parseDate(h,i)}return(h=Date.parse(h))?new Date(h):null};break}return g}}})();
(function(){var a={"1c":["width","95%"],"2c":["width","45%"],"3c":["width","30%"],"4c":["width","20%"],"5c":["width","10%"],c:function(h,i){h.view.style.width=i+"%"},w:function(h,i){h.view.style.width=i},h:function(h,i){h.view.style.height=i},d:function(h,i){h.view.style.display=i},db:["display","block"],dib:["display","inline-block"],dh:["display","hidden"],np:["padding","0px"],nb:["border","0px"],fl:["float","left"],fr:["float","right"],cb:["clear","both"],tl:["textAlign","left"],tr:["textAlign",
"right"],tc:["textAlign","center"],p:function(h,i){h.view.style.padding=i},pl:function(h,i){h.view.style.paddingLeft=i},pr:function(h,i){h.view.style.paddingRight=i},pt:function(h,i){h.view.style.paddingTop=i},pb:function(h,i){h.view.style.paddingBottom=i},bd:function(h,i){h.view.style.border=i},bdl:function(h,i){h.view.style.borderLeft=i},bdr:function(h,i){h.view.style.borderRight=i},bdt:function(h,i){h.view.style.borderTop=i},bdb:function(h,i){h.view.style.borderBottom=i},z:function(h,i){h.view.style.zIndex=
i},lnl:["borderLeft","1px solid #CCC"],lnt:["borderTop","1px solid #CCC"],lnb:["borderBottom","1px solid #CCC"],lnr:["borderRight","1px solid #CCC"],lnx:["border","1px solid #CCC"],m:function(h,i){h.view.style.margin=i},ml:function(h,i){h.view.style.marginLeft=i},mr:function(h,i){h.view.style.marginRight=i},mt:function(h,i){h.view.style.marginTop=i},mb:function(h,i){h.view.style.marginBottom=i},pa:["position","absolute"],pr:["position","relative"],b:function(h,i){h.view.style.bottom=i},l:function(h,
i){h.view.style.left=i},r:function(h,i){h.view.style.right=i},t:function(h,i){h.view.style.top=i},oh:["overflow","hidden"],oa:["overflow","auto"]},l=/\s+/,m=CC.borderBox,g;CC.util.CssParser=function(){};CC.extendIf(CC.util.CssParser.prototype,{def:function(h,i){var b=this.rules;if(!b)b=this.rules={};if(typeof h==="object")for(var k in h)b[k]=h[k];else b[h]=i;return this},parse:function(h,i){var b,k;i=i.split(l);var o,p,u=this.rules,q,w;o=0;for(p=i.length;o<p;o++){k=i[o];q=k.indexOf(":");if(q>0){w=
k.substring(q+1);w=w.replace(/,/g," ");k=k.substr(0,q)}else w=false;if(k.charAt(0)==="^"){k=k.substring(1);if(k.charAt(0)==="$"){if(!m)continue;k=k.substring(1)}k=u&&u[k]||a[k]||k;b||(b=[]);b.push(k);b.push(w)}else if(k.charAt(0)==="$"){if(m){k=k.substring(1);(k=u&&u[k]||a[k])&&this.applyRule(h,k,w)}}else{k=u&&u[k]||a[k]||k;this.applyRule(h,k,w)}}if(b&&b.length>0&&h.children){o=0;i=h.children;for(p=i.length;o<p;o++){s=i[o];h=0;for(u=b.length;h<u;h+=2)this.applyRule(s,b[h],b[h+1])}}},applyRule:function(h,
i,b){if(CC.isArray(i))h.setStyle(i[0],b||i[1]);else if(typeof i==="object")for(var k in i)h.setStyle(k,i[k]);else if(typeof i==="string")if(i.charAt(0)!=="."){if(i.indexOf(" ")<0)throw"CC.util.CssParser: Unsupported instruction '"+i+"'";this.parse(h,i)}else h.addClass(i.substring(1));else typeof i==="function"&&i(h,b,this)}});CC.util.CssParser.getParser=function(){g||(g=new CC.util.CssParser);return g}})();
(function(){var a=CC.Eventable=function(l){l&&CC.extend(this,l);CC.extend(this,a.prototype)};a.prototype.fire=function(l){__debug&&console.log("\u53d1\u9001:%s,%o,\u6e90:%o",l,arguments,this);if(this.events){var m=this.events[l];if(m){var g=CC.$A(arguments),h=g.length,i,b,k;g.shift();b=0;for(k=m.length;b<k;b++){i=m[b];if(i.args)g[h]=i.args;i=i.ds?i.cb.apply(i.ds,g):i.cb.apply(this,g);if(i===false)break}}}if(this.subscribers){b=0;for(k=this.subscribers.length;b<k;b++){m=this.subscribers[b];m.fireSubscribe.apply(m,
arguments)}}return i};a.prototype.on=function(l,m,g,h){if(!l||!m){__debug&&console.trace();throw"eid or callback can not be null";}if(!this.events)this.events={};var i=this.events[l];i||(i=this.events[l]=[]);i[i.length]={cb:m,ds:g,args:h};return this};a.prototype.un=function(l,m){if(!this.events)return this;if(m===undefined){delete this.events[l];return this}if(l=this.events[l])for(var g=0;g<l.length;g++)if(l[g].cb==m){l.remove(g);break}return this};a.prototype.fireOnce=function(l){var m=this.fire.apply(this,
arguments);this.un(l);return m};a.prototype.to=function(l){if(!this.subscribers)this.subscribers=[];if(!(this.subscribers.indexOf(l)>0)){this.subscribers.push(l);return this}};a.prototype.fireSubscribe=a.prototype.fire})();
(function(){var a=CC.Event={},l=window.document,m=CC.opera,g=CC.chrome,h=CC.ie;CC.extend(a,{BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,readyList:[],contentReady:false,noUp:function(i){a.stop(i||window.event);return false},noDef:function(i){a.preventDefault(i||window.event)},element:function(i){return i.srcElement||i.target},pageX:function(i){if(i.pageX==null&&i.clientX!=null){var b=l.documentElement,k=l.body;return i.clientX+(b&&b.scrollLeft||k&&k.scrollLeft||0)-(b.clientLeft||
0)}return i.pageX},pageY:function(i){if(i.pageY==null&&i.clientY!=null){var b=l.documentElement,k=l.body;return i.clientY+(b&&b.scrollTop||k&&k.scrollTop||0)-(b.clientTop||0)}return i.pageY},pageXY:function(i){if(i.pageX==null&&i.clientX!=null){var b=l.documentElement,k=l.body;return[i.clientX+(b&&b.scrollLeft||k&&k.scrollLeft||0)-(b.clientLeft||0),i.clientY+(b&&b.scrollTop||k&&k.scrollTop||0)-(b.clientTop||0)]}return[i.pageX,i.pageY]},which:function(i){if(!i.which&&(i.charCode||i.charCode===0?i.charCode:
i.keyCode))return i.charCode||i.keyCode},isLeftClick:function(i){return i.which&&i.which===1||i.button&&i.button===1},isEnterKey:function(i){return i.keyCode===13},isEscKey:function(i){return i.keyCode===27},getWheel:function(i){if(i.wheelDelta){delta=i.wheelDelta/120;if(m)delta=-delta}else if(i.detail)delta=-i.detail/3;return delta},stop:function(i){i.preventDefault&&i.preventDefault();i.stopPropagation&&i.stopPropagation();if(CC.ie){i.returnValue=false;i.cancelBubble=true}},preventDefault:function(i){i.preventDefault&&
i.preventDefault();i.returnValue=false},stopPropagation:function(i){i.stopPropagation&&i.stopPropagation();i.cancelBubble=true},toggle:function(i,b,k,o,p,u,q){i=CC.$(i);b=CC.$(b);var w=CC.display(b),D=w?o:k;p=w?p:u;CC.delClass(i,w?k:o);CC.addClass(i,D);CC.display(b,!w);if(q)i.innerHTML=p;i.title=p},observers:false,_observeAndCache:function(i,b,k,o){if(!this.observers)this.observers=[];if(i.addEventListener){this.observers.push([i,b,k,o]);i.addEventListener(b,k,o)}else if(i.attachEvent){this.observers.push([i,
b,k,o]);i.attachEvent("on"+b,k)}},unloadCache:function(){if(this.observers){for(var i=0;i<this.observers.length;i++){this.un.apply(this,this.observers[i]);this.observers[i][0]=null}this.observers=false}},on:function(i,b,k,o){o=o||false;if(b=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||i.attachEvent))b="keydown";this._observeAndCache(i,b,k,o)},un:function(i,b,k,o){i=CC.$(i);o=o||false;if(b=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||i.detachEvent))b=
"keydown";if(i.removeEventListener)i.removeEventListener(b,k,o);else i.detachEvent&&i.detachEvent("on"+b,k)},setDragable:function(i,b,k,o,p,u){if(k){b||(b=i);var q=function(D){var A=D||window.event;if(a.isLeftClick(A)){if(!b.__ondraged){p&&p(A,b);b.__ondraged=true}if(o)if(!o(A,b))return false;D=A.clientX;A=A.clientY;var F=D-b._x,C=A-b._y;b._x=D;b._y=A;b.style.left=b.offsetLeft+F;b.style.top=b.offsetTop+C}else w(A)},w=function(D){if(b.__ondraged){if(u)u(D||window.event,b);b.__ondraged=false}a.un(l,
"mousemove",q);a.un(l,"mouseup",arguments.callee);a.un(l,"selectstart",a.noUp)};i.onmousedown=function(D){if(!b.unmoveable){D=D||window.event;var A=D.clientY;b._x=D.clientX;b._y=A;a.on(l,"mousemove",q);a.on(l,"selectstart",a.noUp);a.on(l,"mouseup",w)}}}else i.onmousedown=i.onmouseup=null},ready:function(i){this.readyList.push(i)},_onContentLoad:function(){if(!a.contentReady){a.contentReady=true;a.defUIReady&&a.defUIReady();for(var i=0;i<a.readyList.length;i++)a.readyList[i].call(window)}}});CC.ready=
function(){a.ready.apply(a,arguments)};l.addEventListener&&!m&&!g&&l.addEventListener("DOMContentLoaded",a._onContentLoad,false);h&&window==top&&function(){if(!a.contentReady){try{l.documentElement.doScroll("left")}catch(i){setTimeout(arguments.callee,0);return}a._onContentLoad()}}();m&&l.addEventListener("DOMContentLoaded",function(){if(!a.contentReady){for(var i=0;i<l.styleSheets.length;i++)if(l.styleSheets[i].disabled){setTimeout(arguments.callee,0);return}a._onContentLoad()}},false);a.on(window,
"load",a._onContentLoad)})();if(!window.console)window.console={};if(!window.tester)window.tester=window.fireunit||{};CC.extendIf(console,{debug:fGo,info:fGo,trace:fGo,log:fGo,warn:fGo,error:fGo,assert:fGo,dir:fGo,count:fGo,group:fGo,groupEnd:fGo,time:fGo,timeEnd:fGo});
CC.extendIf(tester,{ok:function(a,l){if(typeof a==="function")a=a();if(typeof l==="function")l=l();if(a!=l){alert("assert failed in testing "+a+"=="+l);console.group("\u65ad\u8a00\u5931\u8d25:",a,l);console.error(a,l);console.trace();console.groupEnd()}},testDone:fGo});
(function(){var a=window.CC,l=a.Ajax=a.create();l.connect=function(m){m=new l(m);m.connect();return m};l.prototype={method:"GET",url:null,asynchronous:true,timeout:1E4,disabledComp:undefined,contentType:"application/x-www-form-urlencoded",msg:"\u6570\u636e\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u5019...",cache:true,success:function(m){m.invokeHtml()},displayPanel:null,initialize:function(m){a.extend(this,m);this.method=this.method.toUpperCase()},setOption:function(m){a.extend(this,m)},setMsg:fGo,_onTimeout:function(){if(!(this.xmlReq.readyState>=
4)){__debug&&console.log("ajax request timeout for "+this.url);this.abort();this._fire("timeout",this);this._close()}},_close:function(){this.timeout&&clearTimeout(this._tid);if(this.onfinal)this.caller?this.onfinal.call(this.caller,this):this.onfinal.call(this,this);this._fire("final",this);this.disabledComp&&a.disable(this.disabledComp,false);this.json!==undefined&&delete this.json;this.xmlDoc!==undefined&&delete this.xmlDoc;this.text!==undefined&&delete this.text;this.params=this.xmlReq=this.disabledComp=
null;this.busy=0},abort:function(){if(this.xmlReq!==null){this.xmlReq.abort();this.aborted=true;this._close()}},_req:function(){if(!this.xmlReq)this.xmlReq=a.ajaxRequest()},_setHeaders:function(){this._req();if(this.method.toLowerCase()=="post")this.xmlReq.setRequestHeader("Content-type",this.contentType+(this.encoding?"; charset="+this.encoding:""));var m=this.xmlReq;this.headers&&a.each(this.headers,function(g,h){m.setRequestHeader(g,h)})},open:function(){this._req();this.busy=1;this._fire("open",
this);if(this.timeout)this._tid=setTimeout(this._onTimeout.bind(this),this.timeout);this.disabledComp&&a.disable(this.disabledComp,true);var m=this.params,g=this.cache,h=this.url;if(m||g){var i=h.indexOf("?")>0;if(g)h=i?h+"&__uid="+a.uniqueID():h+"?__uid="+a.uniqueID();if(m)if(this.method==="GET"){if(!i&&!g)h+="?";h=h+"&"+(typeof m==="string"?m:a.queryString(m))}else this.data=typeof m==="string"?m:a.queryString(a.extend(this.data,m))}this.xmlReq.open(this.method,h,this.asynchronous)},send:function(m){this._fire("send",
this);this._setHeaders();this.xmlReq.onreadystatechange=this._onReadyStateChange.bind(this);this.setMsg(this.msg);"POST"===this.method?this.xmlReq.send(m||this.data):this.xmlReq.send()},connect:function(m){if(this.busy)try{this.abort()}catch(g){__debug&&console.log(g)}this.open();this.send(m)},setRequestHeader:function(m,g){this._req();try{this.xmlReq.setRequestHeader(m,g)}catch(h){this._close();console.log(h)}},getResponseHeader:function(m){return this.xmlReq.getResponseHeader(m)},_fire:function(m){this.status=
m;if(this.statuschange)this.statuschange.call(this.caller||this,m,this);l.fire("statuschange",m,this);this.fire("statuschange",m,this);if(l.fire.apply(l,arguments)!==false)if(this.fire.apply(this,arguments)!==false)return;return false},_onReadyStateChange:function(){var m=this.xmlReq;if(m.readyState===4)if(!this.aborted)if(this._fire("load",this)!==false){var g=this.success,h=this.failure;try{if(m.status==200){if(this._fire("success",this)===false)return false;if(g)this.caller?g.call(this.caller,
this):g.call(this,this)}else{if(this._fire("failure",this)===false)return false;if(h)this.caller?h.call(this.caller,this):h.call(this,this)}}catch(i){__debug&&console.error(i);this._close();throw i;}this._close()}},getText:function(){if(this.text)return this.text;this._fire("text",this.text=this.xmlReq.responseText,this);return this.text},getXmlDoc:function(){if(this.xmlDoc)return this.xmlDoc;this._fire("xmlDoc",this.xmlDoc=this.xmlReq.responseXML.documentElement,this);return this.xmlDoc},getJson:function(){if(this.json)return this.json;
var m;try{this.json=m=eval("("+this.getText()+");")}catch(g){__debug&&console.log("Internal server error : a request responsed with wrong json format:\n"+g+"\n"+this.getText());throw g;}this._fire("json",m,this);return this.json},invokeScript:function(){return eval(this.getText())},invokeHtml:function(){var m=[],g=[],h=this.getText().stripScript(function(i){m[m.length]=i});g=[];h=h.stripStyle(function(i){g[g.length]=i.innerStyle()});g.join("").execStyle();if(this.displayPanel)a.$(this.displayPanel).innerHTML=
h;m.join("").execScript();h=m=g=null}};a.Eventable.call(l.prototype);a.Eventable.call(l)})();
(function(a){var l=a.Eventable,m={},g=a.Cache,h=a.Event,i=a.Base=function(f){if(f!==A)this.view=a.$(f)};i.find=function(f){for(var n in m)if(m[n].id===f)return m[n];return null};i.findByCid=i.byCid=function(f){return m[f]};i.byDom=function(f,n){for(var t,x=n&&n.view||k;f!==x;){if(f.cicyId)if((t=i.byCid(f.cicyId))&&!t.delegated)if(n){if(t.pCt===n)return t}else return t;f=f.parentNode}return null};var b=a.Tpl;if(!b)b=a.Tpl={};a.extend(b,{BLANK_IMG:window.BLANK_IMG||"http://www.bgscript.com/bgjs/default/s.gif",
$:function(f,n,t,x){var z=g.get(f);if(!z){n||(n=f);z=this[n];if(typeof z=="undefined")return null;n=g.get("div");n.innerHTML=t?t(z,x):z;z=n.removeChild(n.firstChild);g.put("div",n);g.put(f,z)}return z.cloneNode(true)},$$:function(f){return a.$$(this.$(f))},remove:function(f){g.remove(f);delete this[f]},forNode:function(f,n,t){if(n)f=a.templ(n,f,t);n=g.get("div");n.innerHTML=f;f=n.removeChild(n.firstChild);g.put("div",n);return f},def:function(f,n){if(arguments.length>=3){n=a.$A(arguments);n.shift();
n=n.join("")}this[f]=n;return this}});h.on(window,"unload",function(){var f=[];try{for(var n in m)f[f.length]=m[n];n=0;for(var t=f.length;n<t;n++)f[n].cacheId&&f[n].destory()}catch(x){__debug&&console.log(x)}finally{m=null}});var k=window.document,o=k.defaultView,p={},u=/(-[a-z])/gi,q=function(f,n){return n.charAt(1).toUpperCase()},w=["vid","hid","hid","hid"],D=["vvi","dbl","dbi",""],A,F=window.Math,C=window.parseInt,v=a.util.CssParser.getParser();a.extend(i.prototype,{type:"CC.Base",view:false,height:false,
width:false,left:false,top:false,minW:0,minH:0,maxH:F.MAX,maxW:F.MAX,clickDisabled:false,pCt:false,eventable:false,initialize:function(f){f&&a.extend(this,f);this.eventable&&l.apply(this);this.initComponent();this.autoRender&&this.render()},createView:function(){if(this.view){if(typeof this.view==="string")this.view=a.$(this.view)}else{if(this.hasOwnProperty("template")||this.constructor.prototype.hasOwnProperty("template")||this.superclass&&this.superclass.hasOwnProperty("template")){this.view=this.template.charAt(0)===
"<"?b.forNode(this.template):b.$(this.template);delete this.template}else this.view=b.$(this.type);if(!this.view)this.view=this.createView0(this.superclass)}if(!this.view)this.view=a.$C("DIV")},createView0:function(f){if(!f)return null;var n;if(n=f.hasOwnProperty("template")?b.$(f.template):b.$(f.type))return n;return arguments.callee(f.superclass)},cacheId:A,__flied:A,strHtml:false,innerCS:false,cs:false,id:A,title:A,titleNode:false,hoverCS:false,icon:false,css:false,unselectable:false,disabled:false,
tip:false,qtip:false,shadow:false,initComponent:function(){if(this.__flied===A){var f=this.cacheId="c"+a.uniqueID();m[f]=this;this.createView()}if(this.strHtml){this.html(this.strHtml);delete this.strHtml}this.innerCS&&this.addClass(this.innerCS);this.cs&&this.addClass(this.cs);if(this.id&&!this.view.id)this.view.id=this.id;if(this.id===A)this.id="comp"+a.uniqueID();this.view.cicyId=f;if(this.title)if(this.titleNode){if(!this.titleNode.tagName)this.titleNode=this.dom(this.titleNode)}else this.titleNode=
this.dom("_tle");this.icon&&this.setIcon(this.icon);this.clickCS&&this.bindClickStyle(this.clickCS);this.hoverCS&&this.bindHoverStyle(this.hoverCS);this.css&&this.cset(this.css);this.unselectable&&this.noselect();this.title&&this.setTitle(this.title);this.top!==false&&this.setTop(this.top);this.left!==false&&this.setLeft(this.left);if(this.disabled){this.disabled=1;this.disable(true)}if(this.tip)this.setTip(this.tip===true?this.title:this.tip);this.qtip&&a.Util.qtip&&a.Util.qtip(this);if(this.shadow){this.shadow=
a.ui.instance(this.shadow===true?"shadow":this.shadow);this.follow(this.shadow)}},__delegations:false,delegated:false,follow:function(f){var n=this.__delegations;if(!n)n=this.__delegations=[];f.delegated=true;n.push(f);if(!f.pCt)f.pCt=this;this.rendered&&!f.rendered&&f.render();return this},observes:false,destory:function(){this.pCt&&!this.delegated?this.pCt.remove(this):this.del();if(this.cacheId!==A){delete m[this.cacheId];var f=this.observes,n,t,x;if(f){var z;n=0;for(t=f.length;n<t;n++){x=f[n];
z=x[3]||this.view;if(z.removeEventListener)z.removeEventListener(x[0],x[2],true);else z.detachEvent&&z.detachEvent("on"+x[0],x[2])}this.observes=null}if(f=this.__delegations){n=0;for(t=f.length;n<t;++n){f[n].pCt=null;f[n].cacheId&&f[n].destory()}this.__delegations=null}this.view.cicyId=null;delete this.view;delete this.cacheId}},hidden:A,showTo:false,onRender:function(){if(this.hidden){this.hidden=A;this.display(false)}this.width!==false&&this.setWidth(this.width,true);this.height!==false&&this.setHeight(this.height,
true);var f=this.showTo;if(f){f=a.$(f);delete this.showTo}if(f){if(f.view)f=f.view;f.appendChild(this.view)}if(f=this.__delegations)for(var n=0,t=f.length;n<t;n++)f[n].rendered||f[n].render();if(this.shadow){this.getZ()||this.setZ(1001);this.shadow.attach(this)}},rendered:false,render:function(){if(this.rendered||this.fireOnce("render")===false)return false;this.rendered=true;this.onRender();this.fireOnce("rendered");if(!this.hidden&&this.shadow){var f=this.shadow;(function(){f.reanchor().display(true)}).timeout(0)}},
fire:fGo,fireOnce:fGo,un:fGo,hide:function(){return this.display(false)},show:function(){return this.display(true)},fly:function(f){f=this.dom(f);this.__flied!==A&&this.__flied>0&&this.unfly();if(f)return a.fly(f);return null},unfly:function(){if(this.__flied!==A){this.view=null;this.blockMode=this.displayMode=1;this.width=this.top=this.left=this.height=false;this.__flied-=1;this.__flied===0&&g.put("flycomp",this)}},addClass:function(f){var n=this.view,t=n.className.replace(f,"").trim();t+=" "+f;
n.className=t;return this},checkClass:function(f,n){if(f){var t=this.hasClass(f);if(n)t||this.addClass(f);else t&&this.delClass(f)}},addClassIf:function(f){if(this.hasClass(f))return this;var n=this.view,t=n.className.replace(f,"").trim();t+=" "+f;n.className=t;return this},delClass:function(f){var n=this.view;n.className=n.className.replace(f,"").trim();return this},hasClass:function(f){return f&&(" "+this.view.className+" ").indexOf(" "+f+" ")!=-1},switchClass:function(f,n){this.delClass(f);this.addClass(n);
return this},setClass:function(f){this.view.className=f;return this},$T:function(f){return this.view.getElementsByTagName(f)},dom:function(f){return a.$(f,this.view)},noUp:function(f,n){return this.domEvent(f||"click",h.noUp,true,null,n)},clear:a.ie?function(){for(var f=g.get("div"),n=this.view;n.firstChild;)f.appendChild(n.firstChild);f.innerHTML="";g.put("div",f);return this}:function(){for(var f=this.view;f.firstChild;)f.removeChild(f.firstChild);return this},del:function(){this.view.parentNode&&
this.view.parentNode.removeChild(this.view)},disabledCS:"g-disabled",displayMode:1,blockMode:1,display:function(f){if(f===A)return!this.hasClass(w[this.displayMode]);if(this.hidden!==!f){this.hidden=!f;f?this.onShow():this.onHide()}return this},onShow:function(){this.delClass(w[this.displayMode]);if(!this.displayMode||this.blockMode!==2)this.addClassIf(D[this.displayMode]);if(this.shadow){var f=this.shadow;(function(){f.reanchor().display(true)}).timeout(0)}},onHide:function(){if(!this.hasClass(w[this.displayMode])){if(!this.displayMode||
this.blockMode!==2)this.hasClass(D[this.displayMode])&&this.delClass(D[this.displayMode]);this.addClass(w[this.displayMode])}this.shadow&&this.shadow.display(false);this.contexted&&this.releaseContext()},setBlockMode:function(f){this.blockMode=f;return this},setDisplayMode:function(f){this.displayMode=f;if(f===0)this.blockMode=0;return this},disable:function(f){if(arguments.length===0)return this.disabled;f=!!f;if(this.disabled!==f){var n=this.disableNode||this.view;this.disabled=this.dom(n).disabled=
f;this.disabledCS&&this.checkClass(this.disabledCS,f);f&&this.hoverCS&&this.hasClass(this.hoverCS)&&this.delClass(this.hoverCS);if(f&&n.tabIndex>=0){this._tmpTabIdx=n.tabIndex||0;n.tabIndex=-1}else if(this._tmpTabIdx){n.tabIndex=this._tmpTabIdx;delete this._tmpTabIdx}}return this},append:function(f){this.view.appendChild(f.view||f);return this},html:function(f,n,t){if(n){var x=[],z=[];f=f.stripScript(function(y){x[x.length]=y});z=[];f=f.stripStyle(function(y){z[z.length]=y.innerStyle()});z.join("").execStyle();
this.view.innerHTML=f;x.join("").execScript();t&&t.call(this);f=x=z=null;return this}(this.ct||this.view).innerHTML=f;return this},appendTo:function(f){f.type?f.append(this.view):a.$(f).appendChild(this.view);return this},insertAfter:function(f){var n=a.fly(f);f=n.view;var t=this.view,x=t.nextSibling;x?t.parentNode.insertBefore(f,x):t.parentNode.appendChild(f);n.unfly();return this},insertBefore:function(f){f=a.$$(f).view;this.view.parentNode.insertBefore(f,this.view);return this},setZ:function(f){this.fastStyleSet("zIndex",
f);this.shadow&&this.shadow.setZ(f-1);return this},getZ:function(){return this.fastStyle("zIndex")|0},style:function(f,n){if(n===A)return this.getStyle(f);return this.setStyle(f,n)},getOpacity:function(){return this.getStyle("opacity")},setOpacity:function(f){this.view.style.opacity=f==1?"":f<1.0E-5?0:f;return this},setStyle:function(f,n){if(f==="opacity")this.setOpacity(n);else{var t=this.view.style;t[f==="float"||f==="cssFloat"?t.styleFloat===A?"cssFloat":"styleFloat":f.camelize()]=n}return this},
getStyle:function(){return o&&o.getComputedStyle?function(f){var n=this.view,t;if(f=="float")f="cssFloat";if(t=n.style[f])return t;if(n=o.getComputedStyle(n,"")){if(!(t=p[f]))t=p[f]=f.replace(u,q);return n[t]}return null}:function(f){var n=this.view,t;if(f=="opacity"){if(typeof n.style.filter=="string")if(t=n.style.filter.match(/alpha\(opacity=(.*)\)/i)){t=parseFloat(t[1]);if(!isNaN(t))return t?t/100:0}return 1}else if(f=="float")f="styleFloat";if(!(t=p[f]))t=p[f]=f.replace(u,q);if(f=n.style[t])return f;
if(n=n.currentStyle)return n[t];return null}}(),fastStyleSet:function(f,n){this.view.style[f]=n;return this},fastStyle:function(){return o&&o.getComputedStyle?function(f){var n=this.view,t;if(t=n.style[f])return t;if(n=o.getComputedStyle(n,""))return n[f];return null}:function(f){var n=this.view,t;if(t=n.style[f])return t;if(n=n.currentStyle)return n[f];return null}}(),setIcon:function(f){var n=this.fly(this.iconNode||"_ico");this.iconCS&&this.addClassIf(this.iconCS);if(n){typeof f==="string"?n.addClass(f):
n.display(f);n.unfly()}return this},setTip:function(f){if(this.view&&!this.qtip)this.view.title=f;this.tip=f;return this},getTitle:function(){return this.title},brush:false,setTitle:function(f){this.title=f;if(this.titleNode){if(!this.titleNode.tagName)this.titleNode=this.dom(this.titleNode)}else this.titleNode=this.dom("_tle");if(this.titleNode)this.titleNode.innerHTML=this.brush?this.brush(f):f;if(this.tip&&this.view&&!this.qtip)this.view.title=f;if(this.qtip===true)this.qtip=f;return this},setWidth:function(f){this.setSize(f,
false);return this},getWidth:function(f){if(f&&this.width!==false)return this.width;return this.getSize().width},setHeight:function(f){this.setSize(false,f);return this},getHeight:function(f){if(f&&this.height!==false)return this.height;return this.getSize().height},getOuterW:function(f){var n=this.outerW;if(!f||n===A)this.outerW=n=(C(this.fastStyle("borderLeftWidth"),10)||0)+(C(this.fastStyle("borderRightWidth"),10)||0)+(C(this.fastStyle("paddingLeft"),10)||0)+(C(this.fastStyle("paddingRight"),10)||
0);return n},getOuterH:function(f){var n=this.outerH;if(!f||n===A)this.outerH=n=(C(this.fastStyle("borderTopWidth"),10)||0)+(C(this.fastStyle("borderBottomWidth"),10)||0)+(C(this.fastStyle("paddingTop"),10)||0)+(C(this.fastStyle("paddingBottom"),10)||0);return n},getContentSize:function(f){var n=this.getSize(f);return[n.width-this.getOuterW(f),n.height-this.getOuterH(f)]},setSize:function(f,n){if(f.width!==A){n=f.width;if(n!==false){if(n<this.minW)n=this.minW;if(n>this.maxW)n=this.maxW;this.fastStyleSet("width",
a.borderBox?n+"px":F.max(n-this.getOuterW(),0)+"px");this.width=n}n=f.height;if(n!==false){if(n<this.minH)n=this.minH;if(n>this.maxH)n=this.maxH;if(n<0)f.height=n=0;this.fastStyleSet("height",a.borderBox?n+"px":F.max(n-this.getOuterH(),0)+"px");this.height=n}return this}if(f!==false){if(f<this.minW)f=this.minW;if(f>this.maxW)f=this.maxW;this.fastStyleSet("width",a.borderBox?f+"px":F.max(f-this.getOuterW(),0)+"px");this.width=f}if(n!==false){if(n<this.minH)n=this.minH;if(n>this.maxH)n=this.maxH;this.fastStyleSet("height",
a.borderBox?n+"px":F.max(n-this.getOuterH(),0)+"px");this.height=n}return this},setXY:function(f,n){if(a.isArray(f))if(f[0]!==false||f[1]!==false){if(f[0]!==false){this.fastStyleSet("left",f[0]+"px");this.left=f[0]}if(f[1]!==false){this.fastStyleSet("top",f[1]+"px");this.top=f[1]}return this}if(f!==false||n!==false){if(f!==false){this.fastStyleSet("left",f+"px");this.left=f}if(n!==false){this.fastStyleSet("top",n+"px");this.top=n}}return this},setTop:function(f){this.setXY(false,f);return this},getTop:function(f){if(f&&
this.top!==false)return this.top;return this.top=C(this.fastStyle("top"),10)||this.view.offsetTop},setLeft:function(f){this.setXY(f,false);return this},getLeft:function(f){if(f&&this.left!==false)return this.left;return this.left=C(this.fastStyle("left"),10)||this.view.offsetLeft},xy:function(f){return[this.getLeft(f),this.getTop(f)]},absoluteXY:function(){var f,n,t;n=k.body||k.documentElement;t=this.view;if(t==n||!this.display())return[0,0];if(t.getBoundingClientRect){n=t.getBoundingClientRect();
f=a.fly(k);t=f.getScroll();f.unfly();return[n.left+t.left,n.top+t.top]}var x=0,z=0;f=t;for(var y=this.fastStyle("position")=="absolute",B=a.fly(t);f;){x+=f.offsetLeft;z+=f.offsetTop;B.view=f;if(!y&&B.fastStyle("position")=="absolute")y=true;if(a.gecko){var E=C(B.fastStyle("borderTopWidth"),10)||0,G=C(B.fastStyle("borderLeftWidth"),10)||0;x+=G;z+=E;if(f!=t&&B.fastStyle("overflow")!="visible"){x+=G;z+=E}}f=f.offsetParent}if(a.safari&&y){x-=n.offsetLeft;z-=n.offsetTop}if(a.gecko&&!y){B.view=n;x+=C(B.fastStyle("borderLeftWidth"),
10)||0;z+=C(B.fastStyle("borderTopWidth"),10)||0}for(f=t.parentNode;f&&f!=n;){B.view=f;if(!a.opera||f.tagName!="TR"&&B.fastStyle("display")!="inline"){x-=f.scrollLeft;z-=f.scrollTop}f=f.parentNode}B.unfly();return[x,z]},absoluteX:function(){return this.absoluteXY()[0]},absoluteY:function(){return this.absoluteXY()[1]},getSize:function(f){if(f&&this.width!==false&&this.height!==false)return{width:this.width,height:this.height};var n=this.view;f=F.max(n.offsetWidth,n.clientWidth);if(!f){f=C(this.fastStyle("width"),
10)||0;a.borderBox||(f+=this.getOuterW())}n=F.max(n.offsetHeight,n.clientHeight);if(!n){n=C(this.fastStyle("height"),10)||0;a.borderBox||(n+=this.getOuterH())}return{width:f,height:n}},setBounds:function(f,n,t,x){this.setXY(f,n);return this.setSize(t,x)},anchorPos:function(f,n,t,x,z,y){if(f.view){var B=f.absoluteXY(),E=f.getSize(true);f=[B[0],B[1],E.width,E.height]}E=this.getSize(true);B=E.width;E=E.height;var G=f[0],H=f[1],J=f[2];f=f[3];var I;I=n.charAt(0)==="l"?G-B:G+J;n=n.charAt(1)==="t"?H-E:H+
f;if(t)if(t.charAt(0)==="h")I=t.charAt(1)==="l"?I-B:I+B;else n=t.charAt(1)==="u"?n-E:n+E;if(x){I+=x[0];n+=x[1]}if(z){x=a.getViewport();t=x.height;x=x.width;if(I<0){I=0;if(H+f>n&&H<n+E)n=H-E}if(I+B>x)I=H+f>n&&H<n+E?G-B:x-B;if(n<0)n=G+J>I&&G<I+B?H+f:0;if(n+E>t)n=G+J>I&&G<I+B?H-E:t-E}B=[I,n];y&&this.setXY(B);return B},cset:function(f){v.parse(this,f);return this},clip:function(){var f=this.view;if(f._overflow)return this;this._overflow=f.style.overflow||"auto";if(this._overflow!=="hidden")f.style.overflow=
"hidden";return this},unclip:function(){if(!this._overflow)return this;this.view.style.overflow=this._overflow=="auto"?"":this._overflow;this._overflow=null;return this},copyViewport:function(f){f=a.$$(f);f.setXY(this.xy());f.setSize(this.getSize());return this},focus:function(f){if(this.disabled)return this;var n=this.focusNode?this.dom(this.focusNode):this.view;if(f)(function(){try{n.focus()}catch(x){}}).timeout(f);else try{n.focus()}catch(t){}return this},cssText:function(f){if(f)if(typeof f==
"string")for(var n=/\s?([a-z\-]*)\:\s?([^;]*);?/gi,t;(t=n.exec(f))!=null;)this.setStyle(t[1],t[2]);else if(typeof f=="object")for(n in f)this.setStyle(n,f[n]);else typeof f=="function"&&this.cssText(f.call());return this},noselect:function(){var f=this,n=typeof this.unselectable,t=false;if(n!="undefined"&&n!="boolean"){t=true;f=this.fly(this.unselectable)}f.view.unselectable="on";f.noUp("selectstart");f.addClass("noselect");t&&f.unfly();return this},autoHeight:function(f,n){var t=this.getHeight();
this.clip();this.view.style.height=1;setTimeout(function(){var x=C(this.view.scrollHeight,10);if(f)this.setHeight(t);else{this.setHeight(x);this.unclip();n&&n()}}.bind(this),0);return this},getScroll:function(){var f=this.view,n=k;if(f==n||f==n.body){if(a.ie&&a.strict){f=n.documentElement.scrollLeft||n.body.scrollLeft||0;n=n.documentElement.scrollTop||n.body.scrollTop||0}else{f=window.pageXOffset||n.body.scrollLeft||0;n=window.pageYOffset||n.body.scrollTop||0}return{left:f,top:n}}else return{left:f.scrollLeft,
top:f.scrollTop}},ancestorOf:function(f,n){f=f.view||f;var t=this.view;if(t.contains&&!a.safari)return t.contains(f);else if(t.compareDocumentPosition)return!!(t.compareDocumentPosition(f)&16);if(n===A)n=65535;f=f.parentNode;for(var x=k.body;f!=x&&n>0&&f!==null;){if(f==t)return true;f=f.parentNode;n--}return false},domEvent:function(f,n,t,x,z,y){if(f=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||this.view.attachEvent))f="keydown";if(!this.observes)this.observes=[];var B=
x||this;x=function(E){E=E||window.event;if(B.disabled){h.stop(E);return false}t&&h.stop(E);return n.call(B,E)};if(z){z=this.dom(z);if(!z)return this;this.observes.push([f,n,x,z,y])}else{z=this.view;this.observes.push([f,n,x])}if(z.addEventListener)z.addEventListener(f,x,y);else z.attachEvent&&z.attachEvent("on"+f,x);return this},wheelEvent:function(f,n,t,x,z){a.ie||a.opera?this.domEvent("mousewheel",f,n,t,x,z):this.domEvent("DOMMouseScroll",f,n,t,x,z)},unEvent:function(f,n,t){if(f=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||
this.view.attachEvent))f="keydown";var x=this.observes;if(x){t=t!==A?t.tagName?t:this.dom(t):this.view;for(var z=0,y=x.length;z<y;z++){var B=x[z];if(B[0]==f&&B[1]==n&&(B[3]==t||B[3]===A)){if(t.removeEventListener)t.removeEventListener(f,B[2],B[4]);else t.detachEvent&&t.detachEvent("on"+f,B[2]);x.remove(z);return this}}}},bindEnter:function(f,n,t,x){return this.domEvent("keydown",function(z){if(h.isEnterKey(z)){n&&h.stop(z);f.call(this,z)}},false,t,x)},bindAlternateStyle:function(f,n,t,x,z,y,B,E,G){var H=
f+"Node",J=f+"Target";E=E||this[H];var I=G||this[J];if(E){E=this.dom(E);delete this[H]}else E=this.view;if(I){I=this.dom(I);delete this[J]}else I=this.view;G=this;if(I==this.view){z=z||G[f+"Callback"];y=y||G[n+"Callback"]}this.domEvent(f,function(L){var K=false;if(z)K=z.call(this,L);K!==true&&a.addClass(I,t)},x,B,E);this.domEvent(n,function(L){var K=false;if(y)K=y.call(this,L);K!==true&&a.delClass(I,t)},x,B,E);return this},bindHoverStyle:function(f,n,t,x,z,y,B){return this.bindAlternateStyle("mouseover",
"mouseout",f||this.hoverCS,n,t||this.onMouseHover,x||this.onMouseOff,z||this,y,B)},bindFocusStyle:function(f,n,t,x,z,y,B){return this.bindAlternateStyle("focus","blur",f,n,t||this.onfocusHover,x||this.onfocusOff,z||this,y,B)},bindClickStyle:function(f,n,t,x,z,y,B){this.bindAlternateStyle("mousedown","mouseup",f,n,t,x,z,y,B);this.domEvent("mouseout",function(){this.docked||this.delClass(f)});return this},bindContext:function(f,n,t,x,z,y){if(this.contexted)return this;var B=x?this.dom(x):this.view;
t||(t=this);var E=this;n=function(G){if(f)if(f.call(t,G,B)===false)return;h.un(k,"mousedown",arguments.callee);h.un(B,"mousedown",h.noUp);var H=B==E.view?E:a.fly(B);E.contexted=false;delete E.__contextedCb;z&&a.fly(z).delClass(y).unfly();H.display(false).unfly();E.fire("contexted",false,G,B)};h.on(B,"mousedown",h.noUp);h.on(k,"mousedown",n);this.contexted=true;this.__contextedCb=n;z&&a.fly(z).addClass(y).unfly();this.fire("contexted",true,B);return this},releaseContext:function(){this.contexted&&
this.__contextedCb()},$$:function(f){(f=a.$$(f,this.view))&&this.follow(f);return f},attr:function(f,n,t){if(f=this.dom(f))return f=a.attr(f,n,t)},setCloseable:function(f){this.closeable=f;var n=this.fly(this.closeNode||"_cls");n&&n.display(f).unfly();return this},offsetsTo:function(f){var n=this.absoluteXY();f=a.fly(f);var t=f.absoluteXY();f.unfly();return[n[0]-t[0],n[1]-t[1]]},scrollIntoView:function(f,n){var t=f?f.view||f:a.$body.view,x=this.getHiddenAreaOffsetVeti(t);if(x!==false)t.scrollTop=
x;if(n){x=this.getHiddenAreaOffsetHori(f);if(x!==false)t.scrollLeft=x}return this},scrollChildIntoView:function(f,n){this.fly(f).scrollIntoView(this.view,n).unfly();return this},getHiddenAreaOffsetVeti:function(f){var n=f.view||f,t=this.view,x=this.offsetsTo(n);f=C(n.scrollTop,10);x=x[1]+f;t=t.offsetHeight;var z=x+t;n=n.clientHeight;var y=f+n;if(t>n||x<f)return x;else if(z>y){z-=n;if(f!=z)return z}return false},getHiddenAreaOffsetHori:function(f){var n=f.view||f,t=this.view;f=C(n.scrollLeft,10);var x=
this.offsetsTo(n)[0]+f;t=t.offsetWidth;n=n.clientWidth;var z=x+t,y=f+n;if(t>n||x<f)return x;else if(z>y){z-=n;if(z!=f)return z}return false}});i.create=function(f,n){if(typeof f==="string")n=new i[f](n);else{n=new i;n.initialize(f)}return n};i.applyOption=function(f,n){f=a.fly(f);f.initialize(n);f.render();f.unfly()};a.$$=function(f,n){if(!f||f.view)return f;var t="c"+a.uniqueID();if(!n){if(f=a.$(f)){f=new i(f);f.cacheId=t;m[t]=f}return f}if(f=n&&n.view?a.$(f,n.view):a.$(f,n)){f=new i(f);f.cacheId=
t;m[t]=f}return f};g.register("flycomp",function(){var f=new i;f.__flied=0;return f});a.fly=function(f){if(f)if(typeof f=="string")f=a.$(f);else if(f.view){if(f.__flied!==A)f.__flied+=1;return f}if(!f){console.trace();throw"Node not found.";}var n=g.get("flycomp");n.view=f;return n};if(a.ie){i.prototype.getOpacity=function(){var f=this.view;if(f.filters[0])return parseFloat(f.filters[0].Opacity/100);if(value=(this.getStyle(f,"filter")||"").match(/alpha\(opacity=(.*)\)/))if(value[1])return parseFloat(value[1])/
100;return 1};i.prototype.setOpacity=function(f){var n=this.view.style;n.zoom=1;n.filter=(n.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(f==1?"":" alpha(opacity="+f*100+")");return this}}a.ui={ctypes:{},def:function(f,n){this.ctypes[f]=n},instance:function(f,n){if(typeof f==="string")return new this.ctypes[f](n);if(!f)return i.create();if(f.cacheId)return f;n=f.ctype;if(!n)return i.create(f);return new this.ctypes[n](f)}};a.ui.def("base",function(f){return i.create(f)});h.defUIReady=function(){a.$body=
a.$$(k.body);if(k.body.lang!=="zh")k.body.lang="zh"}})(CC);
CC.util.BrushFactory={floatBrush:function(a,l){var m=Math.pow(10,a);switch(l){case "%":m*=100;var g=m/100;return function(h){return Math.round(h*m)/g+"%"};default:return function(h){return Math.round(h*m)/m}}},date:function(a){a||(a="yy/mm/dd");return function(l){return CC.dateFormat(l,a)}},get:function(a){if(!this.cache)this.cache={};var l=this.cache[a];if(!l)switch(a){case ".xx":l=CC.util.BrushFactory.floatBrush(2);this.reg(a,l);break;case ".xx%":l=CC.util.BrushFactory.floatBrush(2,"%");this.reg(a,
l);break}return l},reg:function(a,l){if(!this.cache)this.cache={};this.cache[a]=l}};CC.util.d2d={};CC.util.d2d.Point=function(a,l){this.x=a||0;this.y=l||0};CC.util.d2d.Rect=function(a,l,m,g){if(arguments.length===4){this.l=a||0;this.t=l||0;this.w=m||0;this.h=g||0}else{this.l=a[0];this.t=a[1];this.w=a[2];this.h=a[3]}};
CC.extend(CC.util.d2d.Rect.prototype,{l:0,t:0,w:0,h:0,isEnter:function(a){var l=a.x;a=a.y;return l>=this.l&&l<=this.l+this.w&&a>=this.t&&a<=this.t+this.h},update:fGo,toString:function(){return this.valueOf()+""},valueOf:function(){return[this.l,this.t,this.w,this.h]}});
CC.create("CC.util.d2d.RectZoom",CC.util.d2d.Rect,function(a){var l=window.Math,m=l.max,g=l.min;return{pZoom:null,initialize:function(h){this.rects=[];if(h){for(var i=0,b=h.length;i<b;i++)this.add(h[i]);this.update()}},getRects:function(){return this.rects},add:function(h,i){h.pZoom&&h.pZoom.remove(h);this.rects.push(h);i&&this.update();h.pZoom=this;return this},remove:function(h,i){delete h.pZoom;this.rects.remove(h);i&&this.update();return this},contains:function(h){for(var i=false,b,k=0,o=this.rects,
p=o.length;k<p;k++){b=o[k];if(b===h){i=this;break}if(b.contains)if(i=b.contains(h))break}return i},isEnter:function(h){if(a.isEnter.call(this,h)){var i,b=this.rects,k=b.length;for(i=0;i<k;i++)if(b[i].isEnter(h))return b[i]}return false},union:function(){var h,i=this.rects,b=i.length,k,o=[],p=[],u=[],q=[];if(b===0)o=p=u=q=0;else{for(h=0;h<b;h++){k=i[h];o.push(k.t);p.push(k.t+k.h);u.push(k.l);q.push(k.l+k.w)}u=g.apply(l,u);q=m.apply(l,q);o=g.apply(l,o);p=m.apply(l,p)}this.l=u;this.t=o;this.w=q-u;this.h=
p-o},update:function(){var h,i=this.rects,b=i.length;for(h=0;h<b;h++)i[h].update();this.union()}}});CC.create("CC.util.d2d.ComponentRect",CC.util.d2d.Rect,{z:-1,initialize:function(a){this.comp=a;a.ownRect=this;this.update()},update:function(){if(this.hidden){this.l=this.t=this.w=this.h=0;this.z=-1}else{var a=this.comp,l=a.getSize(),m=a.absoluteXY();this.z=a.getZ();this.l=m[0];this.t=m[1];this.w=l.width;this.h=l.height}},destory:function(){delete this.comp.ownRect;this.comp=null}});
(function(){function a(y){y=y||window.E;b.stop(y);return false}function l(y){if(this.draggable){q=w=b.pageXY(y);A=this.absoluteXY();u=this;__debug&&console.group("\u62d6\u653e"+this);__debug&&console.log("beforedrag");if(this.beforedrag(y)!==false&&this.fire("beforedrag",y)!==false)if(!n){n=true;b.on(o,"mouseup",h);b.on(o,"mousemove",g);b.on(o,"selectstart",a);if(C=z.$(this.dragZoom)){if(this.ownRect)(t=C.contains(this.ownRect))&&t.remove(this.ownRect);C.update()}if(__debug&&C)console.log("\u5f53\u524dzoom:",
this.dragZoom||C)}}}function m(){var y=D;y[0]=w[0]-q[0];y[1]=w[1]-q[1];if(x){var B=x;if(y[0]<B[1])y[0]=B[1];else if(y[0]>B[0])y[0]=B[0];if(y[1]<B[3])y[1]=B[3];else if(y[1]>B[2])y[1]=B[2]}}function g(y){y=y||k.E;w=b.pageXY(y);v.x=w[0];v.y=w[1];m();if(!F){__debug&&console.log("dragstart       mouse x,y is ",w,"dxy:",D);if(u.dragstart(y)!==false&&u.fire("dragstart",y)!==false)F=true}if(u.drag(y,p)!==false&&C)if((f=C.isEnter(v))&&f.comp!==u){if(p!==f.comp){if(p!==null){p.sbout(u,y);__debug&&console.log("\u79bb\u5f00\u76ee\u6807:",
p)}p=f.comp;if(p.disabled)p=null;else{p.sbover(u,y);__debug&&console.log("\u8fdb\u5165\u76ee\u6807:",p)}}p&&p.sbmove(u,y)}else if(p!==null){p.sbout(u,y);__debug&&console.log("\u79bb\u5f00\u76ee\u6807:",p);p=null}}function h(y){if(u){y=y||k.E;if(n){b.un(o,"mouseup",arguments.callee);b.un(o,"mousemove",g);b.un(o,"selectstart",a);if(F){if(p!==null){p.sbdrop(u,y);__debug&&console.log(u.toString(),"\u4e22\u5728",p.toString(),"\u4e0a\u9762")}u.dragend(y);F=false;__debug&&console.log("dragend         mouse delta x,y is ",
D,",mouse event:",y)}n=false;p=null;if(C){if(t){t.add(u.ownRect);t=false}C=null}f=null}__debug&&console.log("afterdrag");u.afterdrag(y);u.fire("afterdrag",y);u=null;x=false;__debug&&console.groupEnd()}}var i=window.CC;i.util.dd={};var b=i.Event,k=window,o=k.document,p=null,u=null,q,w,D=[0,0],A,F=false,C,v=new i.util.d2d.Point,f,n=false,t=false,x=false,z=i.util.dd.Mgr={zmCache:{root:new i.util.d2d.RectZoom},installDrag:function(y,B,E){if(B===undefined||B){y.draggable=true;y.domEvent("mousedown",l,
false,null,E||y.dragNode)}else{y.draggable=false;y.unEvent("mousedown",l,E||y.dragNode)}},setSource:function(y){u=y},$:function(y,B){var E=this.zmCache[y];if(!E&&B){E=this.zmCache;if(y==="root")throw"can't named root";if(typeof B==="string"){B=E[B];if(!B)throw"parent zoom doesn't exist.";}else if(B===true)B=E.root;E=E[y]=new i.util.d2d.RectZoom;B.add(E)}return E},setBounds:function(y){x=y;return this},getBounds:function(){return x},getRoot:function(){return this.zmCache.root},remove:function(y){var B=
this.zmCache[y];if(B&&y!=="root"){B.pZoom.remove(B);delete this.zmCache[y]}return B},addComp:function(y,B){B=this.$(B,true);B.add(new i.util.d2d.ComponentRect(y));return this},removeComp:function(y,B){B=this.$(B);var E=B.getRects();i.each(E,function(){if(this.comp===y){B.remove(this);this.destory();return false}});return this},getIMXY:function(){return q},getIEXY:function(){return A},getDXY:function(){return D},getXY:function(){return w},getSource:function(){return u},getTarget:function(){return p},
update:function(){C&&C.update();return this},isDragging:function(){return F},resizeHelper:{resizeCS:"g-resize-ghost",maskerCS:"g-resize-mask",applyResize:function(y,B){this.resizing=y;this.applyLayer(y);this.applyMasker(y,B)},applyLayer:function(y){var B=this.layer;if(!B)B=this.layer=i.Base.create({view:i.$C("DIV"),autoRender:true,cs:this.resizeCS,hidden:true});y?B.appendTo(o.body):B.del();B.display(y);return this},applyMasker:function(y,B){var E=this.masker;if(!E)E=this.masker=i.Base.create({view:i.$C("DIV"),
autoRender:true,cs:this.maskerCS,hidden:true,unselectable:true});y&&i.ie&&E.setSize(i.getViewport());y?E.appendTo(o.body):E.del();E.display(y);B!==undefined&&E.fastStyleSet("cursor",B);return this}}};i.extendIf(i.Base.prototype,{installDrag:function(y){z.installDrag(this,y);return this},getDDProvider:function(){return z},beforedrag:fGo,dragstart:fGo,dragend:fGo,afterdrag:fGo,drag:fGo,sbover:fGo,sbout:fGo,sbdrop:fGo,sbmove:fGo})})();
CC.create("CC.util.AsynchronizeQueue",null,{initialize:function(a){this.seed=this.seed||0;a&&CC.extend(this,a);this.counter=this.seed},increase:function(){this.seed++;if(this.seed>this.counter)this.counter=this.seed;if(this.onincrease)this.onincrease.call(this.caller?this.caller:this,this)},decrease:function(){this.seed--;if(this.ondecrease)this.ondecrease.call(this.caller?this.caller:this,this);if(this.seed<=0&&this.callback)this.callback.call(this.caller?this.caller:this,this)}});
CC.create("CC.util.Tracker",null,{max:20,initialize:function(a){this.area=[];a&&CC.extend(this,a)},track:function(a){var l=this.area;l.indexOf(a)!==-1&&l.remove(a);l.push(a);l.length>this.max&&l.pop();__debug&&console.log("\u8bb0\u5f55:",a)},isValid:fGo,validCaller:null,pop:function(){for(var a=this.validCaller||this,l=this.area,m=l.length-1;m>=0;m--){__debug&&console.log("\u62b9\u9664:",this.isValid.call(a,l[m]),l[m]);if(this.isValid.call(a,l[m]))return l[m];l.pop()}},remove:function(a){this.area.remove(a)},
size:function(){return this.area.length}});
(function(){var a=window.CC,l=a.Base,m=l.prototype,g=a.ui;if(!a.layout)a.layout={};a.layout.def=function(b,k){this[b]=k;return this};a.create("CC.ui.Item",l,{});a.ui.def("item",a.ui.Item);a.create("CC.layout.Layout",null,{ct:false,items:false,layoutOnChange:false,deffer:false,initialize:function(b){b&&a.extend(this,b);(b=a.delAttr(this,"ct"))&&this.attach(b)},beforeAdd:fGo,itemCS:false,add:function(b,k){b.cacheId||(b=this.ct.instanceItem(b));var o=b.lyInf;if(o)k&&a.extend(o,k);else b.lyInf=o=k||{};
this.beforeAdd(b,o);this.itemCS&&b.addClassIf(this.itemCS);this.ct.add(b);if(this.isUp()){this.layoutOnChange?this.doLayout():this.layoutChild(b);b.rendered||b.render()}return this},isUp:function(){return!this.invalidate&&this.ct.rendered},display:function(b,k){b.display(k);this.layoutOnChange&&this.doLayout()},doLayout:function(){if(this.isUp())if(this.ct.hidden){__debug&&console.log(this,"\u5bb9\u5668\u5904\u4e8e\u9690\u85cf\u72b6\u6001,\u672a\u7acb\u5373\u5e03\u5c40..");this.defferArgs=arguments}else if(this.deffer!==
false){var b=a.$A(arguments),k=this;(function(){k.ct&&k.onLayout.apply(k,b)}).timeout(this.deffer)}else this.onLayout.apply(this,arguments)},cfgFrom:function(b){return b.lyInf||{}},insert:function(){this.layoutOnChange&&this.doLayout.bind(this).timeout(0)},layoutChild:fGo,remove:function(){this.layoutOnChange&&this.doLayout.bind(this).timeout(0)},fromArray:function(b){var k=this.ct,o=k.itemCls,p,u=k.itemCfg||false;if(typeof o==="string")o=g.ctypes[o];var q=this.invalidate;this.invalidate=true;for(var w=
0,D=b.length;w<D;w++){p=b[w];if(!p.cacheId){if(!p.ctype&&u)p=a.extendIf(p,u);p=k.instanceItem(p,o,true)}this.add(p)}this.invalidate=q;this.isUp()&&this.doLayout()},ctCS:false,wrCS:false,attach:function(b){this.ct=b;if(b.deffer!==undefined)this.deffer=b.deffer;this.ctCS&&b.addClass(this.ctCS);this.wrCS&&b.wrapper.addClass(this.wrCS);if(this.items){this.fromArray(this.items);delete this.items}if(b.items){this.fromArray(b.items);delete b.items}return this},detach:function(){if(this.ct)this.wrapper=this.ct=
null;return this},onLayout:function(){for(var b=0,k,o=this.ct.children,p=o.length;b<p;b++){k=o[b];this.layoutChild(k);k.rendered||k.render()}}});var h=a.layout.Layout;a.layout.def("default",h);a.Tpl.def("CC.ui.Panel",'<div class="g-panel"></div>').def("CC.ui.WrapPanel",'<div class="g-panel"><div class="g-panel-wrap" id="_wrap"></div></div>');a.create("CC.ui.ContainerBase",l,{children:null,eventable:true,ct:null,minH:0,minW:0,maxH:65535,maxW:65535,itemCls:a.ui.Item,autoRender:false,items:false,array:false,
initialize:function(){l.prototype.initialize.apply(this,arguments);if(this.array){this.fromArray(this.array);delete this.array}},keyEvent:undefined,useContainerMonitor:false,cancelClickBubble:false,clickEvent:false,selectionProvider:false,connectionProvider:false,initComponent:function(){m.initComponent.call(this);this.keyEvent&&this.bindKeyInstaller();this.useContainerMonitor&&this.clickEvent&&this.bindClickInstaller();this.selectionProvider&&this.getSelectionProvider();this.connectionProvider&&
this.getConnectionProvider();this.children=[];this.createLayout()},layout:"default",lyCfg:false,createLayout:function(){if(this.layout)if(typeof this.layout==="string"){var b=this.lyCfg||{};b.ct=this;this.layout=new a.layout[this.layout](b);this.lyCfg&&delete this.lyCfg}else this.layout.attach(this);else this.layout=new h({ct:this})},ct:false,createView:function(){m.createView.call(this);if(this.ct){if(typeof this.ct==="string")this.ct=this.dom(this.ct)}else this.ct=this.view;if(!this.ct)this.ct=
this.view;this.wrapper=this.ct==this.view?this:this.$$(this.ct)},destoryed:false,destory:function(){this.destoryed=true;this.destoryChildren();var b=this.bndActs,k;if(b)for(;b.length>0;){k=b[0];this.unEvent(k[0],k[2],k[3]);b.remove(0)}this.layout.detach();this.wrapper=this.ct=null;m.destory.call(this)},onRender:function(){m.onRender.call(this);this.layout.doLayout()},_addNode:function(b,k){k===undefined?this.ct.appendChild(b):this.ct.insertBefore(this.ct.childNodes[k],b)},_removeNode:function(b){b.parentNode.removeChild(b)},
add:function(b){b.cacheId||(b=g.instance(b));if(this.fire("beforeadd",b)!==false&&this.beforeAdd(b)!==false){this.onAdd(b);this.afterAdd(b);this.fire("add",b)}return this},__click:false,onAdd:function(b){this.children.push(b);this._addNode(b.view);if(b.pCt){if(b.pCt!==this){b.pCt.remove(b);b.pCt=this}}else b.pCt=this;if(!this.useContainerMonitor&&this.clickEvent&&!b.__click){var k=b.__click=this.clickEventTrigger,o=this.clickEventNode?b.dom(this.clickEventNode):b.view;b.domEvent(this.clickEvent===
true?"mousedown":this.clickEvent,k,this.cancelClickBubble,null,o)}},beforeAdd:fGo,afterAdd:fGo,ctClickTrigger:function(b,k){!b.disabled&&!b.clickDisabled&&this.fire("itemclick",b,k)},clickEventTrigger:function(b){var k=this.pCt;this.clickDisabled||k.fire("itemclick",this,b)},remove:function(b){b=this.$(b);if(b.delegated){this.__delegations.remove(b);b.view.parentNode&&b.view.parentNode.removeChild(b.view)}else if(this.fire("beforeremove",b)!==false&&this.beforeRemove(b)!==false){this.onRemove(b);
this.fire("remove",b)}return this},beforeRemove:fGo,onRemove:function(b){b.pCt=null;this.children.remove(b);this._removeNode(b.view)},removeAll:function(){var b,k=this.children;for(this.invalidate();k.length>0;){b=k[0];this.remove(b)}this.validate()},destoryChildren:function(){var b,k=this.children;for(this.invalidate();k.length>0;){b=k[0];this.remove(b);b.destory()}this.destoryed||this.validate()},$:function(b){if(b===null||b===undefined||b===false)return null;if(b.tagName)return l.byDom(b,this);
if(typeof b==="number")return this.children[b];if(b.view)return b;for(var k=this.children,o=0,p=k.length;o<p;o++)if(k[o].id==b)return k[o];return null},onShow:function(){m.onShow.call(this);var b=this.layout;if(b.defferArgs){__debug&&console.log(this,"\u5bb9\u5c40\u663e\u793a\u65f6\u5e03\u5c40..",b.defferArgs);b.doLayout.apply(b,b.defferArgs);b.defferArgs=false;if(this.shadow)(function(){this.shadow.reanchor().display(true)}).bind(this).timeout(b.deffer||0)}},indexOf:function(b){b=this.$(b);return!b?
-1:this.children.indexOf(b)},size:function(){return this.children.length},contains:function(b){b.type||(b=this.$(b));return b.pCt===this},insertBefore:function(b,k){this.insert(this.indexOf(k),b)},_insertBefore:function(b,k){this.ct.insertBefore(b,k)},insert:function(b,k){k.pCt===this&&this.indexOf(k)<b&&b--;if(this.fire("beforeadd",k)!==false&&this.beforeAdd(k)!==false){k.pCt=this;this.children.insert(b,k);(b=this.children[b+1])?this._insertBefore(k.view,b.view):this._addNode(k.view);this.fire("add",
k)}return this},clear:function(){for(var b=this.children,k=0,o=b.length;k<o;k++)this.remove(b[0]);return this},swap:function(b,k){var o=this.children,p=this.indexOf(b),u=this.indexOf(k);b=this.children[p];k=this.children[u];o[p]=k;o[u]=b;b=b.view;k=k.view;if(b.swapNode)b.swapNode(k);else{o=k.parentNode;p=k.nextSibling;if(p==b)o.insertBefore(b,k);else if(k==b.nextSibling)o.insertBefore(k,b);else{b.parentNode.replaceChild(k,b);o.insertBefore(b,p)}}return this},sort:function(b){var k=this.children;b===
undefined?k.sort():k.sort(b);b=document.createDocumentFragment();for(var o=0,p=k.length;o<p;o++)b.appendChild(k[o].view);this.ct.appendChild(b);this.sorted=true;return this},reverse:function(){var b=this.children;b.reverse();for(var k=document.createDocumentFragment(),o=0,p=b.length;o<p;o++)k.appendChild(b[o].view);this.ct.appendChild(k);return this},filter:function(b,k){k=k||window;a.each(this.children,function(){b.call(k,this)?this.display(1):this.display(0)});return this},filterBy:function(b,k,
o,p){for(var u=this.children,q=this.children.length,w=0,D=p||false,A,F;w<q;w++){p=u[w];if(D){if(p[k]===o)A=b.call(p)}else{F=p[k]||false;if(F==o)A=b.call(p)}if(A===false)break}return this},each:function(b,k){var o,p,u,q=this.children;o=0;for(u=q.length;o<u;o++){p=q[o];p=b.call(k||p,p,o);if(p===false)break}return p},parentOf:function(b){if(!b)return false;if(b.pCt==this)return true;var k=this;return a.eachH(b,"pCt",function(){if(this==k)return 1})==true},fromArray:function(b,k){k=k||this.itemCls;if(typeof k===
"string")k=a.ui.ctypes[k];for(var o,p=this.itemCfg||false,u=0,q=b.length;u<q;u++){o=b[u];if(!o.cacheId){if(!o.ctype&&p)o=a.extendIf(o,p);o=this.instanceItem(o,k,true)}this.add(o)}return this},instanceItem:function(b,k,o){if(!k){k=this.itemCls;if(typeof k==="string")k=a.ui.ctypes[k]}b||(b={});if(!b.cacheId){if(!o&&this.itemCfg)b=a.extendIf(b,this.itemCfg);b.pCt=this;b=b.ctype?g.instance(b):new (k||a.ui.Item)(b);if(b.array&&b.children){b.fromArray(b.array);delete b.array}}return b},bndActs:false,itemAction:function(b,
k,o,p,u,q){p=p||this;var w=function(D){var A=D.target||D.srcElement;if((q===undefined||A.tagName===q)&&A!==this.view)if(A=this.$(A))return A.disabled?false:k.call(p,A,D)};if(!this.bndActs)this.bndActs=[];this.bndActs.push([b,k,w,u]);this.domEvent(b,w,o,null,u);u=w=null;return this},unItemAction:function(b,k,o){for(var p=this.bndActs,u=0,q=p.length;u<q;u++){var w=p[u];if(w[0]===b&&w[1]===k&&w[3]===o){o!==undefined&&(o.tagName||this.dom(o));this.unEvent(b,w[2],w[3]);p.remove(u);return this}}return this},
bindKeyInstaller:function(){if(this.keyEvent===undefined)this.keyEvent=true;var b=this.keyEvent===true?"keydown":this.keyEvent,k=this.keyEventNode=this.keyEventNode?this.dom(this.keyEventNode):this.ct;if(k.tabIndex===-1){k.tabIndex=0;k.hideFocus="on"}this.domEvent(b,this._onKeyPress,this.cancelKeyBubble,null,k);return this},bindClickInstaller:function(){this.itemAction(this.clickEvent===true?"mousedown":this.clickEvent,this.ctClickTrigger,this.cancelClickBubble)},_onKeyPress:function(b){!this.disabled&&
this.fire("keydown",b)!==false&&this.onKeyPressing(b)},onKeyPressing:fGo,focus:function(b){if(this.disabled)return this;var k=this.keyEventNode||this.ct;if(b!==undefined)(function(){try{k.focus()}catch(p){}}).timeout(0);else try{k.focus()}catch(o){}return this},validate:function(){this.layout.invalidate=false;this.layout.doLayout();return this},invalidate:function(){this.layout.invalidate=true;return this},doLayout:function(){!this.layout.invalidate&&this.rendered&&this.layout.doLayout.apply(this.layout,
arguments);return this},autoHeight:function(){var b=this.ct;this.setSize(this.getWidth(true)+b.scrollWidth-b.clientWidth,this.getHeight(true)+b.scrollHeight-b.clientHeight);return this},center:function(b){var k,o=b?b.view?b.view:b:this.pCt?this.pCt.view:this.view.parentNode;if(!o)o=document.body;if(o==document.body||o==document.documentElement){k=a.getViewport();b=[0,0]}else{o=a.fly(o);k=o.getSize();b=o.absoluteXY();o.unfly()}o=(k.height-this.height)/2|0;this.setXY(Math.max(b[0]+((k.width-this.width)/
2|0),0),Math.max(b[1]+o-o/2|0,0));return this},byId:function(b,k,o){var p=[],u=null,q=this.children,w=this.children[0],D=0;k||(k="id");if(o)u=[];for(;w;){if(w[k]===b){if(!o)return w;u[u.length]=w}w.children&&w.children.length>0&&p.push(w);w=q[++D];if(!w)if(w=p.pop()){q=w.children;D=0;w=q[0]}}return u},eachH:function(b){var k=this.children,o,p=0,u=0,q=[];for(o=k[0];o;){o.children&&q.push(o);p++;if(b.call(o,u,p)===false)break;o=k[++u];if(!o)if(o=q.pop()){u=0;k=o.children;o=k[0]}}},getScrollor:function(){return this.scrollor||
this.height===false&&this.width===false&&this.pCt?this.pCt.wrapper:this.wrapper}});var i=a.ui.ContainerBase;g.def("ct",i);a.create("CC.ui.Panel",i,function(b){return{ct:"_wrap",deffer:false,syncWrapper:true,initComponent:function(){var k=false,o=false,p=false,u=false;if(this.width!==false){k=this.width;this.width=false}if(this.height!==false){o=this.height;this.height=false}if(this.left!==false){p=this.left;this.left=false}if(this.top!==false){u=this.top;this.top=false}if(this.insets){var q=this.insets;
q[4]=q[0]+q[2];q[5]=q[1]+q[3]}b.initComponent.call(this);if(this.insets){q=this.insets;this.wrapper.setXY(q[3],q[0])}if(k!==false||o!==false)this.setSize(k,o);if(p!==false||u!==false)this.setXY(p,u)},getWrapperInsets:function(){var k=this.insets;if(!k){k=this.wrapper;this.insets=k=[parseInt(k.fastStyle("top"),10)||0,parseInt(k.fastStyle("right"),10)||0,parseInt(k.fastStyle("bottom"),10)||0,parseInt(k.fastStyle("left"),10)||0];k[4]=k[0]+k[2];k[5]=k[1]+k[3]}return k},setSize:function(k,o,p){var u=this.width,
q=this.height;if(!p){u=u===false?k:u===k?false:k;q=q===false?o:q===o?false:o}if(u!==false||q!==false){b.setSize.call(this,u,q);if(u!==false)u=this.width;if(q!==false)q=this.height;k=this.wrapper;if(k.view!==this.view&&this.syncWrapper){p=this.getWrapperInsets();o=u===false?u:Math.max(u-p[5],0);p=q===false?q:Math.max(q-p[4],0);k.setSize(o,p);if(o!==false)o=k.width;if(p!==false)p=k.height}else{o=u===false?u:Math.max(u-this.getOuterW(),0);p=q===false?q:Math.max(q-this.getOuterH(),0)}this.fire("resized",
o,p,u,q);this.doLayout(o,p,u,q)}return this},setXY:function(k,o){if(a.isArray(k)){o=k[1];k=k[0]}var p=0,u=0;if(k!==this.left&&k!==false||o!==this.top&&o!==false){if(k!==this.left&&k!==false){this.fastStyleSet("left",k+"px");p=k-this.left;this.left=k}else k=false;if(o!==this.top&&o!==false){this.fastStyleSet("top",o+"px");u=o-this.top;this.top=o}else o=false;if(k!==false||o!==false)this.fire("reposed",k,o,p,u)}return this}}});(function(b){var k={insets:[1,1,1,1],template:"WrapPanel",ct:"_wrap",innerCS:"g-borderpanel",
wrCS:"g-borderpanel-wrap"};a.ui.BorderPanel=function(o,p){o||(o={});a.extendIf(o,k);o=new (p||b)(o);o.wrapper.addClassIf(o.wrCS);return o}})(a.ui.Panel);g.def("panel",a.ui.Panel)})();
(function(){var a=CC.ui.ContainerBase.prototype;CC.create("CC.util.ProviderBase",null,{initialize:function(l){this.inited=true;l&&CC.extend(this,l)},setTarget:function(l){this.t=l},each:function(){this.t.each.apply(this.t,arguments)}});CC.util.ProviderFactory={create:function(l,m,g){var h=l+"Provider",i=l.toLowerCase()+"Provider",b="CC.util."+h;CC.create(b,m||CC.util.ProviderBase,g);a["get"+h]=function(k,o){o=this[i];if(!o||o===true||!o.inited){var p=CC.getObjectLinkedValues(this,i,true);k&&p.insert(0,
k);k={};o=false;for(var u=0,q=p.length;u<q;u++){var w=p[u];if(w===true&&!o)o=CC.attr(window,b);if(typeof w==="string"&&k.ctype===undefined)k.ctype=w;else if(typeof w==="function"&&!o)o=w;else CC.extendIf(k,w)}if(!o&&!k.ctype)o=o=CC.attr(window,b);o=this[i]=o?new o(k):CC.ui.instance(k);o.setTarget(this)}return o}}}})();
CC.util.ProviderFactory.create("Connection",null,{indicatorDisabled:false,ajaxCfg:false,setTarget:function(){CC.util.ProviderBase.prototype.setTarget.apply(this,arguments);this.initConnection()},initConnection:function(){this.ajaxCfg&&this.ajaxCfg.url&&this.connect()},defaultLoadSuccess:function(a){var l=this.loadType;l==="html"?this.defaultDataProcessor(l,a.getText()):this.defaultDataProcessor(l,a.getJson())},defaultDataProcessor:function(a,l){switch(a){case "html":this.t.wrapper.html(l,true);break;
default:this.t.layout.fromArray(l);break}},getIndicator:function(a){if(this.indicator)return this.indicator;var l=this.indicatorCls||this.t.indicatorCls||CC.ui.Loading,m={target:this.t,targetLoadCS:this.loadCS};a!==undefined&&CC.extend(m,a);a=this.indicator=new l(m);this.t.follow(a);return a},connect:function(a,l){var m=this.ajaxCfg;m||(m={});if(a)m.url=a;m.caller=this;l&&CC.extend(m,l);if(!m.success){if(m.caller!==this)throw"\u5982\u679c\u4f7f\u7528\u9ed8\u8ba4\u5904\u7406,ajaxCfg\u7684caller\u987b\u4e3a\u5f53\u524d\u7684connection provider";
m.success=this.defaultLoadSuccess}if(!this.indicatorDisabled&&!this.indicator)this.getIndicator(this.indicatorCfg||this.t.indicatorCfg);this.bindConnector(m);return this},getConnector:function(){return this.connector},bindConnector:function(a){this.indicator.isBusy()&&this.getConnector().abort();a=this.connector=this.createConnector(a);a.url=CC.templ(this.t,a.url);a.to(this.t);a.connect()},createConnector:function(a){return new CC.Ajax(a)}});
CC.util.ProviderFactory.create("Selection",null,function(a){var l=CC.Event,m={isValid:function(g){return!g.hidden&&!g.disabled}};return{mode:1,tracker:false,UP:l.UP,DOWN:l.DOWN,selectedIndex:-1,autoscroll:true,autoFocus:true,selectedCS:"selected",unselectable:false,initialize:function(){a.initialize.apply(this,arguments);if(this.tracker===true)this.tracker=new CC.util.Tracker(m)},setMode:function(g){this.selectAll(false);this.mode=g;return this},setTarget:function(g){g.keyEvent===undefined&&g.bindKeyInstaller();
a.setTarget.apply(this,arguments);g.on("itemclick",this.itemSelectionTrigger,this).on("keydown",this.navigateKey,this).on("remove",this.onItemRemoved,this);if(this.selected!==undefined){var h=this.selected;delete this.selected;this.select(h)}},setSelected:function(g,h,i,b){h?this.select(g,i,b):this.unselect(g);return this},itemSelectionTrigger:function(g,h){this.unselectable||(this.mode?this.select(g,false,h):this.setSelected(g,!this.isSelected(g),false,h))},onItemRemoved:function(g){if(g===this.selected){this.decorateSelected(g,
false);this.select(null)}else if(g===this.previous)this.previous=null;this.tracker&&this.tracker.remove(g)},navigateKey:function(g){var h=g.keyCode;if(h===this.UP){this.pre();l.stop(g)}else if(h===this.DOWN){this.next();l.stop(g)}else return this.defKeyNav(g)},defKeyNav:fGo,getSelection:function(){var g=this,h=[];g.t.each(function(){g.isSelected(this)&&h.push(this)});return h},decorateSelected:function(g,h){var i=this.selectedCS;i&&g.checkClass(i,h)},select:function(g,h,i){if(this.unselectable||this.disabled)return this;
var b=this.t;if(!b.rendered){b.on("rendered",function(){b.selectionProvider.select(g)});return this}g=this.t.$(g);if(!g)return this.selectAll(false);if(g.disabled)return this;if((this.forceSelect||!this.isSelected(g))&&this.t.fire("select",g,this,i)!==false){this.onSelectChanged(g,true,i);this.onSelect(g,h,i);this.t.fire("selected",g,this,i)}return this},unselect:function(g){g=this.t.$(g);this.onSelectChanged(g,false);return this},onSelect:function(g,h){this.autoFocus&&this.t.wrapper.focus();!h&&
this.autoscroll&&g.scrollIntoView(this.t.getScrollor());g.onselect&&g.onselect()},onSelectChanged:function(g,h){if(this.hasChanged(g,h)){var i=this.selected,b=this.previous;g&&this.decorateSelected(g,h);if(this.mode)if(h){i&&this.decorateSelected(i,false);this.previous=i;this.selected=g;this.selectedIndex=this.t.indexOf(g)}else{if(g===i){this.selected=null;this.selectedIndex=-1}}else if(h){this.previous=i;this.selected=g}else if(i===g){this.previous=null;this.selected=b}else if(g===b&&b)this.previous=
null;this.tracker&&i&&h&&this.tracker.track(i);this.t.fire("selectchange",g,i,this);if(__debug){console.group("selectchanged data");console.log("\u5f53\u524d\u9009\u62e9:",this.selected);console.log("\u524d\u4e00\u4e2a\u9009\u62e9:",this.previous);console.groupEnd()}}},hasChanged:function(g,h){return!(g===this.selected&&h)||!(g&&this.isSelected(g)===h)},isSelected:function(g){return g.hasClass(this.selectedCS)},isSelectable:function(){return!this.unselectable},setSelectable:function(g){this.unselectable=
!g},canNext:function(g){return!g.disabled&&!g.hidden},canPre:function(g){return!g.disabled&&!g.hidden},getStartIndex:function(){return this.selectedIndex},getNext:function(){for(var g=this.getStartIndex()+1,h=this.t.children,i=h.length;g<=i-1&&!this.canNext(h[g]);)g++;if(g>=0&&g<=i-1)return h[g];return null},getPre:function(){for(var g=this.getStartIndex()-1,h=this.t.children,i=h.length;g>=0&&!this.canPre(h[g]);)g--;if(g>=0&&g<=i-1)return h[g];return null},next:function(){var g=this.getNext();g&&
this.select(g);return g},pre:function(){var g=this.getPre();g&&this.select(g);return g},selectAllInner:function(g){var h=this;this.t.each(function(){h.setSelected(this,g,true)})},selectAll:function(g){if(this.mode&&!g){this.selected&&this.unselect(this.selected);return this}this.selectAllInner(g);return this},selectOpp:function(){var g=this;this.t.each(function(){g.setSelected(this,!g.isSelected(this),false)})}}});
CC.util.ProviderFactory.create("Validation",null,{errorCS:"g-form-error",focusOnError:true,decorateValidation:function(a,l){if(l)l.checkClass(l.errorCS||this.errorCS,!a)},validator:fGo,validateAll:function(a){var l=this,m=[],g;this.each(function(){g=l.validate(this,m,a);if(g!==true){if(m.length===1&&l.focusOnError)try{this.focus()}catch(h){}if(g===null)return false}});return m.length?m:true},validate:function(a,l,m){l||(l=[]);var g;g=this.validator(a,l,m);if(this.t.fire("validation:start",a,l,m)===
false)g=null;if(l.length>0){if(g!==null)g=false}else g=true;this.notifyValidation(!!g,a,l,m);return g},notifyValidation:function(a,l,m,g){this.decorateValidation(a,l,m,g);this.t.fire(a?"validation:success":"validation:failed",l,m,g,this);return this},isInvalid:function(a,l){var m=[];return this.validate(a,m,l)===true?false:m}});
CC.util.ProviderFactory.create("Store",null,{modifyUrl:false,addUrl:false,delUrl:false,updateIdOnAdd:true,shareParams:false,setupUrlFromItem:true,isResponseOk:function(a){return CC.util.StoreProvider.isResponseOk&&CC.util.StoreProvider.isResponseOk(a)||true},createAsycQueue:function(a){this[a+"Queue"]=new CC.util.AsynchronizeQueue(this[a+"QueueCfg"]);this[a+"QueueCfg"]&&delete this[a+"QueueCfg"]},getDelQueue:function(){this.delQueue||this.createAsycQueue("del");return this.delQueue},getSaveQueue:function(){this.saveQueue||
this.createAsycQueue("save");return this.saveQueue},mappingUrl:function(a,l){if(a){if(this.shareParams)a=CC.templ(this.shareParams,a,2,true);if(l&&this.setupUrlFromItem)a=CC.templ(l,a,0,true)}return a},getDelUrl:function(a){return this.mappingUrl(this.delUrl,a)},getDelQuery:function(a){var l="";if(a){l=this.itemQueryTempl||"";if(this.shareParams)l=CC.templ(this.shareParams,l,2,true);if(l)l=CC.templ(a,l,0,true)}if(this.shareParams){if(l)l+="&";l+=CC.queryString(this.shareParams)}return l},getSaveUrl:function(a,
l){return this.mappingUrl(l?this.addUrl:this.modifyUrl,a)},onSaveFail:fGo,beforeDel:function(a){return this.t.getValidationProvider().isInvalid(a,"del")===false},del:function(a){if(a&&this.isNew(a)){a.pCt.remove(a);a.destory()}else this.beforeDel(a)!==false&&this.t.fire("store:beforedel",a,this)!==false&&this.onDel(a);return this},delAll:function(){var a=this;this.each(function(){a.del(this)})},delSelection:function(){var a=this;CC.each(this.t.getSelectionProvider().getSelection(),function(){a.del(this)})},
onDel:function(a){CC.Ajax.connect({url:this.getDelUrl(a),method:"POST",data:this.getDelQuery(a),caller:this,success:function(l){if(this.isResponseOk(l)){this.afterDel(a);this.t.fire("store:afterdel",a,l,this)}else l.failure.call(l.caller,l)},failure:function(l){this.onDelFail(a,l);this.t.fire("store:delfail",a,l,this)},onfinal:function(){this.getDelQueue().decrease()}});this.getDelQueue().increase()},onDelFail:fGo,afterDel:function(a){if(a){a.pCt.remove(a);a.destory()}},save:function(a){var l=this.isNew(a);
this.isModified(a)&&this.beforeSave(a,l)!==false&&this.t.fire("store:beforesave",a,l,this)!==false&&this.onSave(a,l);return this},each:function(a){var l=this;this.filterChanged?this.t.each(function(){l.isModified(this)&&a.apply(this,arguments)}):CC.util.StoreProvider.prototype.each.apply(this,arguments)},saveAll:function(a){if(!a)if(this.t.getValidationProvider().validateAll()!==true)return this;var l=this;this.each(function(){l.save(this,true)});return this},createNew:function(a,l){a=this.t.instanceItem(a);
this.decorateNew(a,true);this.t.layout.add(a);l&&a.scrollIntoView(this.t.getScrollor());return a},beforeSave:function(a){return this.t.getValidationProvider().isInvalid(a,"save")===false},onSave:function(a,l){CC.Ajax.connect({url:this.getSaveUrl(a,l),method:"POST",caller:this,data:this.queryString(a),success:function(m){if(this.isResponseOk(m)){this.decorateModified(a,false);l&&this.decorateNew(a,false);this.afterSave(a,l,m);this.t.fire("store:aftersave",a,l,m,this)}else m.failure.call(m.caller,m)},
failure:function(m){this.onSaveFail(a,l,m);this.t.fire("store:savefail",a,l,m,this)},onfinal:function(){this.getSaveQueue().decrease()}});this.getSaveQueue().increase()},afterSave:function(a,l,m){if(l&&this.updateIdOnAdd)a.id=this.getCreationId(m)},getCreationId:function(a){return(a.getText()||"").trim()},decorateNew:function(a,l){if(a)a.newed=l;return this},decorateModified:function(a,l){if(a)a.modified=l;return this},isModified:function(a){return a?a.modified:false},isModifiedAll:function(){var a=
this,l=false;this.each(function(){if(a.isModified(this)){l=true;return false}});return l},isNew:function(a){return a?a.newed:false},itemQueryTempl:false,queryString:function(a){var l="";if(a){l=this.itemQueryTempl||"";if(this.shareParams)l=CC.templ(this.shareParams,l,2,true);if(l)l=CC.templ(a,l,0,true);l=this.getItemQuery(a,l)}if(this.shareParams)if(l)l+="&";l+=CC.queryString(this.shareParams);return l},getItemQuery:fGo});
CC.util.Validators={NoEmpty:function(a){if(!a||a.trim()=="")return"\u8be5\u9879\u4e0d\u80fd\u4e3a\u7a7a";return true},Mail:function(a){return!CC.isMail(a)?"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e":true}};
(function(){var a=window.CC,l=a.ui,m=l.ContainerBase,g=a.layout.Layout.prototype,h=window.Math,i=a.util.dd.Mgr,b;a.Tpl.def("CC.ui.BorderLayoutSpliter",'<div class="g-layout-split"></div>').def("CCollapseBarH",'<table cellspacing="0" cellpadding="0" border="0" class="g-layout-split"><tr><td class="cb-l"></td><td class="cb-c"><div class="expander" id="_expander"><a class="nav" id="_navblock" href="javascript:fGo()"></a></div></td><td class="cb-r"></td></tr></table>').def("CCollapseBarV",'<table cellspacing="0" cellpadding="0" border="0" class="g-layout-split"><tr><td class="cb-l"></td></tr><tr><td class="cb-c"><div class="expander" id="_expander"><a class="nav" id="_navblock" href="javascript:fGo()"></a></div></td></tr><tr><td class="cb-r"></td></tr></table>');
l.BorderLayoutSpliter=a.create(a.Base,function(k){var o;return{type:"CC.ui.BorderLayoutSpliter",ghostCS:"g-layout-sp-ghost",initComponent:function(){this.ct=this.layout.ct.wrapper;if(this.dir=="north"||this.dir=="south")this.dxDisd=true;k.initComponent.call(this);i.installDrag(this,true)},getRestrict:function(){var p=this.layout,u=this.ct,q,w,D=this.dir,A=p[D],F=A.lyInf,C=p.vgap,v=p.hgap,f=F.gap==b?C:F.gap,n=F.gap==b?v:F.gap;F=p.cgap;var t=u.height;u=u.width;switch(D){case "north":w=-1*A.height;q=
t+w-f;if(p=p.south){f=p.lyInf;if(f.cbar&&!f.cbar.hidden){F=f.cgap===b?F:f.cgap;q-=F}if(!p.hidden&&!p.contexted)q-=p.height+(f.gap==b?C:f.gap)}if(q>A.maxH-A.height)q=A.maxH-A.height;if(h.abs(w)>A.height-A.minH)w=-1*(A.height-A.minH);break;case "south":q=A.height;w=-1*t+q+f;if(p=p.north){f=p.lyInf;if(f.cbar&&!f.cbar.hidden){F=f.cgap===b?F:f.cgap;w+=F}if(!p.hidden&&!p.contexted)w+=p.height+(f.gap==b?C:f.gap)}if(q>A.height-A.minH)q=A.height-A.minH;if(h.abs(w)>A.maxH-A.height)w=-1*(A.maxH-A.height);break;
case "west":w=-1*A.width;q=u+w-n;if(p=p.east){f=p.lyInf;if(f.cbar&&!f.cbar.hidden){F=f.cgap===b?F:f.cgap;q-=F}if(!p.hidden&&!p.contexted)q-=p.width+(f.gap==b?v:f.gap)}if(q>A.maxW-A.width)q=A.maxW-A.width;if(h.abs(w)>A.width-A.minW)w=-1*(A.width-A.minW);break;case "east":q=A.width;w=-1*u+q+n;if(p=p.west){f=p.lyInf;if(f.cbar&&!f.cbar.hidden){F=f.cgap===b?F:f.cgap;w+=F}if(!p.hidden&&!p.contexted)w+=p.width+(f.gap===b?v:f.gap)}if(q>A.width-A.minW)q=A.width-A.minW;if(h.abs(w)>A.maxW-A.width)w=-1*(A.maxW-
A.width);break}return D==="west"||D==="east"?[q,w,0,0]:[0,0,q,w]},applyGhost:function(p){var u=this.splitGhost;if(!u)u=this.splitGhost=this.$$(a.$C({tagName:"DIV",className:this.ghostCS}));if(p){this.copyViewport(u);o=[u.left,u.top];u.appendTo(this.ct)}else u.del();return u},beforedrag:function(){this.applyGhost(true);i.setBounds(this.getRestrict());i.resizeHelper.applyMasker(true);i.resizeHelper.masker.fastStyleSet("cursor",this.fastStyle("cursor"))},drag:function(){var p=i.getDXY();i.getIEXY();
this.dxDisd?this.splitGhost.setTop(o[1]+p[1]):this.splitGhost.setLeft(o[0]+p[0])},dragend:function(){var p=this.layout[this.dir],u=i.getDXY(),q=p.lyInf;u=this.dxDisd?this.dir==="north"?p.height+u[1]:p.height-u[1]:this.dir==="west"?p.width+u[0]:p.width-u[0];if(q.autoCollapseWidth!==false&&u<=(q.autoCollapseWidth||40))this.layout.collapse(p,true);else{this.dxDisd?p.setHeight(u):p.setWidth(u);this.layout.doLayout()}},afterdrag:function(){this.applyGhost(false);i.resizeHelper.applyMasker(false);i.resizeHelper.masker.fastStyleSet("cursor",
"")}}});l.BorderLayoutCollapseBar=a.create(m,{type:"CC.ui.BorderLayoutCollapseBar",hidden:true,innerCS:"g-layout-cbar",ct:"_expander",compContextedCS:"g-layout-contexted",sliperCS:"g-layout-sliper g-f1",navBlockCS:{east:"g-nav-block-l",west:"g-nav-block-r",south:"g-nav-block-u",north:"g-nav-block-d"},initComponent:function(){this.template=this.dir==="south"||this.dir==="north"?"CCollapseBarH":"CCollapseBarV";m.prototype.initComponent.call(this);if(this.dir==="west"||this.dir==="east")this.addClass(this.innerCS+
"-v");this.centerExpander=this.dom("_expander");this.navBlock=this.dom("_navblock");a.fly(this.navBlock).addClass(this.navBlockCS[this.dir]).unfly();this.domEvent("mousedown",this.onBarClick,true).domEvent("mousedown",this.onNavBlockClick,true,null,this.navBlock);this.sliperEl=a.$C({tagName:"A",className:this.sliperCS,href:"javascript:fGo()"});this.comp.append(this.sliperEl);this.comp.domEvent("click",this.sliperAction,false,null,this.sliperEl)},destory:function(){this.sliperEl=this.navBlock=this.centerExpander=
null;this.compShadow&&this.compShadow.destory();m.prototype.destory.call(this)},sliperAction:function(){this.pCt.layout.collapse(this,true)},onNavBlockClick:function(){var k=this.comp;k.setXY(1E4,1E4);k.contexted&&k.releaseContext();this.itsLayout.collapse(k,false)},makeFloat:function(){var k=this.comp;k.addClass(this.compContextedCS).show();this.setCompContextedBounds();var o=k.absoluteXY();k.appendTo(document.body).setXY(o);k.collapse&&k.collapsed&&k.collapse(false);this.getShadow().attach(k).display(true);
k=k.lyInf;if(!k.cancelAutoHide){this.resetAutoHideTimer();k.autoHideTimer=this.onTimeout.bind(this).timeout(k.autoHideTimeout||5E3)}},getShadow:function(){var k=this.compShadow;if(!k)k=this.compShadow=l.instance("shadow",{inpactH:9,inpactY:-2,inpactX:-4,inpactW:10});return k},onTimeout:function(){var k=this.comp;k.contexted?k.releaseContext():this.unFloat();this.resetAutoHideTimer()},resetAutoHideTimer:function(){var k=this.comp.lyInf;if(k.autoHideTimer){clearTimeout(k.autoHideTimer);delete k.autoHideTimer}},
unFloat:function(){var k=this.comp;k.lyInf.autoHideTimer&&this.resetAutoHideTimer();k.pCt._addNode(k.view);k.delClass(this.compContextedCS);this.getShadow().detach()},onCompReleaseContext:function(){this.pCt.layout.cfgFrom(this).cbar.unFloat()},onBarClick:function(){var k=this.comp;if(k.contexted)k.releaseContext();else{k.bindContext(this.onCompReleaseContext,true,null,null,this.navBlock,this.navBlockCS[this.dir]+"-on");this.makeFloat()}},setCompContextedBounds:function(){var k=this.comp,o=this.dir;
if(o==="west")k.setBounds(this.left+this.width+1,this.top,false,this.height);else if(o==="east")k.setBounds(this.left-k.width-1,this.top,false,this.height);else o==="north"?k.setBounds(this.left,this.top+this.height+1,this.width,false):k.setBounds(this.left,this.top-k.height-1,this.width,false)},setSize:function(){m.prototype.setSize.apply(this,arguments);var k;if(this.dir==="north"||this.dir==="south"){k=h.max(0,this.width-6)+"px";this.centerExpander.style.width=k;if(a.ie)this.centerExpander.parentNode.style.width=
k}else{k=h.max(0,this.height-6)+"px";this.centerExpander.style.height=k;if(a.ie)this.centerExpander.parentNode.style.height=k}}});a.create("CC.layout.BorderLayout",a.layout.Layout,{hgap:5,vgap:5,cgap:32,cpgap:5,wrCS:"g-borderlayout-ct",itemCS:"g-borderlayout-item",separatorVCS:"g-ly-split-v",separatorHCS:"g-ly-split-h",add:function(k,o){g.add.call(this,k,o);var p,u;if(!o)o=k.lyInf;p=o.dir;u=o.split;p||(p="center");this[p]=k;if(u&&p!=="center"){u=o.separator=new l.BorderLayoutSpliter({dir:p,layout:this});
u.addClass(p==="west"||p==="east"?this.separatorVCS:this.separatorHCS);u.appendTo(this.ct.ct).show()}k.addClass(this.itemCS+"-"+(p||"center"));o.collapsed===b?this.doLayout():this.collapse(k,o.collapsed);return this},getCollapseBar:function(k){var o,p;o=k.lyInf;p=o.cbar;if(!p&&!o.noSidebar){p=o.cbar=new l.BorderLayoutCollapseBar({dir:o.dir,comp:k,itsLayout:this,autoRender:true});p.addClass(p.innerCS+"-"+o.dir).appendTo(this.ct.ct)}return p},collapse:function(k,o){var p=this.getCollapseBar(k),u=k.lyInf;
u.collapsed=o;u.separator&&u.separator.display(!o);k.collapse&&k.collapse(o);p&&p.display(o);k.display(!o);this.doLayout()},onLayout:function(){g.onLayout.call(this);var k=this.ct.wrapper,o=k.getWidth(true);k=k.getHeight(true);var p=0,u=0,q=this.north,w,D,A=this.vgap,F=this.cgap,C=this.cpgap,v=C+C,f=this.hgap,n,t;if(q){n=q.lyInf;if((w=n.cbar)&&!w.hidden){t=n.cgap===b?F:n.cgap;w.setBounds(p+C,u+C,o-v,t-v);t=n.cgap===b?F:n.cgap;u+=t}if(!q.hidden&&!q.contexted){w=q.getHeight(true);q.setBounds(p,u,o,
q.height);u+=w;t=n.gap===b?A:n.gap;(D=n.separator)&&D.setBounds(p,u,o,t);u+=t}q.contexted&&q.releaseContext()}if(q=this.south){n=q.lyInf;if((w=n.cbar)&&!w.hidden){t=n.cgap===b?F:n.cgap;k-=t;w.setBounds(p+C,k+C,o-v,t-v)}if(!q.hidden&&!q.contexted){w=q.getHeight(true);k-=w;q.setBounds(p,k,o,q.height);t=n.gap===b?A:n.gap;D=n.separator;k-=t;D&&D.setBounds(p,k,o,t)}q.contexted&&q.releaseContext()}k-=u;if(q=this.east){n=q.lyInf;if((w=n.cbar)&&!w.hidden){t=n.cgap===b?F:n.cgap;o-=t;w.setBounds(o+C,u,t-v,
k)}if(!q.hidden&&!q.contexted){w=q.getWidth(true);o-=w;q.setBounds(o,u,q.width,k);D=n.separator;t=n.gap===b?f:n.gap;o-=t;D&&D.setBounds(o,u,t,k)}q.contexted&&q.releaseContext()}if(q=this.west){n=q.lyInf;if((w=n.cbar)&&!w.hidden){t=n.cgap===b?F:n.cgap;w.setBounds(p+C,u,t-v,k);p+=t;o-=t}if(!q.hidden&&!q.contexted){w=q.getWidth(true);q.setBounds(p,u,q.width,k);p+=w;t=n.gap===b?f:n.gap;D=n.separator;o-=w+t;D&&D.setBounds(p,u,t,k);p+=t}q.contexted&&q.releaseContext()}(q=this.center)&&q.setBounds(p,u,o,
k)},remove:function(k){var o=k.lyInf;delete this[o.dir];var p=o.separator;if(p){p.destory();delete o.separator}if(p=o.cbar){p.destory();delete o.cbar}g.remove.apply(this,arguments)},detach:function(){var k=this;this.invalidated=true;a.each(["east","south","west","north","center"],function(){k[this]&&k.remove(k[this])});g.detach.call(this)}});a.layout.def("border",a.layout.BorderLayout)})();
(function(){var a=CC.layout,l=a.Layout,m=l.prototype,g=window.Math,h=CC.Base;CC.create("CC.layout.CardLayout",l,{wrCS:"g-card-ly-ct",layoutChild:function(i){var b=this.ct.wrapper.getContentSize(true);i.rendered?i.setSize(b[0],b[1]):h.prototype.setSize.apply(i,b)}});a.def("card",a.CardLayout);CC.create("CC.layout.QQLayout",l,{wrCS:"g-card-ly-ct",beforeAdd:function(i,b){i.fastStyleSet("position","absolute").setLeft(0);if(b&&b.collapsed===false){i.collapse(false);this.frontOne=i}else i.collapse(true);
m.beforeAdd.apply(this,arguments)},onLayout:function(){m.onLayout.apply(this,arguments);var i=this.frontOne,b=this.ct,k=b.wrapper.height,o=b.wrapper.width,p,u,q,w,D=b.children;w=b.size();for(q=p=0;p<w;p++){u=D[p];if(!u.hidden){if(u==i)break;u.setBounds(false,q,o,u.minH);k-=u.height;q+=u.height}}i&&i.setTop(q);w=w-1;for(q=b.wrapper.height;w>p;w--){u=D[w];q-=u.minH;u.setBounds(false,q,o,u.minH);k-=u.height}i&&i.setSize(o,k)},collapse:function(i,b){var k=i.lyInf,o=this.frontOne;if(k.collapsed!==b){if(o&&
o!==i){o.collapse&&o.collapse(true);o.lyInf.collapsed=true}i.collapse&&i.collapse(b);this.frontOne=(k.collapsed=b)?null:i;this.doLayout();this.ct.fire("collapsed",i,b)}}});a.def("qq",a.QQLayout);CC.create("CC.layout.RowLayout",l,{wrCS:"g-row-ly",onLayout:function(){var i=this.ct.wrapper,b=i.getWidth(true);i=i.getHeight(true);var k,o,p,u=this.ct.children,q,w,D=[];k=0;for(o=u.length;k<o;k++){p=u[k];if(!p.hidden){q=p.lyInf;switch(q.h){case "auto":case undefined:i-=p.getHeight();break;case "lead":D[D.length]=
p;break;default:w=q.h;if(CC.isNumber(w))if(w>=1){p.setHeight(w);i-=p.height}else if(w>=0){w=g.floor(w*i);p.setHeight(w);i-=p.height}}q=q.w;if(q===undefined)p.setWidth(b);else q<1&&p.setWidth(g.floor(q*b))}}k=0;for(o=D.length;k<o;k++){p=D[k];q=p.lyInf;w=q.len;w=CC.isNumber(w)?g.floor(w*i):g.floor(i/(o-k));p.setHeight(w);i-=p.height}k=0;for(o=u.length;k<o;k++){p=u[k];p.rendered||p.render()}}});a.RowLayout.prototype.layoutChild=a.RowLayout.prototype.onLayout;a.def("row",a.RowLayout);CC.create("CC.layout.TableLayout",
l,{attach:function(i){this._items=i.lyCfg&&i.lyCfg.items;i._addNode=i._removeNode=fGo;m.attach.apply(this,arguments)},fromArray:function(i){var b=i.length,k,o,p,u=[];for(k=0;k<b;k++){p=i[k];if(CC.isArray(p))for(o=0;o<p.length;o++)p[o]&&p[o].ctype&&u.push(p[o]);else p&&p.ctype&&u.push(p)}m.fromArray.call(this,u)},onLayout:function(){if(!this.layouted){m.onLayout.apply(this,arguments);this.layouted=true;var i=this.tableEl,b=this.tableEl=CC.$C("TABLE"),k=this.ct;b.className="g-ly-tbl";if(this.tblCs){CC.fly(b).addClass(this.tblCs).unfly();
delete this.tblCs}i&&h.applyOption(b,i);if(this.group){var o=this.group,p=CC.$C("COLGROUP"),u=o.cols,q;for(i=0;i<u;i++){q=CC.$C("COL");o[i]&&h.applyOption(q,o[i]);p.appendChild(q)}delete this.group;b.appendChild(p)}o=CC.$C("TBODY");if(p=this._items){u=p.length;q=k.children;var w,D,A,F,C,v,f,n;for(D=i=0;i<u;i++){r=p[i];C=CC.$C("TR");if(CC.isArray(r)){w=0;for(F=r.length;w<F;w++)if(A=r[w]){f=A.td;n=A.ctype;if(!f&&!n)h.applyOption(C,A);else{v=CC.$C("TD");v.className="tbl-td";A.tdcs&&CC.fly(v).addClass(A.tdcs).unfly();
if(f){if(f.cols){v.colSpan=f.cols;delete f.cols}h.applyOption(v,f)}if(n){A=q[D++];v.appendChild(A.view)}C.appendChild(v)}}else{v=CC.$C("TD");v.className="tbl-td";C.appendChild(v)}}else{v=CC.$C("TD");if(r.td){f=r.td;if(f.cols){v.colSpan=f.cols;delete v.cols}h.applyOption(v,f)}r.tr&&h.applyOption(C,r.tr);if(r.ctype){A=q[D++];v.appendChild(A.view)}C.appendChild(v)}o.appendChild(C)}}b.appendChild(o);k.wrapper.append(b);delete this._items}}});CC.layout.def("table",CC.layout.TableLayout)})();
CC.create("CC.layout.TablizeLayout",CC.layout.Layout,{attach:function(a){var l=this;this.tableEl=CC.Tpl.forNode('<table class="g-ly-tablize"><tr id="_tr"></tr></table>');this.trEl=CC.$("_tr",this.tableEl);a._addNode=function(m){var g=CC.$C("TD");g.className="tblly-td";g.appendChild(m);l.trEl.appendChild(g)};a.wrapper.append(this.tableEl);CC.layout.Layout.prototype.attach.apply(this,arguments)},add:function(a){CC.layout.Layout.prototype.add.apply(this,arguments);if(a.lyInf&&a.lyInf.separator){this.addSeparator();
delete a.lyInf.separator}},onLayout:function(){if(!this.layouted){this.layouted=true;CC.layout.Layout.prototype.onLayout.apply(this,arguments)}},addSeparator:function(){this.trEl.appendChild(CC.$C({tagName:"TD",innerHTML:'<span class="tblly-sep"> | </span>',className:"tblly-td"}))}});CC.layout.def("tablize",CC.layout.TablizeLayout);CC.Tpl.def("CC.ui.TabItemLayout",'<div class="g-panel"><div class="auto-margin" id="_margin"><a href="javascript:fGo()" id="_rigmov" class="auto-rigmov" style="right:0px;"></a><a href="javascript:fGo()" style="left:0px;" id="_lefmov" class="auto-lefmov"></a><div class="auto-scrollor" id="_scrollor" tabindex="1" hidefocus="on"><div class="auto-offset" id="_wrap"></div></div></div></div>');
CC.create("CC.ui.tab.TabItemLayout",CC.layout.Layout,function(a){return{layoutOnChange:true,horizonMargin:5,navLeftWidth:24,navRightWidth:24,ctCS:"g-autoscroll-ly",disabledLeftNavCS:"g-disabled auto-lefmov-disabled",disabledRightNavCS:"g-disabled auto-rigmov-disabled",navPanelCS:"g-mov-tab",getMargins:function(){return[this.marginLeft||this.horizonMargin,this.marginRight||this.horizonMargin]},attach:function(l){a.attach.call(this,l);var m=l.dom("_margin").style,g=this.getMargins();m.marginLeft=g[0]+
"px";m.marginRight=g[1]+"px";this.scrollor=l.$$("_scrollor");m=this.lefNav=l.$$("_lefmov");l=this.rigNav=l.$$("_rigmov");m.disabledCS=this.disabledLeftNavCS;l.disabledCS=this.disabledRightNavCS;this.attachEvent()},attachEvent:function(){var l=this.lefNav,m=this.rigNav;this.ct.on("remove",this.onStructureChange,this).on("closed",this.onStructureChange,this).domEvent("mousedown",this.onNavMousedown,true,this,l.view).domEvent("mouseup",this.onNavMouseup,true,this,l.view).domEvent("mousedown",this.onNavMousedown,
true,this,m.view).domEvent("mouseup",this.onNavMouseup,true,this,m.view)},onStructureChange:function(){this.hasLeft()&&!this.hasRight()&&this.requireMoreSpace();this.doLayout()},getDirFromEvent:function(l){return this.lefNav.view.id===CC.Event.element(l).id?"l":"r"},scrollToNext:function(l,m){var g=this.getNextHiddenItem(l);if(g){this.scrollItemIntoView(g);if(!m)this.mousedownTimer=arguments.callee.bind(this,l).timeout(300)}else{clearTimeout(this.mousedownTimer);this.mousedownTimer=null}},scrollItemIntoView:function(l){if(!l)l=
this.ct.selectionProvider.selected;if(l){l=this.getScrollIntoViewDelta(l);if(l!==0){__debug&&console.log("scroll delta:"+l);this.setScrollLeft(this.getScrollLeft()+l)}this.checkStatus()}},onNavMousedown:function(l){this.mousedownTimer=this.scrollToNext.bind(this,this.getDirFromEvent(l)).timeout(300)},onNavMouseup:function(l){if(this.mousedownTimer){clearTimeout(this.mousedownTimer);this.mousedownTimer=null}this.scrollToNext(this.getDirFromEvent(l),true)},add:function(l){l.scrollIntoView=this.scrollItemIntoView.bind(this);
a.add.apply(this,arguments)},getScrollViewWidth:function(){return this.scrollor.view.clientWidth},getScrollLeft:function(){return parseInt(this.scrollor.view.scrollLeft,10)||0},setScrollLeft:function(l){this.scrollor.view.scrollLeft=l},hasLeft:function(){return this.scrollor.view.scrollLeft>0},hasRight:function(){return this.ct.size()>0&&this.getScrollRigthLength(this.ct.children[this.ct.size()-1])>0},getScrollLeftLength:function(l){return this.getScrollLeft()-l.view.offsetLeft},getScrollRigthLength:function(l){var m=
this.getScrollViewWidth(),g=this.getScrollLeft();return l.view.offsetLeft+l.view.offsetWidth-g-m},getScrollIntoViewDelta:function(l){var m=this.getScrollLeftLength(l);__debug&&console.log("scroll left dx:",m);if(m>0)return-1*m;m=this.getScrollRigthLength(l);__debug&&console.log("scroll right dx:",m);return m>0?m:0},requireMoreSpace:function(){var l=this.getNextHiddenItem("l");l&&this.scrollItemIntoView(l)},getLastVisibleItem:function(){var l=this.ct.children,m=0;for(m=l.length-1;m>=0;m--)if(!l[m].hidden&&
this.getScrollRigthLength(l[m])<=0)return l[m]},getNextHiddenItem:function(l){var m=this.ct.children,g=0,h=m.length;if(l==="l")for(;g<h;g++){l=m[g];if(!l.hidden)if(this.getScrollLeftLength(l)<=0)return m[g-1]}else for(g=h-1;g>=0;g--){l=m[g];if(!l.hidden)if(this.getScrollRigthLength(l)<=0)return m[g+1]}},fixIEOnLayout:function(l){var m=this.ct,g=this.getMargins();l=(l||m.getWidth(true))-g[0]-g[1];m.fly("_margin").setWidth(l).unfly();l-=this.navLeftWidth+this.navRightWidth;this.scrollor.setWidth(l)},
onLayout:function(l){__debug&&console.group("TabItem\u5e03\u5c40("+this.ct+")");a.onLayout.apply(this,arguments);var m=this.ct.selectionProvider.selected;CC.ie&&this.fixIEOnLayout(l);if(l!==undefined){var g=false;if(this.preWidth===undefined)this.preWidth=l;else g=l-this.preWidth;this.preWidth=l;if(g)if(g>0)this.hasRight()||this.setScrollLeft(this.getScrollLeft()-g)}m?this.scrollItemIntoView(m):this.checkStatus();__debug&&console.groupEnd()},checkStatus:function(){var l=this.ct,m=!this.hasLeft(),
g=!this.hasRight();__debug&&console.log("checking nav disabled,","hasL:",!m,"hasR:",!g);this.lefNav.disable(m);this.rigNav.disable(g);l.checkClass(this.navPanelCS,!m||!g)}}});CC.layout.def("tabitem",CC.ui.tab.TabItemLayout);
(function(){var a=window.CC,l=a.Base.prototype;a.Tpl.def("CC.ui.Shadow",a.ie6?'<div class="g-dxshadow"></div>':'<div class="g-shadow" style="display:none;"><div class="g-shadow-t" id="_t"></div><div class="g-shadow-lt" id="_lt"></div><div class="g-shadow-rt" id="_rt"></div><div class="g-shadow-l" id="_l"></div><div class="g-shadow-lb" id="_lb"></div><div class="g-shadow-r" id="_r"></div><div class="g-shadow-rb" id="_rb"></div><div class="g-shadow-b" id="_b"></div></div>');a.create("CC.ui.Shadow",
a.Base,{inpactW:8,inpactH:0,inpactX:-4,inpactY:4,shadowWidth:6,offset:4,hidden:true,target:false,initComponent:function(){l.initComponent.call(this);this.target&&this.attach(this.target);if(a.ie&&!a.ie6){this.shadowR=this.dom("_r");this.shadowB=this.dom("_b");this.shadowL=this.dom("_l");this.shadowT=this.dom("_t")}},attach:function(m){this.target=m;this.target.eventable&&this.target.on("resized",this.reanchor,this).on("reposed",this.reanchor,this);this.setZ((this.target.fastStyle("zIndex")||1)-1);
if(a.ie6){this._ie6OffDt=Math.floor(this.offset/2);this.view.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"}return this},detach:function(){if(this.target.eventable){this.target.un("resized",this.reanchor,this);this.target.un("reposed",this.reanchor,this)}this.target=null;this.display(false);return this},setRightSize:a.ie6?function(m,g){m!==false&&this.setWidth(m-this.offset-this._ie6OffDt+this.inpactW-1);g!==false&&
this.setHeight(g-this.offset-this._ie6OffDt+this.inpactH)}:function(m,g){if(m!==false){m+=this.inpactW;m!=this.width&&this.setWidth(m)}if(g!==false){g+=this.inpactH;g!=this.height&&this.setHeight(g)}if(a.ie){var h=a.fly(this.shadowR),i=this.shadowWidth*2;if(g!==false){g=g-i;h.setHeight(g);h.view=this.shadowL;h.setHeight(g)}if(m!==false){g=m-i;h.view=this.shadowB;h.setWidth(g);h.view=this.shadowT;h.setWidth(g)}h.unfly()}},setRightPos:a.ie6?function(m){m[0]+=this.inpactX-this._ie6OffDt+1;m[1]+=this.inpactY-
this._ie6OffDt;this.setXY(m)}:function(m){this.setXY(m[0]+this.inpactX,m[1]+this.inpactY-1)},reanchor:function(){var m=!this.hidden;d=this.target.getSize(true);this.setRightSize(d.width,d.height);this.setRightPos(this.target.absoluteXY());m&&l.display.call(this,true);return this},display:function(m){if(m===undefined)return l.display.call(this);if(m=m&&this.target&&!this.target.hidden){this.reanchor();this.appendTo(document.body)}else this.del();return l.display.call(this,m)}});a.ui.def("shadow",a.ui.Shadow)})();
(function(){var a=window.CC,l=a.Base.prototype;a.Tpl.def("CC.ui.Loading",'<div class="g-loading"><div class="g-loading-indicator"><span id="_tle">\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u5019...</span></div></div>');a.create("CC.ui.Loading",a.Base,{loadMaskCS:"g-loading-mask",initComponent:function(){l.initComponent.call(this);this.target&&this.attach(this.target)},attach:function(m){this.target=m;this.target.on("open",this.whenOpen,this).on("send",this.whenSend,this).on("success",this.whenSuccess,this).on("final",
this.whenFinal,this)},whenSend:fGo,whenSuccess:function(){this.target.loaded=true},whenOpen:function(){this.target.busy=true;this.markIndicator()},whenFinal:function(){this.target.busy=false;this.loaded=true;this.stopIndicator();this.target.shadow&&this.target.shadow.reanchor()},targetLoadCS:false,maskDisabled:false,loadMsgDisabled:false,markIndicator:function(){if(!this.disabled){this.targetLoadCS&&a.fly(this.target).addClass(this.targetLoadCS).unfly();if((!this.mask||!this.mask.tagName)&&!this.maskDisabled)this.mask=
a.$C({tagName:"DIV",className:this.loadMaskCS});this.mask&&!this.maskDisabled&&this.target.wrapper.append(this.mask).unfly();this.loadMsgDisabled||this.target.wrapper.append(this)}},stopIndicator:function(){this.targetLoadCS&&a.fly(this.target).delClass(this.targetLoadCS).unfly();if(!this.maskDisabled){this.mask&&this.mask.parentNode&&this.mask.parentNode.removeChild(this.mask);this.del()}},isBusy:function(){return this.target.busy},isLoaded:function(){return this.target.loaded}});a.ui.def("loading",
a.ui.Loading)})();
CC.create("CC.ui.Mask",CC.Base,{innerCS:"g-modal-mask",template:"div",onactive:null,initComponent:function(){CC.Base.prototype.initComponent.call(this);this.target&&this.attach(this.target);this.domEvent("mousedown",this.onMaskResponsed,true)},onMaskResponsed:function(){this.fire("active",this);this.onactive&&this.onactive()},attach:function(a){this.target=a=a||CC.$body;a.eventable&&a.on("resized",this.onTargetResized,this);var l=CC.fly(a);if(a===CC.$body||a===document.body){CC.$body.domEvent("resize",this.onWindowResize,
false,this,window);this.onWindowResize()}else this.setSize(l.getSize());this.setXY(0,0);l.unfly();this.appendTo(a);return this},detach:function(){var a=this.target;if(a===CC.$body||a===document.body)CC.$body.unEvent("resize",this.onWindowResize,window);a.eventable&&a.un("resized",this.onTargetResized);this.del();this.target=null;return this},onTargetResized:function(a,l,m,g){this.setSize(m,g)},onWindowResize:function(){this.setSize(CC.getViewport())},destory:function(){this.target&&this.detach();
CC.Base.prototype.destory.call(this)}});
CC.create("CC.ui.Viewport",CC.ui.Panel,{bodyCS:"g-viewport-body",cs:"g-viewport",mg:[0,0,0,0],initComponent:function(){this.showTo=document.body;if(!this.view)this.view=CC.$C("DIV");CC.Event.on(window,"resize",this.onWindowResize.bind(this));CC.ui.Panel.prototype.initComponent.call(this);CC.$body.addClass(this.bodyCS);this.onWindowResize()},onWindowResize:function(){var a=CC.getViewport(),l=0,m=0,g=this.mg;l=g[1];m=g[2];a.width-=g[1]+g[3];a.height-=g[0]+g[2];if(this.maxW<a.width){g=a.width-this.maxW;
l+=Math.floor(g/2);a.width-=g}if(this.maxH<a.height){g=a.height-this.height;m+=Math.floor(g/2);a.height-=g}this.setBounds(l,m,a.width,a.height)}});CC.ui.def("viewport",CC.ui.Viewport);CC.Tpl.def("CC.ui.FolderItem",'<li class="g-unsel"><b id="_ico" class="icos"></b><a id="_tle" class="g-tle"></a></li>').def("CC.ui.Folder",'<div class="g-folder g-grp-bdy"><div class="g-grp-bdy" id="_scrollor"><ul id="_bdy" tabindex="1" hidefocus="on"></ul></div></div>');
CC.create("CC.ui.Folder",CC.ui.ContainerBase,{itemCfg:{template:"CC.ui.FolderItem",hoverCS:"on",icon:"icoNote",blockMode:2},keyEvent:true,ct:"_bdy",clickEvent:true,useContainerMonitor:true,template:"CC.ui.Folder",selectionProvider:true});CC.ui.def("folder",CC.ui.Folder);CC.Tpl.def("CC.ui.Button",'<table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="g-btn-l"><i>&nbsp;</i></td><td class="g-btn-c"><em unselectable="on"><button type="button" class="g-btn-text" id="_tle"></button></em></td><td class="g-btn-r"><i>&nbsp;</i></td></tr></tbody></table>');
CC.create("CC.ui.Button",CC.Base,function(a){return{iconNode:"_tle",focusNode:"_tle",hoverCS:"g-btn-over",clickCS:"g-btn-click",iconCS:"g-btn-icon",focusCS:"g-btn-focus",tip:false,disableNode:"_tle",innerCS:"g-btn",blockMode:"",_onclick:function(){this.onclick&&this.onclick.call(this)},initComponent:function(){a.initComponent.call(this);if(!this.title||this.title=="")this.addClass(this.noTxtCS||"g-btn-notxt");this.element=this.dom("_tle");this.domEvent("mousedown",this._gotFocus);this.domEvent("click",
this._onclick);this.focusCS&&this.bindFocusStyle(this.focusCS);this.dockable&&this.docked&&this.setDocked(true)},setDocked:function(l){this.docked=l;this.checkClass(this.clickCS,l);return this},_gotFocus:function(){try{this.element.focus()}catch(l){}},mouseupCallback:function(){if(this.dockable)return this.docked=!this.docked}}});
CC.create("CC.ui.DropButton",CC.ui.Button,{downCS:"g-btn-dwn",_onclick:function(a){this.array&&this.createMenu();if(this.menu){CC.Event.stop(a);this.showMenu(!!this.menu.hidden)}CC.ui.DropButton.superclass._onclick.apply(this,arguments)},showMenu:function(a){if(a){this.menu.at(this,true);this.menu.focus(0)}else this.menu.hide()},decorateDown:function(a){this.checkClass(this.downCS,a)},createMenu:function(a){var l=this;a=CC.extendIf(a||this.menuCfg,{ctype:"menu",array:this.array,width:120,showTo:document.body,
onDisplay:function(m){l.decorateDown(m)}});delete this.array;this.menu=CC.ui.instance(a);this.menu.render()}});CC.ui.def("button",CC.ui.Button);CC.ui.def("dropbutton",CC.ui.DropButton);CC.Tpl["CC.ui.BarItem"]='<table class="g-baritem" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="g-btn-l"><i>&nbsp;</i></td><td class="g-btn-c"><em unselectable="on"><button type="button" class="g-btn-text" id="_tle"></button></em></td><td class="g-btn-r"><i>&nbsp;</i></td></tr></tbody></table>';
CC.Tpl["CC.ui.Toolbar"]='<div class="g-tbar"><div class="g-tbar-wr" id="_wrap"></div></div>';CC.create("CC.ui.Bigbar",CC.ui.Panel,{keyEvent:false,clickEvent:true,syncWrapper:false,itemCfg:{template:"CC.ui.BarItem",hoverCS:"g-baritem-over",downCS:"g-baritem-dwn",innerCS:"g-baritem",clickCS:"g-baritem-click",focusCS:false,title:false},selectionProvider:{autoscroll:false,forceSelect:true},maxH:38,innerCS:"g-bigbar",itemCls:CC.ui.Button,template:"CC.ui.Toolbar"});CC.ui.def("bigbar",CC.ui.Bigbar);
CC.create("CC.ui.BigbarDropButton",CC.ui.DropButton,{template:"CC.ui.BarItem",hoverCS:"g-baritem-over",downCS:"g-baritem-dwn",innerCS:"g-baritem",clickCS:"g-baritem-click",focusCS:false,title:false});CC.ui.def("bigbardropbtn",CC.ui.BigbarDropButton);
CC.create("CC.ui.Smallbar",CC.ui.Panel,{syncWrapper:false,selectionProvider:{autoscroll:false,forceSelect:true},clickEvent:true,itemCfg:{template:"CC.ui.BarItem",hoverCS:"g-smallbar-item-over",downCS:"g-smallbar-item-dwn",clickCS:"g-smallbar-item-click",innerCS:"g-smallbar-item",focusCS:false},maxH:26,innerCS:"g-smallbar",itemCls:CC.ui.Button,template:"CC.ui.Toolbar"});CC.ui.def("smallbar",CC.ui.Smallbar);
CC.create("CC.ui.SmallbarDropButton",CC.ui.DropButton,{template:"CC.ui.BarItem",hoverCS:"g-smallbar-item-over",downCS:"g-smallbar-item-dwn",clickCS:"g-smallbar-item-click",innerCS:"g-smallbar-item",focusCS:false});CC.ui.def("smallbardropbtn",CC.ui.SmallbarDropButton);
(function(){var a=CC.ui.ContainerBase.prototype,l=CC.ui.Panel.prototype;CC.Tpl.def("CC.ui.TabItem",'<table unselectable="on" class="g-unsel g-tab-item"><tbody><tr id="_ctx"><td class="tLe" id="_tLe"></td><td class="bdy"><nobr id="_tle" class="g-tle">\u9009\u53611</nobr></td><td class="btn" id="_btnC"><a href="javascript:fGo()" title="\u5173\u95ed" id="_trigger" class="g-ti-btn"></a></td><td class="tRi" id="_tRi"></td></tr></tbody></table>');CC.create("CC.ui.TabItem",CC.ui.ContainerBase,{hoverCS:false,
closeable:true,unselectable:true,ct:"_ctx",blockMode:2,loadCS:"g-tabitem-loading",initComponent:function(){a.initComponent.call(this);var m=this.cacheBtnNode=this.dom("_btnC");m&&m.parentNode.removeChild(m);this.bindClsEvent();this.closeable!==undefined&&this.setCloseable(this.closeable);this.panel&&this.setContentPanel(this.panel)},addButton:function(m){var g=this.cacheBtnNode.cloneNode(true);m.view=g;g.id=m.id;m.iconNode="_trigger";g=CC.Base.create(m);this.add(g);return g},syncPanelDestory:undefined,
getContentPanel:function(m){var g=this.panel,h;if(!g&&m){g=this.src?new CC.ui.IFramePanel:new CC.ui.Panel;this.setContentPanel(g)}if(g&&!g.pCt){if((ct=this.pCt)&&(h=ct.getContentPanel()))h.layout.add(g);if(this.syncPanelDestory===undefined)this.syncPanelDestory=true}return g},setContentPanel:function(m){this.panel&&delete this.panel.bindingTabItem;m.cacheId||(m=CC.ui.instance(m));this.panel=m;m.bindingTabItem=this;return this},_addNode:function(m){this.buttonOrient!="l"?this.fly("_tRi").insertBefore(m).unfly():
this.fly("_tLe").insertAfter(m).unfly()},onClsClick:function(){this.closeable&&this.pCt.getDisc()>1&&this.pCt.close(this)},bindClsEvent:function(){var m=this.$$(this.closeNode);m||(m=this.addButton({id:"_clsBtn",blockMode:2,icon:"g-ti-clsbtn"}));this.domEvent("click",this.onClsClick,true,null,m.view).domEvent("dblclick",this.onClsClick,true);m.view.onmousedown=CC.Event.noUp},setCloseable:function(m){if(this.cacheBtnNode){this.closeable=m;this.$("_clsBtn").display(m)}else a.setCloseable.call(this,
m);return this},loadType:"html",loadContent:function(m){var g=this.getContentPanel(true);g.getConnectionProvider().loadType=this.loadType||"html";g=g.getConnectionProvider();var h=g.indicator;h||(h=g.getIndicator({markIndicator:this.onIndicatorStart,stopIndicator:this.onIndicatorStop}));if(m||!h.isLoaded()&&!h.isBusy())g.connect(this.src||this.url);return this},onIndicatorStart:function(){var m=this.target.bindingTabItem;m.addClass(m.loadCS)},onIndicatorStop:function(){var m=this.target.bindingTabItem;
m&&m.delClass(m.loadCS)},destory:function(){this.syncPanelDestory&&this.panel&&this.panel.destory();a.destory.call(this)}});CC.ui.def("tabitem",CC.ui.TabItem);CC.create("CC.ui.Tab",CC.ui.Panel,{keyEvent:true,clickEvent:true,template:"CC.ui.TabItemLayout",innerCS:"g-tab",keyEventNode:"_scrollor",selectionProvider:{UP:CC.Event.LEFT,DOWN:CC.Event.RIGHT,tracker:true},syncWrapper:false,maxH:33,itemCls:CC.ui.TabItem,autoLoad:true,destoryItemOnclose:false,lyCfg:{navPanelCS:"g-mov-tab",horizonMargin:5,navLeftWidth:24,
navRightWidth:24},initComponent:function(){l.initComponent.call(this);this.on("selected",this.onItemSelected)},onItemSelected:function(m){if((m.url||m.src)&&this.autoLoad)m.loadContent();var g=this;(function(){var h=g.selectionProvider.previous;h&&h.getContentPanel()&&!h.panel.hidden&&h.panel.hide();g.displayItem(m,true);m.getContentPanel()&&m.panel.show()}).timeout(0)},close:function(m){m=this.$(m);if(m.closeable)if(this.fire("close",m)!==false){this.displayItem(m,0);this.fire("closed",m);if(m.destoryOnClose===
true||this.destoryItemOnclose)m.destory()}},getContentPanel:function(){var m=this.contentPanel;if(typeof m==="string")m=this.contentPanel=CC.Base.find(m);return m},displayItem:function(m,g){m=this.$(m);if(!m.closeable&&!g)return false;m.display(g);var h=this.selectionProvider;if(!g&&h.selected===m){if(h.tracker.size())if(g=h.tracker.pop()){h.select(g);h.tracker.pop();return}m=this.indexOf(m);g=m-1;for(var i=this.children;g>=0&&(i[g].hidden||i[g].disabled);)g--;if(g>=0)h.select(i[g]);else{g=i.length;
for(m+=1;m<g&&(i[m].hidden||i[m].disabled);)m++;m<g&&h.select(i[m])}}},getDisc:function(){for(var m=0,g=this.children,h=0,i=g.length;h<i;h++)g[h].hidden||m++;return m}});CC.ui.def("tab",CC.ui.Tab)})();
CC.ie?CC.Tpl.def("CC.ui.FloatTip",'<table class="g-float-tip g-clear"><tr><td><table class="tipbdy"><tr><td id="_tle" class="important_txt"></td></tr><tr><td id="_msg" class="important_subtxt"></td></tr></table></td></tr><tr><td class="btm_cap" id="_cap"></td></tr></table>'):CC.Tpl.def("CC.ui.FloatTip",'<div class="g-float-tip g-clear"><div class="tipbdy"><div id="_tle" class="important_txt"></div><div id="_msg" class="important_subtxt"></div></div><div class="btm_cap" id="_cap"></div></div>');
CC.create("CC.ui.FloatTip",CC.ui.Panel,function(a){function l(k){i=h.pageXY(k||window.event)}var m=window.CC,g,h=m.Event,i=[-10000,-10000],b=false;m.Util.ftip=function(k,o,p,u,q){g||(g=m.ui.instance({ctype:"tip",showTo:document.body,autoRender:true}));m.fly(g.tail).show().unfly();g.show(k,o,p,u,q);return g};m.Util.qtip=function(k,o){g||(g=new m.ui.FloatTip({showTo:document.body,autoRender:true}));g.tipFor(k,o)};return{timeout:2500,delay:500,reuseable:true,shadow:true,qmode:false,zIndex:10002,hoverTipCS:"g-small-tip",
initComponent:function(){a.initComponent.call(this);this.msg&&this.setMsg(this.msg);this.tail=this.dom("_cap");this.setXY(-10000,-10000).setZ(this.zIndex);this.qmode?this.createQtip():this.createFtip()},display:function(k){k&&this.timerId&&this.killTimer();return a.display.apply(this,arguments)},onShow:function(){a.onShow.call(this);if(this.timeout)this.timerId=this._timeoutCall.bind(this).timeout(this.timeout)},onHide:function(){this.killTimer();a.onHide.call(this);this.setXY(-10000,-10000)},setRightPosForTarget:function(k){k=
m.fly(k);var o=k.absoluteXY();this.anchorPos([o[0],o[1],0,0],"lt","hr",false,true,true);k.unfly()},setRightPosForHover:function(k){this.anchorPos([k[0],k[1],0,0],"lb","hr",[5,24],true,true)},_timeoutCall:function(){a.display.call(this,false);this.killTimer(true);this.ontimeout&&this.ontimeout()},killPretimer:function(){if(this.pretimerId){clearTimeout(this.pretimerId);this.pretimerId=false}},killTimer:function(k){if(this.timerId){clearTimeout(this.timerId);this.timerId=false}!this.reuseable&&k&&this.destory()},
setMsg:function(k,o){this.fly("_msg").html(k).unfly();o&&this.setTitle(o);this.shadow&&!this.shadow.hidden&&this.shadow.reanchor();return this},show:function(k,o,p,u,q){if(arguments.length==0)return a.show.call(this);this.setMsg(k,o);if(q!==undefined)this.timeout=q;this.qmode&&this.createFtip();this.display(true);if(p){this.setRightPosForTarget(p);u&&m.fly(p).focus(true).unfly()}return this},createFtip:function(){this.qmode=false;this.delClass(this.hoverTipCS);if(this.shadow){this.shadow.inpactY=
-1;this.shadow.inpactH=-12}},createQtip:function(){this.qmode=true;this.addClassIf(this.hoverTipCS);if(this.shadow){this.shadow.inpactY=m.ui.Shadow.prototype.inpactY;this.shadow.inpactH=m.ui.Shadow.prototype.inpactH}},tipFor:function(k,o,p){m.fly(k).domEvent("mouseover",function(){var u=this;if(!b){h.on(document,"mousemove",l);b=true}this.pretimerId&&this.killPretimer();this.pretimerId=function(){u.killTimer();u.setMsg(k.qtip||k.tip||k.title||o,p);m.fly(u.tail).hide().unfly();u.qmode||u.createQtip();
u.display(true).setRightPosForHover(i)}.timeout(this.delay)},true,this).domEvent("mouseout",this.onTargetMouseout,true,this).unfly()},onTargetMouseout:function(){this.qmode&&this.display(false);if(b){h.un(document,"mousemove",l);b=false}this.killPretimer()}}});CC.ui.def("tip",CC.ui.FloatTip);CC.Tpl.def("CC.ui.TitlePanel",'<div class="g-panel g-titlepanel"><h3 class="g-titlepanel-hd" id="_tleBar"><a id="_btnFN" class="g-icoFld" href="javascript:fGo()"></a><a id="_tle" class="g-tle" href="javascript:fGo()"></a></h3><div id="_scrollor" class="g-panel-wrap g-titlepanel-wrap"></div></div>');
CC.create("CC.ui.TitlePanel",CC.ui.Panel,function(a){return{unselectable:"_tleBar",ct:"_scrollor",minH:29,openCS:"g-icoOpn",clsCS:"g-icoFld",foldNode:"_btnFN",initComponent:function(){a.initComponent.call(this);this.domEvent("mousedown",this.onTriggerClick,true,null,this.foldNode).domEvent("mousedown",this.onTitleClick,true,null,this.titleNode||"_tle");this.header=this.$$("_tleBar");this.collapsed&&this.collapse(this.collapsed,true)},getWrapperInsets:function(){return[29,0,0,0,29,0]},onTriggerClick:function(){this.collapse(!this.wrapper.hidden,
true)},onTitleClick:function(){this.onTriggerClick()},collapse:function(l,m){this.attr(this.foldNode,"className",l?this.openCS:this.clsCS);this.wrapper.display(!l);this.collapsed=l;this.fire("collapsed",l);if(m&&this.pCt)this.pCt.layout.collapse?this.pCt.layout.collapse(this,l):this.pCt.layout.doLayout();return this}}});CC.ui.def("titlepanel",CC.ui.TitlePanel);CC.Tpl.def("CC.ui.Foldable",'<div class="g-foldable"><div class="g-foldablewrap"><b title="\u9690\u85cf" id="_trigger" class="icos icoCls"></b><div id="_tle"></div></div></div>');
CC.create("CC.ui.Foldable",CC.Base,{clsGroupCS:"g-gridview-clsview",unselectable:true,initComponent:function(){this.createView();CC.Base.prototype.initComponent.call(this);this.domEvent("click",this.foldView,true,null);if(this.array){this.target.fromArray(this.array);delete this.array}},foldView:function(a){var l=CC.fly(this.foldNode?this.target.dom(this.foldNode):this.target.ct||this.target);if(a!==true&&a!==false)a=!l.display();if(this.fire("expand",this,a)===false)l.unfly();else{this.nodeBlockMode!==
undefined&&l.setBlockMode(this.nodeBlockMode);l.display(a).unfly();this.target.shadow&&this.target.shadow.reanchor();this.dom("_trigger").title=a?"\u9690\u85cf":"\u5c55\u5f00";this.checkClass(this.clsGroupCS,!a);this.expanded=a;this.fire("expanded",this,a);return this}},brush:function(a){if(this.target.children)return"<strong>"+a+'</strong><span id="_view_span">(<strong><a id="_view_cnt" href="javascript:fGo();">'+this.target.size()+"</a></strong>)</span>";return a}});CC.ui.def("foldable",CC.ui.Folderable);
CC.create("CC.util.IFrameConnectionProvider",CC.util.ConnectionProvider,{traceLoad:true,indicatorDisabled:true,defaultLoadSuccess:fGo,setTarget:function(a){CC.util.ConnectionProvider.prototype.setTarget.apply(this,arguments);if(a.src||a.url)this.connect(a.src||a.url)},initConnection:function(){if(this.traceLoad)this.t.domEvent(CC.ie?"readystatechange":"load",this.traceFrameLoad,false,this,this.t.getFrameEl());CC.util.ConnectionProvider.prototype.initConnection.apply(this,arguments)},onFrameLoad:function(a){var l=
this.t;try{l.fire("success",this,a);this.success&&this.success(this,a)}catch(m){console.warn(m)}this.onFinal()},traceFrameLoad:function(a){var l=this.t;switch(CC.Event.element(a).readyState||a.type){case "loading":l.busy||l.fire("open",this,a);break;case "load":case "complete":if(!CC.ie||this.url===l.view.src)this.onFrameLoad(a);break}},abort:function(){this.t.getFrameEl().src=CC.ie?"about:blank":"";this.onFinal()},onFinal:function(){this.t.fire("final",this);this["final"]&&this["final"](this,e)},
bindConnector:function(a){this.t.busy&&this.abort();CC.extend(this,a);this.connectInner()},connectInner:function(){this.t.fire("open",this);(function(){try{this.t.getFrameEl().src=this.url}catch(a){__debug&&console.warn(a)}}).bind(this).timeout(0)}});CC.Tpl.def("CC.ui.IFramePanel",'<iframe class="g-framepanel" frameBorder="no" scrolling="auto" hideFocus=""></iframe>');
CC.create("CC.ui.IFramePanel",CC.ui.Panel,{traceResize:false,connectionProvider:CC.util.IFrameConnectionProvider,ct:undefined,onRender:function(){CC.ui.Panel.prototype.onRender.call(this);var a=this.pCt;if(this.traceResize){a.on("resized",this.onContainerResize,this);this.onContainerResize(false,false,a.wrapper.getWidth(true),a.wrapper.getHeight(true))}},getFrameEl:function(){return this.view},onContainerResize:function(a,l){this.setSize(a,l)},$:function(a){return CC.frameDoc(this.view).getElementById(a)}});
CC.ui.def("iframe",CC.ui.IFramePanel);CC.Tpl.def("CC.ui.Resizer",'<div class="g-panel g-resizer"><div class="g-win-e" id="_xe"></div><div class="g-win-s" id="_xs"></div><div class="g-win-w" id="_xw"></div><div class="g-win-n" id="_xn"></div><div class="g-win-sw" id="_xsw"></div><div class="g-win-es" id="_xes"></div><div class="g-win-wn" id="_xwn"></div><div class="g-win-ne" id="_xne"></div><div class="g-panel-wrap g-resizer-wrap" id="_wrap"></div></div>');
CC.create("CC.ui.Resizer",CC.ui.Panel,function(a){var l=window.CC,m=l.util.dd.Mgr,g=m.resizeHelper;return{resizeable:true,enableH:true,enableW:true,unresizeCS:"g-win-unresize",width:500,height:250,minW:12,minH:6,onResizeStart:function(h){if(this.resizeable){var i=this.absoluteXY(),b=this.getSize(true);if(!l.borderBox){b.width-=1;b.height-=1}this.initPS={pos:i,size:b};g.applyResize(true,h.fastStyle("cursor"));g.layer.setXY(i).setSize(b);this.fire("resizestart")}},onResizeEnd:function(){var h=m.getDXY();
if(h[0]===0&&h[1]===0){g.applyResize(false);g.masker.fastStyleSet("cursor","")}else{var i=g.layer.getSize(true);if(!l.borderBox){if(i.width!==0)i.width+=1;if(i.height!==0)i.height+=1}var b=g.layer.xy(),k=this.initPS.pos;h=this.initPS.size;h=[i.width-h.width,i.height-h.height];var o=this.shadow,p=o&&!o.hidden;b[0]-=k[0];b[1]-=k[1];o&&p&&o.hide();this.setXY(this.getLeft(true)+b[0],this.getTop(true)+b[1]).setSize(i);o&&p&&o.show();this.fire("resizeend",b,h);g.applyResize(false,"");delete this.initPS}},
initComponent:function(){a.initComponent.call(this);this.cornerSprites=[];this.resizeable?this.bindRezBehavior():this.setResizable(false)},bindRezBehavior:function(){var h=this.onResizeEnd.bind(this),i=this.createRezBehavior(8),b=this.createRezBehavior(4),k=this.createRezBehavior(2),o=this.createRezBehavior(1),p=this.createRezBehavior("",k,b),u=this.createRezBehavior("",b,o),q=this.createRezBehavior("",i,k),w=this.createRezBehavior("",i,o);this.bindRezTrigger("_xn",i,h).bindRezTrigger("_xs",b,h).bindRezTrigger("_xw",
k,h).bindRezTrigger("_xe",o,h).bindRezTrigger("_xes",u,h).bindRezTrigger("_xsw",p,h).bindRezTrigger("_xwn",q,h).bindRezTrigger("_xne",w,h)},bindRezTrigger:function(h,i,b){var k=this,o=this.cornerSprites[this.cornerSprites.length]=this.$$(h);o.beforedrag=function(){k.onResizeStart(o)};o.drag=i;o.afterdrag=b;o.installDrag(true);return this},createRezBehavior:function(h,i,b){var k=this;return h==4||h==8?function(){if(k.enableH){var o=m.getDXY();k._zoom(h,o[1])}}:h==1||h==2?function(){if(k.enableW){var o=
m.getDXY();k._zoom(h,o[0])}}:function(){i.call(this);b.call(this)}},_zoom:function(h,i){var b=g.layer;if((h&1)!==0){off=this.initPS.size.width+i;off>=this.minW&&b.setWidth(off)}else if((h&2)!==0){off=this.initPS.size.width-i;if(off>=this.minW){b.setWidth(off);off=this.initPS.pos[0]+i;b.setLeft(off)}}if((h&4)!=0){off=this.initPS.size.height+i;off>=this.minH&&b.setHeight(off)}else if((h&8)!=0){off=this.initPS.size.height-i;if(off>=this.minH){b.setHeight(off);off=this.initPS.pos[1]+i;b.setTop(off)}}},
setResizable:function(h){this.checkClass(this.unresizeCS,!h);this.resizeable=h},getWrapperInsets:function(){return[6,1,1,1,7,2]}}});
CC.create("CC.ui.Win",CC.ui.Resizer,function(a){var l=window.CC;l.Tpl.def("CC.ui.win.Titlebar",'<div id="_g-win-hd" class="g-win-hd"><div class="fLe"></div><b class="icoSw" id="_ico"></b><span id="_tle" class="g-tle">\u63d0\u793a</span><div class="fRi"></div><div class="g-win-hd-ct" style="position:absolute;right:5px;top:7px;" id="_ctx"></div></div>');l.Tpl.def("CC.ui.win.TitlebarButton",'<a class="g-hd-btn" href="javascript:fGo();"></a>');var m=900,g=l.util.dd.Mgr,h=g.resizeHelper,i=l.Base.prototype.setXY,
b,k={ctype:"ct",autoRender:true,clickEvent:true,unselectable:true,cancelClickBubble:true,itemCfg:{template:"CC.ui.win.TitlebarButton"},ct:"_ctx",template:"CC.ui.win.Titlebar",selectionProvider:{forceSelect:true,selectedCS:false}},o={ctype:"item",cs:"g-win-clsbtn",template:"CC.ui.win.TitlebarButton",tip:"\u5173\u95ed",id:"_cls"};return{unmoveable:false,closeable:true,shadow:{ctype:"shadow",inpactY:-1,inpactH:5},innerCS:"g-win g-tbar-win",minCS:"g-win-min",maxCS:"g-win-max",minH:30,overflow:false,minW:80,
dragOpacity:0.6,initComponent:function(){var p=l.delAttr(this,"title");a.initComponent.call(this);var u=this.titlebar;if(u)l.extendIf(u,k);else u=k;u.title=p;var q=true;if((p=u.view)&&typeof p==="string"){u.view=this.dom(p);q=false}this.titlebar=l.ui.instance(u.ctype,u);u.view=p;u=this.titlebar;q&&this.addTitlebarNode(u);this.follow(u);delete this.title;this.overflow&&this.wrapper.fastStyleSet("overflow",this.overflow);if(this.closeable===true){if(q=u.clsBtn)l.extendIf(q,o);else q=o;q.onselect=this.onClsBtnClick;
if((p=q.view)&&typeof p==="string")q.view=this.dom(p);this.clsBtn=l.ui.instance(q);q.view=p;u.layout.add(this.clsBtn)}this.destoryOnClose&&this.on("closed",this.destory);this.domEvent("mousedown",this.trackZIndex).domEvent("mousedown",this.trackZIndex,true,null,this.titlebar.view).domEvent("dblclick",this.switchState,true,null,this.titlebar.view);this.unmoveable||g.installDrag(this,true,u.view);this.trackZIndex()},addTitlebarNode:function(p){this.wrapper.insertBefore(p)},dragstart:function(){if(this.unmoveable||
this.fire("movestart")===false)return false;this.shadow&&this.shadow.hide();h.applyMasker(true);this.decorateDrag(true);b=this.xy()},drag:function(){var p=g.getDXY();i.call(this,b[0]+p[0],b[1]+p[1])},dragend:function(){h.applyMasker(false);if(this.fire("moveend")===false){this.setXY(b);this.decorateDrag(false);return false}var p=g.getDXY(),u=b;this.left=this.top=false;this.setXY(u[0]+p[0],u[1]+p[1]);this.decorateDrag(false);b=null},decorateDrag:function(p){p?this.setOpacity(this.dragOpacity).wrapper.hide():
this.setOpacity(1).wrapper.show();this.shadow&&this.shadow.display(!p)},onClsBtnClick:function(){this.pCt.pCt.close()},setTitle:function(p){this.titlebar.setTitle(p);return this},trackZIndex:function(){if(this.zIndex!=m){m+=5;this.setZ(m)}},setZ:function(p){this.fastStyleSet("zIndex",p);for(var u=0,q=this.cornerSprites,w=q.length;u<w;u++)q[u].setZ(p+1);this.shadow&&this.shadow.setZ(p-1);this.zIndex=p;return this},switchState:function(){this.win_s!="max"?this.max():this.normalize()},getWrapperInsets:function(){return[29,
1,1,1,30,2]},setTitle:function(p){if(this.titlebar){this.titlebar.setTitle(p);this.title=p}return this},close:function(){if(this.fire("close")===false)return false;this.onClose();this.fire("closed");return this},onClose:function(){this.display(0)},_markStated:function(p){if(p){if(p=l.delAttr(this,"_normalBounds")){this.setXY(p[0]);this.setSize(p[1]);this.enableH=l.delAttr(this,"_enableH");this.enableW=l.delAttr(this,"_enableW");this.setResizable(l.delAttr(this,"_resizeable"));this.titlebar.draggable=
l.delAttr(this,"_draggable")}}else{this._normalBounds=[this.xy(),this.getSize(true)];this._enableH=this.enableH;this._enableW=this.enableW;this._resizeable=this.resizeable;this._draggable=this.titlebar.draggable}},min:function(){this.setState("min");return this},normalize:function(){return this.setState("normal")},max:function(){return this.setState("max")},setState:function(p){var u=this.win_s;if(this.win_s==p)return this;this.fire("statechange",p,u);switch(u){case "min":this.delClass(this.minCS);
break;case "max":this.delClass(this.maxCS);break;default:this._markStated()}switch(p){case "min":this.shadow&&this.shadow.show();this.addClass(this.minCS);this.setHeight(this.minH);this.setResizable(false);break;case "max":this.shadow&&this.shadow.hide();this.titlebar.draggable=false;this.addClass(this.maxCS);var q,w=this.pCt?this.pCt.view:this.view.parentNode;if(w===document.body)q=l.getViewport();else{w=l.fly(w);q=w.getSize();w.unfly()}this.setXY(0,0).setSize(q);this.setResizable(false);break;default:this._markStated(true);
this.shadow&&this.shadow.show()}this.win_s=p;this.fire("statechanged",p,u);return this}}});CC.ui.def("win",CC.ui.Win);CC.Tpl.def("CC.ui.Dialog.Bottom",'<div class="g-win-bottom"><div class="bottom-wrap"></div></div>');
CC.create("CC.ui.Dialog",CC.ui.Win,function(a){var l=window.CC,m=l.Event;return{bottomHeight:51,returnCode:false,defaultButton:false,initComponent:function(){this.createView();this.keyEventNode=this.view;if(this.bottomer===false)this.bottomHeight=0;else this.createBottom();a.initComponent.call(this);if(this.buttons&&this.bottomer!==false){this.bottomer.fromArray(this.buttons);delete this.buttons}this.keyEvent&&this.on("keydown",this.onKeydownEvent,null,true)},onBottomItemSelected:function(g){if(g.returnCode!==
false&&g.id){this.pCt.returnCode=g.id;var h=this.pCt["on"+g.id];if(!h||h.call(this.pCt,g)!==false)this.pCt.close()}},onKeydownEvent:function(g){if(m.ESC==g.keyCode)this.onCancel();else m.isEnterKey(g)&&this.onOk()},onOk:function(){this.bottomer&&this.defaultButton&&this.bottomer.selectionProvider.select(this.defaultButton,true)},onClsBtnClick:function(){this.pCt.pCt.returnCode=false;a.onClsBtnClick.apply(this,arguments)},onCancel:function(){this.returnCode=false;this.close()},show:function(g,h,i){this.modal=
h;this.modalParent=g;this.modalCallback=i;return a.show.call(this)},trackZIndex:function(){a.trackZIndex.call(this);this.masker&&this.masker.setZ(this.getZ()-2)},onShow:function(){a.onShow.call(this);if(this.modal){var g=this.masker;if(!g)g=this.masker=new l.ui.Mask;g.target||g.attach(this.modalParent||l.$body)}this.center(this.modalParent);this.trackZIndex.bind(this).timeout(0);this.focusDefButton()},onHide:function(){if(this.modal){if(this.modalCallback&&this.modalCallback(this.returnCode)===false)return this;
this.masker.detach();delete this.modal;delete this.modalParent;delete this.modalCallback}a.onHide.call(this)},focusDefButton:function(){if(this.bottomer){var g=this.bottomer.$(this.defaultButton);g&&g.focus(22)}},createBottom:function(){var g=this.bottomer=l.ui.instance(l.extendIf(this.bottomer,{ctype:"ct",pCt:this,itemCls:l.ui.Button,template:"CC.ui.Dialog.Bottom",ct:"_wrap",clickEvent:"click",keyEvent:true,selectionProvider:{forceSelect:true}}));this.follow(g);g.on("selected",this.onBottomItemSelected);
this.addBottomNode(g)},addBottomNode:function(g){this.view.appendChild(g.view)},getWrapperInsets:function(){var g=this.superclass.getWrapperInsets.call(this),h=this.bottomHeight-1;g[2]+=h;g[4]+=h;return g}}});CC.ui.def("dlg",CC.ui.Dialog);CC.Tpl.def("Util.alert.input",'<div class="msgbox-input"><table class="swTb"><tbody><tr><td valign="top"><b class="icoIfo" id="_ico"></b></td><td><span id="_msg" class="swTit"></span>&nbsp;<input type="text" style="" class="gIpt" id="_input"/><p class="swEroMsg"><span id="_err"></span></p></span></td></tr></tbody></table></div>');
CC.extendIf(CC.Util,function(){function a(l){return this.indexOf(l.id)>=0}return{_sysWin:null,getSystemWin:function(){var l=this._sysWin;if(!l){l=this._sysWin=new CC.ui.Dialog({id:"sysWin",setState:fGo,cs:"sysWin bot",resizeable:false,width:400,hidden:true,autoRender:true,keyEvent:true,showTo:document.body,setZ:fGo,buttons:[{title:"\u53d6&nbsp;\u6d88",id:"cancel"},{title:"\u786e&nbsp;\u5b9a",id:"ok"},{title:"&nbsp;\u5426&nbsp;",id:"no"},{title:"&nbsp;\u662f&nbsp;",id:"yes"},{title:"\u5173&nbsp;\u95ed",
id:"close"}]});l.getInputEl=function(){return this.wrapper.dom("_input")}}return l},alert:function(l,m,g,h,i,b){m=m||"\u63d0\u793a";var k=this.getSystemWin();k.setTitle(m).setSize(400,153).wrapper.html('<div class="msgbox-dlg">'+(l||"")+"</div>");if(!h)b=h="ok";k.bottomer.filter(a,h);if(b)k.defaultButton=b;k.fastStyleSet("visibility","hidden");k.show(i||document.body,true,g);(function(){k.autoHeight().center(i);k.fastStyleSet("visibility","")}).timeout(0)},inputBox:function(l,m,g,h,i,b){m=m||"\u63d0\u793a";
var k=this.getSystemWin();k.setTitle(m).setSize(400,175).wrapper.html(CC.Tpl["Util.alert.input"]).dom("_msg").innerHTML=l;k.wrapper.dom("_input");if(!h){h="ok|cancel";b="ok"}k.bottomer.filter(a,h);if(b)k.defaultButton=b;k.show(i||document.body,true,g);(function(){k.getInputEl().focus()}).timeout(80)}}}());
(function(){var a=window.CC,l=a.Event,m=a.util.SelectionProvider.prototype;a.Tpl.def("CC.ui.Menu",'<div class="g-panel g-menu"><div id="_wrap" class="g-panel-wrap"><ul class="g-menu-opt" id="_bdy"  tabindex="1" hidefocus="on"></ul></div></div>').def("CC.ui.MenuItem",'<li class="g-menu-item"><span id="_tle" class="item-title"></span></li>');a.create("CC.ui.menu.MenuSelectionProvider",a.util.SelectionProvider,{forceSelect:true,selectedCS:false,onSelect:function(g,h){g.handleClick(h);m.onSelect.call(this,
g)},navigateKey:function(g){switch(g.keyCode){case l.UP:this.t.menubar?this.tryActive(this.t,true):this.pre();l.stop(g);break;case l.DOWN:this.t.menubar?this.tryActive(this.t,true):this.next();l.stop(g);break;case l.LEFT:this.t.menubar?this.pre():this.left();l.stop(g);break;case l.RIGHT:this.t.menubar?this.next():this.right();l.stop(g);break;case l.ENTER:this.enter();l.stop(g);break;case l.ESC:this.esc();l.stop(g);break;default:return this.defKeyNav(g)}},tryActive:function(g,h){var i=g.onItem;if(i&&
i.subMenu){i.showMenu(true);this.tryActive(i.subMenu)}else(i=g.getSelectionProvider().getNext())&&i.active(h)},getStartIndex:function(){var g=this.t,h=g.onItem;return h?g.indexOf(h):-1},next:function(){var g=this.t,h=this.getNext();h||(h=g.$(0));h&&h.active(g.menubar)},pre:function(){var g=this.t,h=this.getPre();h||(h=g.$(g.size()-1));h&&h.active(g.menubar)},left:function(){var g=this.t;if(g.menubar)this.pre();else if(g=g.pItem){g.showMenu(false);g.pCt.menubar?g.pCt.getSelectionProvider().pre():g.active()}},
right:function(){var g=this.t;if(g.menubar)this.next();else{var h=g.onItem;if(h&&h.subMenu){h.showMenu(true);this.tryActive(h.subMenu)}else g.getRoot().getSelectionProvider().next()}},esc:function(){var g=this.t,h=g.onItem;if(g.menubar){if(h){h.deactive(true);g.setAutoExpand(false)}}else{var i=h&&h.subMenu;if(i&&!i.hidden)h.active(false);else g.pItem?g.pItem.active(false):g.hide()}},enter:function(){var g=this.t.onItem;g&&this.select(g)}});a.create("CC.ui.MenuItem",a.Base,function(g){return{subMenu:null,
subCS:"sub-x",active:function(h){if(!this.disabled){var i=this.pCt,b=i.onItem;if(b!==this){b&&b.deactive(true);this.deactiveTimer&&this.clearDefer();i.onItem=this;(b=i.pItem)&&!b.isActive()&&b.active(h);this.decorateActive(true)}i.focus();this.subMenu&&this.showMenu(h)}},isActive:function(){return this.pCt.onItem===this},decorateActive:function(h){this.checkClass(this.pCt.activeCS,h)},deactive:function(h){var i=this.subMenu;this.pCt.onItem=null;this.deactiveTimer&&this.clearDefer();this.decorateActive(false);
i&&h&&!i.hidden&&this.showMenu(false)},deferDeactive:function(h){this.deactiveTimer=this.deactive.bind(this,h).timeout(100)},clearDefer:function(){clearTimeout(this.deactiveTimer);this.deactiveTimer=false},decorateExpand:function(h){this.checkClass(this.pCt.expandCS,h)},handleClick:function(h){var i=this.pCt;if(i.menubar){this.active(true);i.contexted||i.bindContext();i.setAutoExpand(true)}else if(this.subMenu){this.active(true);h&&l.stop(h)}else i.hideAll()},showMenu:function(h){var i=this.subMenu;
if(i)if(i.hidden!==!h){var b=this.pCt;i.rendered||i.render();if(h){this.decorateExpand(true);i.setZ((b.getZ()||8888)+2);b.menubar?i.anchorPos(this,"lb","hr",null,true,true):i.anchorPos(this,"rt","vd",null,true,true);i.focus(0)}else{this.decorateExpand(false);i.onItem&&i.onItem.deactive(true)}i.display(h)}},bindMenu:function(h){h.pItem=this;this.subMenu=h;this.decorateSub(true)},decorateSub:function(h){this.checkClass(this.subCS,h)},unbind:function(){var h=this.subMenu;if(h){this.decorateSub(false);
delete h.pItem;delete this.subMenu}},initComponent:function(){g.initComponent.call(this);if(this.array){this.bindMenu(new a.ui.Menu({array:this.array,showTo:document.body}));delete this.array}},onRender:function(){g.onRender.call(this);if(this.subMenu)this.subMenu.rendered||this.subMenu.render()},destory:function(){if(this.subMenu){this.subMenu.destory();this.unbind()}g.destory.call(this)}}});a.create("CC.ui.Menu",a.ui.Panel,function(g){return{hidden:true,width:115,pItem:null,activeCS:"itemOn",expandCS:"subHover",
clickEvent:"mousedown",shadow:true,onItem:null,selectionProvider:a.ui.menu.MenuSelectionProvider,itemCls:a.ui.MenuItem,ct:"_bdy",menubarCS:"g-menu-bar",separatorCS:"g-menu-separator",initComponent:function(){if(this.shadow===true)this.shadow=new a.ui.Shadow({inpactH:6,inpactY:-2,inpactX:-5,inpactW:9});g.initComponent.call(this);this.menubar&&this.addClass(this.menubarCS);if(this.array){this.fromArray(this.array);delete this.array}this.noUp();this.itemAction("mouseover",this.mouseoverCallback,true);
this.itemAction("mouseout",this.mouseoutCallback,true)},mouseoverCallback:function(h){var i=this.pItem,b=this.onItem;if(b!==h){b&&b.deactive(true);i&&i.deactiveTimer&&i.clearDefer();this.menubar&&!this.autoExpand?h.active():h.active(true)}else b&&b.clearDefer()},mouseoutCallback:function(h){if(this.menubar)this.autoExpand||h.deferDeactive();else h.deferDeactive(true)},attach:function(h,i){i=this.$(i);i.bindMenu(h);this.menubar&&i.decorateSub(false)},beforeAdd:function(h){g.beforeAdd.apply(this,arguments);
if(h.separator){this.addSeparator();delete h.separator}this.menubar&&h.subMenu&&h.decorateSub(false)},beforeRemove:function(h){h===this.onItem&&this.onItem.deactive();return g.beforeRemove.call(this,h)},detach:function(h){h=this.$(h);h.unbind()},getRoot:function(){var h=this.pItem;if(!h)return this;return h.pCt.getRoot()},hideAll:function(){var h=this.getRoot();if(h.menubar&&h.onItem){h.onItem.deactive(true);h.setAutoExpand(false)}else h.display(false)},onHide:function(){g.onHide.call(this);this.onItem&&
this.onItem.deactive(true);this.onDisplay(false)},onShow:function(){g.onShow.call(this);this.onDisplay(true)},onDisplay:fGo,setAutoExpand:function(h){this.autoExpand=h},addSeparator:function(){this._addNode(a.ui.Menu.Separator.view.cloneNode(true))},at:function(h,i,b){this.display(true);if(typeof h==="number"){this.anchorPos([h,i,0,0],"lb","hr",null,true,true);b!==false&&!this.menubar&&this.bindContext()}else{this.anchorPos(h,"lb","hr",null,true,true);i!==false&&!this.menubar&&this.bindContext()}},
destory:function(){this.each(function(){if(this.subMenu&&!this.disabledCascadeDel){var h=this.subMenu;this.pCt.detach(this);h.destory()}});g.destory.call(this)}}});a.ui.Menu.Separator=a.$$(a.$C({tagName:"LI",className:a.ui.Menu.prototype.separatorCS}));a.create("CC.ui.Menubar",a.ui.Menu,{menubar:true,hidden:false,shadow:false,onContextedRelease:function(){this.onItem&&this.onItem.deactive(true);this.getSelectionProvider().select(null);this.setAutoExpand(false);return false},bindContext:function(){return a.ui.Menu.prototype.bindContext.call(this,
this.onContextedRelease)}});a.ui.def("menu",a.ui.Menu);a.ui.def("menuitem",a.ui.MenuItem);a.ui.def("menubar",a.ui.Menubar)})();
(function(){var a=window.CC;a.Tpl.def("CC.ui.Tree",'<div class="g-tree"><div class="g-panel-body g-panel-body-noheader" id="_scrollor"><ul id="_ctx" class="g-tree-nd-ct  g-tree-arrows" tabindex="1" hidefocus="on"></ul></div></div>').def("CC.ui.TreeItem",'<li class="g-tree-nd"><div class="g-tree-nd-el g-unsel" unselectable="on" id="_head"><span class="g-tree-nd-indent" id="_ident"></span><img class="g-tree-ec-icon" id="_elbow" src="'+a.Tpl.BLANK_IMG+'"/><img unselectable="on" class="g-tree-nd-icon" src="'+
a.Tpl.BLANK_IMG+'" id="_ico" /><a class="g-tree-nd-anchor" unselectable="on" hidefocus="on" id="_tle"></a></div><ul class="g-tree-nd-ct" id="_bdy" style="display:none;" tabindex="1" hidefocus="on"></ul></li>').def("CC.ui.TreeItemSpacer",'<img class="g-tree-icon" src="'+a.Tpl.BLANK_IMG+'"/>');var l=a.ui.ContainerBase,m=l.prototype;a.create("CC.ui.TreeItem",l,{root:null,ct:"_bdy",dragNode:"_head",hoverCS:"g-tree-nd-over g-tree-ec-over",splitEndPlusCS:"g-tree-split-end-plus",splitEndMinCS:"g-tree-split-end-minus",
splitPlusCS:"g-tree-split-plus",splitMinCS:"g-tree-split-minus",splitCS:"g-tree-split",splitEndCS:"g-tree-split-end",nodeOpenCS:"g-tree-nd-opn",nodeClsCS:"g-tree-nd-cls",nodeLeafCS:"g-tree-nd-leaf",loadCS:"g-tree-nd-loading",elbowLineCS:"g-tree-elbow-line",springCS:"spring",mouseoverNode:"_head",mouseoverTarget:"_head",nodes:false,clickEvent:"mousedown",clickEventNode:"_head",initComponent:function(){if(!this.root)this.root=this;if(this.array&&!this.nodes)this.nodes=true;m.initComponent.call(this);
this._ident=this.$$("_ident");this._elbow=this.$$("_elbow");this._head=this.$$("_head");if(this.nodes){this.domEvent("dblclick",this.expand,true,null,this._head.view);this.domEvent("mousedown",this.expand,true,null,this._elbow.view,false)}else this._head.addClass(this.nodeLeafCS);this._decElbowSt(false)},addIcon:function(b,k){var o=a.Tpl.$("CC.ui.TreeItemSpacer");k&&a.extend(o,k);a.fly(o).addClass(b).unfly();this.fly(this.titleNode).insertBefore(o).unfly();return this},addSpring:function(b){b.view&&
this.follow(b);this.fly(this.titleNode).insertBefore(b).unfly();a.fly(b).addClass(this.springCS).unfly()},expand:function(b){if(b!==true&&b!==false)b=!a.display(this.ct);if(this.root.tree.fire("expand",this,b)===false)return false;this._decElbowSt(b);a.display(this.ct,b);this.expanded=b;if(this.root.tree.fire("expanded",this,b)===false)return false},_decElbowSt:function(b){if(arguments.length==0)b=a.display(this.ct);var k=this.pCt;k=!k||k.ct.lastChild==this.view;var o=this._elbow,p=this.splitEndPlusCS,
u=this.splitEndMinCS,q=this.splitPlusCS,w=this.splitMinCS;if(this.nodes){if(k)if(o.hasClass(q))o.delClass(q);else o.hasClass(w)&&o.delClass(w);else if(o.hasClass(p))o.delClass(p);else o.hasClass(u)&&o.delClass(u);if(b){k?o.switchClass(p,u):o.switchClass(q,w);this._head.switchClass(this.nodeClsCS,this.nodeOpenCS)}else{k?o.switchClass(u,p):o.switchClass(w,q);this._head.switchClass(this.nodeOpenCS,this.nodeClsCS)}}else k?o.switchClass(this.splitCS,this.splitEndCS):o.switchClass(this.splitEndCS,this.splitCS)},
add:function(b){var k=this.children[this.children.length-1];m.add.call(this,b);b._decElbowSt();b._applyChange(this);if(k){k._decElbowSt();k._applyChange(this)}},_applyChange:function(b){this._applyRoot(b.root);this._applySibling();this._fixSpacer(b);if(this.nodes)this.itemCls=b.root.itemCls},_applyRoot:function(b){if(this.root!==b){this.root=b;if(this.nodes)for(var k=this.children,o=k.length-1;o>=0;o--)if(k[o].nodes)k[o]._applyRoot(b);else k[o].root=b}},_applySibling:function(b){if(b){if(this.previous)this.previous.next=
this.next;if(this.next)this.next.previous=this.previous;this.next=this.previous=null}else if(b=this.pCt){c=b.children;idx=c.indexOf(this);if(this.next=c[idx+1])this.next.previous=this;if(this.previous=c[idx-1])this.previous.next=this}else this.previous=this.next=null},clickEventTrigger:function(b){this.root.tree.fire("itemclick",this,b)},eachH:function(b,k){var o=this.children,p;if(k===h)k=0;for(var u=0,q=o.length;u<q;u++){p=o[u];if(b.call(p,p,++k)===false)return false;if(p.nodes)if(p.eachH(b,k)===
false)return false}},findH:function(b){if(this.id===b)return this;if(!this.nodes)return false;var k=false;this.eachH(function(){if(this.id===b){k=this;return false}});return k},remove:function(b){b=this.$(b);var k=this.children[this.children.length-1]==b,o=b.previous;b._applySibling(true);m.remove.call(this,b);this.root.tree.getSelectionProvider().onItemRemoved(b);k&&this.size()>0&&this.children[this.children.length-1]._decElbowSt();o&&o._applyChange(this);return this},onRender:function(){this.root=
this.pCt.root;this._applySibling();m.onRender.call(this);this.expanded&&this.expand(true)},insert:function(b,k){m.insert.call(this,b,k);k._applyChange(this);k._decElbowSt()},getSpacerNodes:function(){var b=a.Tpl.forNode(a.Tpl["CC.ui.TreeItemSpacer"]);if(this.root===this)return b;for(var k=this._ident.view.childNodes,o=document.createDocumentFragment(),p=0,u=k.length;p<u;p++)o.appendChild(k[p].cloneNode(true));o.appendChild(b);return o},_fixSpacer:function(b){var k=this._ident.view;k.innerHTML="";
k.appendChild(b.getSpacerNodes());b.next&&a.addClassIf(k.lastChild,b.elbowLineCS);if(this.nodes){b=0;for(k=this.size();b<k;b++)this.children[b]._fixSpacer(this)}}});a.ui.TreeItem.prototype.itemCls=a.ui.TreeItem;a.ui.def("treeitem",a.ui.TreeItem);var g=a.ui.ContainerBase.prototype,h=window.undefined;a.create("CC.ui.tree.TreeSelectionProvider",a.util.SelectionProvider,{selectedCS:"g-tree-selected",decorateSelected:function(b,k){b._head.checkClass(this.selectedCS,k)},isSelected:function(b){return b._head.hasClass(this.selectedCS)},
getNext:function(){var b=this.selected,k=this.t.root,o;if(b){b=b;for((o=!(b.nodes&&b.expanded&&b.children.length>0))||(b=b.children[0]);;)if(o)if(b.next){b=b.next;if(this.canNext(b))break}else{if(b===k){b=null;break}b=b.pCt}else if(this.canNext(b))break;else o=true}else b=k;return b},getPre:function(){var b=this.selected,k=this.t.root,o;if(b){for(o=b.previous;(!o||!this.canPre(o)||o.nodes&&o.expanded&&o.children.length>0)&&o!=k;)if(o)o=o.nodes&&this.canPre(o)?o.children[o.children.length-1]:o.previous;
else{o=b===k?null:b.pCt;break}if(o===b)o=null}else o=k;return o}});a.create("CC.ui.tree.TreeItemLoadingIndicator",a.ui.Loading,{markIndicator:function(){this.target._head.addClass(this.target.loadCS)},stopIndicator:function(){var b=this.target;b._head.delClass(b.loadCS);b.loaded&&b.expand(true)}});a.ui.TreeItem.prototype.indicatorCls=a.ui.tree.TreeItemLoadingIndicator;var i={nodes:true,draggable:false,itemCls:a.ui.TreeItem,ctype:"treeitem"};a.create("CC.ui.Tree",a.ui.ContainerBase,{ct:"_ctx",url:false,
autoLoad:false,parentParamName:"pid",keyEvent:true,clickEventTrigger:a.ui.TreeItem.prototype.clickEventTrigger,clickEventNode:"_head",clickEvent:true,selectionProvider:a.ui.tree.TreeSelectionProvider,initComponent:function(){a.delAttr(this,"array");g.initComponent.call(this);if(!this.root||this.root.cacheId===h){var b=this.root||this.rootCfg;b&&delete this.rootCfg;this.root=this.instanceItem(a.extendIf(b,i))}if(this.hideRoot){this.root._head.hide();delete this.hideRoot}this.root.tree=this;this.add(this.root);
this.on("expand",this.onExpand,this)},onExpand:function(b,k){if(this.autoLoad&&k)if(!b.getConnectionProvider().getIndicator().isLoaded()){this.loadItem(b);return b.children.length>0}},loadItem:function(b){var k=this.getItemUrl(b);if(k){b=b.getConnectionProvider();var o=b.getIndicator();!o.isLoaded()&&!o.isBusy()&&b.connect(k)}},getItemUrl:function(b){var k=a.templ(this,this.url);if(k)k+=k.indexOf("?")>0?"&":"?"+encodeURIComponent(this.parentParamName)+"="+encodeURIComponent(b.id);return k},$:function(b){return b},
each:function(b){var k=this.root;if(b.call(k,k,0)!==false)return k.eachH(b,1)},setSize:function(b){g.setSize.apply(this,arguments);b!==false&&a.ie&&this.getScrollor().setWidth(this.width)}});a.ui.def("tree",a.ui.Tree)})();
(function(){function a(q){return!!((q&3)==0&&(q%100||q%400==0&&q))}function l(q,w){return w!=2?o[w-1]:a(q)?29:28}function m(q){q=(q.getDay()-(q.getDate()-1))%7;return q<0?q+7:q}function g(q){(function(){u.hide();u.bindingEditor.value=q;u.bindingEditor=null}).timeout(200)}function h(){var q=u,w=i.fly(q.bindingEditor);q.display(true);q.setValue(q.bindingEditor.value.trim(),true);q.anchorPos(w,"lb","hr",null,true,true);w.unfly();q.bindContext()}var i=window.CC,b=i.ui.Panel.prototype,k,o=[31,28,31,30,
31,30,31,31,30,31,30,31],p=i.Event;i.Tpl.def("CC.ui.Datepicker",'<div class="g-datepicker" ><div style="position: relative;"><table cellspacing="0" cellpadding="0" class="entbox"><tbody><tr><td class="headline"><table width="100%" cellspacing="0" cellpadding="1" align="center" class="dxcalmonth"><tbody><tr><td align="left" class="month_btn_left"><span></span></td><td align="center"><table cellspacing="0" cellpadding="0" align="center"><tbody><tr><td><div id="_seltor" class="g-datepicker-selecor" style="display:none;"></div><div id="_planeY" class="planeYear" style="cursor: pointer;">1955</div></td><td class="comma">,</td><td><div id="_planeM" class="planeMonth" title="\u70b9\u51fb\u9009\u62e9\u6216\u76f4\u63a5\u8f93\u5165\u5e74\u4efd\u503c"></div></td></tr></tbody></table></td><td align="right" class="month_btn_right"><span></span></td></tr></tbody></table></td></tr><tr><td><table width="100%" cellspacing="0" cellpadding="0" class="g-datepicker-body"><tbody><tr><th class="month_spr"><span>\u6708</span></th><th><span>\u65e5</span></th><th><span>\u4e00</span></th><th><span>\u4e8c</span></th><th><span>\u4e09</span></th><th><span>\u56db</span></th><th><span>\u4e94</span></th><th><span>\u516d</span></th><th class="month_spr"><span>\u6708</span></th></tr></tbody></table></td></tr><tr><td id="_monthWrap"></td></tr><tr><td style="text-align:center;padding-bottom:5px;" id="_tdytd"></td></tr></tbody></table><div class="leftsplit" id="_preBar" onmouseover="CC.addClass(this, \'leftsplitOn\')" onmouseout="CC.delClass(this, \'leftsplitOn\')" ></div><div class="rightsplit" onmouseover="CC.addClass(this, \'rightsplitOn\')" onmouseout="CC.delClass(this, \'rightsplitOn\')" id="_nxtBar"></div></div></div>');
i.create("CC.ui.Datepicker",i.ui.Panel,{shadow:true,unselectable:true,eventable:true,value:new Date,fmt:"yy/mm/dd",mm:null,yy:null,dd:null,keyEvent:true,initComponent:function(){b.initComponent.call(this);this.monthWrap=this.dom("_monthWrap");this.domEvent("click",this.onDayClick,true,null,this.monthWrap).domEvent("click",this.onYearList,true,null,"_planeY").domEvent("click",this.onNavBarMove,true,null,"_nxtBar").domEvent("click",this.onNavBarMove,true,null,"_preBar");i.Util.qtip&&i.Util.qtip(this.$$("_planeY"),
"\u70b9\u51fb\u9009\u62e9\u6216\u76f4\u63a5\u8f93\u5165\u5e74\u4efd\u503c");this.value&&this.setValue(this.value,true);this.todayBtn=new i.ui.Button({showTo:this.dom("_tdytd"),title:"\u4eca\u5929"});this.follow(this.todayBtn).domEvent("click",this.toToday,true,null,this.todayBtn.view).selectorNode=this.dom("_seltor")},_hideYearSel:function(){i.fly(this.selectorNode).display(false).unfly()},onNavBarMove:function(q){p.element(q).id=="_nxtBar"?this.selectYear(this.yy+1):this.selectYear(this.yy-1)},selectYear:function(q){this.setValue(new Date(q,
this.mm,1),true)},toToday:function(){this.setValue(new Date)},onYearList:function(){var q=this.selectorNode;i.fly(q).bindContext().display(true).unfly();q.firstChild||this.createList();q.firstChild.value=this.yy;q.lastChild.value="";(function(){q.lastChild.focus()}).timeout(20)},createList:function(){var q=this.selectorNode,w=this.fly("_planeY");w.getSize();q.innerHTML=this.getSelectListHtml();var D=q.firstChild,A=q.lastChild;w.unfly();i.fly(A).fastStyleSet("width",D.offsetWidth).fastStyleSet("height",
D.offsetHeight).unfly();this.domEvent("change",function(){this.selectYear(D.value);this._hideYearSel()},false,null,D);this.noUp("click",q).bindEnter(function(){var F=parseInt(A.value.trim());isNaN(F)||this.selectYear(F);this._hideYearSel()},true,null,A)},getSelectListHtml:function(){for(var q=["<select>"],w=this.selectYearEnd||2100,D=this.selectYearStart||1900;D<=w;D++)q.push('<option value="'+D+'">'+D+"</option>");q.push('<input type="text" class="g-corner" />');return q.join("")},onDayClick:function(q){q=
p.element(q);if(q!=this.monthWrap){q=i.tagUp(q,"TD").id;q.indexOf("/")>0?this.setValue(new Date(q)):this.setValue(new Date(this.yy,parseInt(q),1),true)}},setValue:function(q,w){var D=this.currentDate;i.isDate(q)||(q=i.dateParse(q,this.fmt));var A=q.getFullYear();if(isNaN(A))__debug&&console.log("invalid date :"+q);else{var F=q.getMonth(),C=q.getDate();this.yy=A;this.mm=F;this.dd=C;this.currentDate=q;this.update(D);if(!w&&(!this.disableFilter||!this.disableFilter(A,F,C)))this.fire("select",i.dateFormat(q,
this.fmt),q)}},update:function(q){var w=this.mm+1,D=this.yy,A=this.dd;this.dom("_planeM").innerHTML=w+"\u6708";this.dom("_planeY").innerHTML=D+"\u5e74";var F=i.fly(this.monthWrap);if(q&&D==q.getFullYear()&&w==q.getMonth()+1){q=q.getMonth()+1+"/"+q.getDate()+"/"+q.getFullYear();i.delClass(F.dom(q),"selday")}else this.monthWrap.innerHTML=this.getMonthHtml(this.currentDate);q=w+"/"+A+"/"+D;(w=F.dom(q))&&i.addClass(w,"selday");F.unfly()},getMonthHtml:function(q){var w=[],D=new Date,A=D.getFullYear(),
F=q.getMonth()+1,C=q.getFullYear(),v=l(C,F),f=F-1,n=C,t=n,x=f==0?12:f;if(x==12)n-=1;f=F+1;f=f>12?1:f;if(f==1)t+=1;var z=m(q);q=l(n,x);var y=q-z+1;if(z==0)y=q-6;w.push('<table class="g-datepicker-days"  width="100%" cellspacing="0" cellpadding="0"><tbody>');z=0;var B="preday";x=x;n=n;for(var E=this.disableFilter,G=0;G<6;G++){w.push('<tr><td class="month_sep');G+1===F&&w.push(" selmonth");w.push('" id="'+G+'"><a href="javascript:fGo()" hidefocus="on">'+(G+1)+"</a></td>");for(var H=0;H<7;H++){w.push('<td class="'+
B);if(H==6)w.push(" sateday");else H==0&&w.push(" sunday");E&&E(n,x,y)&&w.push(" disabledday");w.push('" id="'+x+"/"+y+"/"+n+'"><a');A===n&&D.getMonth()+1===x&&D.getDate()===y&&w.push(' class="today" title="\u4eca\u5929:'+n+"\u5e74"+x+"\u6708"+y+'\u65e5"');w.push(' href="javascript:fGo()" hidefocus="on">'+y+"</a></td>");y++;if(y>q&&z==0){z=y=1;B="curday";x=F;n=C}else if(z==1&&y>v){z=2;y=1;B="nxtday";x=f;n=t}}w.push('<td class="month_sep month_r');G+7===F&&w.push(" selmonth");w.push('" id="'+(G+6)+
'"><a href="javascript:fGo()" hidefocus="on">'+(G+7)+"</a></td></tr>")}w.push("</tbody></table>");return w.join("")}});k=i.ui.Datepicker;k.dateFormat="yy/mm/dd";var u;k.getInstance=function(){if(!u){u=k.instance=new k({hidden:true,showTo:document.body,autoRender:true});u.on("select",g)}return u};k.show=function(q){k.getInstance();u.dateFormat=k.dateFormat;u.bindingEditor=q;h(true)}})();
(function(){var a=window.CC,l=a.Cache;a.create("CC.ui.grid.Column",a.Base,function(m){return{resizeDisabled:false,createView:function(){this.view=a.$C({tagName:"TD",innerHTML:'<div class="hdrcell"></div>'});this.bdEl=this.view.firstChild;this.createViewBody(this.bdEl)},createViewBody:function(g){g.appendChild(a.$C({tagName:"span",id:"_tle"}))},onRender:function(){if(this.width!==false){var g=a.delAttr(this,"width");m.onRender.call(this);this.width=g}else m.onRender.call(this)},cellBrush:function(g){return g},
setWidth:function(g,h){var i=this.pCt;if(this.resizeDisabled)return this;var b=this.preWidth,k;k=!b?false:g-b;if(i){h&&this.lock(true);i.fireUp("colwidthchange",this.pCt.indexOf(this),this,g,k);if(g!==this.width){g=this.width;if(k!==false)k=g-b}i.fireUp("aftercolwidthchange",this.pCt.indexOf(this),this,g,k);h&&this.lock(false)}else this.width=g;this.preWidth=g;return this},locked:0,lock:function(g){g?this.locked++:this.locked--;if(this.locked<0){if(__debug)throw"lock operation failed: locked < 0";
this.locked=0}}}});a.Tpl.def("CC.ui.Grid",'<div class="g-grid"></div>');a.create("CC.ui.Grid",a.ui.Panel,function(m){return{layout:"row",plugins:[{name:"header",weight:-100,ctype:"gridhd"},{name:"content",weight:-80,ctype:"gridcontent"}],initComponent:function(){m.initComponent.call(this);this.plugins=this.addPluginsInner(this.getInitPlugins())},onRender:function(){var g=false,h=false;if(this.width!==false)g=a.delAttr(this,"width");if(this.height!==false)h=a.delAttr(this,"height");m.onRender.call(this);
if(g!==false||h!==false)this.setSize(g,h)},extraRegisterEventMaps:function(g){for(var h=a.getObjectLinkedValues(g,"gridEventHandlers",true),i=0,b=h.length;i<b;i++)this.attachPluginEventHandlers(g,h[i])},attachPluginEventHandlers:function(g,h){if(typeof h==="function")h=h(g);for(var i in h)this.on(i,h[i],g)},pluginComparator:function(g,h){if(g.weight===h.weight)return 0;return(g.weight||0)<(h.weight||0)?-1:1},getInitPlugins:function(){var g=a.getObjectLinkedValues(this,"plugins"),h;if(g.length===1)h=
g[0];else if(g.length===0)return g;else{h=[];for(var i=0,b=g.length;i<b;i++)h=h.concat(g[i])}return h},addPluginsInner:function(g){g.sort(this.pluginComparator);var h,i,b,k,o,p=[];k=0;for(o=g.length;k<o;k++){i=g[k];h=i.name;h=i.cfgId||h;b={};a.extend(b,i);a.extend(b,a.delAttr(this,h));i=b.ctype;b.grid=this;__debug&&tester.ok(!!i,true);b=a.ui.instance(i,b);this.extraRegisterEventMaps(b);p[k]=b;this[h]=b}g=[];k=0;for(o=p.length;k<o;k++){i=p[k];h=i.name;this.fireOnce("beforeinit"+h,i,this);if(i.initPlugin)if(b=
i.initPlugin(this)){g.push(h);if(b===true)b=i;g.push(b);g.push(i)}this.fireOnce("afterinit"+h,i,this)}if(g.length){k=0;for(o=g.length;k<o;k+=3){this.fireOnce("beforeadd"+g[k],g[k+1],g[k+2]);this.layout.add(g[k+1]);this.fireOnce("afteradd"+g[k],g[k+1],g[k+2])}}return p},addPlugin:function(g){g=this.addPluginsInner([g]);this.plugins.push(g[0])},destoryPlugins:function(){var g=this;a.each(this.plugins,function(){this.destoryPlugin&&this.destoryPlugin(g)})},destory:function(){this.destoryPlugins();m.destory.call(this)}}});
a.ui.Grid.SCROLLBAR_WIDTH=17;a.ui.def("grid",a.ui.Grid);l.register("CC.ui.grid.Cell",function(){var m=a.$C({tagName:"TD",className:"grid-td"});m.appendChild(a.$C({tagName:"DIV",id:"_tle",className:"cell"}));return m});a.create("CC.ui.grid.Cell",a.Base,function(){return{brush:false,getTitleNode:function(){return this.view.firstChild},setTitle:function(){return this}}});l.register("CC.ui.grid.Row",function(){return a.$C({tagName:"TR",className:"grid-row"})});a.create("CC.ui.grid.Row",a.ui.ContainerBase,
{eventable:false,brush:false,itemCls:a.ui.grid.Cell,hoverCS:"row-over",blockMode:0,displayMode:3,createView:function(){if(this.pCt)this.pCt.createRowView(this);else{this.view=l.get("CC.ui.grid.Row");a.ui.ContainerBase.prototype.createView.call(this)}},mouseoverCallback:function(m){this.pCt.onRowOver(this,m)},mouseoutCallback:function(m){this.pCt.onRowOut(this,m)},getCell:function(m){var g=this.pCt.pCt.header;return this.$(g.indexOf(g.$(m)))},fire:fGo});a.ui.def("gridrow",a.ui.grid.Row)})();
CC.Tpl.def("CC.ui.grid.Header",'<div class="g-grid-hd"><div class="hd-inner" id="_hd_inner"><table class="hd-tbl" id="_hd_tbl" cellspacing="0" cellpadding="0" border="0"><tbody><tr id="_ctx"></tr></tbody></table></div><div class="g-clear"></div></div>');
CC.create("CC.ui.grid.Header",CC.ui.ContainerBase,function(a){var l=CC.Base;return{itemCls:CC.ui.grid.Column,ct:"_ctx",initComponent:function(){a.initComponent.call(this);this.hdTbl=this.$$("_hd_tbl")},initPlugin:function(){return true},updateColWrapTblWidth:function(m,g){var h=this.hdTbl;if(h.width===false)h.setWidth(m);else g===false?h.setWidth(h.width+m):h.setWidth(h.width+g)},gridEventHandlers:{colwidthchange:function(m,g,h){l.prototype.setWidth.call(g,h)},aftercolwidthchange:function(m,g,h,i){this.updateColWrapTblWidth(h,
i)},contentscroll:function(m,g){if(parseInt(this.view.scrollLeft,10)!==g)this.view.scrollLeft=g}},fireUp:function(){var m=this.pCt;if(m)return m.fire.apply(m,arguments)},getColumnCount:function(){return this.children.length}}});CC.ui.def("gridhd",CC.ui.grid.Header);CC.Tpl.def("CC.ui.grid.Content",'<div class="g-grid-ct"><table class="ct-tbl" id="_ct_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup><tbody id="_ctx"></tbody></table></div>');
CC.create("CC.ui.grid.Content",CC.ui.Panel,function(a){var l,m=CC.Cache,g=CC.ui.ContainerBase.prototype;return{itemCls:CC.ui.grid.Row,ct:"_ctx",useContainerMonitor:true,syncWrapper:false,clickEvent:"click",selectionProvider:{selectedCS:"row-select"},lyInf:{h:"lead"},initComponent:function(){a.initComponent.call(this);this.ctTbl=this.$$("_ct_tbl")},initPlugin:function(){return true},setupColumnLever:function(){var h,i,b=[],k=this.grid.header.children.length,o=this.dom("_grp");for(i=0;i<k;i++){h=CC.$C("COL");
b[i]=h;o.appendChild(h)}this.levers=b;if(h=this.cacheWidths){delete this.cacheWidths;i=0;for(k=h.length;i<k;i++)h[i]!==l&&CC.fly(b[i]).setWidth(h[i]).unfly()}},onRender:function(){this.setup();a.onRender.call(this);this.batchUpdating=true;this.updateView();this.batchUpdating=false},setup:function(){this.setupColumnLever();this.setupEvent()},setupEvent:function(){this.domEvent("scroll",this.onScroll);this.on("resized",this.onResized)},bindClickInstaller:function(){this.itemAction(this.clickEvent,this.onRowClick,
false,null,this.dom("_ct_tbl"))},updateContentWrapTblWidth:function(h,i){var b=this.ctTbl;if(b.width===false)b.setWidth(h);else i===false?b.setWidth(b.width+h):b.setWidth(b.width+i)},updateLeversWidth:function(h,i){if(this.levers)CC.fly(this.levers[h]).setWidth(i).unfly();else{var b=this.cacheWidths;if(!b)b=this.cacheWidths=[];b[h]=i}},getScrollor:function(){return this},onAdd:function(h){this.altCS&&this.size()%2&&h.addClass(this.altCS);a.onAdd.apply(this,arguments);this.rendered&&!this.batchUpdating&&
this.updateRow(h)},onScroll:function(h){this.grid.fire("contentscroll",h,parseInt(this.view.scrollLeft,10)||0,this)},onRowClick:function(h,i){if(!this.clickDisabled&&!h.ignoreClick){var b=h.$(i.srcElement||i.target),k;if(b&&!h.clickDisabled&&!b.ignoreClick)k=this.grid.fire("cellclick",b,i);if(k!==false){this.fire("itemclick",h,i);this.grid.fire("rowclick",h,i)}}},hoverEvent:false,onRowOver:function(h,i){this.hoverEvent===true&&this.grid.fire("rowover",h,i)},onRowOut:function(h,i){this.hoverEvent===
true&&this.grid.fire("rowout",h,i)},onResized:function(h){if(h!==false)if(CC.ie)this.grid.fire("contentscroll",null,parseInt(this.view.scrollLeft,10)||0,this)},gridEventHandlers:{aftercolwidthchange:function(h,i,b,k){this.updateContentWrapTblWidth(b,k);this.updateLeversWidth(h,b,k)}},updateView:function(){var h=this.grid.header.children,i=h.length,b,k=this.children,o=k.length,p=[];for(b=0;b<i;b++)p[b]=h[b].cellBrush;for(b=0;b<o;b++)for(j=0;j<i;j++)this.updateCell(k[b].children[j],l,k[b].brush||p[j])},
createRowView:function(h){h.view=m.get("CC.ui.grid.Row");g.createView.call(h)},updateRow:function(h){var i=this.grid.header.children,b=h.children,k=b.length;for(h=0;h<k;h++)this.updateCell(b[h],l,b[h].brush||i[h].cellBrush)},updateCell:function(h,i,b){b||(b=h.brush||this.grid.header.$(h.pCt.indexOf(h)).cellBrush);if(i===l)i=h.title===l?h.value:h.title;h.getTitleNode().innerHTML=b.call(h,i)},cellAt:function(h,i){return this.children[h].children[i]},dataAt:function(h,i){return this.$(h).$(i).getValue()},
textAt:function(h,i){return this.$(h).$(i).getTitle()}}});CC.ui.def("gridcontent",CC.ui.grid.Content);
CC.create("CC.ui.grid.ContentStoreProvider",CC.util.StoreProvider,{modifyCS:"g-form-mdy",filterChanged:true,isModified:function(a){var l=false;a.each(function(){if(this.modified){l=true;return false}});return l},decorateModified:function(a,l){var m=this;a.each(function(){this.modified&&m.decorateCellModified(this,l)})},decorateCellModified:function(a,l){if(a.modified!==l){a.checkClass(a.modifyCS||this.modifyCS,l);a.modified=l}},createNew:function(a,l){if(!a){a={array:[]};this.t.pCt.header.each(function(){a.array.push({title:""})})}CC.util.StoreProvider.prototype.createNew.call(this,
a,l)},getItemQuery:function(a,l){var m=[],g,h=a.children;this.t.pCt.header.each(function(i,b){if(g=this.qid||this.id)m[m.length]=g+"="+encodeURIComponent(h[b].getValue())});if(g=m.length?m.join("&"):"")if(l)l+="&"+g;else l=g;return l}});CC.ui.grid.Content.prototype.storeProvider=CC.ui.grid.ContentStoreProvider;
CC.create("CC.ui.grid.ContentValidation",CC.util.ValidationProvider,{decorateValidation:fGo,decorateCellValidation:function(a,l,m){a.checkClass(this.errorCS,!l);l?a.setTip(""):a.setTip(m)},validator:function(a,l){var m=0,g=this.t.pCt.header.children,h=true,i=this.t.getStoreProvider().isNew(a),b=this;a.each(function(){if(i||this.modified)if(b.validateCell(this,g[m].validator)===false&&h===true)h=false;m++});h||l.push(h);return h},validateCell:function(a,l){var m=true;if(!l)l=this.t.pCt.header.$(a.pCt.indexOf(a)).validator;
if(l){l=l.call(a,a.getValue());if(l!==true)m=false;this.decorateCellValidation(a,l===true,l)}return m},each:function(){var a=this.t.getStoreProvider();a.each.apply(a,arguments)}});CC.ui.grid.Content.prototype.validationProvider=CC.ui.grid.ContentValidation;CC.ui.Grid.prototype.autoFit=false;
CC.create("CC.ui.grid.plugins.ColumnWidthControler",null,function(){Math=window.Math;return{autoFitCS:"g-grid-fit",minColWidth:10,initialize:function(a){CC.extend(this,a)},initPlugin:function(a){a.autoFit&&a.addClass(this.autoFitCS)},gridEventHandlers:{resized:function(a){if(a!==false)if(this.hasInitColWidths){if(this.grid.autoFit){a=Math.max(0,a-CC.ui.Grid.SCROLLBAR_WIDTH);this.autoColWidths(a)}}else{a=Math.max(0,a-CC.ui.Grid.SCROLLBAR_WIDTH);this.initColWidths(a);this.hasInitColWidths=true}},colwidthchange:function(a,
l){l._widthcontrolset||this.autoColWidths()}},initColWidths:function(a){var l=a,m=this.grid.header,g=m.getColumnCount(),h,i=this.minColWidth,b=this;m.each(function(){h=this.width;if(h!==false){if(h<1)h=Math.floor(a*h);g--;b.setColWidth0(this,Math.max(h,i));l-=this.width}});h=Math.max(Math.floor(l/g),i);m.each(function(){this.width===false&&b.setColWidth0(this,h)})},getAutoWidthLen:function(a){return Math.max(0,(a||this.grid.width)-CC.ui.Grid.SCROLLBAR_WIDTH)},setColWidth0:function(a,l){a._widthcontrolset=
true;a.setWidth(l,true);delete a._widthcontrolset},deliverDelta:function(a){var l=this.grid.header.children,m=l.length,g,h,i=this.minColWidth,b,k,o=[],p=[];for(b=0;b<m;b++)l[b].locked||(o[o.length]=l[b]);for(;a!==0&&o.length;){l=Math.floor(a/o.length);b=0;for(m=o.length;b<m;b++){k=o[b];h=k.width;g=Math.max(k.width+l,i);if(g!==h){this.setColWidth0(k,g);if(k.width!==h)a-=k.width-h;else p.push(k)}else p.push(k)}for(b=0;b<p.length;b++)o.remove(p[b]);p=[]}},autoColWidths:function(a){if(this.grid.autoFit){a||
(a=this.getAutoWidthLen());var l=0;this.grid.header.each(function(){l+=this.width});a=a-l;a!=0&&this.deliverDelta(a)}},getConstrain:function(a){if(a.resizeDisabled)return[a.width,a.width];var l=a.width-Math.max(this.minColWidth,a.minW,0);if(this.grid.autoFit){var m=this.grid.header;a=m.indexOf(a);m=m.children;minW=maxW=0;a=a+1;for(var g=m.length;a<g;a++){maxW+=m[a].width;minW=Math.max(this.minColWidth,m[a].minW,0)}return[l,maxW-minW]}return[l,Math.MAX_VALUE]}}});CC.ui.def("colwidthctrl",CC.ui.grid.plugins.ColumnWidthControler);
CC.ui.Grid.prototype.plugins.push({name:"colwidthctrl",ctype:"colwidthctrl"});
CC.create("CC.ui.grid.plugins.Editation",null,function(){var a=CC.Event,l=window.Math;CC.ui.grid.Column.prototype.editable=true;CC.ui.grid.Row.prototype.editable=true;CC.ui.grid.Cell.prototype.editable=true;CC.ui.grid.Cell.prototype.getValue=function(){return this.value===undefined?this.title:this.value};CC.ui.grid.Cell.prototype.setValue=function(m){this.value=m;return this};return{editable:true,editorCS:"g-flot-editor",initialize:function(m){m&&CC.extend(this,m)},isCellEditable:function(m,g){g||
(g=this.grid.header.$(m.pCt.indexOf(m)));return this.editable&&g.editor&&g.editable&&m.pCt.editable&&!m.disabled&&m.editable},gridEventHandlers:{cellclick:function(m){var g=m.pCt.indexOf(m),h=this.grid.header.$(g);this.isCellEditable(m,h)&&this.startEdit(m,g,h)}},getEditor:function(m){var g=m.editor;if(g&&(!g.cacheId||typeof g==="string")){if(typeof g==="string")g={ctype:g};CC.extendIf(g,{showTo:document.body,autoRender:true,shadow:true});if(g.shadow===true)g.shadow=CC.ui.instance({ctype:"shadow",
inpactH:6,inpactY:-2,inpactX:-5,inpactW:9});g=m.editor=this.createEditor(g);g.addClass(this.editorCS)}return g},createEditor:function(m){m=CC.ui.instance(m);var g=this;m.on("blur",function(){this.bindingCell&&g.endEdit(this.bindingCell)});m.on("keydown",function(h){if(this.bindingCell){var i=this.bindingCell;if(a.TAB===h.keyCode){g.endEdit(i);if(i=g.getNextEditableBlock(i.pCt,i.pCt.indexOf(i))){g.startEdit(i);a.stop(h);return false}}else if(a.ESC===h.keyCode){g.endEdit(i);a.stop(h);return false}}});
return m},getNextEditableBlock:function(m,g){var h=m.children[g+1];if(h)this.isCellEditable(h)||(h=this.getNextEditableBlock(m,g+1));else if(m=m.pCt.children[m.pCt.indexOf(m)+1])h=this.getNextEditableBlock(m,-1);return h},startEdit:function(m,g,h){this.startEdit0.bind(this,m,g,h).timeout(0)},startEdit0:function(m,g,h){m.scrollIntoView(this.grid.content.getScrollor(),true);if(g===undefined)g=m.pCt.indexOf(m);h||(h=this.grid.header.$(g));var i=this.getEditor(h);if(i){i.bindingCell=m;m.bindingEditor=
i;this.setBoundsForEditor(m,i);i.setValue(m.getValue()).setTitle(m.getTitle()).show().focus();this.grid.fire("editstart",m,i,h,g,this)}},endEdit:function(m){var g=this.grid,h=m.pCt.indexOf(m),i=m.bindingEditor,b,k;if(g.fire("edit",m,i,h,this)!==false){i.hide();b=i.getValue();k=m.getValue();if(b!=k){k=i.getText();g.content.updateCell(m,k);m.setValue(b);m.title=k;this.grid.content.getValidationProvider().validateCell(m);m.modified||g.content.getStoreProvider().decorateCellModified(m,true)}g.fire("editend",
m,i,h,this);i.bindingCell=null;delete m.bindingEditor}},setBoundsForEditor:function(m,g){var h=m.getSize();m=m.absoluteXY();g.setSize(h);if(g.height<h.height)m[1]+=l.floor((h.height-g.height)/2);g.setXY(m)}}});CC.ui.def("grideditor",CC.ui.grid.plugins.Editation);
CC.create("CC.ui.grid.plugins.Toolbar",null,{installWhen:"afteraddcontent",defCType:"smallbar",tb:false,initialize:function(a){CC.extend(this,a);this.gridEventHandlers={};this.gridEventHandlers[this.installWhen]=this.installUI},initPlugin:function(){var a=this.tb||{};if(!a.ctype)a.ctype=this.defCType;a.layout="tablize";this.tb=CC.ui.instance(a)},installUI:function(){this.grid.fire("beforeadd"+this.name,this.tb,this);this.grid.layout.add(this.tb);this.grid.fire("afteradd"+this.name,this.tb,this)}});
CC.ui.def("gridtb",CC.ui.grid.plugins.Toolbar);
CC.create("CC.ui.grid.plugins.Pagenation",null,{current:false,count:0,size:10,autoLoad:true,params:false,customQuery:false,disabled:false,initialize:function(a){CC.extend(this,a)},initPlugin:function(a){a.content.on("statuschange",this._onConnectorStatusChange,this);this.autoLoad&&a.on("rendered",this.go,this)},gridEventHandlers:{afteraddtb:function(a){this.installUI(a);this.tb=a}},installUI:function(a){var l=this;a.layout.fromArray([{id:"first",tip:"\u7b2c\u4e00\u9875",icon:"g-icon-navfirst",onclick:l.go.bind(l,
1)},{id:"pre",lyInf:{separator:true},tip:"\u4e0a\u4e00\u9875",icon:"g-icon-navpre",onclick:l.pre.bind(l)},{lyInf:{separator:true},id:"current",template:'<span class="lbl">\u7b2c <span><input class="g-ipt-text g-corner" style="text-align:center;" id="_i" size="3"/></span> \u9875</span>',ctype:"base",clickDisabled:true},{id:"next",tip:"\u4e0b\u4e00\u9875",icon:"g-icon-navnxt",onclick:l.next.bind(l)},{lyInf:{separator:true},id:"last",tip:"\u6700\u540e\u4e00\u9875",icon:"g-icon-navlast",onclick:function(){l.go(l.count)}},
{lyInf:{separator:true},id:"total",template:'<span class="lbl">\u5171<span id="_t">0</span>\u9875</span>',ctype:"base",clickDisabled:true},{id:"refresh",tip:"\u5237\u65b0\u5f53\u524d\u9875",icon:"g-icon-ref",onclick:function(){l.go(l.current,true)}}]);this.currentEl=a.$("current").dom("_i");this.totalEl=a.$("total").dom("_t");a.bindEnter(function(){l.currentEl.value.trim()&&l.go(parseInt(l.currentEl.value))},true,null,this.currentEl)},setSize:function(a){this.size=a;return this},disable:function(a){this.disabled=
a;this.updateUIStatus();return this},go:function(a,l){if(!this.disabled){if(!a||typeof a==="number")a={current:a||1};var m=a.current;if((this.current!==m||l)&&m>0)this.grid.fire("page:beforechange",a,this)!==false&&this.onPageChange(a)}return this},isResponseOk:function(){return true},onPageChange:function(a){if(this.url){a||(a={});a=this.createQuery(a);this.grid.content.getConnectionProvider().connect(CC.templ(this,this.url),{success:this._onSuccess,params:a})}},_onConnectorStatusChange:function(a){if(a===
"open")this.tb.$("refresh").disable(true);else a==="final"&&this.tb.$("refresh").disable(false)},createQuery:function(a){CC.extendIf(a,{size:this.size,count:this.count,current:this.current});this.params&&CC.extend(a,params);this.customQuery&&this.customQuery(a);return a},_onSuccess:function(a){var l=this.t.pCt.pagenation;if(l.isResponseOk(a)){json=a.getJson();l.size=json.size;l.count=json.count;l.current=json.current||a.params.current;if(l.current>l.count)l.current=l.count;this.t.destoryChildren();
this.defaultDataProcessor("json",json.data);l.grid.fire("page:afterchange",l,json,a);l.updateUIStatus()}},updateUIStatus:function(){var a=this.tb,l=this.current,m=this.count,g=this.disabled||m===1||l<=1;a.$("first").disable(g);a.$("pre").disable(g);g=this.disabled||l===m||m===1;a.$("next").disable(g);a.$("last").disable(g);this.currentEl.value=l||"";this.totalEl.innerHTML=m;a.$("refresh").disable(this.disabled)},next:function(){this.current!==this.count&&this.go(this.current+1)},pre:function(){this.current-
1>=1&&this.go(this.current-1)}});CC.ui.def("gridpage",CC.ui.grid.plugins.Pagenation);
CC.create("CC.ui.grid.plugins.ColumnResizer",null,function(){var a=CC.util.dd.Mgr,l=a.resizeHelper,m=CC.Event,g=window.Math,h,i=[0,0],b,k,o=0;CC.ui.grid.Column.prototype.disabledResize=false;return{resizeDisabled:false,monitorLen:10,resizing:false,initialize:function(p){CC.extend(this,p)},initPlugin:function(p){this.grid=p},install:function(p){p.itemAction("mousemove",this.onColMouseMove,false,this).itemAction("mousedown",this.onColMouseDown,false,this)},onColMouseMove:function(p,u){var q=p.view.style;
if(this.resizeDisabled||this.resizing||a.isDragging()){if(q.cursor!="")q.cursor=""}else if(p.view.offsetWidth-m.pageX(u)+p.absoluteXY()[0]<this.monitorLen)q.cursor="col-resize";else if(q.cursor!="")q.cursor=""},onColMouseDown:function(p,u){if(p.view.style.cursor==="col-resize"&&!p.disabledResize){h=p;CC.$body.domEvent("mouseup",this.onDocMouseUp,true,this).domEvent("mousemove",this.onDocMouseMove,true,this);b=m.pageX(u);this.calColWidthConstrain(p);l.applyMasker(true,"col-resize");m.preventDefault(u)}},
onColResizeStart:function(){this.grid.fire("colresizestart",h,h.pCt.indexOf(h));var p=this.getIndicator(),u=this.leftIndicator,q=h.absoluteXY(),w;o=q[0]+h.view.offsetWidth-g.floor(p.getWidth(true)/2);w=q[1]+h.view.offsetHeight;p.setXY(o,w).appendTo(document.body);u.setXY(q[0]-g.floor(p.getWidth(true)/2),w).appendTo(document.body)},onColResizeEnd:function(){h.setWidth(h.getWidth(true)+k,true);this.leftIndicator.del();this.rightIndicator.del();this.grid.fire("colresizeend",this,h.pCt.indexOf(h))},onDocMouseUp:function(p){CC.$body.unEvent("mouseup",
this.onDocMouseUp).unEvent("mousemove",this.onDocMouseMove);if(this.resizing){this.resizing=false;this.onColResizeEnd(p)}h=null;l.applyMasker(false,"")},onDocMouseMove:function(p){if(!this.resizing){this.resizing=true;this.onColResizeStart(p)}k=m.pageX(p);p=k-b;if(p<0){if(p<i[0])p=i[0]}else if(p>0)if(p>i[1])p=i[1];k=p;this.rightIndicator.view.style.left=o+p+"px"},calColWidthConstrain:function(p){if(this.grid.colwidthctrl){i=this.grid.colwidthctrl.getConstrain(p);i[0]=-1*i[0]}else{i[0]=g.max(p.minW,
0);i[1]=g.MAX_VALUE}},gridEventHandlers:{afteraddheader:function(p){this.install(p)}},indicatorCS:"g-grid-cwidctor",getIndicator:function(){var p=this.rightIndicator;if(!p){var u={view:"div",ctype:"base",cs:this.indicatorCS};p=this.rightIndicator=CC.ui.instance(u);this.leftIndicator=CC.ui.instance(u);this.grid.header.follow(p).follow(this.leftIndicator)}return p}}});CC.ui.def("colresizer",CC.ui.grid.plugins.ColumnResizer);CC.ui.Grid.prototype.plugins.push({name:"colresizer",ctype:"colresizer"});
(function(){var a,l=window.CC,m=l.Base,g=l.Tpl;l.create("CC.ui.form.FormElement",m,{name:false,value:undefined,element:false,elementNode:"_el",eventable:true,validator:false,validateOnblur:true,elementCS:"g-form-el",initComponent:function(){var b=this.view;if(!b)this.view=b=g.$(this.template||this.type);var k=this.element;if(!k){k=this.dom(this.elementNode);if(!k)k=this.view;this.element=k}k.id=this.id||"comp"+l.uniqueID();this.focusNode=k.id;if(b!=k&&!b.id)b.id="comp"+l.uniqueID();this.addClass(this.elementCS);
m.prototype.initComponent.call(this);this.name&&this.setName(this.name);this.value&&this.setValue(this.value);this.focusCS&&this.bindFocusCS()},bindFocusCS:function(b){if(b)this.focusCS=b;this.on("focus",this._switchFocusCS);this.on("blur",this._switchFocusCS)},_switchFocusCS:function(){if(this.focused){this.addClassIf(this.focusCS);this.focusCallback()}else this.delClass(this.focusCS)},focusCallback:fGo,onFocusTrigger:function(){if(!this.focused){this.focused=true;this.onfocus&&this.onfocus();this.fire("focus")}},
onBlurTrigger:function(){if(this.focused){this.focused=false;this.validateOnblur&&this.validator&&this.checkValid();this.onblur&&this.onblur();this.fire("blur")}},onKeydownTrigger:function(b){this.fire("keydown",b)},checkValid:function(){if(this.errorMsg)this.errorMsg=false;var b=this.validator?this.validator(this.getValue()):true;this.decorateValid(b);return b},decorateValid:function(b){var k=this.errorCS;k&&this.checkClass(k,!b)},setValue:function(b){this.value=this.element.value=b;return this},
getValue:function(){return this.element.value},getText:function(){return this.getValue()},setName:function(b){this.name=this.element.name=b;return this},active:fGo,deactive:fGo,mouseupCallback:function(b){this.onclick&&this.onclick(b,this.element)}});var h=l.ui.form.FormElement;a=h.prototype;var i=l.ui.form;g.def("Text",'<input type="text" id="_el" class="g-ipt-text g-corner" />').def("Textarea",'<textarea id="_el" class="g-textarea g-corner" />').def("Checkbox",'<span tabindex="0" class="g-checkbox"><input type="hidden" id="_el" /><img src="'+
g.BLANK_IMG+'" class="chkbk" /><label id="_tle"></label></span>').def("Select",'<select class="g-corner"/>');l.create("CC.ui.form.Text",h,{template:"Text",initComponent:function(){a.initComponent.call(this);this.domEvent("focus",this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger)},maxH:20,focusCS:"g-ipt-text-hover",focusCallback:function(b){a.focusCallback.call(this,b);var k=this;(function(){k.view.select()}).timeout(20)}});l.ui.def("text",i.Text);l.create("CC.ui.form.Textarea",
h,i.Text.constructors,{template:"Textarea",focusCallback:h.prototype.focusCallback,maxH:m.prototype.maxH});l.ui.def("textarea",i.Textarea);l.create("CC.ui.form.Checkbox",h,{template:"Checkbox",hoverCS:"g-check-over",clickCS:"g-check-click",checkedCS:"g-check-checked",initComponent:function(){a.initComponent.call(this);this.checked&&this.setChecked(true);this.domEvent("focus",this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger)},mouseupCallback:function(b){this.setChecked(!this.checked);
a.mouseupCallback.call(this,b)},setChecked:function(b){this.checked=b;this.element.checked=b;this.checkClass(this.checkedCS,b);this.onChecked&&this.onChecked(b)}});l.ui.def("checkbox",i.Checkbox);l.create("CC.ui.form.Radio",h,i.Checkbox.constructors,{innerCS:"g-radio",template:"Checkbox",hoverCS:"g-radio-over",clickCS:"g-radio-click",checkedCS:"g-radio-checked"});l.ui.def("radio",i.Radio);l.create("CC.ui.form.Select",h,{template:"Select",initComponent:function(){a.initComponent.call(this);this.domEvent("focus",
this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger).domEvent("change",this.onChangeTrigger);if(this.array){for(var b=0,k=this.array,o=k.length;b<o;b++)this.add(k[b]);delete this.array}if(this.selectedIndex){this.element.selectedIndex=this.selectedIndex;delete this.selectedIndex}},onChangeTrigger:function(){this.onchange&&this.onchange()},getText:function(){var b=this.element.options[this.element.selectedIndex];return b?b.text:""},add:function(b){var k=
document.createElement("OPTION");this.element.appendChild(k);l.extend(k,b)}});l.ui.def("select",i.Select)})();
CC.Tpl.def("CC.ui.form.Line",'<li class="g-form-ln"><label class="desc" id="_lbl"><span id="_tle"></span><span class="req" id="_req">*</span></label><div id="_ctx" class="field-ct"></div></li>').def("CC.ui.form.Layer",'<ul class="g-formfields"></ul>').def("CC.ui.form.Label",'<span><label id="_tle" class="cap"></label></span>').def("CC.ui.form.FormLayer",'<form><ul id="_ctx" class="g-formfields"></ul></form>').def("CC.ui.form.FieldsetUL",'<fieldset class="g-fieldset g-corner"><legend id="_tle"></legend><div id="_ctx" class="fieldset-ct"></div><div class="g-clear"></div></fieldset>');
CC.create("CC.ui.form.Label",CC.Base,{labelNode:"_tle"});CC.ui.def("label",CC.ui.form.Label);
CC.create("CC.ui.form.Line",CC.ui.ContainerBase,function(a){return{labelNode:"_lbl",hlabel:false,hlabelCS:"g-form-hln",reqNode:"_req",labelFor:0,ct:"_ctx",title:false,initComponent:function(){a.initComponent.call(this);this.hlabel&&this.addClass(this.hlabelCS);if(this.title===false&&this.labelNode!==false){var l=this.dom(this.labelNode);l.parentNode.removeChild(l)}this.required&&CC.fly(this.reqNode).show().unfly()},onAdd:function(l){a.onAdd.apply(this,arguments);if(this.labelFor!==false&&this.$(this.labelFor)===
l)if(l.element){var m=this.dom(this.labelNode);if(m)m.htmlFor=l.element.id}}}});CC.ui.def("fieldline",CC.ui.form.Line);CC.create("CC.ui.form.Layer",CC.ui.ContainerBase,{itemCls:CC.ui.form.Line,ct:"_ctx"});CC.ui.def("fieldlayer",CC.ui.form.Layer);CC.create("CC.ui.form.FormLayer",CC.ui.ContainerBase,{itemCls:CC.ui.form.Line,ct:"_ctx",getFormEl:function(){return this.view},byName:function(a,l){return this.byId(a,"name",l)}});CC.ui.def("form",CC.ui.form.FormLayer);
CC.ui.form.Fieldset=function(a){return new CC.ui.form.Layer(CC.extendIf(a,{template:"CC.ui.form.FieldsetUL",itemCls:CC.ui.form.Layer,ct:"_ctx"}))};CC.ui.form.Line.prototype.itemCls=CC.ui.form.Layer;CC.ui.def("fieldset",CC.ui.form.Fieldset);CC.Tpl.def("CC.ui.form.Combox",'<div class="g-panel g-combo" tabindex="1" hidefocus="on"><div class="g-panel-wrap g-combo-wrap" id="_wrap"><input type="hidden" id="_el" /><div class="unedit-txt" id="_uetxt"></div><span class="downIco" id="_trigger"></span></div></div>');
CC.create("CC.ui.form.Combox",CC.ui.form.FormElement,function(a){function l(){return true}var m=CC.Event;return{hoverCS:"g-combo-on",uneditCS:"g-combo-unedit",downCS:"g-combo-dwn",selectorCS:"g-combo-list",_leaveFocus:true,maxH:21,filterContent:true,selector:false,initComponent:function(){var g=CC.delAttr(this,"array");this.editor=new CC.ui.form.Text({name:this.name});a.initComponent.call(this);this.uneditNode=this.dom("_uetxt");this.dom("_wrap").insertBefore(this.editor.view,null);var h=this.selector;
h=h?CC.ui.instance(h):this.createDefSelector();var i=this.getSelectioner(h);g&&i.fromArray(g);this.attach(h,i);this._bindKey();if(this.uneditable){delete this.uneditable;this.setEditable(false)}else this.setEditable(true);this.selected&&i.getSelectionProvider().select(this.selected);delete this.selected;this.domEvent("focus",this.onFocusTrigger);this.domEvent("blur",this.onBodyBlurTrigger);this.domEvent("focus",this.onFocusTrigger,false,null,this.editor.element);this.domEvent("blur",this.onBodyBlurTrigger,
false,null,this.editor.element);this.domEvent("keydown",this.onKeydownTrigger);this.wheelEvent(this.onMouseWheel,true);this.on("blur",this.checkSelected)},onHide:function(){this.selector.hidden||this.selector.hide();a.onHide.apply(this,arguments)},createDefSelector:function(){return CC.ui.instance({ctype:"folder",showTo:document.body,shadow:true,getScrollor:function(){if(!this.scrollor)this.scrollor=this.dom("_scrollor");return this.scrollor}})},getSelectioner:function(g){return this.selectioner||
g},onMouseWheel:function(g){g=CC.Event.getWheel(g);if(g>0)this.selectioner.selectionProvider.pre();else g<0&&this.selectioner.selectionProvider.next()},onBodyBlurTrigger:function(){this.selector.hidden&&this._leaveFocus&&this.onBlurTrigger()},onBlurTrigger:function(){this.leaveFocusOn();a.onBlurTrigger.call(this)},disable:function(g){a.disable.call(this,g);this.editor.disable(g)},setScrollorHeight:function(g){this.selector.fly("_scrollor").setHeight(g).unfly()},setEditable:function(g){if(this.uneditable!==
undefined&&this.uneditable==g)return this;if(this.uneditable&&g)this.delClass(this.uneditCS).unEvent("click",this.onUneditableClick);else g?this.domEvent("click",this.onUneditableClick,true,null,"_trigger").domEvent("mousedown",this.leaveFocusOff,false,null,"_trigger"):this.addClass(this.uneditCS).domEvent("click",this.onUneditableClick).unEvent("click",this.onUneditableClick,"_trigger").unEvent("mousedown",this.leaveFocusOff,"_trigger");this.uneditable=!g;this.focusNode=!g?this.view:this.editor.element;
return this},onKeydownTrigger:function(g){if(this._keyHandler(g)===false){m.stop(g);return false}a.onKeydownTrigger.apply(this,arguments)},onUneditableClick:function(){var g=!this.selector.hidden;this.leaveFocusOff();!g&&this.filterContent&&this.selectioner.filter(l);this.showBox(!g)},leaveFocusOff:function(){if(this._leaveFocus!==false)this._leaveFocus=false},leaveFocusOn:function(){if(this._leaveFocus!==true)this._leaveFocus=true},attach:function(g,h){this.selector=g;this.selectioner=h;this.follow(g);
g.display(false);g.shadow&&g.shadow.setZ(999);g.addClass(this.selectorCS);h.on("selected",this.onSelected,this);h.on("itemclick",this.onclickEvent,this);this._savSelKeyHdr=g.defKeyNav;var i=this;h.getSelectionProvider().defKeyNav=function(b){i._keyHandler(b,true)}},onBoxContexted:function(g){if(g)if(this.ancestorOf(m.element(g)))return false;this.leaveFocusOn();this.showBox(false);this.leaveFocusOff();this.onBlurTrigger()},onclickEvent:function(){this.showBox(false)},_keyHandler:function(g,h){var i=
g.keyCode;if(i==27||i==13)if(!this.selector.hidden){this.showBox(false);m.stop(g);return false}if(!h)return this.selectioner.selectionProvider.navigateKey(g)},_filtHandler:function(g){g=g.keyCode;var h=this.selectioner,i=h.selectionProvider;if(!(g===i.UP||g===i.DOWN||this.noFilt||g===27||g===13||g===9)){var b=this.editor.element.value;b==""&&i.select(null);i.selected&&g!=m.LEFT&&g!=m.RIGHT&&i.select(null);if(this.filterContent&&b!=this.preValue){h.filter(this.matcher,this);this.preValue=b}this.leaveFocusOff();
this.showBox(true)}},showBox:function(g){var h=this.selector,i=!h.hidden;if(g.type)g=!i;if(g){this.preferPosition();h.shadow&&h.shadow.reanchor();this.uneditable?this.focus(true):this.editor.focus(true);if(!i){this.checkSelected();this.addClass(this.downCS);h.bindContext(this.onBoxContexted,false,this).display(true)}}else{h.display(false);this._leaveFocus||(this.uneditable?this.focus(true):this.editor.focus(true));this.delClass(this.downCS)}},active:function(){this.showBox(true)},deactive:function(){this.showBox(false)},
checkSelected:function(){var g=this.selectioner,h=g.getSelectionProvider(),i=this.editor.element.value;if(!i&&h.selected)h.select(null);else if(!(h.selected&&h.selected.title==i)){h.select(null);g.each(function(b){if(!b.hidden&&!b.disabled&&b.title==this){h.select(b);return false}},i)}},preferPosition:function(){var g=this.selector;this.noAutoWidth||g.setWidth(this.preferWidth());g.anchorPos(this,"lb","hr",null,true,true)},preferWidth:function(){return this.getWidth()},_bindKey:function(){this.domEvent("keydown",
this._keyHandler,false,null,this.editor.view);this.domEvent("keyup",this._filtHandler,false,null,this.editor.view)},onSelected:function(g){this.setValueFromItem(g,true);!this.uneditable&&this.focused&&this.editor.focus(true)},getItemValue:function(g){if(g.getValue)return g.getValue();if(g.value!==undefined)return g.value;return g.getTitle()},getItemTitle:function(g){return g.title!==undefined?g.title:g.value},setValue:function(g,h){a.setValue.call(this,g);this.selector&&!h&&this.checkSelected();return this},
getText:function(){if(this.uneditable)return this.title||"";return this.editor.getValue()},setTitle:function(g){if(this.uneditable)this.uneditNode.innerHTML=g;else this.editor.setValue(g);this.title=g;return this},setValueFromItem:function(g,h){var i=this.getItemValue(g);g=this.getItemTitle(g);this.setValue(i,h);this.setTitle(g);return this},getValue:function(){return a.getValue.call(this)},matcher:function(g){var h=this.getItemTitle(g),i=this.editor.element.value;if(i==""){g.setTitle(h);return true}if(h.indexOf(i)>=
0){g.dom("_tle").innerHTML=h.replace(i,'<span class="g-match">'+i+"</span>");return true}g.setTitle(h);return false},select:function(g){this.selectioner.selectionProvider.select(g)}}});CC.ui.def("combo",CC.ui.form.Combox);CC.Tpl.def("CC.ui.form.Progressbar",'<table class="g-progressbar" cellspacing="0" cellpadding="0" border="0"><tr><td class="g-progress-l"><i>&nbsp;</i><input type="hidden" id="_el" /></td><td class="g-progress-c"><img id="_img" src="http://www.bgscript.com/s.gif" alt=""/></td><td class="g-progress-r"><i>&nbsp;</i></td></tr></table>');
CC.create("CC.ui.form.Progressbar",CC.ui.form.FormElement,function(a){if(!CC.ui.form.Progressbar.img)CC.ui.form.Progressbar.img="http://www.bgscript.com/images/progressbar.gif";return{range:100,value:0,initComponent:function(){this.createView();if(CC.ui.form.Progressbar.img){this.img=this.dom("_img");this.img.src=CC.ui.form.Progressbar.img}a.initComponent.call(this)},setValue:function(l){if(l>=100){CC.fly(this.img).fastStyleSet("width","100%").unfly();this.onstop();this.fire("progressstop",this);
return a.setValue.call(this,100)}CC.fly(this.img).fastStyleSet("width",l+"%").unfly();return a.setValue.call(this,l)},onstop:fGo}});CC.ui.def("progressbar",CC.ui.form.Progressbar);
(function(){var a=CC.ui.form.FormElement.prototype,l=CC.Event;CC.Tpl.def("CC.ui.form.DatepickerField",'<div class="g-datepicker-field"><div class="field-wrap"><input type="text" class="g-corner" id="_el" /><a title="\u70b9\u51fb\u9009\u62e9\u65e5\u671f" tabindex="-1" class="trigger" id="_trigger" href="javascript:fGo();"></a></div></div>');CC.create("CC.ui.form.DatepickerField",CC.ui.form.FormElement,{focusCS:"g-datepicker-field-focus",triggerHoverCS:"triggerOn",contextCS:"g-datepicker-field-ctx",
_leaveFocus:true,maxH:20,applyTimeout:200,initComponent:function(){a.initComponent.call(this);this.bindHoverStyle(this.triggerHoverCS,true,null,null,null,"_trigger","_trigger").domEvent("click",this.onTriggerClick,false,null,"_trigger").domEvent("mousedown",this.leaveFocusOff,false,null,"_trigger").domEvent("mousedown",this.onFocusTriggerDelay).domEvent("focus",this.onFocusTrigger,false,null,this.element).domEvent("blur",this.onTrackBlur,false,null,this.element).domEvent("keydown",this.onKeydownTrigger,
false,null,this.element)},active:function(){this.showDatepicker(true)},deactive:function(){this.showDatepicker(false)},onHide:function(){this.getDatepicker().hidden||this.getDatepicker().hide();CC.ui.form.FormElement.prototype.onHide.apply(this,arguments)},onTrackBlur:function(){!this._leaveFocus&&this.datepicker&&this.datepicker.hidden?this.leaveFocusOn():this.onBlurTrigger()},onFocusTriggerDelay:function(){var m=this;(function(){m.leaveFocusOn();m.onFocusTrigger()}).timeout(0)},onBlurTrigger:function(){this._leaveFocus&&
a.onBlurTrigger.call(this)},leaveFocusOff:function(){if(this._leaveFocus!==false)this._leaveFocus=false},leaveFocusOn:function(){if(this._leaveFocus!==true)this._leaveFocus=true},onTriggerClick:function(){this.showDatepicker(!!this.getDatepicker().hidden)},showDatepicker:function(m){var g=this.getDatepicker();this.datepicker.display(m);if(m){this.getValue()&&g.setValue(this.getValue(),true);g.anchorPos(this,"rb","hl",null,true,true);g.bindContext(this.onDatepickerContexted,false,this,null,this,this.contextCS).focus(0)}else this.focus()},
onDatepickerContexted:function(m){if(m)this.ancestorOf(l.element(m))||this.onBlurTrigger()},getDatepicker:function(){var m=this.datepicker;if(!m){m=this.datepicker=new CC.ui.Datepicker({showTo:document.body,autoRender:true,hidden:true});this.follow(m);m.on("select",this._onDateSelect).on("keydown",this.onKeydownTrigger,this)}return m},onKeydownTrigger:function(m){if(l.isEscKey(m)||l.isEnterKey(m)){if(!this.getDatepicker().hidden){l.stop(m);this.showDatepicker(false);return false}if(l.isEnterKey(m)){this.getDatepicker().toToday();
return false}}a.onKeydownTrigger.apply(this,arguments)},_onDateSelect:function(m){var g=this.pCt;(function(){g.showDatepicker(false);g.setValue(m)}).timeout(g.applyTimeout)},setSize:function(m,g){a.setSize.apply(this,arguments);if(m.width)g=m.width;g!==false&&this.fly("_trigger").unfly();return this},getText:function(){return this.getValue()}});CC.ui.def("datepicker",CC.ui.form.DatepickerField)})();
CC.create("CC.ui.form.ValidationProvider",CC.util.ValidationProvider,function(){return{validator:function(a,l){a=a.validator?a.validator(a.getValue()):this.htmlValidator.call(a);a!==true&&l.push(a);return a},htmlValidator:function(){return true},each:function(a){this.t.eachH(function(){if(this.element&&a.apply(this,arguments)===false)return false});this.eachHtml(a)},eachHtml:fGo}});CC.ui.def("formvalidation",CC.ui.form.ValidationProvider);CC.ui.form.FormLayer.prototype.validationProvider=CC.ui.form.ValidationProvider;
CC.create("CC.ui.form.StoreProvider",CC.util.StoreProvider,function(){return{queryString:function(){return CC.formQuery(this.t.getFormEl())},save:function(){this.beforeSave()!==false&&this.t.fire("store:beforesave",this)!==false&&this.onSave()},getSaveUrl:function(){return this.mappingUrl(this.saveUrl)},beforeSave:function(){return this.t.getValidationProvider().validateAll()===true}}});CC.ui.form.FormLayer.prototype.storeProvider=CC.ui.form.StoreProvider;
