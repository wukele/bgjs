function fGo(){}if(window.__debug===undefined)var __debug=false;
(function(){function a(t,v,d){for(var n=0,q=d.length;n<q;n++){var y=d[n];if(B.isArray(y))arguments.callee(t,v,y);else typeof y==="function"?B.extend(t,y(v)):B.extend(t,y)}}var k=window.document,f=navigator.userAgent.toLowerCase(),b=0,h=window.String,e=k.compatMode==="CSS1Compat",l=f.indexOf("opera")>-1,g=/webkit|khtml/.test(f);f.indexOf("chrome");var m=!l&&f.indexOf("msie")>-1,o=!l&&f.indexOf("msie 7")>-1,p=!l&&f.indexOf("msie 6")>-1;f=!g&&f.indexOf("gecko")>-1;var u=m&&!e||!m&&!e,w=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,
z=Array.prototype.slice;if(m&&!o)try{k.execCommand("BackgroundImageCache",false,true)}catch(D){}var B={version:"2010.5",$:function(t,v){var d=typeof t==="string"||t instanceof h;if(d&&!v)return k.getElementById(t);if(!d)return t;if(v.id==t)return v;d=v.firstChild;for(var n=[];d;){if(d.id==t)return d;d.firstChild&&n.push(d);d=d.nextSibling;if(!d)if(d=n.pop())d=d.firstChild}return null},each:function(t,v){if(t.length===void 0)for(var d in t){if(v.call(t[d],d,t[d])===false)break}else{d=0;for(var n=t.length,
q=t[0];d<n&&v.call(q,d,q)!==false;q=t[++d]);}return t},eachH:function(t,v,d){t=t;for(var n;t;){n=d.call(t);if(n!==void 0)return n;t=t[v]}},extend:function(t,v){t||(t={});if(v)for(var d in v)t[d]=v[d];return t},extendIf:function(t,v){t||(t={});if(v)for(var d in v)if(t[d]===void 0)t[d]=v[d];return t},create:function(){var t=function(){this.initialize.apply(this,arguments)};if(arguments.length===0)return t;var v=t.prototype,d,n,q=this.$A(arguments);if(typeof q[0]==="string"){n=q[0];d=q[1];q.shift()}else d=
q[0];q.shift();if(d)d=d.prototype;else if(__debug)v.toString=function(){return(this.id?this.id:"")+(this.title?"$"+this.title:"")+"@"+this.type};if(d){v=function(){};v.prototype=d;t.prototype=v=new v;v.superclass=d;t.superclass=d}if(n){v.type=n;if(n.indexOf(".")>0)this.attr(window,n,t);else window[n]=t}t.constructors=q;a(v,d,q);return v.constructor=t},ajaxRequest:function(){try{if(window.XMLHttpRequest)return new XMLHttpRequest;else if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(v){return null}}}catch(d){__debug&&
console.log("createXMLHttpRequest",d);return false}},attr:function(t,v,d){if(typeof v==="string")v=v.split(".");for(var n,q=0,y=v.length-1;q<y;q++){n=t;t=t[v[q]];if(typeof t==="undefined"||t===null)n[v[q]]=t={}}if(d===void 0)return t[v[q]];t[v[q]]=d},queryString:function(t){if(!t)return"";var v=[];for(var d in t){var n=t[d];d=encodeURIComponent(d);var q=typeof n;if(q==="undefined")v.push(d,"=&");else if(q!="function"&&q!="object")v.push(d,"=",encodeURIComponent(n),"&");else if(this.isArray(n))if(n.length){q=
0;for(var y=n.length;q<y;q++)v.push(d,"=",encodeURIComponent(n[q]===void 0?"":n[q]),"&")}else v.push(d,"=&")}v.pop();return v.join("")},formQuery:function(t){var v="",d="";t=B.$(t);for(var n=t.elements,q=n.length,y=0;y<q;y++){d=n[y];if(d.tagName==="INPUT")if(d.type==="radio"||d.type==="checkbox")if(!d.checked)continue;if(t=d.name||d.id){if(v!="")v+="&";v+=encodeURIComponent(d.name||d.id)+"="+encodeURIComponent(d.value)}}return v},validate:function(){var t=B.$A(arguments),v=null;if(!B.isArray(t[0])){v=
B.$(t[0]);t.remove(0)}var d=B.isArray(d)?{}:t.pop(),n=d.queryString,q=n?"":{};B.each(t,function(y,x){var F=x[0].tagName?x[0]:v?v[x[0]]:B.$(x[0]),E=F.value,G=x[1],A=typeof x[2]==="function"?x[3]:x[2];if(!A||typeof A!="object")A=d;if(!A.ignoreNull&&(E==""||E==null)){A.callback?A.callback(G,F,v):B.alert(G,F,v);A.nofocus||F.focus();return q=false}if(typeof x[2]==="function"){var C=x[2](E,F,v),H=C!==false;if(typeof C==="string"){G=C;H=false}if(!H){A.callback?A.callback(G,F,v):B.alert(G,F,v);A.nofocus||
F.focus();return q=false}}if(n&&!v)q+=q==""?(typeof F.name==="undefined"||F.name===""?F.id:F.name)+"="+E:"&"+x[0]+"="+E;else v||(q[x[0]]=E)});if(q!==false&&v&&n)q=B.formQuery(v);return q},uniqueID:function(){return b++},templ:function(t,v,d,n){return v.replace(/\{([\w_$]+)\}/g,function(q,y){var x=t[y];if(x===void 0||x===null){if(d===void 0)return"";switch(d){case 0:return"";case 1:return y;default:return q}}return n?encodeURIComponent(x):x})},isFunction:function(t){return t instanceof Function||typeof t===
"function"},isString:function(t){return t instanceof h||typeof t==="string"},isArray:function(t){return t instanceof Array},isDate:function(t){return t instanceof Date},alert:function(t){alert(t)},tip:function(t){alert(t)},delAttr:function(t,v){var d=t[v];d!==void 0&&delete t[v];return d},addClass:function(t,v){var d=t.className.replace(v,"").trim();d+=" "+v;t.className=d},addClassIf:function(t,v){if(!this.hasClass(t,v)){var d=t.className.replace(v,"").trim();d+=" "+v;t.className=d}},delClass:function(t,
v){t.className=t.className.replace(v,"").trim()},hasClass:function(t,v){return v&&(" "+t.className+" ").indexOf(" "+v+" ")!=-1},switchClass:function(t,v,d){B.delClass(t,v);B.addClass(t,d)},setClass:function(t,v){t.className=v},display:function(t,v,d){if(v===void 0)return B.$(t).style.display!="none";d=d!==void 0?d:"block";B.$(t).style.display=v?d:"none"},disable:function(t,v){if(v===void 0)return B.$(t).disabled;B.$(t).disabled=v},insertAfter:function(t,v){var d=v.nextSibling;d==null?v.parentNode.insertBefore(t,
v):v.parentNode.insertBefore(t,d);return t},isNumber:function(t){return t instanceof Number||typeof t=="number"},isMail:function(t){return w.test(t)},dateFormat:function(t,v){if(!v)return t.toLocaleString();for(var d=v.charAt(2),n=v.split(d),q="",y=0,x=n.length;y<x;y++){switch(n[y]){case "mm":var F=t.getMonth()+1;if(F<10)F="0"+F;q+=F;break;case "yy":q+=t.getFullYear();break;case "dd":F=t.getDate();if(F<10)F="0"+F;q+=F;break}if(y!=x-1)q+=d}return q},dateParse:function(t,v){if(!v)return new Date(t);
for(var d=[0,0,0],n=v.charAt(2),q=v.split(n),y=t.split(n),x=0,F=q.length;x<F;x++)if(q[x]=="mm")d[0]=y[x];else if(q[x]=="dd")d[1]=y[x];else d[2]=y[x];return new Date(d.join(n))},addDate:function(t,v,d){var n=null;switch(t){case "year":n=new Date(parseInt(v.getFullYear())+1,v.getMonth(),v.getDate());break;case "month":n=new Date(v.getFullYear(),v.getMonth()+d,v.getDate());break;case "day":n=new Date(v.getFullYear(),v.getMonth(),v.getDate()+d);break}return n},$C:function(t,v){if(typeof t==="string")return(v||
k).createElement(t);var d=t.tagName;delete t.tagName;var n=this.extend((v||k).createElement(d),t);t.tagName=d;return n},$N:function(t){return k.getElementsByName(t)},$T:function(t,v){return(v||k).getElementsByTagName(t)},tagUp:function(t,v){for(;t&&t.tagName!==v;)if((t=t.parentNode)&&t.tagName==="BODY")return null;return t},getObjectLinkedValues:function(t,v,d){var n=[];d=!!d;var q;if(t.hasOwnProperty(v)){q=t[v];if(!d||q)n.push(t[v])}if(t.constructor.prototype.hasOwnProperty(v)){q=t.constructor.prototype[v];
if(!d||q)n.push(q)}for(t=t.superclass;t;){if(t.hasOwnProperty(v)){q=t[v];if(!d||q)n.push(t[v])}t=t.superclass}return n},loadResource:function(t,v,d,n){var q=B.delAttr(t,"src"),y=B.delAttr(t,"href"),x=this.$C(t,n);if(v||d)if(x.readyState)x.onreadystatechange=function(){if(x.readyState=="loaded"||x.readyState=="complete"){x.onreadystatechange=null;d&&setTimeout(function(){x.parentNode.removeChild(x)},1);v&&v.call(x)}};else x.onload=function(){d&&setTimeout(function(){x.parentNode.removeChild(x)},1);
v&&v.call(x)};if(q)x.src=q;if(y)x.href=y;this.$T("head")[0].appendChild(x);return x},loadScript:function(t,v,d){t=this.loadResource({tagName:"script",src:t,type:"text/javascript"},v,true);if(d)t.id=d;return t},loadCSS:function(t,v,d){t=this.loadResource({tagName:"link",rel:"stylesheet",href:t,type:"text/css"},v);if(d)t.id=d;return t},loadStyle:function(t,v){var d=this._styleEl;if(!d){d=this._styleEl=this.$C({tagName:"style",type:"text/css"});this.$T("head")[0].appendChild(d)}d.styleSheet&&(d.styleSheet.cssText+=
t)||d.appendChild((v||k).createTextNode(t));return d},noCache:function(){return"&noCacheReq="+(new Date).getTime()},$A:function(t){return z.call(t)},frameDoc:function(t){return t.contentWindow?t.contentWindow.document:t.contentDocument},frameWin:function(t){return t.contentWindow},getDocumentHeight:function(){return Math.max(k.compatMode!="CSS1Compat"?k.body.scrollHeight:k.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(k.compatMode!="CSS1Compat"?
k.body.scrollWidth:k.documentElement.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return m?e?k.documentElement.clientHeight:k.body.clientHeight:self.innerHeight},getViewportWidth:function(){return m?e?k.documentElement.clientWidth:k.body.clientWidth:self.innerWidth},getViewport:function(){return{width:this.getViewportWidth(),height:this.getViewportHeight()}},ie:m,ie7:o,ie6:p,strict:e,safari:g,gecko:f,opera:l,borderBox:u};window.CC&&B.extend(B,window.CC);window.CC=B;if(!B.Util)B.Util=
{};B.util={};return B})();
(function(){var a=Array.prototype.slice;CC.extendIf(String.prototype,function(){var k=RegExp("<script[^>]*>([\\S\\s]*?)<\/script>","img"),f=/<script[^>]*>([\S\s]*?)<\/script>/im,b=RegExp("<style[^>]*>([\\S\\s]*?)</style>","img"),h=/<style[^>]*>([\S\s]*?)<\/style>/im,e=RegExp("(?:^\\s*)|(?:\\s*$)","g");return{trim:function(){return this.replace(e,"")},escape:function(){return escape(this)},unescape:function(){return unescape(this)},checkSpecialChar:function(){if(this.search(/[%\'\"\/\\]/)!=-1)return false;
return true},truncate:function(l,g){l=l||30;g=g===undefined?"...":g;return this.length>l?this.slice(0,l-g.length)+g:this},stripScript:function(l){if(!l)return this.replace(k,"");return this.replace(k,function(g){l(g);return""})},stripStyle:function(l){if(!l)return this.replace(b,"");return this.replace(b,function(g){l(g);return""})},innerScript:function(){this.match(f);return RegExp.$1},innerStyle:function(){this.match(h);return RegExp.$1},execScript:function(){return this.replace(k,function(l){l.match(f);
window.execScript?execScript(RegExp.$1):window.eval(RegExp.$1);return""})},execStyle:function(){return this.replace(b,function(l){l.match(h);CC.loadStyle(RegExp.$1);return""})},camelize:function(){var l=this.split("-"),g=l.length;if(g==1)return l[0];for(var m=this.charAt(0)=="-"?l[0].charAt(0).toUpperCase()+l[0].substring(1):l[0],o=1;o<g;o++)m+=l[o].charAt(0).toUpperCase()+l[o].substring(1);return m}}}());CC.extendIf(Function.prototype,{bind:function(){var k=this,f=a.call(arguments,1),b=arguments[0];
return function(){return k.apply(b,f)}},bindAsListener:function(k){var f=this;return function(b){return f.call(k,b||window.event)}},timeout:function(k,f){if(f)return setInterval(this,k||0);return setTimeout(this,k||0)}});CC.extendIf(Array.prototype,{remove:function(k){if(typeof k==="number"){if(k<0||k>=this.length)throw"Index Of Bounds:"+this.length+","+k;this.splice(k,1);return this.length}if(this.length>0&&this[this.length-1]===k)this.pop();else{k=this.indexOf(k);k!=-1&&this.splice(k,1)}return this.length},
indexOf:function(k){for(var f=0,b=this.length;f<b;f++)if(this[f]===k)return f;return-1},insert:function(k,f){return this.splice(k,0,f)},include:function(k){return this.indexOf(k)!=-1},clear:function(){this.splice(0,this.length)}})})();
(function(){var a=window.CC;a.Cache={MAX_ITEM_SIZE:5,callbacks:[],register:function(k,f,b){if(this[k])this[k][1]=f;else this[k]=[null,f];b!==undefined&&this.sizeFor(k,b)},get:function(k){k=this[k];if(k===undefined)return null;var f=k[1];k=k[0];if(k===null)return f();if(k.length>1)return k.pop();if(f)return f();return null},put:function(k,f){var b=this[k];if(b){var h=b[0];h||(b[0]=h=[this.MAX_ITEM_SIZE]);h.length-1>=h[0]||h.push(f)}else this[k]=[[this.MAX_ITEM_SIZE,f]]},remove:function(k){this[k]&&
delete this[k]},sizeFor:function(k,f){var b=this[k];b||(this[k]=b=[[]]);b[0]||(b[0]=[]);b[0][0]=f}};a.Cache.register("div",function(){return a.$C("DIV")})})();
(function(){var a={},k={};CC.util.TypeConverter={reg:function(f,b){a[f]=b},get:function(f){var b=a[f];if(!b){b=this.create.apply(this,arguments);if(!b)throw"\u672a\u8bc6\u522b\u7684\u6570\u636e\u7c7b\u578b:"+f;a[f]=b}return b},getComparator:function(f){var b=k[f];if(!b){var h=this.get(f);b=k[f]=h?function(e,l){e=h(e);l=h(l);if(e>l)return 1;if(e<l)return-1;return 0}:function(e,l){if(e>l)return 1;if(e<l)return-1;return 0}}return b},create:function(f){var b=/[\$,%]/g,h;switch(f){case "":case undefined:h=
function(e){return e===null||e===undefined?e:e.toString()};break;case "string":h=function(e){return e===undefined||e===null?"":e.toString()};break;case "int":h=function(e){return e!==undefined&&e!==null&&e!==""?parseInt(e.toString().replace(b,""),10):""};break;case "float":h=function(e){return e!==undefined&&e!==null&&e!==""?parseFloat(e.toString().replace(b,""),10):""};break;case "bool":h=function(e){return e===true||e==="true"||e==1};break;case "date":h=function(e,l){if(!e)return"";if(CC.isDate(e))return e;
if(l){if(l==="timestamp")return new Date(e*1E3);if(l==="time")return new Date(parseInt(e,10));return Date.parseDate(e,l)}var g=Date.parse(e);return g?new Date(g):null};break}return h}}})();
(function(){var a={"1c":["width","95%"],"2c":["width","45%"],"3c":["width","30%"],"4c":["width","20%"],"5c":["width","10%"],c:function(h,e){h.view.style.width=e+"%"},w:function(h,e){h.view.style.width=e},h:function(h,e){h.view.style.height=e},d:function(h,e){h.view.style.display=e},db:["display","block"],dib:["display","inline-block"],dh:["display","hidden"],np:["padding","0px"],nb:["border","0px"],fl:["float","left"],fr:["float","right"],cb:["clear","both"],tl:["textAlign","left"],tr:["textAlign",
"right"],tc:["textAlign","center"],p:function(h,e){h.view.style.padding=e},pl:function(h,e){h.view.style.paddingLeft=e},pr:function(h,e){h.view.style.paddingRight=e},pt:function(h,e){h.view.style.paddingTop=e},pb:function(h,e){h.view.style.paddingBottom=e},bd:function(h,e){h.view.style.border=e},bdl:function(h,e){h.view.style.borderLeft=e},bdr:function(h,e){h.view.style.borderRight=e},bdt:function(h,e){h.view.style.borderTop=e},bdb:function(h,e){h.view.style.borderBottom=e},z:function(h,e){h.view.style.zIndex=
e},lnl:["borderLeft","1px solid #CCC"],lnt:["borderTop","1px solid #CCC"],lnb:["borderBottom","1px solid #CCC"],lnr:["borderRight","1px solid #CCC"],lnx:["border","1px solid #CCC"],m:function(h,e){h.view.style.margin=e},ml:function(h,e){h.view.style.marginLeft=e},mr:function(h,e){h.view.style.marginRight=e},mt:function(h,e){h.view.style.marginTop=e},mb:function(h,e){h.view.style.marginBottom=e},pa:["position","absolute"],pr:["position","relative"],b:function(h,e){h.view.style.bottom=e},l:function(h,
e){h.view.style.left=e},r:function(h,e){h.view.style.right=e},t:function(h,e){h.view.style.top=e},of:function(h,e){h.view.style.overflow=e},oh:["overflow","hidden"],oa:["overflow","auto"]},k=/\s+/,f=CC.borderBox,b;CC.util.CssParser=function(){};CC.extendIf(CC.util.CssParser.prototype,{def:function(h,e){var l=this.rules;if(!l)l=this.rules={};if(typeof h==="object")for(var g in h)l[g]=h[g];else l[h]=e;return this},parse:function(h,e){var l,g;e=e.split(k);var m,o,p=this.rules,u,w;m=0;for(o=e.length;m<
o;m++){g=e[m];u=g.indexOf(":");if(u>0){w=g.substring(u+1);w=w.replace(/,/g," ");g=g.substr(0,u)}else w=false;if(g.charAt(0)==="^"){g=g.substring(1);if(g.charAt(0)==="$"){if(!f)continue;g=g.substring(1)}g=p&&p[g]||a[g]||g;l||(l=[]);l.push(g);l.push(w)}else if(g.charAt(0)==="$"){if(f){g=g.substring(1);(g=p&&p[g]||a[g])&&this.applyRule(h,g,w)}}else{g=p&&p[g]||a[g]||g;this.applyRule(h,g,w)}}if(l&&l.length>0&&h.children){m=0;e=h.children;for(o=e.length;m<o;m++){s=e[m];p=0;for(w=l.length;p<w;p+=2)this.applyRule(s,
l[p],l[p+1])}}},applyRule:function(h,e,l){if(CC.isArray(e))h.setStyle(e[0],l||e[1]);else if(typeof e==="object")for(var g in e)h.setStyle(g,e[g]);else if(typeof e==="string")if(e.charAt(0)!=="."){if(e.indexOf(" ")<0)throw"CC.util.CssParser: Unsupported instruction '"+e+"'";this.parse(h,e)}else h.addClass(e.substring(1));else typeof e==="function"&&e(h,l,this)}});CC.util.CssParser.getParser=function(){b||(b=new CC.util.CssParser);return b}})();
(function(){var a=CC.Eventable=function(k){k&&CC.extend(this,k);CC.extend(this,a.prototype)};a.prototype={fire:function(k){__debug&&console.log("\u53d1\u9001:%s,%o,\u6e90:%o",k,arguments,this);if(this.events){var f=this.events[k];if(f){var b=CC.$A(arguments),h=b.length,e,l,g,m;b.shift();f._evtLocked=true;l=0;for(g=f.length;l<g;l++){m=f[l];if(!m.removed){if(m.args)b[h]=m.args;e=m.ds?m.cb.apply(m.ds,b):m.cb.apply(this,b);if(e===false)break}}f._evtLocked=false}}if(this.subscribers){l=0;for(g=this.subscribers.length;l<
g;l++){f=this.subscribers[l];f.fireSubscribe.apply(f,arguments)}}return e},on:function(k,f,b,h){if(!k||!f){__debug&&console.trace();throw"eid or callback can not be null";}if(!this.events)this.events={};var e=this.events[k];e||(e=this.events[k]=[]);e[e.length]={cb:f,ds:b,args:h};return this},un:function(k,f){if(!this.events)return this;if(f===undefined){delete this.events[k];return this}var b=this.events[k];if(b){if(b._evtLocked)b=this.events[k]=b.slice(0);for(var h=0;h<b.length;h++){var e=b[h];if(e.cb==
f){b.remove(h);e.removed=true;break}}}return this},fireOnce:function(k){var f=this.fire.apply(this,arguments);this.un(k);return f},to:function(k){if(!this.subscribers)this.subscribers=[];if(!(this.subscribers.indexOf(k)>0)){this.subscribers.push(k);return this}}};a.prototype.fireSubscribe=a.prototype.fire})();
(function(){var a=CC.Event={},k=window.document,f=CC.opera,b=CC.chrome,h=CC.ie;new CC.Eventable;CC.extend(a,{BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,readyList:[],contentReady:false,noUp:function(e){a.stopPropagation(e||window.event);return false},noDef:function(e){a.preventDefault(e||window.event)},element:function(e){return e.srcElement||e.target},pageX:function(e){if(e.pageX==null&&e.clientX!=null){var l=k.documentElement,g=k.body;return e.clientX+(l&&l.scrollLeft||
g&&g.scrollLeft||0)-(l.clientLeft||0)}return e.pageX},pageY:function(e){if(e.pageY==null&&e.clientY!=null){var l=k.documentElement,g=k.body;return e.clientY+(l&&l.scrollTop||g&&g.scrollTop||0)-(l.clientTop||0)}return e.pageY},pageXY:function(e){if(e.pageX==null&&e.clientX!=null){var l=k.documentElement,g=k.body;return[e.clientX+(l&&l.scrollLeft||g&&g.scrollLeft||0)-(l.clientLeft||0),e.clientY+(l&&l.scrollTop||g&&g.scrollTop||0)-(l.clientTop||0)]}return[e.pageX,e.pageY]},which:function(e){if(!e.which&&
(e.charCode||e.charCode===0?e.charCode:e.keyCode))return e.charCode||e.keyCode},isLeftClick:function(e){return e.which&&e.which===1||e.button&&e.button===1},isEnterKey:function(e){return e.keyCode===13},isEscKey:function(e){return e.keyCode===27},getWheel:function(e){if(e.wheelDelta){delta=e.wheelDelta/120;if(f)delta=-delta}else if(e.detail)delta=-e.detail/3;return delta},stop:function(e){e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();if(CC.ie){e.returnValue=false;e.cancelBubble=
true}},preventDefault:function(e){e.preventDefault&&e.preventDefault();e.returnValue=false},stopPropagation:function(e){e.stopPropagation&&e.stopPropagation();e.cancelBubble=true},toggle:function(e,l,g,m,o,p,u){e=CC.$(e);l=CC.$(l);var w=CC.display(l),z=w?m:g;o=w?o:p;CC.delClass(e,w?g:m);CC.addClass(e,z);CC.display(l,!w);if(u)e.innerHTML=o;e.title=o},observers:false,_observeAndCache:function(e,l,g,m){if(!this.observers)this.observers=[];if(e.addEventListener){this.observers.push([e,l,g,m]);e.addEventListener(l,
g,m)}else if(e.attachEvent){this.observers.push([e,l,g,m]);e.attachEvent("on"+l,g)}},unloadCache:function(){if(this.observers){for(var e=0;e<this.observers.length;e++){this.un.apply(this,this.observers[e]);this.observers[e][0]=null}this.observers=false}},on:function(e,l,g,m){m=m||false;if(l=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||e.attachEvent))l="keydown";this._observeAndCache(e,l,g,m);return this},un:function(e,l,g,m){e=CC.$(e);m=m||false;if(l=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||
e.detachEvent))l="keydown";if(e.removeEventListener)e.removeEventListener(l,g,m);else e.detachEvent&&e.detachEvent("on"+l,g);return this},setDragable:function(e,l,g,m,o,p){if(g){l||(l=e);var u=function(z){var D=z||window.event;if(a.isLeftClick(D)){if(!l.__ondraged){o&&o(D,l);l.__ondraged=true}if(m)if(!m(D,l))return false;z=D.clientX;D=D.clientY;var B=z-l._x,t=D-l._y;l._x=z;l._y=D;l.style.left=l.offsetLeft+B;l.style.top=l.offsetTop+t}else w(D)},w=function(z){if(l.__ondraged){if(p)p(z||window.event,
l);l.__ondraged=false}a.un(k,"mousemove",u);a.un(k,"mouseup",arguments.callee);a.un(k,"selectstart",a.noUp)};e.onmousedown=function(z){if(!l.unmoveable){z=z||window.event;var D=z.clientY;l._x=z.clientX;l._y=D;a.on(k,"mousemove",u);a.on(k,"selectstart",a.noUp);a.on(k,"mouseup",w)}}}else e.onmousedown=e.onmouseup=null},ready:function(e){this.readyList.push(e)},_onContentLoad:function(){if(!a.contentReady){a.contentReady=true;a.defUIReady&&a.defUIReady();for(var e=0;e<a.readyList.length;e++)a.readyList[e].call(window)}}});
CC.ready=function(){a.ready.apply(a,arguments)};k.addEventListener&&!f&&!b&&k.addEventListener("DOMContentLoaded",a._onContentLoad,false);h&&window==top&&function(){if(!a.contentReady){try{k.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}a._onContentLoad()}}();f&&k.addEventListener("DOMContentLoaded",function(){if(!a.contentReady){for(var e=0;e<k.styleSheets.length;e++)if(k.styleSheets[e].disabled){setTimeout(arguments.callee,0);return}a._onContentLoad()}},false);
a.on(window,"load",a._onContentLoad)})();if(!window.console)window.console={};if(!window.tester)window.tester=window.fireunit||{};CC.extendIf(console,{debug:fGo,info:fGo,trace:fGo,log:fGo,warn:fGo,error:fGo,assert:fGo,dir:fGo,count:fGo,group:fGo,groupEnd:fGo,time:fGo,timeEnd:fGo});
CC.extendIf(tester,{ok:function(a,k){if(typeof a==="function")a=a();if(typeof k==="function")k=k();if(a!=k){alert("assert failed in testing "+a+"=="+k);console.group("\u65ad\u8a00\u5931\u8d25:",a,k);console.error(a,k);console.trace();console.groupEnd()}},testDone:fGo});
(function(){var a=window.CC,k=a.Ajax=a.create();k.connect=function(f){f=new k(f);f.connect();return f};k.prototype={method:"GET",url:null,asynchronous:true,timeout:false,disabledComp:undefined,contentType:"application/x-www-form-urlencoded",msg:"\u6570\u636e\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u5019...",cache:true,success:function(f){f.invokeHtml()},displayPanel:null,initialize:function(f){a.extend(this,f);this.method=this.method.toUpperCase()},setOption:function(f){a.extend(this,f)},setMsg:fGo,_onTimeout:function(){if(!(this.xmlReq.readyState>=
4)){__debug&&console.log("ajax request timeout for "+this.url);this.abort();this._fire("timeout",this);this._close()}},closed:false,_close:function(){if(!this.closed){this.timeout&&clearTimeout(this._tid);if(this.onfinal)this.caller?this.onfinal.call(this.caller,this):this.onfinal.call(this,this);this._fire("final",this);this.disabledComp&&a.disable(this.disabledComp,false);this.json!==undefined&&delete this.json;this.xmlDoc!==undefined&&delete this.xmlDoc;this.text!==undefined&&delete this.text;
this.params=this.xmlReq=this.disabledComp=null;this.busy=0;this.closed=true}},abort:function(){if(this.xmlReq!==null){this.xmlReq.abort();this.aborted=true;this._close()}},_req:function(){if(!this.xmlReq)this.xmlReq=a.ajaxRequest()},_setHeaders:function(){this._req();if(this.method.toLowerCase()=="post")this.xmlReq.setRequestHeader("Content-type",this.contentType+(this.encoding?"; charset="+this.encoding:""));var f=this.xmlReq;this.headers&&a.each(this.headers,function(b,h){f.setRequestHeader(b,h)})},
open:function(){this._req();this.busy=1;this._fire("open",this);if(this.timeout)this._tid=setTimeout(this._onTimeout.bind(this),this.timeout);this.disabledComp&&a.disable(this.disabledComp,true);var f=this.params,b=this.cache,h=this.url;if(f||b){var e=h.indexOf("?")>0;if(b)h=e?h+"&__uid="+ +new Date:h+"?__uid="+ +new Date;if(f)if(this.method==="GET"){if(!e&&!b)h+="?";h=h+"&"+(typeof f==="string"?f:a.queryString(f))}else this.data=typeof f==="string"?f:a.queryString(a.extend(this.data,f))}this.xmlReq.open(this.method,
h,this.asynchronous)},send:function(f){this._fire("send",this);this._setHeaders();this.xmlReq.onreadystatechange=this._onReadyStateChange.bind(this);this.setMsg(this.msg);"POST"===this.method?this.xmlReq.send(f||this.data):this.xmlReq.send()},connect:function(f){if(this.busy)try{this.abort()}catch(b){__debug&&console.log(b)}this.open();this.send(f)},setRequestHeader:function(f,b){this._req();try{this.xmlReq.setRequestHeader(f,b)}catch(h){this._close();console.log(h)}},getResponseHeader:function(f){return this.xmlReq.getResponseHeader(f)},
_fire:function(f){this.status=f;if(this.statuschange)this.statuschange.call(this.caller||this,f,this);k.fire("statuschange",f,this);this.fire("statuschange",f,this);if(k.fire.apply(k,arguments)!==false)if(this.fire.apply(this,arguments)!==false)return;return false},_onReadyStateChange:function(){var f=this.xmlReq;if(f.readyState===4)if(!this.aborted)if(this._fire("load",this)!==false){var b=this.success,h=this.failure;try{if(f.status==200){this.loaded=true;if(this._fire("success",this)===false)return false;
if(b)this.caller?b.call(this.caller,this):b.call(this,this)}else{if(this._fire("failure",this)===false)return false;if(h)this.caller?h.call(this.caller,this):h.call(this,this)}}catch(e){__debug&&console.error(e);this._close();throw e;}this._close()}},getText:function(){if(this.text)return this.text;this._fire("text",this.text=this.xmlReq.responseText,this);return this.text},getXmlDoc:function(){if(this.xmlDoc)return this.xmlDoc;this._fire("xmlDoc",this.xmlDoc=this.xmlReq.responseXML.documentElement,
this);return this.xmlDoc},getJson:function(){if(this.json)return this.json;var f;try{this.json=f=eval("("+this.getText()+");")}catch(b){__debug&&console.log("Internal server error : a request responsed with wrong json format:\n"+b+"\n"+this.getText());throw b;}this._fire("json",f,this);return this.json},invokeScript:function(){return eval(this.getText())},invokeHtml:function(){var f=[],b=[],h=this.getText().stripScript(function(e){f[f.length]=e});b=[];h=h.stripStyle(function(e){b[b.length]=e.innerStyle()});
b.join("").execStyle();if(this.displayPanel)a.$(this.displayPanel).innerHTML=h;f.join("").execScript();h=f=b=null}};a.Eventable.call(k.prototype);a.Eventable.call(k)})();
(function(a){var k=a.Eventable,f={},b=a.Cache,h=a.Event,e=a.Base=function(d){if(d!==D)this.view=a.$(d)};e.find=function(d){for(var n in f)if(f[n].id===d)return f[n];return null};e.findByCid=e.byCid=function(d){return f[d]};e.byDom=function(d,n){for(var q,y=n&&n.view||g;d!==y;){if(d.cicyId)if((q=e.byCid(d.cicyId))&&!q.delegated)if(n){if(q.pCt===n)return q}else return q;d=d.parentNode}return null};var l=a.Tpl;if(!l)l=a.Tpl={};a.extend(l,{BLANK_IMG:window.BLANK_IMG||"http://www.bgscript.com/bgjs/default/s.gif",
$:function(d,n,q,y){var x=b.get(d);if(!x){n||(n=d);x=this[n];if(typeof x=="undefined")return null;n=b.get("div");n.innerHTML=q?q(x,y):x;x=n.removeChild(n.firstChild);b.put("div",n);b.put(d,x)}return x.cloneNode(true)},$$:function(d){return a.$$(this.$(d))},remove:function(d){b.remove(d);delete this[d]},forNode:function(d,n,q){if(n)d=a.templ(n,d,q);n=b.get("div");n.innerHTML=d;d=n.removeChild(n.firstChild);b.put("div",n);return d},def:function(d,n){if(arguments.length>=3){n=a.$A(arguments);n.shift();
n=n.join("")}this[d]=n;return this}});h.on(window,"unload",function(){var d=[];try{for(var n in f)d[d.length]=f[n];n=0;for(var q=d.length;n<q;n++)d[n].cacheId&&d[n].destory()}catch(y){__debug&&console.log(y)}finally{f=null}});var g=window.document,m=g.defaultView,o={},p=/(-[a-z])/gi,u=function(d,n){return n.charAt(1).toUpperCase()},w=["vid","hid","hid","hid"],z=["vvi","dbl","dbi",""],D,B=window.Math,t=window.parseInt,v=a.util.CssParser.getParser();a.extend(e.prototype,{type:"CC.Base",view:false,height:false,
width:false,left:false,top:false,minW:0,minH:0,maxH:B.MAX,maxW:B.MAX,clickDisabled:false,pCt:false,eventable:false,initialize:function(d){d&&a.extend(this,d);this.eventable&&k.apply(this);this.initComponent();this.autoRender&&this.render()},createView:function(){if(this.view){if(typeof this.view==="string")this.view=a.$(this.view)}else{if(this.hasOwnProperty("template")||this.constructor.prototype.hasOwnProperty("template")||this.superclass&&this.superclass.hasOwnProperty("template")){this.view=this.template.charAt(0)===
"<"?l.forNode(this.template,this):l.$(this.template);delete this.template}else this.view=l.$(this.type);if(!this.view)this.view=this.createView0(this.superclass)}if(!this.view)this.view=a.$C("DIV")},createView0:function(d){if(!d)return null;var n;if(n=d.hasOwnProperty("template")?l.$(d.template):l.$(d.type))return n;return arguments.callee(d.superclass)},cacheId:D,__flied:D,strHtml:false,innerCS:false,cs:false,id:D,title:D,titleNode:false,hoverCS:false,icon:false,css:false,unselectable:false,disabled:false,
tip:false,qtip:false,shadow:false,initComponent:function(){if(this.__flied===D){var d=this.cacheId="c"+a.uniqueID();f[d]=this;this.createView()}if(this.strHtml){this.html(this.strHtml);delete this.strHtml}this.innerCS&&this.addClass(this.innerCS);this.cs&&this.addClass(this.cs);if(this.id&&!this.view.id)this.view.id=this.id;if(this.id===D)this.id="comp"+a.uniqueID();this.view.cicyId=d;if(this.title)if(this.titleNode){if(!this.titleNode.tagName)this.titleNode=this.dom(this.titleNode)}else this.titleNode=
this.dom("_tle");this.icon&&this.setIcon(this.icon);this.clickCS&&this.bindClickStyle(this.clickCS);this.hoverCS&&this.bindHoverStyle(this.hoverCS);this.css&&this.cset(this.css);this.unselectable&&this.noselect();this.title&&this.setTitle(this.title);this.top!==false&&this.setTop(this.top);this.left!==false&&this.setLeft(this.left);if(this.disabled){this.disabled=1;this.disable(true)}if(this.tip)this.setTip(this.tip===true?this.title:this.tip);this.qtip&&a.Util.qtip&&a.Util.qtip(this);if(this.shadow){this.shadow=
a.ui.instance(this.shadow===true?"shadow":this.shadow);this.follow(this.shadow)}},__delegations:false,delegated:false,follow:function(d){var n=this.__delegations;if(!n)n=this.__delegations=[];d.delegated=true;n.push(d);if(!d.pCt)d.pCt=this;this.rendered&&!d.rendered&&d.render();return this},observes:false,destory:function(){this.pCt&&!this.delegated?this.pCt.remove(this):this.del();if(this.cacheId!==D){delete f[this.cacheId];var d=this.observes,n,q,y;if(d){var x;n=0;for(q=d.length;n<q;n++){y=d[n];
x=y[3]||this.view;if(x.removeEventListener)x.removeEventListener(y[0],y[2],true);else x.detachEvent&&x.detachEvent("on"+y[0],y[2])}this.observes=null}if(d=this.__delegations){n=0;for(q=d.length;n<q;++n){d[n].pCt=null;d[n].cacheId&&d[n].destory()}this.__delegations=null}this.view.cicyId=null;delete this.view;delete this.cacheId}},hidden:D,showTo:false,onRender:function(){if(this.hidden){this.hidden=D;this.display(false)}this.width!==false&&this.setWidth(this.width,true);this.height!==false&&this.setHeight(this.height,
true);var d=this.showTo;if(d){d=a.$(d);delete this.showTo}if(d){if(d.view)d=d.view;d.appendChild(this.view)}if(d=this.__delegations)for(var n=0,q=d.length;n<q;n++)d[n].rendered||d[n].render();if(this.shadow){this.getZ()||this.setZ(1001);this.shadow.attach(this)}},rendered:false,render:function(){if(this.rendered||this.fireOnce("render")===false)return false;this.rendered=true;this.onRender();this.fireOnce("rendered");if(!this.hidden&&this.shadow){var d=this.shadow;(function(){d.reanchor().display(true)}).timeout(0)}},
fire:fGo,fireOnce:fGo,un:fGo,hide:function(){return this.display(false)},show:function(){return this.display(true)},fly:function(d){d=this.dom(d);this.__flied!==D&&this.__flied>0&&this.unfly();if(d)return a.fly(d);return null},unfly:function(){if(this.__flied!==D){this.view=null;this.blockMode=this.displayMode=1;this.width=this.top=this.left=this.height=false;this.__flied-=1;this.__flied===0&&b.put("flycomp",this)}},addClass:function(d){var n=this.view,q=n.className.replace(d,"").trim();q+=" "+d;
n.className=q;return this},checkClass:function(d,n){if(d){var q=this.hasClass(d);if(n)q||this.addClass(d);else q&&this.delClass(d)}},addClassIf:function(d){if(this.hasClass(d))return this;var n=this.view,q=n.className.replace(d,"").trim();q+=" "+d;n.className=q;return this},delClass:function(d){var n=this.view;n.className=n.className.replace(d,"").trim();return this},hasClass:function(d){return d&&(" "+this.view.className+" ").indexOf(" "+d+" ")!=-1},switchClass:function(d,n){this.delClass(d);this.addClass(n);
return this},setClass:function(d){this.view.className=d;return this},$T:function(d){return this.view.getElementsByTagName(d)},dom:function(d){return a.$(d,this.view)},noUp:function(d,n){return this.domEvent(d||"click",h.noUp,true,null,n)},clear:a.ie?function(){for(var d=b.get("div"),n=this.view;n.firstChild;)d.appendChild(n.firstChild);d.innerHTML="";b.put("div",d);return this}:function(){for(var d=this.view;d.firstChild;)d.removeChild(d.firstChild);return this},del:function(){this.view.parentNode&&
this.view.parentNode.removeChild(this.view)},disabledCS:"g-disabled",displayMode:1,blockMode:1,display:function(d){if(d===D)return!this.hasClass(w[this.displayMode]);if(this.hidden!==!d){this.hidden=!d;d?this.onShow():this.onHide()}return this},onShow:function(){this.delClass(w[this.displayMode]);if(!this.displayMode||this.blockMode!==2)this.addClassIf(z[this.displayMode]);if(this.shadow){var d=this.shadow;(function(){d.reanchor().display(true)}).timeout(0)}},onHide:function(){if(!this.hasClass(w[this.displayMode])){if(!this.displayMode||
this.blockMode!==2)this.hasClass(z[this.displayMode])&&this.delClass(z[this.displayMode]);this.addClass(w[this.displayMode])}this.shadow&&this.shadow.display(false);this.contexted&&this.releaseContext()},setBlockMode:function(d){this.blockMode=d;return this},setDisplayMode:function(d){this.displayMode=d;if(d===0)this.blockMode=0;return this},disable:function(d){if(arguments.length===0)return this.disabled;d=!!d;if(this.disabled!==d){var n=this.disableNode||this.view;this.disabled=this.dom(n).disabled=
d;this.disabledCS&&this.checkClass(this.disabledCS,d);d&&this.hoverCS&&this.hasClass(this.hoverCS)&&this.delClass(this.hoverCS);if(d&&n.tabIndex>=0){this._tmpTabIdx=n.tabIndex||0;n.tabIndex=-1}else if(this._tmpTabIdx){n.tabIndex=this._tmpTabIdx;delete this._tmpTabIdx}}return this},append:function(d){this.view.appendChild(d.view||d);return this},html:function(d,n,q){if(n){var y=[],x=[];d=d.stripScript(function(F){y[y.length]=F});x=[];d=d.stripStyle(function(F){x[x.length]=F.innerStyle()});x.join("").execStyle();
this.view.innerHTML=d;y.join("").execScript();q&&q.call(this);d=y=x=null;return this}(this.ct||this.view).innerHTML=d;return this},appendHtml:function(d,n){if(n)d="<"+n+">"+d+"</"+n+">";(this.ct||this.view).appendChild(a.Tpl.forNode(d));return this},appendText:function(d){(this.ct||this.view).appendChild(g.createTextNode(d));return this},appendTo:function(d){d.type?d.append(this.view):a.$(d).appendChild(this.view);return this},insertAfter:function(d){var n=a.fly(d);d=n.view;var q=this.view,y=q.nextSibling;
y?q.parentNode.insertBefore(d,y):q.parentNode.appendChild(d);n.unfly();return this},insertBefore:function(d){d=a.$$(d).view;this.view.parentNode.insertBefore(d,this.view);return this},setZ:function(d){this.fastStyleSet("zIndex",d);this.shadow&&this.shadow.setZ(d-1);return this},getZ:function(){return this.fastStyle("zIndex")|0},style:function(d,n){if(n===D)return this.getStyle(d);return this.setStyle(d,n)},getOpacity:function(){return this.getStyle("opacity")},setOpacity:function(d){this.view.style.opacity=
d==1?"":d<1.0E-5?0:d;return this},setStyle:function(d,n){if(d==="opacity")this.setOpacity(n);else{var q=this.view.style;q[d==="float"||d==="cssFloat"?q.styleFloat===D?"cssFloat":"styleFloat":d.camelize()]=n}return this},getStyle:function(){return m&&m.getComputedStyle?function(d){var n=this.view,q;if(d=="float")d="cssFloat";if(q=n.style[d])return q;if(n=m.getComputedStyle(n,"")){if(!(q=o[d]))q=o[d]=d.replace(p,u);return n[q]}return null}:function(d){var n=this.view,q;if(d=="opacity"){if(typeof n.style.filter==
"string")if(q=n.style.filter.match(/alpha\(opacity=(.*)\)/i)){q=parseFloat(q[1]);if(!isNaN(q))return q?q/100:0}return 1}else if(d=="float")d="styleFloat";if(!(q=o[d]))q=o[d]=d.replace(p,u);if(d=n.style[q])return d;if(n=n.currentStyle)return n[q];return null}}(),fastStyleSet:function(d,n){this.view.style[d]=n;return this},fastStyle:function(){return m&&m.getComputedStyle?function(d){var n=this.view,q;if(q=n.style[d])return q;if(n=m.getComputedStyle(n,""))return n[d];return null}:function(d){var n=
this.view,q;if(q=n.style[d])return q;if(n=n.currentStyle)return n[d];return null}}(),setIcon:function(d){var n=this.fly(this.iconNode||"_ico");this.iconCS&&this.addClassIf(this.iconCS);if(n){typeof d==="string"?n.addClass(d):n.display(d);n.unfly()}return this},setTip:function(d){if(this.view&&!this.qtip)this.view.title=d;this.tip=d;return this},getTitle:function(){return this.title},brush:false,setTitle:function(d){this.title=d;if(this.titleNode){if(!this.titleNode.tagName)this.titleNode=this.dom(this.titleNode)}else this.titleNode=
this.dom("_tle");if(this.titleNode)this.titleNode.innerHTML=this.brush?this.brush(d):d;if(this.tip&&this.view&&!this.qtip)this.view.title=d;if(this.qtip===true)this.qtip=d;return this},setWidth:function(d){this.setSize(d,false);return this},getWidth:function(d){if(d&&this.width!==false)return this.width;return this.getSize().width},setHeight:function(d){this.setSize(false,d);return this},getHeight:function(d){if(d&&this.height!==false)return this.height;return this.getSize().height},getOuterW:function(d){var n=
this.outerW;if(!d||n===D)this.outerW=n=(t(this.fastStyle("borderLeftWidth"),10)||0)+(t(this.fastStyle("borderRightWidth"),10)||0)+(t(this.fastStyle("paddingLeft"),10)||0)+(t(this.fastStyle("paddingRight"),10)||0);return n},getOuterH:function(d){var n=this.outerH;if(!d||n===D)this.outerH=n=(t(this.fastStyle("borderTopWidth"),10)||0)+(t(this.fastStyle("borderBottomWidth"),10)||0)+(t(this.fastStyle("paddingTop"),10)||0)+(t(this.fastStyle("paddingBottom"),10)||0);return n},getContentSize:function(d){var n=
this.getSize(d);return[n.width-this.getOuterW(d),n.height-this.getOuterH(d)]},setSize:function(d,n){if(d.width!==D){var q=d.width;if(q!==false){if(q<this.minW)q=this.minW;if(q>this.maxW)q=this.maxW;this.fastStyleSet("width",a.borderBox?q+"px":B.max(q-this.getOuterW(),0)+"px");this.width=q}q=d.height;if(q!==false){if(q<this.minH)q=this.minH;if(q>this.maxH)q=this.maxH;if(q<0)d.height=q=0;this.fastStyleSet("height",a.borderBox?q+"px":B.max(q-this.getOuterH(),0)+"px");this.height=q}return this}if(d!==
false){if(d<this.minW)d=this.minW;if(d>this.maxW)d=this.maxW;this.fastStyleSet("width",a.borderBox?d+"px":B.max(d-this.getOuterW(),0)+"px");this.width=d}if(n!==false){if(n<this.minH)n=this.minH;if(n>this.maxH)n=this.maxH;this.fastStyleSet("height",a.borderBox?n+"px":B.max(n-this.getOuterH(),0)+"px");this.height=n}return this},setXY:function(d,n){if(a.isArray(d))if(d[0]!==false||d[1]!==false){if(d[0]!==false){this.fastStyleSet("left",d[0]+"px");this.left=d[0]}if(d[1]!==false){this.fastStyleSet("top",
d[1]+"px");this.top=d[1]}return this}if(d!==false||n!==false){if(d!==false){this.fastStyleSet("left",d+"px");this.left=d}if(n!==false){this.fastStyleSet("top",n+"px");this.top=n}}return this},setTop:function(d){this.setXY(false,d);return this},getTop:function(d){if(d&&this.top!==false)return this.top;return this.top=t(this.fastStyle("top"),10)||this.view.offsetTop},setLeft:function(d){this.setXY(d,false);return this},getLeft:function(d){if(d&&this.left!==false)return this.left;return this.left=t(this.fastStyle("left"),
10)||this.view.offsetLeft},xy:function(d){return[this.getLeft(d),this.getTop(d)]},absoluteXY:function(){var d,n,q;n=g.body||g.documentElement;q=this.view;if(q==n||!this.display())return[0,0];if(q.getBoundingClientRect){n=q.getBoundingClientRect();d=a.fly(g);q=d.getScroll();d.unfly();return[n.left+q.left,n.top+q.top]}var y=0,x=0;d=q;for(var F=this.fastStyle("position")=="absolute",E=a.fly(q);d;){y+=d.offsetLeft;x+=d.offsetTop;E.view=d;if(!F&&E.fastStyle("position")=="absolute")F=true;if(a.gecko){var G=
t(E.fastStyle("borderTopWidth"),10)||0,A=t(E.fastStyle("borderLeftWidth"),10)||0;y+=A;x+=G;if(d!=q&&E.fastStyle("overflow")!="visible"){y+=A;x+=G}}d=d.offsetParent}if(a.safari&&F){y-=n.offsetLeft;x-=n.offsetTop}if(a.gecko&&!F){E.view=n;y+=t(E.fastStyle("borderLeftWidth"),10)||0;x+=t(E.fastStyle("borderTopWidth"),10)||0}for(d=q.parentNode;d&&d!=n;){E.view=d;if(!a.opera||d.tagName!="TR"&&E.fastStyle("display")!="inline"){y-=d.scrollLeft;x-=d.scrollTop}d=d.parentNode}E.unfly();return[y,x]},absoluteX:function(){return this.absoluteXY()[0]},
absoluteY:function(){return this.absoluteXY()[1]},getSize:function(d){if(d&&this.width!==false&&this.height!==false)return{width:this.width,height:this.height};var n=this.view;d=B.max(n.offsetWidth,n.clientWidth);if(!d){d=t(this.fastStyle("width"),10)||0;a.borderBox||(d+=this.getOuterW())}n=B.max(n.offsetHeight,n.clientHeight);if(!n){n=t(this.fastStyle("height"),10)||0;a.borderBox||(n+=this.getOuterH())}return{width:d,height:n}},setBounds:function(d,n,q,y){this.setXY(d,n);return this.setSize(q,y)},
anchorPos:function(d,n,q,y,x,F){if(d.view){var E=d.absoluteXY(),G=d.getSize(true);d=[E[0],E[1],G.width,G.height]}G=this.getSize(true);E=G.width;G=G.height;var A=d[0],C=d[1],H=d[2];d=d[3];var I;I=n.charAt(0)==="l"?A-E:A+H;n=n.charAt(1)==="t"?C-G:C+d;if(q)if(q.charAt(0)==="h")I=q.charAt(1)==="l"?I-E:I+E;else n=q.charAt(1)==="u"?n-G:n+G;if(y){I+=y[0];n+=y[1]}if(x){y=a.getViewport();q=y.height;y=y.width;if(I<0){I=0;if(C+d>n&&C<n+G)n=C-G}if(I+E>y)I=C+d>n&&C<n+G?A-E:y-E;if(n<0&&C+d+G<=q)n=A+H>I&&A<I+E?
C+d:0;if(n+G>q&&C-G>=0)n=A+H>I&&A<I+E?C-G:q-G}E=[I,n];F&&this.setXY(E);return E},cset:function(d){v.parse(this,d);return this},clip:function(){var d=this.view;if(d._overflow)return this;this._overflow=d.style.overflow||"auto";if(this._overflow!=="hidden")d.style.overflow="hidden";return this},unclip:function(){if(!this._overflow)return this;this.view.style.overflow=this._overflow=="auto"?"":this._overflow;this._overflow=null;return this},copyViewport:function(d){d=a.$$(d);d.setXY(this.xy());d.setSize(this.getSize());
return this},focus:function(d){if(this.disabled)return this;var n=this.focusNode?this.dom(this.focusNode):this.view;if(d)(function(){try{n.focus()}catch(y){}}).timeout(d);else try{n.focus()}catch(q){}return this},cssText:function(d){if(d)if(typeof d=="string")for(var n=/\s?([a-z\-]*)\:\s?([^;]*);?/gi,q;(q=n.exec(d))!=null;)this.setStyle(q[1],q[2]);else if(typeof d=="object")for(n in d)this.setStyle(n,d[n]);else typeof d=="function"&&this.cssText(d.call());return this},noselect:function(){var d=this,
n=typeof this.unselectable,q=false;if(n!="undefined"&&n!="boolean"){q=true;d=this.fly(this.unselectable)}d.view.unselectable="on";d.noUp("selectstart");d.addClass("noselect");q&&d.unfly();return this},autoHeight:function(d,n){var q=this.getHeight();this.clip();this.view.style.height=1;setTimeout(function(){var y=t(this.view.scrollHeight,10);if(d)this.setHeight(q);else{this.setHeight(y);this.unclip();n&&n()}}.bind(this),0);return this},getScroll:function(){var d=this.view,n=g;if(d==n||d==n.body){if(a.ie&&
a.strict){d=n.documentElement.scrollLeft||n.body.scrollLeft||0;n=n.documentElement.scrollTop||n.body.scrollTop||0}else{d=window.pageXOffset||n.body.scrollLeft||0;n=window.pageYOffset||n.body.scrollTop||0}return{left:d,top:n}}else return{left:d.scrollLeft,top:d.scrollTop}},ancestorOf:function(d,n){d=d.view||d;var q=this.view;if(q.contains&&!a.safari)return q.contains(d);else if(q.compareDocumentPosition)return!!(q.compareDocumentPosition(d)&16);if(n===D)n=65535;for(var y=d.parentNode,x=g.body;y!=x&&
n>0&&y!==null;){if(y==q)return true;y=y.parentNode;n--}return false},domEvent:function(d,n,q,y,x,F){if(d=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||this.view.attachEvent))d="keydown";if(!this.observes)this.observes=[];var E=y||this;y=function(G){G=G||window.event;if(E.disabled){h.stop(G);return false}q&&h.stop(G);return n.call(E,G)};if(x){x=this.dom(x);if(!x)return this;this.observes.push([d,n,y,x,F])}else{x=this.view;this.observes.push([d,n,y])}if(x.addEventListener)x.addEventListener(d,
y,F);else x.attachEvent&&x.attachEvent("on"+d,y);return this},wheelEvent:function(d,n,q,y,x){a.ie||a.opera?this.domEvent("mousewheel",d,n,q,y,x):this.domEvent("DOMMouseScroll",d,n,q,y,x)},unEvent:function(d,n,q){if(d=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||this.view.attachEvent))d="keydown";var y=this.observes;if(y){q=q!==D?q.tagName?q:this.dom(q):this.view;for(var x=0,F=y.length;x<F;x++){var E=y[x];if(E[0]==d&&E[1]==n&&(E[3]==q||E[3]===D)){if(q.removeEventListener)q.removeEventListener(d,
E[2],E[4]);else q.detachEvent&&q.detachEvent("on"+d,E[2]);y.remove(x);return this}}}},bindEnter:function(d,n,q,y){return this.domEvent("keydown",function(x){if(h.isEnterKey(x)){n&&h.stop(x);d.call(this,x)}},false,q,y)},bindAlternateStyle:function(d,n,q,y,x,F,E,G,A){var C=d+"Node",H=d+"Target";G=G||this[C];var I=A||this[H];if(G){G=this.dom(G);delete this[C]}else G=this.view;if(I){I=this.dom(I);delete this[H]}else I=this.view;if(I==this.view){x=x||this[d+"Callback"];F=F||this[n+"Callback"]}this.domEvent(d,
function(J){var K=false;if(x)K=x.call(this,J);K!==true&&a.addClass(I,q)},y,E,G);this.domEvent(n,function(J){var K=false;if(F)K=F.call(this,J);K!==true&&a.delClass(I,q)},y,E,G);return this},bindHoverStyle:function(d,n,q,y,x,F,E){return this.bindAlternateStyle("mouseover","mouseout",d||this.hoverCS,n,q||this.onMouseHover,y||this.onMouseOff,x||this,F,E)},bindFocusStyle:function(d,n,q,y,x,F,E){return this.bindAlternateStyle("focus","blur",d,n,q||this.onfocusHover,y||this.onfocusOff,x||this,F,E)},bindClickStyle:function(d,
n,q,y,x,F,E){this.bindAlternateStyle("mousedown","mouseup",d,n,q,y,x,F,E);this.domEvent("mouseout",function(){this.docked||this.delClass(d)});return this},bindContext:function(d,n,q,y,x,F){if(this.contexted)return this;var E=y?this.dom(y):this.view;q||(q=this);var G=this;n=function(A){if(d)if(d.call(q,A,E)===false)return;h.un(g,"mousedown",arguments.callee);h.un(E,"mousedown",h.noUp);var C=E==G.view?G:a.fly(E);G.contexted=false;delete G.__contextedCb;x&&a.fly(x).delClass(F).unfly();C.display(false).unfly();
G.fire("contexted",false,A,E)};h.on(E,"mousedown",h.noUp);h.on(g,"mousedown",n);this.contexted=true;this.__contextedCb=n;x&&a.fly(x).addClass(F).unfly();this.fire("contexted",true,E);return this},releaseContext:function(){this.contexted&&this.__contextedCb()},$$:function(d){(d=a.$$(d,this.view))&&this.follow(d);return d},attr:function(d,n,q){if(d=this.dom(d))return d=a.attr(d,n,q)},setCloseable:function(d){this.closeable=d;var n=this.fly(this.closeNode||"_cls");n&&n.display(d).unfly();return this},
offsetsTo:function(d){var n=this.absoluteXY();d=a.fly(d);var q=d.absoluteXY();d.unfly();return[n[0]-q[0],n[1]-q[1]]},scrollIntoView:function(d,n){var q=d?d.view||d:a.$body.view,y=this.getHiddenAreaOffsetVeti(q);if(y!==false)q.scrollTop=y;if(n){y=this.getHiddenAreaOffsetHori(d);if(y!==false)q.scrollLeft=y}return this},scrollChildIntoView:function(d,n){this.fly(d).scrollIntoView(this.view,n).unfly();return this},getHiddenAreaOffsetVeti:function(d){var n=d.view||d,q=this.view,y=this.offsetsTo(n);d=t(n.scrollTop,
10);y=y[1]+d;q=q.offsetHeight;var x=y+q;n=n.clientHeight;var F=d+n;if(q>n||y<d)return y;else if(x>F){x-=n;if(d!=x)return x}return false},getHiddenAreaOffsetHori:function(d){var n=d.view||d,q=this.view;d=t(n.scrollLeft,10);var y=this.offsetsTo(n)[0]+d;q=q.offsetWidth;n=n.clientWidth;var x=y+q,F=d+n;if(q>n||y<d)return y;else if(x>F){x-=n;if(x!=d)return x}return false}});e.create=function(d,n){var q;if(typeof d==="string")q=new e[d](n);else{q=new e;q.initialize(d)}return q};e.applyOption=function(d,
n){var q=a.fly(d);q.initialize(n);q.render();q.unfly()};a.$$=function(d,n){if(!d||d.view)return d;var q,y="c"+a.uniqueID();if(!n){if(q=a.$(d)){q=new e(q);q.cacheId=y;f[y]=q}return q}if(q=n&&n.view?a.$(d,n.view):a.$(d,n)){q=new e(q);q.cacheId=y;f[y]=q}return q};b.register("flycomp",function(){var d=new e;d.__flied=0;return d});a.fly=function(d){if(d)if(typeof d=="string")d=a.$(d);else if(d.view){if(d.__flied!==D)d.__flied+=1;return d}if(!d){console.trace();throw"Node not found.";}var n=b.get("flycomp");
n.view=d;return n};if(a.ie){e.prototype.getOpacity=function(){var d=this.view;if(d.filters[0])return parseFloat(d.filters[0].Opacity/100);if(value=(this.getStyle(d,"filter")||"").match(/alpha\(opacity=(.*)\)/))if(value[1])return parseFloat(value[1])/100;return 1};e.prototype.setOpacity=function(d){var n=this.view.style;n.zoom=1;n.filter=(n.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(d==1?"":" alpha(opacity="+d*100+")");return this}}a.ui={ctypes:{},def:function(d,n){this.ctypes[d]=n},getCls:function(d){return this.ctypes[d]},
instance:function(d,n){if(typeof d==="string")return new this.ctypes[d](n);var q;if(!d)return e.create();if(d.cacheId)return d;q=d.ctype;if(!q)return e.create(d);return new this.ctypes[q](d)}};a.ui.def("base",function(d){return e.create(d)});h.defUIReady=function(){a.$body=a.$$(g.body);if(g.body.lang!=="zh")g.body.lang="zh"}})(CC);
CC.util.BrushFactory={floatBrush:function(a,k){var f=Math.pow(10,a);switch(k){case "%":f*=100;var b=f/100;return function(h){return Math.round(h*f)/b+"%"};default:return function(h){return Math.round(h*f)/f}}},date:function(a){a||(a="yy/mm/dd");return function(k){return CC.dateFormat(k,a)}},get:function(a){if(!this.cache)this.cache={};var k=this.cache[a];if(!k)switch(a){case ".xx":k=CC.util.BrushFactory.floatBrush(2);this.reg(a,k);break;case ".xx%":k=CC.util.BrushFactory.floatBrush(2,"%");this.reg(a,
k);break}return k},reg:function(a,k){if(!this.cache)this.cache={};this.cache[a]=k}};CC.util.d2d={};CC.util.d2d.Point=function(a,k){this.x=a||0;this.y=k||0};CC.util.d2d.Rect=function(a,k,f,b){if(arguments.length===4){this.l=a||0;this.t=k||0;this.w=f||0;this.h=b||0}else{this.l=a[0];this.t=a[1];this.w=a[2];this.h=a[3]}this.valid=true};
CC.extend(CC.util.d2d.Rect.prototype,{valid:true,l:0,t:0,w:0,h:0,isEnter:function(a){if(this.valid){var k=a.x;a=a.y;return(k=k>=this.l&&k<=this.l+this.w&&a>=this.t&&a<=this.t+this.h)?this:false}return false},update:fGo,toString:function(){return this.valueOf()+""},valueOf:function(){return[this.l,this.t,this.w,this.h]}});
CC.create("CC.util.d2d.RectZoom",CC.util.d2d.Rect,function(a){var k=window.Math,f=k.max,b=k.min;return{pZoom:null,initialize:function(h){this.valid=true;h&&CC.extend(this,h);h=CC.delAttr(this,"rects");this.rects=[];if(h)for(var e=0,l=h.length;e<l;e++)this.add(h[e])},prepare:fGo,getRects:function(){return this.rects},add:function(h,e){h.pZoom&&h.pZoom.remove(h);this.rects.push(h);e&&this.update();h.pZoom=this;return this},remove:function(h,e){delete h.pZoom;this.rects.remove(h);e&&this.update();return this},
contains:function(h){for(var e=false,l,g=0,m=this.rects,o=m.length;g<o;g++){l=m[g];if(l===h){e=this;break}if(l.contains)if(e=l.contains(h))break}return e},isEnter:function(h){if(this.valid&&a.isEnter.call(this,h)){var e,l=this.rects,g=l.length,m;for(e=0;e<g;e++)if(m=l[e].isEnter(h))return m}return false},union:function(){var h,e=this.rects,l=e.length,g,m=[],o=[],p=[],u=[];if(l===0)m=o=p=u=0;else{for(h=0;h<l;h++){g=e[h];m.push(g.t);o.push(g.t+g.h);p.push(g.l);u.push(g.l+g.w)}p=b.apply(k,p);u=f.apply(k,
u);m=b.apply(k,m);o=f.apply(k,o)}this.l=p;this.t=m;this.w=u-p;this.h=o-m},update:function(){this.clear();this.prepare();var h,e=this.rects,l=e.length;for(h=0;h<l;h++)e[h].update();this.union()},clear:fGo}});
CC.create("CC.util.d2d.ComponentRect",CC.util.d2d.Rect,{z:-1,initialize:function(a,k){this.comp=a;this.valid=true;a.ownRect=this;k&&this.update()},update:function(){if(this.hidden){this.l=this.t=this.w=this.h=0;this.z=-1}else{var a=this.comp,k=a.getSize(),f=a.absoluteXY();this.z=a.getZ();this.l=f[0];this.t=f[1];this.w=k.width;this.h=k.height}},destory:function(){delete this.comp.ownRect;this.comp=null}});
CC.create("CC.util.AsynchronizeQueue",null,{openEvt:"open",finalEvt:"final",initialize:function(a){this.waitQueue=[];this.requestQueue=[];a&&CC.extend(this,a);this.connectorKeys={};this.connectors={};this.max=0},join:function(a){this.waitQueue.push(a);a.on(this.openEvt,this.getConnectorBinder(this.openEvt));this.max++;var k=CC.uniqueID().toString();this.connectorKeys[a]=k;this.connectors[k]=a;if(this.onincrease)this.onincrease.call(this.caller?this.caller:this,a,this);return k},out:function(a){if(this.waitQueue.indexOf(a)>=
0){this.waitQueue.remove(a);a.un(this.openEvt,this.getConnectorBinder(this.openEvt));this.onOut(a)}else if(this.requestQueue.indexOf(a)>=0){this.requestQueue.remove(a);a.un(this.finalEvt,this.getConnectorBinder(this.finalEvt));this.onOut(a)}},getConnector:function(a){return this.connectors[a]},isConnectorBusy:function(a){return(a=this.getConnector(a))&&a.busy},isConnectorLoaded:function(a){return(a=this.getConnector(a))&&a.loaded},onOut:function(a){delete this.connectors[CC.delAttr(a,this.connectorKeys)];
if(this.ondecrease)this.ondecrease.call(this.caller?this.caller:this,a,this);if(this.waitQueue.length==0&&this.requestQueue.length==0&&this.onempty){this.onempty.call(this.caller?this.caller:this,this);this.max=0}},getConnectorBinder:function(a){var k=this.connectorBinders;if(!k)k=this.connectorBinders={};var f=k[a];if(!f){switch(a){case this.finalEvt:f=this.onConnectorFinal.bindAsListener(this);break;case this.openEvt:f=this.onConnectorOpen.bindAsListener(this);break}if(f)k[a]=f}return f},onConnectorFinal:function(a){if(this.onfinal)this.onfinal.call(this.caller?
this.caller:this,a,this);this.out(a)},onConnectorOpen:function(a){this.waitQueue.remove(a);this.requestQueue.push(a);if(this.requestQueue.length===1)if(this.onfirstopen)this.onfirstopen.call(this.caller?this.caller:this,a,this);if(this.onopen)this.onopen.call(this.caller?this.caller:this,a,this);a.on(this.finalEvt,this.getConnectorBinder(this.finalEvt))}});
CC.create("CC.util.Tracker",null,{max:20,initialize:function(a){this.area=[];a&&CC.extend(this,a)},track:function(a){var k=this.area;k.indexOf(a)!==-1&&k.remove(a);k.push(a);k.length>this.max&&k.pop();__debug&&console.log("\u8bb0\u5f55:",a)},isValid:fGo,validCaller:null,pop:function(){for(var a=this.validCaller||this,k=this.area,f=k.length-1;f>=0;f--){__debug&&console.log("\u62b9\u9664:",this.isValid.call(a,k[f]),k[f]);if(this.isValid.call(a,k[f]))return k[f];k.pop()}},remove:function(a){this.area.remove(a)},
size:function(){return this.area.length}});
(function(){var a=window.CC,k=a.Base,f=k.prototype,b=a.ui;if(!a.layout)a.layout={};a.layout.def=function(g,m){this[g]=m;return this};a.create("CC.ui.Item",k,{});a.ui.def("item",a.ui.Item);a.create("CC.layout.Layout",null,{ct:false,items:false,layoutOnChange:false,deffer:false,initialize:function(g){g&&a.extend(this,g);(g=a.delAttr(this,"ct"))&&this.attach(g)},beforeAdd:fGo,itemCS:false,add:function(g,m){g.cacheId||(g=this.ct.instanceItem(g));var o=g.lyInf;if(o)m&&a.extend(o,m);else g.lyInf=o=m||{};
this.beforeAdd(g,o);this.itemCS&&g.addClassIf(this.itemCS);this.ct.add(g);if(this.isUp()){this.layoutOnChange?this.doLayout():this.layoutChild(g);g.rendered||g.render()}return this},isUp:function(){return!this.invalidate&&this.ct.rendered},display:function(g,m){g.display(m);this.layoutOnChange&&this.doLayout()},doLayout:function(){if(this.isUp())if(this.ct.hidden){__debug&&console.log(this,"\u5bb9\u5668\u5904\u4e8e\u9690\u85cf\u72b6\u6001,\u672a\u7acb\u5373\u5e03\u5c40..");this.defferArgs=arguments}else if(this.deffer!==
false){var g=a.$A(arguments),m=this;(function(){m.ct&&m.onLayout.apply(m,g)}).timeout(this.deffer)}else this.onLayout.apply(this,arguments)},cfgFrom:function(g){return g.lyInf||{}},insert:function(){this.layoutOnChange&&this.doLayout.bind(this).timeout(0)},layoutChild:fGo,remove:function(){this.layoutOnChange&&this.doLayout.bind(this).timeout(0)},fromArray:function(g){var m=this.ct,o=m.itemCls,p,u=m.itemCfg||false;if(typeof o==="string")o=b.ctypes[o];var w=this.invalidate;this.invalidate=true;for(var z=
0,D=g.length;z<D;z++){p=g[z];if(!p.cacheId){if(!p.ctype&&u)p=a.extendIf(p,u);p=m.instanceItem(p,o,true)}this.add(p)}this.invalidate=w;this.isUp()&&this.doLayout()},ctCS:false,wrCS:false,attach:function(g){this.ct=g;if(g.deffer!==undefined)this.deffer=g.deffer;this.ctCS&&g.addClass(this.ctCS);this.wrCS&&g.wrapper.addClass(this.wrCS);if(this.items){this.fromArray(this.items);delete this.items}if(g.items){this.fromArray(g.items);delete g.items}return this},detach:function(){if(this.ct)this.wrapper=this.ct=
null;return this},onLayout:function(){for(var g=0,m,o=this.ct.children,p=o.length;g<p;g++){m=o[g];this.layoutChild(m);m.rendered||m.render()}}});var h=a.layout.Layout.prototype,e=a.create(a.layout.Layout,{doLayout:function(){h.doLayout.call(this);this.doLayout=fGo}});a.layout.def("default",e);a.Tpl.def("CC.ui.Panel",'<div class="g-panel"></div>');a.create("CC.ui.ContainerBase",k,{children:null,eventable:true,ct:null,minH:0,minW:0,maxH:65535,maxW:65535,itemCls:a.ui.Item,autoRender:false,items:false,
array:false,initialize:function(){k.prototype.initialize.apply(this,arguments);if(this.array){this.fromArray(this.array);delete this.array}},keyEvent:undefined,useContainerMonitor:false,cancelClickBubble:false,clickEvent:false,selectionProvider:false,connectionProvider:false,initComponent:function(){f.initComponent.call(this);this.keyEvent&&this.bindKeyInstaller();this.useContainerMonitor&&this.clickEvent&&this.bindClickInstaller();this.selectionProvider&&this.getSelectionProvider();this.connectionProvider&&
this.getConnectionProvider();this.children=[];this.createLayout()},layout:"default",lyCfg:false,createLayout:function(){if(typeof this.layout==="string"){var g=this.lyCfg||{};g.ct=this;this.layout=new a.layout[this.layout](g);this.lyCfg&&delete this.lyCfg}else this.layout.attach(this)},ct:false,createView:function(){f.createView.call(this);if(this.ct){if(typeof this.ct==="string")this.ct=this.dom(this.ct)}else this.ct=this.view;if(!this.ct)this.ct=this.view;this.wrapper=this.ct==this.view?this:this.$$(this.ct)},
destoryed:false,destory:function(){this.destoryed=true;this.destoryChildren();var g=this.bndActs,m;if(g)for(;g.length>0;){m=g[0];this.unEvent(m[0],m[2],m[3]);g.remove(0)}this.layout.detach();this.wrapper=this.ct=null;f.destory.call(this)},onRender:function(){f.onRender.call(this);this.layout.doLayout()},_addNode:function(g,m){m===undefined?this.ct.appendChild(g):this.ct.insertBefore(this.ct.childNodes[m],g)},_removeNode:function(g){g.parentNode.removeChild(g)},add:function(g){g.cacheId||(g=this.instanceItem(g));
if(this.fire("beforeadd",g)!==false&&this.beforeAdd(g)!==false){this.onAdd(g);this.afterAdd(g);this.fire("add",g)}return this},__click:false,onAdd:function(g){this.children.push(g);this._addNode(g.view);if(g.pCt){if(g.pCt!==this){g.pCt.remove(g);g.pCt=this}}else g.pCt=this;if(!this.useContainerMonitor&&this.clickEvent&&!g.__click){var m=g.__click=this.clickEventTrigger,o=this.clickEventNode?g.dom(this.clickEventNode):g.view;g.domEvent(this.clickEvent===true?"mousedown":this.clickEvent,m,this.cancelClickBubble,
null,o)}},beforeAdd:fGo,afterAdd:fGo,ctClickTrigger:function(g,m){!g.disabled&&!g.clickDisabled&&this.fire("itemclick",g,m)},clickEventTrigger:function(g){var m=this.pCt;this.clickDisabled||m.fire("itemclick",this,g)},remove:function(g){g=this.$(g);if(g.delegated){this.__delegations.remove(g);g.view.parentNode&&g.view.parentNode.removeChild(g.view)}else if(this.fire("beforeremove",g)!==false&&this.beforeRemove(g)!==false){this.onRemove(g);this.fire("remove",g)}return this},beforeRemove:fGo,onRemove:function(g){g.pCt=
null;this.children.remove(g);this._removeNode(g.view)},removeAll:function(){var g,m=this.children;for(this.invalidate();m.length>0;){g=m[0];this.remove(g)}this.validate()},destoryChildren:function(){var g,m=this.children;for(this.invalidate();m.length>0;){g=m[0];this.remove(g);g.destory()}this.destoryed||this.validate()},$:function(g){if(g===null||g===undefined||g===false)return null;if(g.tagName)return k.byDom(g,this);if(typeof g==="number")return this.children[g];if(g.view)return g;for(var m=this.children,
o=0,p=m.length;o<p;o++)if(m[o].id==g)return m[o];return null},onShow:function(){f.onShow.call(this);var g=this.layout;if(g.defferArgs){__debug&&console.log(this,"\u5bb9\u5c40\u663e\u793a\u65f6\u5e03\u5c40..",g.defferArgs);g.doLayout.apply(g,g.defferArgs);g.defferArgs=false;if(this.shadow)(function(){this.shadow.reanchor().display(true)}).bind(this).timeout(g.deffer||0)}},indexOf:function(g){g=this.$(g);return!g?-1:this.children.indexOf(g)},size:function(){return this.children.length},contains:function(g){g.type||
(g=this.$(g));return g.pCt===this},insertBefore:function(g,m){this.insert(this.indexOf(m),g)},_insertBefore:function(g,m){this.ct.insertBefore(g,m)},insert:function(g,m){m.pCt===this&&this.indexOf(m)<g&&g--;if(this.fire("beforeadd",m)!==false&&this.beforeAdd(m)!==false){if(m.pCt){m.pCt.remove(m);m.pCt=this}this.children.insert(g,m);var o=this.children[g+1];o?this._insertBefore(m.view,o.view):this._addNode(m.view);this.fire("add",m)}return this},clear:function(){for(var g=this.children,m=0,o=g.length;m<
o;m++)this.remove(g[0]);return this},swap:function(g,m){var o=this.children,p=this.indexOf(g),u=this.indexOf(m);g=this.children[p];m=this.children[u];o[p]=m;o[u]=g;o=g.view;p=m.view;if(o.swapNode)o.swapNode(p);else{u=p.parentNode;var w=p.nextSibling;if(w==o)u.insertBefore(o,p);else if(p==o.nextSibling)u.insertBefore(p,o);else{o.parentNode.replaceChild(p,o);u.insertBefore(o,w)}}return this},sort:function(g){var m=this.children;g===undefined?m.sort():m.sort(g);g=document.createDocumentFragment();for(var o=
0,p=m.length;o<p;o++)g.appendChild(m[o].view);this.ct.appendChild(g);this.sorted=true;return this},reverse:function(){var g=this.children;g.reverse();for(var m=document.createDocumentFragment(),o=0,p=g.length;o<p;o++)m.appendChild(g[o].view);this.ct.appendChild(m);return this},filter:function(g,m){m=m||window;a.each(this.children,function(){g.call(m,this)?this.display(1):this.display(0)});return this},filterBy:function(g,m,o,p){for(var u=this.children,w=this.children.length,z=0,D=p||false,B,t;z<w;z++){p=
u[z];if(D){if(p[m]===o)B=g.call(p)}else{t=p[m]||false;if(t==o)B=g.call(p)}if(B===false)break}return this},each:function(g,m){var o,p,u,w=this.children;o=0;for(u=w.length;o<u;o++){p=w[o];p=g.call(m||p,p,o);if(p===false)break}return p},parentOf:function(g){if(!g)return false;if(g.pCt==this)return true;var m=this;return a.eachH(g,"pCt",function(){if(this==m)return 1})==true},fromArray:function(g,m){m=m||this.itemCls;if(typeof m==="string")m=a.ui.ctypes[m];for(var o,p=this.itemCfg||false,u=0,w=g.length;u<
w;u++){o=g[u];if(!o.cacheId){if(!o.ctype&&p)o=a.extendIf(o,p);o=this.instanceItem(o,m,true)}this.add(o)}return this},instanceItem:function(g,m,o){if(!m){m=this.itemCls;if(typeof m==="string")m=a.ui.ctypes[m]}g||(g={});if(!g.cacheId){if(!o&&this.itemCfg)g=a.extendIf(g,this.itemCfg);g.pCt=this;g=g.ctype?b.instance(g):new (m||a.ui.Item)(g);if(g.array&&g.children){g.fromArray(g.array);delete g.array}}return g},bndActs:false,itemAction:function(g,m,o,p,u,w){p=p||this;var z=function(D){var B=D.target||
D.srcElement;if((w===undefined||B.tagName===w)&&B!==this.view)if(B=this.$(B))return B.disabled?false:m.call(p,B,D)};if(!this.bndActs)this.bndActs=[];this.bndActs.push([g,m,z,u]);this.domEvent(g,z,o,null,u);u=z=null;return this},unItemAction:function(g,m,o){for(var p=this.bndActs,u=0,w=p.length;u<w;u++){var z=p[u];if(z[0]===g&&z[1]===m&&z[3]===o){o!==undefined&&(o.tagName||this.dom(o));this.unEvent(g,z[2],z[3]);p.remove(u);return this}}return this},bindKeyInstaller:function(){if(this.keyEvent===undefined)this.keyEvent=
true;var g=this.keyEvent===true?"keydown":this.keyEvent,m=this.keyEventNode=this.keyEventNode?this.dom(this.keyEventNode):this.ct;if(m.tabIndex===-1){m.tabIndex=0;m.hideFocus="on"}this.domEvent(g,this._onKeyPress,this.cancelKeyBubble,null,m);return this},bindClickInstaller:function(){this.itemAction(this.clickEvent===true?"mousedown":this.clickEvent,this.ctClickTrigger,this.cancelClickBubble)},_onKeyPress:function(g){!this.disabled&&this.fire("keydown",g)!==false&&this.onKeyPressing(g)},onKeyPressing:fGo,
focus:function(g){if(this.disabled)return this;var m=this.keyEventNode||this.ct;if(g!==undefined)(function(){try{m.focus()}catch(p){}}).timeout(0);else try{m.focus()}catch(o){}return this},validate:function(){this.layout.invalidate=false;this.layout.doLayout();return this},invalidate:function(){this.layout.invalidate=true;return this},doLayout:function(){!this.layout.invalidate&&this.rendered&&this.layout.doLayout.apply(this.layout,arguments);return this},autoHeight:function(){var g=this.ct;this.setSize(this.getWidth(true)+
g.scrollWidth-g.clientWidth,this.getHeight(true)+g.scrollHeight-g.clientHeight);return this},center:function(g){var m,o=g?g.view?g.view:g:this.pCt?this.pCt.view:this.view.parentNode;if(!o)o=document.body;if(o==document.body||o==document.documentElement){m=a.getViewport();g=[0,0]}else{o=a.fly(o);m=o.getSize();g=o.absoluteXY();o.unfly()}o=(m.height-this.height)/2|0;this.setXY(Math.max(g[0]+((m.width-this.width)/2|0),0),Math.max(g[1]+o-o/2|0,0));return this},byId:function(g,m,o){var p=[],u=null,w=this.children,
z=this.children[0],D=0;m||(m="id");if(o)u=[];for(;z;){if(z[m]===g){if(!o)return z;u[u.length]=z}z.children&&z.children.length>0&&p.push(z);z=w[++D];if(!z)if(z=p.pop()){w=z.children;D=0;z=w[0]}}return u},eachH:function(g){var m=this.children,o,p=0,u=0,w=[];for(o=m[0];o;){o.children&&w.push(o);p++;if(g.call(o,u,p)===false)break;o=m[++u];if(!o)if(o=w.pop()){u=0;m=o.children;o=m[0]}}},getScrollor:function(){return this.scrollor||this.height===false&&this.width===false&&this.pCt?this.pCt.wrapper:this.wrapper}});
e=a.ui.ContainerBase;var l=a.ui.ContainerBase.prototype;l.find=l.byId;b.def("ct",e);a.create("CC.ui.Panel",e,function(g){return{ct:"_wrap",deffer:false,syncWrapper:true,initComponent:function(){var m=false,o=false,p=false,u=false;if(this.width!==false){m=this.width;this.width=false}if(this.height!==false){o=this.height;this.height=false}if(this.left!==false){p=this.left;this.left=false}if(this.top!==false){u=this.top;this.top=false}if(this.insets){var w=this.insets;w[4]=w[0]+w[2];w[5]=w[1]+w[3]}g.initComponent.call(this);
if(this.insets){w=this.insets;this.wrapper.setXY(w[3],w[0])}if(m!==false||o!==false)this.setSize(m,o);if(p!==false||u!==false)this.setXY(p,u)},getWrapperInsets:function(){var m=this.insets;if(!m){m=this.wrapper;this.insets=m=[parseInt(m.fastStyle("top"),10)||0,parseInt(m.fastStyle("right"),10)||0,parseInt(m.fastStyle("bottom"),10)||0,parseInt(m.fastStyle("left"),10)||0];m[4]=m[0]+m[2];m[5]=m[1]+m[3]}return m},setSize:function(m,o,p){var u=this.width,w=this.height;if(!p){u=u===false?m:u===m?false:
m;w=w===false?o:w===o?false:o}if(u!==false||w!==false){g.setSize.call(this,u,w);if(u!==false)u=this.width;if(w!==false)w=this.height;m=this.wrapper;if(m.view!==this.view&&this.syncWrapper){p=this.getWrapperInsets();o=u===false?u:Math.max(u-p[5],0);p=w===false?w:Math.max(w-p[4],0);m.setSize(o,p);if(o!==false)o=m.width;if(p!==false)p=m.height}else{o=u===false?u:Math.max(u-this.getOuterW(),0);p=w===false?w:Math.max(w-this.getOuterH(),0)}this.fire("resized",o,p,u,w);this.doLayout(o,p,u,w)}return this},
setXY:function(m,o){if(a.isArray(m)){o=m[1];m=m[0]}var p=0,u=0;if(m!==this.left&&m!==false||o!==this.top&&o!==false){if(m!==this.left&&m!==false){this.fastStyleSet("left",m+"px");p=m-this.left;this.left=m}else m=false;if(o!==this.top&&o!==false){this.fastStyleSet("top",o+"px");u=o-this.top;this.top=o}else o=false;if(m!==false||o!==false)this.fire("reposed",m,o,p,u)}return this}}});(function(g){var m={insets:[1,1,1,1],template:"WrapPanel",ct:"_wrap",innerCS:"g-borderpanel",wrCS:"g-borderpanel-wrap"};
a.ui.BorderPanel=function(o,p){o||(o={});a.extendIf(o,m);var u=new (p||g)(o);u.wrapper.addClassIf(u.wrCS);return u}})(a.ui.Panel);b.def("panel",a.ui.Panel)})();
(function(){function a(A){A=A||window.E;e.stop(A);return false}function k(A){o=this;__debug&&console.group("\u62d6\u653e"+this);__debug&&console.log("beforedrag");if((!this.beforedrag||this.beforedrag(A)!==false)&&this.fire("beforedrag",A)!==false){d||(d=this);if(d!==this&&d.beforedrag)if(d.beforedrag(A)===false){d=o=false;return}z=o.absoluteXY();p=u=e.pageXY(A);e.stop(A);if(!q){q=true;n||(n=this);if(!n.movesb)n.movesb=false;if(!d.drag)d.drag=false;e.on(g,"mouseup",b).on(g,"mousemove",f).on(g,"selectstart",
a)}B||(B=G.$(o.dragZoom));if(B){if(o.ownRect)if(B.contains(o.ownRect)){F=o.ownRect.valid;o.ownRect.valid=false}B.update()}if(__debug&&B)console.log("\u5f53\u524dzoom:",this.dragZoom||B)}else o=false}function f(A){E=A||l.E;u=e.pageXY(A);t.x=u[0];t.y=u[1];var C=w;C[0]=u[0]-p[0];C[1]=u[1]-p[1];if(x){var H=x;if(C[0]<H[1])C[0]=H[1];else if(C[0]>H[0])C[0]=H[0];if(C[1]<H[3])C[1]=H[3];else if(C[1]>H[2])C[1]=H[2]}if(!D){__debug&&console.log("dragstart       mouse x,y is ",u,"dxy:",w);if(!d.dragstart||d.dragstart(A,
o)!==false)D=true}if((d.drag===false||d.drag(A)!==false)&&B)if((v=B.isEnter(t))&&v.comp!==o){if(m!==v.comp){if(m!==null){if(__debug)console.log("\u79bb\u5f00:",m.title||m);n.sbout&&n.sbout(m,o,E)}m=v.comp;if(m.disabled)m=null;else{if(__debug)console.log("\u8fdb\u5165:",m.title||m);n.sbover&&n.sbover(m,o,E)}}m&&n.sbmove&&n.sbmove(m,E)}else if(m!==null){if(__debug)console.log("\u79bb\u5f00:",m.title||m);n.sbout&&n.sbout(m,o,E);m=null}e.stop(A)}function b(A){if(o){A=A||l.E;if(q){e.un(g,"mouseup",arguments.callee).un(g,
"mousemove",f).un(g,"selectstart",a);if(D){__debug&&console.log("dragend         mouse delta x,y is ",w,",mouse event:",A);if(m!==null){n.sbdrop&&n.sbdrop(m,o,A);if(__debug)console.log(o.toString(),"\u4e22\u5728",m.title||m,"\u4e0a\u9762")}d.dragend&&d.dragend(A,o);D=false}m=null;if(B){B.clear();y=false;B=null}v=null;q=false}__debug&&console.log("afterdrag");d.afterdrag&&d.afterdrag(A);o.fire("afterdrag",A);if(F!==undefined){o.ownRect.valid=F;F=undefined}o=null;n=d=x=false;E=null;__debug&&console.groupEnd()}}
var h=window.CC;h.util.dd={};var e=h.Event,l=window,g=l.document,m=null,o=null,p,u,w=[0,0],z,D=false,B,t=new h.util.d2d.Point,v,d,n=false,q=false,y=false,x=false,F=undefined,E,G=h.util.dd.Mgr={zmCache:{root:new h.util.d2d.RectZoom},installDrag:function(A,C,H,I,J){if(C){A.draggable=true;if(J)(J=A.dom(J)||J)&&A.domEvent("mousedown",function(K){var L=e.element(K);if(L===J||L.id===J)G.startDrag(this,K)},false,null,H);else A.domEvent("mousedown",k,false,null,H);if(I)A.beforedrag=function(){d=n=I}}else{A.draggable=
false;A.unEvent("mousedown",k,H||A.dragNode)}},startDrag:function(A,C){k.call(A,C)},setSource:function(A){o=A;return this},setDragMonitor:function(A){DN=A;return this},setDropMonitor:function(A){d=A;return this},setMonitor:function(A){DN=d=A;return this},setZoom:function(A,C){(B=A)&&C&&B.update();return this},$:function(A,C){var H=this.zmCache[A];if(!H&&C){H=this.zmCache;if(A==="root")throw"can't named root";if(typeof C==="string"){C=H[C];if(!C)throw"parent zoom doesn't exist.";}else if(C===true)C=
H.root;H=H[A]=new h.util.d2d.RectZoom;C.add(H)}return H},setBounds:function(A){x=A;return this},getBounds:function(){return x},getRoot:function(){return this.zmCache.root},remove:function(A){var C=this.zmCache[A];if(C&&A!=="root"){C.pZoom.remove(C);delete this.zmCache[A]}return C},addComp:function(A,C){C=this.$(C,true);C.add(new h.util.d2d.ComponentRect(A));return this},removeComp:function(A,C){C=this.$(C);var H=C.getRects();h.each(H,function(){if(this.comp===A){C.remove(this);this.destory();return false}});
return this},getIMXY:function(){return p},getIEXY:function(){return z},getDXY:function(){return w},getXY:function(){return u},getSource:function(){return o},getTarget:function(){return m},update:function(){B&&B.update();return this},isDragging:function(){return D},resizeHelper:{resizeCS:"g-resize-ghost",maskerCS:"g-resize-mask",applyResize:function(A,C){this.resizing=A;this.applyLayer(A);this.applyMasker(A,C)},applyLayer:function(A){var C=this.layer;if(!C)C=this.layer=h.Base.create({view:h.$C("DIV"),
autoRender:true,cs:this.resizeCS,hidden:true});A?C.appendTo(g.body):C.del();C.display(A);return this},applyMasker:function(A,C){var H=this.masker;if(!H)H=this.masker=h.Base.create({view:h.$C("DIV"),autoRender:true,cs:this.maskerCS,hidden:true,unselectable:true});A&&h.ie&&H.setSize(h.getViewport());A?H.appendTo(g.body):H.del();H.display(A);C!==undefined&&H.fastStyleSet("cursor",C);return this}}};h.extendIf(h.Base.prototype,{installDrag:function(A){G.installDrag(this,A);return this},getDDProvider:function(){return G},
beforedrag:false,dragstart:false,dragend:false,afterdrag:false,drag:false,sbover:false,sbout:false,sbdrop:false,sbmove:false});h.create("CC.util.d2d.ContainerDragZoom",h.util.d2d.RectZoom,{prepare:function(){var A=this.ct.getScrollor().view,C=A.clientHeight,H=A.scrollTop,I=G.getSource();__debug&&console.group("zoom rects");var J=this;this.ct.each(function(K,L){if(this!==I){var M=this.view,N=M.offsetTop;if(N+M.offsetHeight-H>0)if(N-H-C<0){J.add(new h.util.d2d.ComponentRect(this));__debug&&console.log("item index:",
L)}else return false}});__debug&&console.groupEnd()},clear:function(){this.rects.clear()},addComp:function(A){if(h.isArray(A))for(var C=0,H=A.length;C<H;C++)this.addComp(A[C]);else this.add(new h.util.d2d.ComponentRect(A))}});h.ui.def("ctzoom",h.util.d2d.ContainerDragZoom);h.create("CC.util.dd.Indicator",h.ui.ContainerBase,{hidden:true,template:h.ie?'<table class="g-float-tip g-clear g-openhand"><tr><td><table class="tipbdy"><tr><td id="_tle" class="important_txt"></td></tr><tr><td id="_msg" class="important_subtxt"></td></tr></table></td></tr></table>':
'<div class="g-float-tip g-clear g-openhand"><div class="tipbdy"><div id="_tle" class="important_txt"></div><div id="_msg" class="important_subtxt"></div></div></div>',shadow:{ctype:"shadow",inpactY:-1,inpactH:5},setMsg:function(A,C){if(A!==false){if(!this.msgNode)this.msgNode=this.dom("_msg");this.msgNode.innerHTML=A}if(C!==undefined){if(!this.titleNode)this.titleNode=this.dom("_tle");this.titleNode.innerHTML=C}this.shadow&&this.shadow.resize()},prepare:function(A,C){if(A===undefined)A=15;if(C===
undefined)C=-10;this.rendered||this.render();var H=G.getIMXY();A+=H[0];C+=H[1];this.initX=A;this.initY=C;this.setXY(A,C);this.show();G.resizeHelper.applyMasker(true);G.resizeHelper.masker.addClass("g-openhand");this.appendTo(document.body)},setXY:function(){this.superclass.setXY.apply(this,arguments);this.shadow&&this.shadow.repos();return this},reanchor:function(){this.setXY(this.initX+w[0],this.initY+w[1])},end:function(){G.resizeHelper.applyMasker(false);G.resizeHelper.masker.delClass("g-openhand");
this.hide().del()}});h.ui.def("ddindicator",h.util.dd.Indicator);G.getIndicator=function(A){var C=this.indicator;if(!C)C=this.indicator=h.ui.instance(h.extend({ctype:"ddindicator"},A));return C}})();
(function(){var a=CC.ui.ContainerBase.prototype;CC.create("CC.util.ProviderBase",null,{initialize:function(k){this.inited=true;k&&CC.extend(this,k)},setTarget:function(k){this.t=k},each:function(){this.t.each.apply(this.t,arguments)}});CC.util.ProviderFactory={create:function(k,f,b){var h=k+"Provider",e=k.toLowerCase()+"Provider",l="CC.util."+h;CC.create(l,f||CC.util.ProviderBase,b);a["get"+h]=function(g,m){var o=this[e];if(!o||o===true||!o.inited){o=CC.getObjectLinkedValues(this,e,true);g&&o.insert(0,
g);var p={};m=false;for(var u=0,w=o.length;u<w;u++){var z=o[u];if(z===true&&!m)m=CC.attr(window,l);if(typeof z==="string"&&p.ctype===undefined)p.ctype=z;else if(typeof z==="function"&&!m)m=z;else CC.extendIf(p,z)}if(!m&&!p.ctype)m=m=CC.attr(window,l);o=this[e]=m?new m(p):CC.ui.instance(p);o.setTarget(this)}return o}}}})();
CC.util.ProviderFactory.create("Connection",null,{indicatorDisabled:false,subscribe:false,ajaxCfg:false,setTarget:function(){CC.util.ProviderBase.prototype.setTarget.apply(this,arguments);this.initConnection()},initConnection:function(){this.createSyncQueue();this.ajaxCfg&&this.ajaxCfg.url&&this.connect()},createSyncQueue:function(){this.syncQueue=new CC.util.AsynchronizeQueue({caller:this,onempty:this.onConnectorsFinish,onfirstopen:this.onConnectorFirstOpen})},defaultLoadSuccess:function(a){this.t.fire("defdataload",
a,this);var k=this.loadType;k==="html"?this.defaultDataProcessor(k,a.getText()):this.defaultDataProcessor(k,a.getJson())},defaultDataProcessor:function(a,k){switch(a){case "html":this.t.wrapper.html(k,true);break;default:(this.t.layout||this.t).fromArray(k);break}},_setConnectorMsg:function(a){this.caller.getIndicator().setTitle(a)},getIndicator:function(a){if(this.indicator&&this.indicator.cacheId)return this.indicator;return this.createIndicator(a)},connect:function(a,k){var f=this.ajaxCfg;if(f){if(a)f.url=
a}else f={url:a||this.url};f.caller=this;k&&CC.extend(f,k);if(!f.success){if(f.caller!==this)throw"\u5982\u679c\u4f7f\u7528\u9ed8\u8ba4\u5904\u7406,ajaxCfg\u7684caller\u987b\u4e3a\u5f53\u524d\u7684connection provider";f.success=this.defaultLoadSuccess}!this.indicatorDisabled&&!this.indicator&&this.getIndicator();return this.bindConnector(f)},getConnectionQueue:function(){return this.syncQueue},createIndicator:function(a){var k=this.indicator||this.t.indicator;a||(a={});a.target=this.t;a.targetLoadCS=
this.loadCS;if(typeof k=="function")a=new k(a);else{if(typeof k==="string"){if(!a.ctype)a.ctype=k}else typeof k==="object"&&CC.extendIf(a,k);if(!a.ctype)a.ctype="loading";a=CC.ui.instance(a)}this.indicator=a;this.t.follow(a);return a},bindConnector:function(a){var k=this.createConnector(a),f=this.syncQueue.join(k);this.subscribe&&k.to(this.t);k.url=CC.templ(this.t,a.url);k.connect();return f},createConnector:function(a){return new CC.Ajax(a)},onConnectorsFinish:function(a){this.t.fire("connection:connectorsfinish",
this,a);this.indicatorDisabled||this.getIndicator().stopIndicator()},onConnectorFirstOpen:function(a){this.t.fire("connection:connectorsopen",this,a);this.indicatorDisabled||this.getIndicator().markIndicator()}});
CC.util.ProviderFactory.create("Selection",null,function(a){var k=CC.Event,f={isValid:function(b){return!b.hidden&&!b.disabled}};return{mode:1,tracker:false,UP:k.UP,DOWN:k.DOWN,selectedIndex:-1,autoscroll:true,autoFocus:true,selectedCS:"selected",unselectable:false,initialize:function(){a.initialize.apply(this,arguments);if(this.tracker===true)this.tracker=new CC.util.Tracker(f)},setMode:function(b){this.selectAll(false);this.mode=b;return this},setTarget:function(b){b.keyEvent===undefined&&b.bindKeyInstaller();
a.setTarget.apply(this,arguments);b.on("itemclick",this.itemSelectionTrigger,this).on("keydown",this.navigateKey,this).on("remove",this.onItemRemoved,this);if(this.selected!==undefined){var h=this.selected;delete this.selected;this.select(h)}},setSelected:function(b,h,e,l){h?this.select(b,e,l):this.unselect(b);return this},itemSelectionTrigger:function(b,h){this.unselectable||(this.mode?this.select(b,false,h):this.setSelected(b,!this.isSelected(b),false,h))},onItemRemoved:function(b){if(b===this.selected){this.decorateSelected(b,
false);this.select(null)}else if(b===this.previous)this.previous=null;this.tracker&&this.tracker.remove(b)},navigateKey:function(b){var h=b.keyCode;if(h===this.UP){this.pre();k.stop(b)}else if(h===this.DOWN){this.next();k.stop(b)}else return this.defKeyNav(b)},defKeyNav:fGo,getSelection:function(){var b=this,h=[];b.t.each(function(){b.isSelected(this)&&h.push(this)});return h},decorateSelected:function(b,h){var e=this.selectedCS;e&&b.checkClass(e,h)},select:function(b,h,e){if(this.unselectable||this.disabled)return this;
var l=this.t;if(!l.rendered){l.on("rendered",function(){l.selectionProvider.select(b)});return this}b=this.t.$(b);if(!b)return this.selectAll(false);if(b.disabled)return this;if((this.forceSelect||!this.isSelected(b))&&this.t.fire("select",b,this,e)!==false){this.onSelectChanged(b,true,e);this.onSelect(b,h,e);this.t.fire("selected",b,this,e)}return this},unselect:function(b){b=this.t.$(b);this.onSelectChanged(b,false);return this},onSelect:function(b,h){this.autoFocus&&this.t.wrapper.focus();!h&&
this.autoscroll&&b.scrollIntoView(this.t.getScrollor());b.onselect&&b.onselect()},onSelectChanged:function(b,h){if(this.hasChanged(b,h)){var e=this.selected,l=this.previous;b&&this.decorateSelected(b,h);if(this.mode)if(h){e&&this.decorateSelected(e,false);this.previous=e;this.selected=b;this.selectedIndex=this.t.indexOf(b)}else{if(b===e){this.selected=null;this.selectedIndex=-1}}else if(h){this.previous=e;this.selected=b}else if(e===b){this.previous=null;this.selected=l}else if(b===l&&l)this.previous=
null;this.tracker&&e&&h&&this.tracker.track(e);this.t.fire("selectchange",b,e,this);if(__debug){console.group("selectchanged data");console.log("\u5f53\u524d\u9009\u62e9:",this.selected);console.log("\u524d\u4e00\u4e2a\u9009\u62e9:",this.previous);console.groupEnd()}}},hasChanged:function(b,h){return!(b===this.selected&&h)||!(b&&this.isSelected(b)===h)},isSelected:function(b){return b.hasClass(this.selectedCS)},isSelectable:function(){return!this.unselectable},setSelectable:function(b){this.unselectable=
!b},canNext:function(b){return!b.disabled&&!b.hidden},canPre:function(b){return!b.disabled&&!b.hidden},getStartIndex:function(){return this.selectedIndex},getNext:function(){for(var b=this.getStartIndex()+1,h=this.t.children,e=h.length;b<=e-1&&!this.canNext(h[b]);)b++;if(b>=0&&b<=e-1)return h[b];return null},getPre:function(){for(var b=this.getStartIndex()-1,h=this.t.children,e=h.length;b>=0&&!this.canPre(h[b]);)b--;if(b>=0&&b<=e-1)return h[b];return null},next:function(){var b=this.getNext();b&&
this.select(b);return b},pre:function(){var b=this.getPre();b&&this.select(b);return b},selectAllInner:function(b){var h=this;this.t.each(function(){h.setSelected(this,b,true)})},selectAll:function(b){if(this.mode&&!b){this.selected&&this.unselect(this.selected);return this}this.selectAllInner(b);return this},selectOpp:function(){var b=this;this.t.each(function(){b.setSelected(this,!b.isSelected(this),false)})}}});
CC.util.ProviderFactory.create("Validation",null,{errorCS:"g-form-error",focusOnError:true,decorateValidation:function(a,k){if(k)k.checkClass(k.errorCS||this.errorCS,!a)},validator:fGo,validateAll:function(a){var k=this,f=[],b;this.each(function(){b=k.validate(this,f,a);if(b!==true){if(f.length===1&&k.focusOnError)try{this.focus()}catch(h){}if(b===null)return false}});return f.length?f:true},validate:function(a,k,f){k||(k=[]);var b;b=this.validator(a,k,f);if(this.t.fire("validation:start",a,k,f)===
false)b=null;if(k.length>0){if(b!==null)b=false}else b=true;this.notifyValidation(!!b,a,k,f);return b},notifyValidation:function(a,k,f,b){this.decorateValidation(a,k,f,b);this.t.fire(a?"validation:success":"validation:failed",k,f,b,this);return this},isInvalid:function(a,k){var f=[];return this.validate(a,f,k)===true?false:f}});
CC.util.ProviderFactory.create("Store",null,{enableIndicator:true,modifyUrl:false,addUrl:false,delUrl:false,updateIdOnAdd:true,shareParams:false,setupUrlFromItem:true,isResponseOk:function(a){return CC.util.StoreProvider.isResponseOk&&CC.util.StoreProvider.isResponseOk(a)||true},mappingUrl:function(a,k){if(a){if(this.shareParams)a=CC.templ(this.shareParams,a,2,true);if(k&&this.setupUrlFromItem)a=CC.templ(k,a,2,true)}return a},getDelUrl:function(a){return this.mappingUrl(this.delUrl,a)},getDelQuery:function(a){var k=
"";if(a){k=this.itemQueryTempl||"";if(this.shareParams)k=CC.templ(this.shareParams,k,2,true);if(k)k=CC.templ(a,k)}if(this.shareParams){if(k)k+="&";k+=CC.queryString(this.shareParams)}return k},getSaveUrl:function(a,k){return this.mappingUrl(k?this.addUrl:this.modifyUrl,a)},onSaveFail:fGo,beforeDel:function(a){return this.t.getValidationProvider().isInvalid(a,"del")===false},del:function(a){if(a&&this.isNew(a)){a.pCt.remove(a);a.destory()}else this.beforeDel(a)!==false&&this.t.fire("store:beforedel",
a,this)!==false&&this.onDel(a);return this},delAll:function(){var a=this;this.each(function(){a.del(this)})},delSelection:function(){var a=this;CC.each(this.t.getSelectionProvider().getSelection(),function(){a.del(this)})},onDel:function(a){this.t.getConnectionProvider().connect(this.getDelUrl(a),{method:"POST",data:this.getDelQuery(a),caller:this,success:function(k){if(this.isResponseOk(k)){this.afterDel(a);this.t.fire("store:afterdel",a,k,this)}else k.failure.call(k.caller,k)},failure:function(k){this.onDelFail(a,
k);this.t.fire("store:delfail",a,k,this)}})},onDelFail:fGo,afterDel:function(a){if(a){a.pCt.remove(a);a.destory()}},save:function(a){var k=this.isNew(a);this.isModified(a)&&this.beforeSave(a,k)!==false&&this.t.fire("store:beforesave",a,k,this)!==false&&this.onSave(a,k);return this},each:function(a){var k=this;this.filterChanged?this.t.each(function(){if(k.isNew(this)||k.isModified(this))a.apply(this,arguments)}):CC.util.StoreProvider.prototype.each.apply(this,arguments)},saveAll:function(a){if(!a)if(this.t.getValidationProvider().validateAll()!==
true)return this;var k=this;this.each(function(){k.save(this,true)});return this},createNew:function(a,k){var f=this.t.instanceItem(a);this.decorateNew(f,true);(this.t.layout||this.t).add(f);k&&f.scrollIntoView(this.t.getScrollor());return f},beforeSave:function(a){return this.t.getValidationProvider().isInvalid(a,"save")===false},onSave:function(a,k){this.t.getConnectionProvider().connect(this.getSaveUrl(a,k),{method:"POST",caller:this,data:this.queryString(a,this.shareParams),success:function(f){if(this.isResponseOk(f)){this.decorateModified(a,
false);k&&this.decorateNew(a,false);this.afterSave(a,k,f);this.t.fire("store:aftersave",a,k,f,this)}else f.failure.call(f.caller,f)},failure:function(f){this.onSaveFail(a,k,f);this.t.fire("store:savefail",a,k,f,this)}})},afterSave:function(a,k,f){if(k&&this.updateIdOnAdd)a.id=this.getCreationId(f)},getCreationId:function(a){return(a.getText()||"").trim()},decorateNew:function(a,k){if(a)a.newed=k;return this},decorateModified:function(a,k){if(a)a.modified=k;return this},isModified:function(a){return a?
a.modified:false},isModifiedAll:function(){var a=this,k=false;this.each(function(){if(a.isModified(this)){k=true;return false}});return k},isNew:function(a){return a?a.newed:false},itemQueryTempl:false,queryString:function(a,k){var f="";if(a){f=this.itemQueryTempl||"";if(k)f=CC.templ(k,f,2,true);if(f)f=CC.templ(a,f,2,true);f=this.getItemQuery(a,f)}if(k){if(f)f+="&";f+=CC.queryString(k)}return f},getItemQuery:fGo});
CC.util.Validators={NoEmpty:function(a){if(!a||a.trim()=="")return"\u8be5\u9879\u4e0d\u80fd\u4e3a\u7a7a";return true},Mail:function(a){return!CC.isMail(a)?"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e":true}};
(function(){var a=CC.Event,k=CC.util.dd.Mgr;CC.create("CC.util.dd.AbstractCtMonitor",null,{initialize:function(f){f&&CC.extend(this,f);(f=this.zoom)||(f={ctype:"ctzoom"});if(f.ctype!==undefined)f=this.zoom=CC.ui.instance(f);this.pZoom&&this.pZoom.add(f)},trigger:"_dragger",dragCS:false,indicator:false,mgrIndicator:true,beforedrag:function(f){var b=a.element(f);if(b.id!==this.trigger)return false;k.setSource(this.ct.$(b));a.stop(f)},dragstart:function(f,b){k.setZoom(this.pZoom||this.zoom,true);this.dragCS&&
b.addClass(this.dragCS);this.mgrIndicator&&k.getIndicator().prepare()},getIndicator:function(){var f=this.indicator;if(f&&!f.cacheId){if(!f.showTo)f.showTo=document.body;this.indicator=f=CC.ui.instance(f)}return f},drag:function(){this.mgrIndicator&&k.getIndicator().reanchor()},dragend:function(f,b){this.indicator&&this.getIndicator().hide();this.dragCS&&b.delClass(this.dragCS);this.mgrIndicator&&k.getIndicator().end()},sbover:fGo,sbout:fGo,sbdrop:fGo,afterdrag:fGo})})();
(function(){var a=window.CC,k=a.ui,f=k.ContainerBase,b=a.layout.Layout.prototype,h=window.Math,e=a.util.dd.Mgr;a.Tpl.def("CC.ui.BorderLayoutSpliter",'<div class="g-layout-split"></div>').def("CCollapseBarH",'<table cellspacing="0" cellpadding="0" border="0" class="g-layout-split"><tr><td class="cb-l"></td><td class="cb-c"><div class="expander" id="_expander"><a class="nav" id="_navblock" href="javascript:fGo()"></a></div></td><td class="cb-r"></td></tr></table>').def("CCollapseBarV",'<table cellspacing="0" cellpadding="0" border="0" class="g-layout-split"><tr><td class="cb-l"></td></tr><tr><td class="cb-c"><div class="expander" id="_expander"><a class="nav" id="_navblock" href="javascript:fGo()"></a></div></td></tr><tr><td class="cb-r"></td></tr></table>');
k.BorderLayoutSpliter=a.create(a.Base,function(l){var g;return{type:"CC.ui.BorderLayoutSpliter",ghostCS:"g-layout-sp-ghost",initComponent:function(){this.ct=this.layout.ct.wrapper;if(this.dir=="north"||this.dir=="south")this.dxDisd=true;l.initComponent.call(this);e.installDrag(this,true)},getRestrict:function(){var m=this.layout,o=this.ct,p,u,w=this.dir,z=m[w],D=z.lyInf,B=m.vgap,t=m.hgap,v=D.gap==void 0?B:D.gap,d=D.gap==void 0?t:D.gap;D=m.cgap;var n=o.height;o=o.width;switch(w){case "north":u=-1*
z.height;p=n+u-v;if(m=m.south){v=m.lyInf;if(v.cbar&&!v.cbar.hidden){D=v.cgap===void 0?D:v.cgap;p-=D}if(!m.hidden&&!m.contexted)p-=m.height+(v.gap==void 0?B:v.gap)}if(p>z.maxH-z.height)p=z.maxH-z.height;if(h.abs(u)>z.height-z.minH)u=-1*(z.height-z.minH);break;case "south":p=z.height;u=-1*n+p+v;if(m=m.north){v=m.lyInf;if(v.cbar&&!v.cbar.hidden){D=v.cgap===void 0?D:v.cgap;u+=D}if(!m.hidden&&!m.contexted)u+=m.height+(v.gap==void 0?B:v.gap)}if(p>z.height-z.minH)p=z.height-z.minH;if(h.abs(u)>z.maxH-z.height)u=
-1*(z.maxH-z.height);break;case "west":u=-1*z.width;p=o+u-d;if(m=m.east){v=m.lyInf;if(v.cbar&&!v.cbar.hidden){D=v.cgap===void 0?D:v.cgap;p-=D}if(!m.hidden&&!m.contexted)p-=m.width+(v.gap==void 0?t:v.gap)}if(p>z.maxW-z.width)p=z.maxW-z.width;if(h.abs(u)>z.width-z.minW)u=-1*(z.width-z.minW);break;case "east":p=z.width;u=-1*o+p+d;if(m=m.west){v=m.lyInf;if(v.cbar&&!v.cbar.hidden){D=v.cgap===void 0?D:v.cgap;u+=D}if(!m.hidden&&!m.contexted)u+=m.width+(v.gap===void 0?t:v.gap)}if(p>z.width-z.minW)p=z.width-
z.minW;if(h.abs(u)>z.maxW-z.width)u=-1*(z.maxW-z.width);break}return w==="west"||w==="east"?[p,u,0,0]:[0,0,p,u]},applyGhost:function(m){var o=this.splitGhost;if(!o)o=this.splitGhost=this.$$(a.$C({tagName:"DIV",className:this.ghostCS}));if(m){this.copyViewport(o);g=[o.left,o.top];o.appendTo(this.ct)}else o.del();return o},beforedrag:function(){this.applyGhost(true);e.setBounds(this.getRestrict());e.resizeHelper.applyMasker(true);e.resizeHelper.masker.fastStyleSet("cursor",this.fastStyle("cursor"))},
drag:function(){var m=e.getDXY();e.getIEXY();this.dxDisd?this.splitGhost.setTop(g[1]+m[1]):this.splitGhost.setLeft(g[0]+m[0])},dragend:function(){var m=this.layout[this.dir],o=e.getDXY(),p=m.lyInf;o=this.dxDisd?this.dir==="north"?m.height+o[1]:m.height-o[1]:this.dir==="west"?m.width+o[0]:m.width-o[0];if(p.autoCollapseWidth!==false&&o<=(p.autoCollapseWidth||40))this.layout.collapse(m,true);else{this.dxDisd?m.setHeight(o):m.setWidth(o);this.layout.doLayout()}},afterdrag:function(){this.applyGhost(false);
e.resizeHelper.applyMasker(false);e.resizeHelper.masker.fastStyleSet("cursor","")}}});k.BorderLayoutCollapseBar=a.create(f,{type:"CC.ui.BorderLayoutCollapseBar",hidden:true,innerCS:"g-layout-cbar",ct:"_expander",compContextedCS:"g-layout-contexted",sliperCS:"g-layout-sliper g-f1",navBlockCS:{east:"g-nav-block-l",west:"g-nav-block-r",south:"g-nav-block-u",north:"g-nav-block-d"},initComponent:function(){this.template=this.dir==="south"||this.dir==="north"?"CCollapseBarH":"CCollapseBarV";f.prototype.initComponent.call(this);
if(this.dir==="west"||this.dir==="east")this.addClass(this.innerCS+"-v");this.centerExpander=this.dom("_expander");this.navBlock=this.dom("_navblock");a.fly(this.navBlock).addClass(this.navBlockCS[this.dir]).unfly();this.domEvent("mousedown",this.onBarClick,true).domEvent("mousedown",this.onNavBlockClick,true,null,this.navBlock);this.sliperEl=a.$C({tagName:"A",className:this.sliperCS,href:"javascript:fGo()"});this.comp.append(this.sliperEl);this.comp.domEvent("click",this.sliperAction,false,null,
this.sliperEl)},destory:function(){this.sliperEl=this.navBlock=this.centerExpander=null;this.compShadow&&this.compShadow.destory();f.prototype.destory.call(this)},sliperAction:function(){this.pCt.layout.collapse(this,true)},onNavBlockClick:function(){var l=this.comp;l.setXY(1E4,1E4);l.contexted&&l.releaseContext();this.itsLayout.collapse(l,false)},makeFloat:function(){var l=this.comp;l.addClass(this.compContextedCS).show();this.setCompContextedBounds();var g=l.absoluteXY();l.appendTo(document.body).setXY(g);
l.collapse&&l.collapsed&&l.collapse(false);this.getShadow().attach(l).display(true);l=l.lyInf;if(!l.cancelAutoHide){this.resetAutoHideTimer();l.autoHideTimer=this.onTimeout.bind(this).timeout(l.autoHideTimeout||5E3)}},getShadow:function(){var l=this.compShadow;if(!l)l=this.compShadow=k.instance("shadow",{inpactH:9,inpactY:-2,inpactX:-4,inpactW:10});return l},onTimeout:function(){var l=this.comp;l.contexted?l.releaseContext():this.unFloat();this.resetAutoHideTimer()},resetAutoHideTimer:function(){var l=
this.comp.lyInf;if(l.autoHideTimer){clearTimeout(l.autoHideTimer);delete l.autoHideTimer}},unFloat:function(){var l=this.comp;l.lyInf.autoHideTimer&&this.resetAutoHideTimer();l.pCt._addNode(l.view);l.delClass(this.compContextedCS);this.getShadow().detach()},onCompReleaseContext:function(){this.pCt.layout.cfgFrom(this).cbar.unFloat()},onBarClick:function(){var l=this.comp;if(l.contexted)l.releaseContext();else{l.bindContext(this.onCompReleaseContext,true,null,null,this.navBlock,this.navBlockCS[this.dir]+
"-on");this.makeFloat()}},setCompContextedBounds:function(){var l=this.comp,g=this.dir;if(g==="west")l.setBounds(this.left+this.width+1,this.top,false,this.height);else if(g==="east")l.setBounds(this.left-l.width-1,this.top,false,this.height);else g==="north"?l.setBounds(this.left,this.top+this.height+1,this.width,false):l.setBounds(this.left,this.top-l.height-1,this.width,false)},setSize:function(){f.prototype.setSize.apply(this,arguments);var l;if(this.dir==="north"||this.dir==="south"){l=h.max(0,
this.width-6)+"px";this.centerExpander.style.width=l;if(a.ie)this.centerExpander.parentNode.style.width=l}else{l=h.max(0,this.height-6)+"px";this.centerExpander.style.height=l;if(a.ie)this.centerExpander.parentNode.style.height=l}}});a.create("CC.layout.BorderLayout",a.layout.Layout,{hgap:5,vgap:5,cgap:32,cpgap:5,wrCS:"g-borderlayout-ct",itemCS:"g-borderlayout-item",separatorVCS:"g-ly-split-v",separatorHCS:"g-ly-split-h",add:function(l,g){b.add.call(this,l,g);var m,o;if(!g)g=l.lyInf;m=g.dir;o=g.split;
m||(m="center");this[m]=l;if(o&&m!=="center"){o=g.separator=new k.BorderLayoutSpliter({dir:m,layout:this});o.addClass(m==="west"||m==="east"?this.separatorVCS:this.separatorHCS);o.appendTo(this.ct.ct).show()}l.addClass(this.itemCS+"-"+(m||"center"));g.collapsed===void 0?this.doLayout():this.collapse(l,g.collapsed);return this},getCollapseBar:function(l){var g,m;g=l.lyInf;m=g.cbar;if(!m&&!g.noSidebar){m=g.cbar=new k.BorderLayoutCollapseBar({dir:g.dir,comp:l,itsLayout:this,autoRender:true});m.addClass(m.innerCS+
"-"+g.dir).appendTo(this.ct.ct)}return m},collapse:function(l,g){var m=this.getCollapseBar(l),o=l.lyInf;o.collapsed=g;o.separator&&o.separator.display(!g);l.collapse&&l.collapse(g);m&&m.display(g);l.display(!g);this.doLayout()},onLayout:function(){b.onLayout.call(this);var l=this.ct.wrapper,g=l.getWidth(true);l=l.getHeight(true);var m=0,o=0,p=this.north,u,w,z=this.vgap,D=this.cgap,B=this.cpgap,t=B+B,v=this.hgap,d,n;if(p){d=p.lyInf;if((u=d.cbar)&&!u.hidden){n=d.cgap===void 0?D:d.cgap;u.setBounds(m+
B,o+B,g-t,n-t);n=d.cgap===void 0?D:d.cgap;o+=n}if(!p.hidden&&!p.contexted){u=p.getHeight(true);p.setBounds(m,o,g,p.height);o+=u;n=d.gap===void 0?z:d.gap;(w=d.separator)&&w.setBounds(m,o,g,n);o+=n}p.contexted&&p.releaseContext()}if(p=this.south){d=p.lyInf;if((u=d.cbar)&&!u.hidden){n=d.cgap===void 0?D:d.cgap;l-=n;u.setBounds(m+B,l+B,g-t,n-t)}if(!p.hidden&&!p.contexted){u=p.getHeight(true);l-=u;p.setBounds(m,l,g,p.height);n=d.gap===void 0?z:d.gap;w=d.separator;l-=n;w&&w.setBounds(m,l,g,n)}p.contexted&&
p.releaseContext()}l-=o;if(p=this.east){d=p.lyInf;if((u=d.cbar)&&!u.hidden){n=d.cgap===void 0?D:d.cgap;g-=n;u.setBounds(g+B,o,n-t,l)}if(!p.hidden&&!p.contexted){u=p.getWidth(true);g-=u;p.setBounds(g,o,p.width,l);w=d.separator;n=d.gap===void 0?v:d.gap;g-=n;w&&w.setBounds(g,o,n,l)}p.contexted&&p.releaseContext()}if(p=this.west){d=p.lyInf;if((u=d.cbar)&&!u.hidden){n=d.cgap===void 0?D:d.cgap;u.setBounds(m+B,o,n-t,l);m+=n;g-=n}if(!p.hidden&&!p.contexted){u=p.getWidth(true);p.setBounds(m,o,p.width,l);m+=
u;n=d.gap===void 0?v:d.gap;w=d.separator;g-=u+n;w&&w.setBounds(m,o,n,l);m+=n}p.contexted&&p.releaseContext()}(p=this.center)&&p.setBounds(m,o,g,l)},remove:function(l){var g=l.lyInf;delete this[g.dir];var m=g.separator;if(m){m.destory();delete g.separator}if(m=g.cbar){m.destory();delete g.cbar}b.remove.apply(this,arguments)},detach:function(){var l=this;this.invalidated=true;a.each(["east","south","west","north","center"],function(){l[this]&&l.remove(l[this])});b.detach.call(this)}});a.layout.def("border",
a.layout.BorderLayout)})();
(function(){var a=CC.layout,k=a.Layout,f=k.prototype,b=window.Math,h=CC.Base;CC.create("CC.layout.CardLayout",k,{wrCS:"g-card-ly-ct",layoutChild:function(e){var l=this.ct.wrapper.getContentSize(true);e.rendered?e.setSize(l[0],l[1]):h.prototype.setSize.apply(e,l)}});a.def("card",a.CardLayout);CC.create("CC.layout.QQLayout",k,{wrCS:"g-card-ly-ct",beforeAdd:function(e,l){e.fastStyleSet("position","absolute").setLeft(0);if(l&&l.collapsed===false){e.collapse(false);this.frontOne=e}else e.collapse(true);
f.beforeAdd.apply(this,arguments)},onLayout:function(){f.onLayout.apply(this,arguments);var e=this.frontOne,l=this.ct,g=l.wrapper.height,m=l.wrapper.width,o,p,u,w,z=l.children;w=l.size();for(u=o=0;o<w;o++){p=z[o];if(!p.hidden){if(p==e)break;p.setBounds(false,u,m,p.minH);g-=p.height;u+=p.height}}e&&e.setTop(u);w=w-1;for(u=l.wrapper.height;w>o;w--){p=z[w];u-=p.minH;p.setBounds(false,u,m,p.minH);g-=p.height}e&&e.setSize(m,g)},collapse:function(e,l){var g=e.lyInf,m=this.frontOne;if(g.collapsed!==l){if(m&&
m!==e){m.collapse&&m.collapse(true);m.lyInf.collapsed=true}e.collapse&&e.collapse(l);this.frontOne=(g.collapsed=l)?null:e;this.doLayout();this.ct.fire("collapsed",e,l)}}});a.def("qq",a.QQLayout);CC.create("CC.layout.RowLayout",k,{wrCS:"g-row-ly",onLayout:function(){var e=this.ct.wrapper,l=e.getWidth(true);e=e.getHeight(true);var g,m,o,p=this.ct.children,u,w,z=[];g=0;for(m=p.length;g<m;g++){o=p[g];if(!o.hidden){u=o.lyInf;switch(u.h){case "auto":case undefined:e-=o.getHeight();break;case "lead":z[z.length]=
o;break;default:w=u.h;if(CC.isNumber(w))if(w>=1){o.setHeight(w);e-=o.height}else if(w>=0){w=b.floor(w*e);o.setHeight(w);e-=o.height}}u=u.w;if(u===undefined)o.setWidth(l);else u<1&&o.setWidth(b.floor(u*l))}}g=0;for(m=z.length;g<m;g++){o=z[g];u=o.lyInf;w=u.len;w=CC.isNumber(w)?b.floor(w*e):b.floor(e/(m-g));o.setHeight(w);e-=o.height}g=0;for(m=p.length;g<m;g++){o=p[g];o.rendered||o.render()}}});a.RowLayout.prototype.layoutChild=a.RowLayout.prototype.onLayout;a.def("row",a.RowLayout);CC.create("CC.layout.TableLayout",
k,{attach:function(e){this._items=e.lyCfg&&e.lyCfg.items;e._addNode=e._removeNode=fGo;f.attach.apply(this,arguments)},fromArray:function(e){var l=e.length,g,m,o,p=[];for(g=0;g<l;g++){o=e[g];if(CC.isArray(o))for(m=0;m<o.length;m++)o[m]&&o[m].ctype&&p.push(o[m]);else o&&o.ctype&&p.push(o)}f.fromArray.call(this,p)},onLayout:function(){if(!this.layouted){f.onLayout.apply(this,arguments);this.layouted=true;var e=this.tableEl,l=this.tableEl=CC.$C("TABLE"),g=this.ct;l.className="g-ly-tbl";if(this.tblCs){CC.fly(l).addClass(this.tblCs).unfly();
delete this.tblCs}e&&h.applyOption(l,e);if(this.group){var m=this.group,o=CC.$C("COLGROUP"),p=m.cols,u;for(e=0;e<p;e++){u=CC.$C("COL");m[e]&&h.applyOption(u,m[e]);o.appendChild(u)}delete this.group;l.appendChild(o)}m=CC.$C("TBODY");if(o=this._items){p=o.length;u=g.children;var w,z,D,B,t,v,d,n;for(z=e=0;e<p;e++){r=o[e];t=CC.$C("TR");if(CC.isArray(r)){w=0;for(B=r.length;w<B;w++){if(D=r[w]){d=D.td;n=D.ctype;if(!d&&!n){h.applyOption(t,D);continue}v=CC.$C("TD");v.className="tbl-td";D.tdcs&&CC.fly(v).addClass(D.tdcs).unfly();
if(d){if(d.cols){v.colSpan=d.cols;delete d.cols}h.applyOption(v,d)}if(n){D=u[z++];v.appendChild(D.view)}}else{v=CC.$C("TD");v.className="tbl-td"}t.appendChild(v)}}else{v=CC.$C("TD");if(r.td){d=r.td;if(d.cols){v.colSpan=d.cols;delete v.cols}h.applyOption(v,d)}r.tr&&h.applyOption(t,r.tr);if(r.ctype){D=u[z++];v.appendChild(D.view)}t.appendChild(v)}m.appendChild(t)}}l.appendChild(m);g.wrapper.append(l);delete this._items}}});CC.layout.def("table",CC.layout.TableLayout)})();
CC.create("CC.layout.TablizeLayout",CC.layout.Layout,{attach:function(a){var k=this;this.tableEl=CC.Tpl.forNode('<table class="g-ly-tablize"><tr id="_tr"></tr></table>');this.trEl=CC.$("_tr",this.tableEl);a._addNode=function(f){var b=CC.$C("TD");b.className="tblly-td";b.appendChild(f);k.trEl.appendChild(b)};a.wrapper.append(this.tableEl);CC.layout.Layout.prototype.attach.apply(this,arguments)},add:function(a){CC.layout.Layout.prototype.add.apply(this,arguments);if(a.lyInf&&a.lyInf.separator){this.addSeparator();
delete a.lyInf.separator}},onLayout:function(){if(!this.layouted){this.layouted=true;CC.layout.Layout.prototype.onLayout.apply(this,arguments)}},addSeparator:function(){this.trEl.appendChild(CC.$C({tagName:"TD",innerHTML:'<span class="tblly-sep"> | </span>',className:"tblly-td"}))}});CC.layout.def("tablize",CC.layout.TablizeLayout);CC.Tpl.def("CC.ui.TabItemLayout",'<div class="g-panel"><div class="auto-margin" id="_margin"><a href="javascript:fGo()" id="_rigmov" class="auto-rigmov" style="right:0px;"></a><a href="javascript:fGo()" style="left:0px;" id="_lefmov" class="auto-lefmov"></a><div class="auto-scrollor" id="_scrollor" tabindex="1" hidefocus="on"><div class="auto-offset" id="_wrap"></div></div></div></div>');
CC.create("CC.ui.tab.TabItemLayout",CC.layout.Layout,function(a){return{layoutOnChange:true,horizonMargin:5,navLeftWidth:24,navRightWidth:24,ctCS:"g-autoscroll-ly",disabledLeftNavCS:"g-disabled auto-lefmov-disabled",disabledRightNavCS:"g-disabled auto-rigmov-disabled",navPanelCS:"g-mov-tab",getMargins:function(){return[this.marginLeft||this.horizonMargin,this.marginRight||this.horizonMargin]},attach:function(k){a.attach.call(this,k);var f=k.dom("_margin").style,b=this.getMargins();f.marginLeft=b[0]+
"px";f.marginRight=b[1]+"px";this.scrollor=k.$$("_scrollor");f=this.lefNav=k.$$("_lefmov");k=this.rigNav=k.$$("_rigmov");f.disabledCS=this.disabledLeftNavCS;k.disabledCS=this.disabledRightNavCS;this.attachEvent()},attachEvent:function(){var k=this.lefNav,f=this.rigNav;this.ct.on("remove",this.onStructureChange,this).on("closed",this.onStructureChange,this).domEvent("mousedown",this.onNavMousedown,true,this,k.view).domEvent("mouseup",this.onNavMouseup,true,this,k.view).domEvent("mousedown",this.onNavMousedown,
true,this,f.view).domEvent("mouseup",this.onNavMouseup,true,this,f.view)},onStructureChange:function(){this.hasLeft()&&!this.hasRight()&&this.requireMoreSpace();this.doLayout()},getDirFromEvent:function(k){return this.lefNav.view.id===CC.Event.element(k).id?"l":"r"},scrollToNext:function(k,f){var b=this.getNextHiddenItem(k);if(b){this.scrollItemIntoView(b);if(!f)this.mousedownTimer=arguments.callee.bind(this,k).timeout(300)}else{clearTimeout(this.mousedownTimer);this.mousedownTimer=null}},scrollItemIntoView:function(k){if(!k)k=
this.ct.selectionProvider.selected;if(k){k=this.getScrollIntoViewDelta(k);if(k!==0){__debug&&console.log("scroll delta:"+k);this.setScrollLeft(this.getScrollLeft()+k)}this.checkStatus()}},onNavMousedown:function(k){this.mousedownTimer=this.scrollToNext.bind(this,this.getDirFromEvent(k)).timeout(300)},onNavMouseup:function(k){if(this.mousedownTimer){clearTimeout(this.mousedownTimer);this.mousedownTimer=null}this.scrollToNext(this.getDirFromEvent(k),true)},add:function(k){k.scrollIntoView=this.scrollItemIntoView.bind(this);
a.add.apply(this,arguments)},getScrollViewWidth:function(){return this.scrollor.view.clientWidth},getScrollLeft:function(){return parseInt(this.scrollor.view.scrollLeft,10)||0},setScrollLeft:function(k){this.scrollor.view.scrollLeft=k},hasLeft:function(){return this.scrollor.view.scrollLeft>0},hasRight:function(){return this.ct.size()>0&&this.getScrollRigthLength(this.ct.children[this.ct.size()-1])>0},getScrollLeftLength:function(k){return this.getScrollLeft()-k.view.offsetLeft},getScrollRigthLength:function(k){var f=
this.getScrollViewWidth(),b=this.getScrollLeft();return k.view.offsetLeft+k.view.offsetWidth-b-f},getScrollIntoViewDelta:function(k){var f=this.getScrollLeftLength(k);__debug&&console.log("scroll left dx:",f);if(f>0)return-1*f;f=this.getScrollRigthLength(k);__debug&&console.log("scroll right dx:",f);return f>0?f:0},requireMoreSpace:function(){var k=this.getNextHiddenItem("l");k&&this.scrollItemIntoView(k)},getLastVisibleItem:function(){var k=this.ct.children,f=0;for(f=k.length-1;f>=0;f--)if(!k[f].hidden&&
this.getScrollRigthLength(k[f])<=0)return k[f]},getNextHiddenItem:function(k){var f=this.ct.children,b=0,h=f.length;if(k==="l")for(;b<h;b++){k=f[b];if(!k.hidden)if(this.getScrollLeftLength(k)<=0)return f[b-1]}else for(b=h-1;b>=0;b--){k=f[b];if(!k.hidden)if(this.getScrollRigthLength(k)<=0)return f[b+1]}},fixIEOnLayout:function(k){var f=this.ct,b=this.getMargins();k=(k||f.getWidth(true))-b[0]-b[1];f.fly("_margin").setWidth(k).unfly();k-=this.navLeftWidth+this.navRightWidth;this.scrollor.setWidth(k)},
onLayout:function(k){__debug&&console.group("TabItem\u5e03\u5c40("+this.ct+")");a.onLayout.apply(this,arguments);var f=this.ct.selectionProvider.selected;CC.ie&&this.fixIEOnLayout(k);if(k!==undefined){var b=false;if(this.preWidth===undefined)this.preWidth=k;else b=k-this.preWidth;this.preWidth=k;if(b)if(b>0)this.hasRight()||this.setScrollLeft(this.getScrollLeft()-b)}f?this.scrollItemIntoView(f):this.checkStatus();__debug&&console.groupEnd()},checkStatus:function(){var k=this.ct,f=!this.hasLeft(),
b=!this.hasRight();__debug&&console.log("checking nav disabled,","hasL:",!f,"hasR:",!b);this.lefNav.disable(f);this.rigNav.disable(b);k.checkClass(this.navPanelCS,!f||!b)}}});CC.layout.def("tabitem",CC.ui.tab.TabItemLayout);
(function(){var a=window.CC,k=a.Base.prototype;a.Tpl.def("CC.ui.Shadow",a.ie6?'<div class="g-dxshadow"></div>':'<div class="g-shadow" style="display:none;"><div class="g-shadow-t" id="_t"></div><div class="g-shadow-lt" id="_lt"></div><div class="g-shadow-rt" id="_rt"></div><div class="g-shadow-l" id="_l"></div><div class="g-shadow-lb" id="_lb"></div><div class="g-shadow-r" id="_r"></div><div class="g-shadow-rb" id="_rb"></div><div class="g-shadow-b" id="_b"></div></div>');a.create("CC.ui.Shadow",
a.Base,{inpactW:8,inpactH:0,inpactX:-4,inpactY:4,shadowWidth:6,offset:4,hidden:true,target:false,initComponent:function(){k.initComponent.call(this);this.target&&this.attach(this.target);if(a.ie&&!a.ie6){this.shadowR=this.dom("_r");this.shadowB=this.dom("_b");this.shadowL=this.dom("_l");this.shadowT=this.dom("_t")}},attach:function(f){this.target=f;this.target.eventable&&this.target.on("resized",this.reanchor,this).on("reposed",this.reanchor,this);this.setZ((this.target.fastStyle("zIndex")||1)-1);
if(a.ie6){this._ie6OffDt=Math.floor(this.offset/2);this.view.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"}return this},detach:function(){if(this.target.eventable){this.target.un("resized",this.reanchor,this);this.target.un("reposed",this.reanchor,this)}this.target=null;this.display(false);return this},setRightSize:a.ie6?function(f,b){f!==false&&this.setWidth(f-this.offset-this._ie6OffDt+this.inpactW-1);b!==false&&
this.setHeight(b-this.offset-this._ie6OffDt+this.inpactH)}:function(f,b){if(f!==false){f+=this.inpactW;f!=this.width&&this.setWidth(f)}if(b!==false){b+=this.inpactH;b!=this.height&&this.setHeight(b)}if(a.ie){var h=a.fly(this.shadowR),e=this.shadowWidth*2,l;if(b!==false){l=b-e;h.setHeight(l);h.view=this.shadowL;h.setHeight(l)}if(f!==false){l=f-e;h.view=this.shadowB;h.setWidth(l);h.view=this.shadowT;h.setWidth(l)}h.unfly()}},setRightPos:a.ie6?function(f){f[0]+=this.inpactX-this._ie6OffDt+1;f[1]+=this.inpactY-
this._ie6OffDt;this.setXY(f)}:function(f){this.setXY(f[0]+this.inpactX,f[1]+this.inpactY-1)},resize:function(){var f=this.target.getSize(true);this.setRightSize(f.width,f.height)},repos:function(){this.setRightPos(this.target.absoluteXY())},reanchor:function(){var f=!this.hidden;this.resize();this.repos();f&&k.display.call(this,true);return this},display:function(f){if(f===undefined)return k.display.call(this);if(f=f&&this.target&&!this.target.hidden){this.reanchor();this.appendTo(document.body)}else this.del();
return k.display.call(this,f)}});a.ui.def("shadow",a.ui.Shadow)})();
(function(){var a=window.CC,k=a.Base.prototype;a.Tpl.def("CC.ui.Loading",'<div class="g-loading"><div class="g-loading-indicator"><span id="_tle">\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u5019...</span></div></div>');a.create("CC.ui.Loading",a.Base,{loadMaskCS:"g-loading-mask",monitor:false,initComponent:function(){k.initComponent.call(this);this.monitor&&this.setMonitor(a.delAttr("monitor",this))},attach:function(f){this.target=f},setMonitor:function(f){this.monitor&&this.monitor.un("open",this.whenOpen,
this).un("send",this.whenSend,this).un("success",this.whenSuccess,this).un("final",this.whenFinal,this);f&&f.on("open",this.whenOpen,this).on("send",this.whenSend,this).on("success",this.whenSuccess,this).on("final",this.whenFinal,this);this.monitor=f},whenSend:fGo,whenSuccess:function(){this.loaded=true},whenOpen:function(){this.markIndicator()},whenFinal:function(){this.stopIndicator();this.target.shadow&&this.target.shadow.reanchor()},targetLoadCS:false,maskDisabled:false,loadMsgDisabled:false,
markIndicator:function(){if(!this.disabled){this.busy=true;this.targetLoadCS&&a.fly(this.target).addClass(this.targetLoadCS).unfly();if((!this.mask||!this.mask.tagName)&&!this.maskDisabled)this.mask=a.$C({tagName:"DIV",className:this.loadMaskCS});this.mask&&!this.maskDisabled&&this.target.wrapper.append(this.mask).unfly();this.loadMsgDisabled||this.target.wrapper.append(this)}},stopIndicator:function(){this.targetLoadCS&&a.fly(this.target).delClass(this.targetLoadCS).unfly();if(!this.maskDisabled){this.mask&&
this.mask.parentNode&&this.mask.parentNode.removeChild(this.mask);this.del()}this.busy=false;this.loaded=true},isBusy:function(){return this.busy},isLoaded:function(){return this.loaded},destory:function(){this.setMonitor(null);this.superclass.destory.call(this)}});a.ui.def("loading",a.ui.Loading)})();
CC.create("CC.ui.Mask",CC.Base,{template:'<div class="g-modal-mask"></div>',onactive:null,initComponent:function(){CC.Base.prototype.initComponent.call(this);this.target&&this.attach(this.target);this.domEvent("mousedown",this.onMaskResponsed,true)},onMaskResponsed:function(){this.fire("active",this);this.onactive&&this.onactive()},attach:function(a){this.target=a=a||CC.$body;a.eventable&&a.on("resized",this.onTargetResized,this);var k=CC.fly(a);if(a===CC.$body||a===document.body){CC.$body.domEvent("resize",
this.onWindowResize,false,this,window);this.onWindowResize()}else this.setSize(k.getSize());this.setXY(0,0);k.unfly();this.appendTo(a);return this},detach:function(){var a=this.target;if(a===CC.$body||a===document.body)CC.$body.unEvent("resize",this.onWindowResize,window);a.eventable&&a.un("resized",this.onTargetResized);this.del();this.target=null;return this},onTargetResized:function(a,k,f,b){this.setSize(f,b)},onWindowResize:function(){this.setSize(CC.getViewport())},destory:function(){this.target&&
this.detach();CC.Base.prototype.destory.call(this)}});
CC.create("CC.ui.Viewport",CC.ui.Panel,{bodyCS:"g-viewport-body",cs:"g-viewport",mg:[0,0,0,0],initComponent:function(){this.showTo=document.body;if(!this.view)this.view=CC.$C("DIV");CC.Event.on(window,"resize",this.onWindowResize.bind(this));CC.ui.Panel.prototype.initComponent.call(this);CC.$body.addClass(this.bodyCS);this.onWindowResize()},onWindowResize:function(){var a=CC.getViewport(),k=0,f=0,b=this.mg;k=b[1];f=b[2];a.width-=b[1]+b[3];a.height-=b[0]+b[2];if(this.maxW<a.width){b=a.width-this.maxW;
k+=Math.floor(b/2);a.width-=b}if(this.maxH<a.height){b=a.height-this.height;f+=Math.floor(b/2);a.height-=b}this.setBounds(k,f,a.width,a.height)}});CC.ui.def("viewport",CC.ui.Viewport);CC.Tpl.def("CC.ui.FolderItem",'<li class="g-unsel"><b id="_ico" class="icos"></b><a id="_tle" class="g-tle"></a></li>').def("CC.ui.Folder",'<div class="g-folder g-grp-bdy"><div class="g-grp-bdy" id="_scrollor"><ul id="_bdy" tabindex="1" hidefocus="on"></ul></div></div>');
CC.create("CC.ui.Folder",CC.ui.ContainerBase,{itemCfg:{template:"CC.ui.FolderItem",hoverCS:"on",icon:"icoNote",blockMode:2},keyEvent:true,ct:"_bdy",clickEvent:true,useContainerMonitor:true,template:"CC.ui.Folder",selectionProvider:true});CC.ui.def("folder",CC.ui.Folder);CC.Tpl.def("CC.ui.Button",'<table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="g-btn-l"><i>&nbsp;</i></td><td class="g-btn-c"><em unselectable="on"><button type="button" class="g-btn-text" id="_tle"></button></em></td><td class="g-btn-r"><i>&nbsp;</i></td></tr></tbody></table>');
CC.create("CC.ui.Button",CC.Base,function(a){return{iconNode:"_tle",focusNode:"_tle",hoverCS:"g-btn-over",clickCS:"g-btn-click",iconCS:"g-btn-icon",focusCS:"g-btn-focus",tip:false,disableNode:"_tle",innerCS:"g-btn",blockMode:"",_onclick:function(){this.onclick&&this.onclick.call(this)},initComponent:function(){a.initComponent.call(this);if(!this.title||this.title=="")this.addClass(this.noTxtCS||"g-btn-notxt");this.element=this.dom("_tle");this.domEvent("mousedown",this._gotFocus);this.domEvent("click",
this._onclick);this.focusCS&&this.bindFocusStyle(this.focusCS);this.dockable&&this.docked&&this.setDocked(true)},setDocked:function(k){this.docked=k;this.checkClass(this.clickCS,k);return this},_gotFocus:function(){try{this.element.focus()}catch(k){}},mouseupCallback:function(){if(this.dockable)return this.docked=!this.docked}}});
CC.create("CC.ui.DropButton",CC.ui.Button,{downCS:"g-btn-dwn",_onclick:function(a){this.array&&this.createMenu();if(this.menu){CC.Event.stop(a);this.showMenu(!!this.menu.hidden)}CC.ui.DropButton.superclass._onclick.apply(this,arguments)},showMenu:function(a){if(a){this.menu.at(this,true);this.menu.focus(0)}else this.menu.hide()},decorateDown:function(a){this.checkClass(this.downCS,a)},createMenu:function(a){var k=this;a=CC.extendIf(a||this.menuCfg,{ctype:"menu",array:this.array,width:120,showTo:document.body,
onDisplay:function(f){k.decorateDown(f)}});delete this.array;this.menu=CC.ui.instance(a);this.menu.render()}});CC.ui.def("button",CC.ui.Button);CC.ui.def("dropbutton",CC.ui.DropButton);CC.Tpl["CC.ui.BarItem"]='<table class="g-baritem" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="g-btn-l"><i>&nbsp;</i></td><td class="g-btn-c"><em unselectable="on"><button type="button" class="g-btn-text" id="_tle"></button></em></td><td class="g-btn-r"><i>&nbsp;</i></td></tr></tbody></table>';
CC.Tpl["CC.ui.Toolbar"]='<div class="g-tbar"><div class="g-tbar-wr" id="_wrap"></div></div>';CC.create("CC.ui.Bigbar",CC.ui.Panel,{keyEvent:false,clickEvent:true,syncWrapper:false,itemCfg:{template:"CC.ui.BarItem",hoverCS:"g-baritem-over",downCS:"g-baritem-dwn",innerCS:"g-baritem",clickCS:"g-baritem-click",focusCS:false,title:false},selectionProvider:{autoscroll:false,forceSelect:true},maxH:38,innerCS:"g-bigbar",itemCls:CC.ui.Button,template:"CC.ui.Toolbar"});CC.ui.def("bigbar",CC.ui.Bigbar);
CC.create("CC.ui.BigbarDropButton",CC.ui.DropButton,{template:"CC.ui.BarItem",hoverCS:"g-baritem-over",downCS:"g-baritem-dwn",innerCS:"g-baritem",clickCS:"g-baritem-click",focusCS:false,title:false});CC.ui.def("bigbardropbtn",CC.ui.BigbarDropButton);
CC.create("CC.ui.Smallbar",CC.ui.Panel,{syncWrapper:false,selectionProvider:{autoscroll:false,forceSelect:true},clickEvent:true,itemCfg:{template:"CC.ui.BarItem",hoverCS:"g-smallbar-item-over",downCS:"g-smallbar-item-dwn",clickCS:"g-smallbar-item-click",innerCS:"g-smallbar-item",focusCS:false},maxH:26,innerCS:"g-smallbar",itemCls:CC.ui.Button,template:"CC.ui.Toolbar"});CC.ui.def("smallbar",CC.ui.Smallbar);
CC.create("CC.ui.SmallbarDropButton",CC.ui.DropButton,{template:"CC.ui.BarItem",hoverCS:"g-smallbar-item-over",downCS:"g-smallbar-item-dwn",clickCS:"g-smallbar-item-click",innerCS:"g-smallbar-item",focusCS:false});CC.ui.def("smallbardropbtn",CC.ui.SmallbarDropButton);
(function(){var a=CC.ui.ContainerBase.prototype,k=CC.ui.Panel.prototype;CC.Tpl.def("CC.ui.TabItem",'<table unselectable="on" class="g-unsel g-tab-item"><tbody><tr id="_ctx"><td class="tLe" id="_tLe"></td><td class="bdy"><nobr id="_tle" class="g-tle">\u9009\u53611</nobr></td><td class="btn" id="_btnC"><a href="javascript:fGo()" title="\u5173\u95ed" id="_trigger" class="g-ti-btn"></a></td><td class="tRi" id="_tRi"></td></tr></tbody></table>');CC.create("CC.ui.TabItem",CC.ui.ContainerBase,{hoverCS:false,
autoReload:false,closeable:true,unselectable:true,ct:"_ctx",blockMode:2,loadCS:"g-tabitem-loading",initComponent:function(){a.initComponent.call(this);var f=this.cacheBtnNode=this.dom("_btnC");f&&f.parentNode.removeChild(f);this.bindClsEvent();this.closeable!==undefined&&this.setCloseable(this.closeable);this.panel&&this.setContentPanel(this.panel)},addButton:function(f){var b=this.cacheBtnNode.cloneNode(true);f.view=b;b.id=f.id;f.iconNode="_trigger";b=CC.Base.create(f);this.add(b);return b},syncPanelDestory:undefined,
getContentPanel:function(f){var b=this.panel,h;if(!b&&f){b=this.src?new CC.ui.IFramePanel:new CC.ui.Panel;this.setContentPanel(b)}if(b&&!b.pCt){if((ct=this.pCt)&&(h=ct.getContentPanel()))h.layout.add(b);if(this.syncPanelDestory===undefined)this.syncPanelDestory=true}return b},setContentPanel:function(f){this.panel&&delete this.panel.bindingTabItem;f.cacheId||(f=CC.ui.instance(f));this.panel=f;f.bindingTabItem=this;return this},_addNode:function(f){this.buttonOrient!="l"?this.fly("_tRi").insertBefore(f).unfly():
this.fly("_tLe").insertAfter(f).unfly()},onClsClick:function(){this.closeable&&this.pCt.getDisc()>1&&this.pCt.close(this)},bindClsEvent:function(){var f=this.$$(this.closeNode);f||(f=this.addButton({id:"_clsBtn",blockMode:2,icon:"g-ti-clsbtn"}));this.domEvent("click",this.onClsClick,true,null,f.view).domEvent("dblclick",this.onClsClick,true);f.view.onmousedown=CC.Event.noUp},setCloseable:function(f){if(this.cacheBtnNode){this.closeable=f;this.$("_clsBtn").display(f)}else a.setCloseable.call(this,
f);return this},loadType:"html",loadContent:function(f){var b=this.getContentPanel(true);b.getConnectionProvider().loadType=this.loadType||"html";b=b.getConnectionProvider();b.indicator||b.getIndicator({markIndicator:this.onIndicatorStart,stopIndicator:this.onIndicatorStop});if(f||(this.autoReload||!this.isContentLoaded())&&!this.isContentBusy())this._dataConnectorId=b.connect(f||this.src||this.url);return this},isContentLoaded:function(){return this._dataConnectorId&&this.getContentPanel(true).getConnectionProvider().getConnectionQueue().isConnectorLoaded(this._dataConnectorId)},
isContentBusy:function(){return this._dataConnectorId&&this.getContentPanel(true).getConnectionProvider().getConnectionQueue().isConnectorBusy(this._dataConnectorId)},onIndicatorStart:function(){var f=this.target.bindingTabItem;f.addClass(f.loadCS)},onIndicatorStop:function(){var f=this.target.bindingTabItem;f&&f.delClass(f.loadCS)},destory:function(){this.syncPanelDestory&&this.panel&&this.panel.destory();a.destory.call(this)}});CC.ui.def("tabitem",CC.ui.TabItem);CC.create("CC.ui.Tab",CC.ui.Panel,
{keyEvent:true,clickEvent:true,template:"CC.ui.TabItemLayout",innerCS:"g-tab",keyEventNode:"_scrollor",vcs:"g-vtab",vtab:false,selectionProvider:{UP:CC.Event.LEFT,DOWN:CC.Event.RIGHT,tracker:true,selectedCS:"g-tab-selectitem"},syncWrapper:false,maxH:33,itemCls:CC.ui.TabItem,floatCS:"g-tab-float",autoLoad:true,destoryItemOnclose:false,lyCfg:{navPanelCS:"g-mov-tab",horizonMargin:5,navLeftWidth:24,navRightWidth:24},initComponent:function(){k.initComponent.call(this);this.on("selected",this.onItemSelected);
if(this.vtab){this.addClass(this.vcs);delete this.vtab}if(this["float"]){this.addClass(this.floatCS+(this["float"]===true?"":this["float"]));delete this["float"]}},onItemSelected:function(f){if((f.url||f.src)&&this.autoLoad)f.loadContent();var b=this;(function(){var h=b.selectionProvider.previous;h&&h.getContentPanel()&&!h.panel.hidden&&h.panel.hide();b.displayItem(f,true);f.getContentPanel()&&f.panel.show()}).timeout(0)},close:function(f){f=this.$(f);if(f.closeable)if(this.fire("close",f)!==false){this.displayItem(f,
0);this.fire("closed",f);if(f.destoryOnClose===true||this.destoryItemOnclose)f.destory()}},getContentPanel:function(){var f=this.contentPanel;if(typeof f==="string")f=this.contentPanel=CC.Base.find(f);return f},displayItem:function(f,b){f=this.$(f);if(!f.closeable&&!b)return false;f.display(b);var h=this.selectionProvider;if(!b&&h.selected===f){if(h.tracker.size()){var e=h.tracker.pop();if(e){h.select(e);h.tracker.pop();return}}e=this.indexOf(f);for(var l=e-1,g=this.children;l>=0&&(g[l].hidden||g[l].disabled);)l--;
if(l>=0)h.select(g[l]);else{l=g.length;for(e+=1;e<l&&(g[e].hidden||g[e].disabled);)e++;e<l&&h.select(g[e])}}},getDisc:function(){for(var f=0,b=this.children,h=0,e=b.length;h<e;h++)b[h].hidden||f++;return f}});CC.ui.def("tab",CC.ui.Tab)})();
CC.ie?CC.Tpl.def("CC.ui.FloatTip",'<table class="g-float-tip g-clear"><tr><td><table class="tipbdy"><tr><td id="_tle" class="important_txt"></td></tr><tr><td id="_msg" class="important_subtxt"></td></tr></table></td></tr><tr><td class="btm_cap" id="_cap"></td></tr></table>'):CC.Tpl.def("CC.ui.FloatTip",'<div class="g-float-tip g-clear"><div class="tipbdy"><div id="_tle" class="important_txt"></div><div id="_msg" class="important_subtxt"></div></div><div class="btm_cap" id="_cap"></div></div>');
CC.create("CC.ui.FloatTip",CC.ui.Panel,function(a){function k(g){e=h.pageXY(g||window.event)}var f=window.CC,b,h=f.Event,e=[-10000,-10000],l=false;f.Util.ftip=function(g,m,o,p,u){b||(b=f.ui.instance({ctype:"tip",showTo:document.body,autoRender:true}));f.fly(b.tail).show().unfly();b.show(g,m,o,p,u);return b};f.Util.qtip=function(g,m){b||(b=new f.ui.FloatTip({showTo:document.body,autoRender:true}));b.tipFor(g,m)};return{timeout:2500,delay:500,reuseable:true,shadow:true,qmode:false,zIndex:10002,hoverTipCS:"g-small-tip",
initComponent:function(){a.initComponent.call(this);this.msg&&this.setMsg(this.msg);this.tail=this.dom("_cap");this.setXY(-10000,-10000).setZ(this.zIndex);this.qmode?this.createQtip():this.createFtip()},display:function(g){g&&this.timerId&&this.killTimer();return a.display.apply(this,arguments)},onShow:function(){a.onShow.call(this);if(this.timeout)this.timerId=this._timeoutCall.bind(this).timeout(this.timeout)},onHide:function(){this.killTimer();a.onHide.call(this);this.setXY(-10000,-10000)},setRightPosForTarget:function(g){g=
f.fly(g);var m=g.absoluteXY();this.anchorPos([m[0],m[1],0,0],"lt","hr",false,true,true);g.unfly()},setRightPosForHover:function(g){this.anchorPos([g[0],g[1],0,0],"lb","hr",[5,24],true,true)},_timeoutCall:function(){a.display.call(this,false);this.killTimer(true);this.ontimeout&&this.ontimeout()},killPretimer:function(){if(this.pretimerId){clearTimeout(this.pretimerId);this.pretimerId=false}},killTimer:function(g){if(this.timerId){clearTimeout(this.timerId);this.timerId=false}!this.reuseable&&g&&this.destory()},
setMsg:function(g,m){this.fly("_msg").html(g).unfly();m&&this.setTitle(m);this.shadow&&!this.shadow.hidden&&this.shadow.reanchor();return this},show:function(g,m,o,p,u){if(arguments.length==0)return a.show.call(this);this.setMsg(g,m);if(u!==undefined)this.timeout=u;this.qmode&&this.createFtip();this.display(true);if(o){this.setRightPosForTarget(o);p&&f.fly(o).focus(true).unfly()}return this},createFtip:function(){this.qmode=false;this.delClass(this.hoverTipCS);if(this.shadow){this.shadow.inpactY=
-1;this.shadow.inpactH=-12}},createQtip:function(){this.qmode=true;this.addClassIf(this.hoverTipCS);if(this.shadow){this.shadow.inpactY=f.ui.Shadow.prototype.inpactY;this.shadow.inpactH=f.ui.Shadow.prototype.inpactH}},tipFor:function(g,m,o){f.fly(g).domEvent("mouseover",function(){var p=this;if(!l){h.on(document,"mousemove",k);l=true}this.pretimerId&&this.killPretimer();this.pretimerId=function(){p.killTimer();p.setMsg(g.qtip||g.tip||g.title||m,o);f.fly(p.tail).hide().unfly();p.qmode||p.createQtip();
p.display(true).setRightPosForHover(e)}.timeout(this.delay)},true,this).domEvent("mouseout",this.onTargetMouseout,true,this).unfly()},onTargetMouseout:function(){this.qmode&&this.display(false);if(l){h.un(document,"mousemove",k);l=false}this.killPretimer()}}});CC.ui.def("tip",CC.ui.FloatTip);CC.Tpl.def("CC.ui.TitlePanel",'<div class="g-panel g-titlepanel"><h3 class="g-titlepanel-hd" id="_tleBar"><a id="_btnFN" class="g-icoFld" href="javascript:fGo()"></a><a id="_tle" class="g-tle" href="javascript:fGo()"></a></h3><div id="_scrollor" class="g-panel-wrap g-titlepanel-wrap"></div></div>');
CC.create("CC.ui.TitlePanel",CC.ui.Panel,function(a){return{unselectable:"_tleBar",ct:"_scrollor",minH:22,openCS:"g-icoOpn",clsCS:"g-icoFld",foldNode:"_btnFN",initComponent:function(){a.initComponent.call(this);this.domEvent("mousedown",this.onTriggerClick,true,null,this.foldNode).domEvent("mousedown",this.onTitleClick,true,null,this.titleNode||"_tle");this.header=this.$$("_tleBar");this.collapsed&&this.collapse(this.collapsed,true)},getWrapperInsets:function(){return[this.minH,0,0,0,this.minH,0]},
onTriggerClick:function(){this.collapse(!this.wrapper.hidden,true)},onTitleClick:function(){this.onTriggerClick()},collapse:function(k,f){this.attr(this.foldNode,"className",k?this.openCS:this.clsCS);this.wrapper.display(!k);this.collapsed=k;this.fire("collapsed",k);if(f&&this.pCt)this.pCt.layout.collapse?this.pCt.layout.collapse(this,k):this.pCt.layout.doLayout();return this}}});CC.ui.def("titlepanel",CC.ui.TitlePanel);CC.Tpl.def("CC.ui.Foldable",'<div class="g-foldable"><div class="g-foldablewrap"><b title="\u9690\u85cf" id="_trigger" class="icos icoCls"></b><div id="_tle"></div></div></div>');
CC.create("CC.ui.Foldable",CC.Base,{clsGroupCS:"g-gridview-clsview",unselectable:true,initComponent:function(){this.createView();CC.Base.prototype.initComponent.call(this);this.domEvent("click",this.foldView,true,null);if(this.array){this.target.fromArray(this.array);delete this.array}},foldView:function(a){var k=CC.fly(this.foldNode?this.target.dom(this.foldNode):this.target.ct||this.target);if(a!==true&&a!==false)a=!k.display();if(this.fire("expand",this,a)===false)k.unfly();else{this.nodeBlockMode!==
undefined&&k.setBlockMode(this.nodeBlockMode);k.display(a).unfly();this.target.shadow&&this.target.shadow.reanchor();this.dom("_trigger").title=a?"\u9690\u85cf":"\u5c55\u5f00";this.checkClass(this.clsGroupCS,!a);this.expanded=a;this.fire("expanded",this,a);return this}},brush:function(a){if(this.target.children)return"<strong>"+a+'</strong><span id="_view_span">(<strong><a id="_view_cnt" href="javascript:fGo();">'+this.target.size()+"</a></strong>)</span>";return a}});CC.ui.def("foldable",CC.ui.Folderable);
CC.create("CC.util.IFrameConnectionProvider",CC.util.ConnectionProvider,{traceLoad:true,indicatorDisabled:true,defaultLoadSuccess:fGo,setTarget:function(a){CC.util.ConnectionProvider.prototype.setTarget.apply(this,arguments);if(a.src||a.url)this.connect(a.src||a.url)},initConnection:function(){if(this.traceLoad)this.t.domEvent(CC.ie?"readystatechange":"load",this.traceFrameLoad,false,this,this.t.getFrameEl());CC.util.ConnectionProvider.prototype.initConnection.apply(this,arguments)},createSyncQueue:function(){CC.util.ConnectionProvider.prototype.createSyncQueue.call(this);
this.syncQueue.openEvt="connection:open";this.syncQueue.finalEvt="connection:final"},onFrameLoad:function(a){this.t.loaded=true;try{this.t.fire("connection:success",this.t,this);this.success&&this.success(this,a)}catch(k){console.warn(k)}this.onFinal()},traceFrameLoad:function(a){var k=this.t;switch(CC.Event.element(a).readyState||a.type){case "loading":this.syncQueue.isConnectorBusy(this.connectorKey)||k.fire("connection:open",this.t,this);break;case "load":case "complete":k.getFrameEl().src&&k.getFrameEl().src!==
"about:blank"&&this.onFrameLoad(a);break}},abort:function(){this.t.getFrameEl().src=CC.ie?"about:blank":"";this.onFinal()},onFinal:function(){this.t.fire("connection:final",this.t,this)},bindConnector:function(a){this.connectorKey&&this.syncQueue.isConnectorBusy(this.connectorKey)&&this.abort();this.connectorKey=this.syncQueue.join(this.t);CC.extend(this,a);this.connectInner();return this.connectorKey},connectInner:function(){this.t.fire("connection:open",this.t,this);(function(){try{this.t.getFrameEl().src=
this.url}catch(a){__debug&&console.warn(a)}}).bind(this).timeout(0)}});CC.Tpl.def("CC.ui.IFramePanel",'<iframe class="g-framepanel" frameBorder="no" scrolling="auto" hideFocus=""></iframe>');
CC.create("CC.ui.IFramePanel",CC.ui.Panel,{traceResize:false,connectionProvider:CC.util.IFrameConnectionProvider,ct:undefined,onRender:function(){CC.ui.Panel.prototype.onRender.call(this);var a=this.pCt;if(this.traceResize){a.on("resized",this.onContainerResize,this);this.onContainerResize(false,false,a.wrapper.getWidth(true),a.wrapper.getHeight(true))}},getFrameEl:function(){return this.view},getWin:function(){return CC.frameWin(this.getFrameEl())},onContainerResize:function(a,k){this.setSize(a,
k)},$:function(a){return CC.frameDoc(this.view).getElementById(a)},connect:function(a){this.getConnectionProvider().connect(a)}});CC.ui.def("iframe",CC.ui.IFramePanel);CC.Tpl.def("CC.ui.Resizer",'<div class="g-panel g-resizer"><div class="g-win-e" id="_xe"></div><div class="g-win-s" id="_xs"></div><div class="g-win-w" id="_xw"></div><div class="g-win-n" id="_xn"></div><div class="g-win-sw" id="_xsw"></div><div class="g-win-es" id="_xes"></div><div class="g-win-wn" id="_xwn"></div><div class="g-win-ne" id="_xne"></div><div class="g-panel-wrap g-resizer-wrap" id="_wrap"></div></div>');
CC.create("CC.ui.Resizer",CC.ui.Panel,function(a){var k=window.CC,f=k.util.dd.Mgr,b=f.resizeHelper;return{resizeable:true,enableH:true,enableW:true,unresizeCS:"g-win-unresize",width:500,height:250,minW:12,minH:6,onResizeStart:function(h){if(this.resizeable){var e=this.absoluteXY(),l=this.getSize(true);if(!k.borderBox){l.width-=1;l.height-=1}this.initPS={pos:e,size:l};b.applyResize(true,h.fastStyle("cursor"));b.layer.setXY(e).setSize(l);this.fire("resizestart")}},onResizeEnd:function(){var h=f.getDXY();
if(h[0]===0&&h[1]===0){b.applyResize(false);b.masker.fastStyleSet("cursor","")}else if(this.initPS){var e=b.layer.getSize(true);if(!k.borderBox){if(e.width!==0)e.width+=1;if(e.height!==0)e.height+=1}var l=b.layer.xy(),g=this.initPS.pos;h=this.initPS.size;h=[e.width-h.width,e.height-h.height];var m=this.shadow,o=m&&!m.hidden;l[0]-=g[0];l[1]-=g[1];m&&o&&m.hide();this.setXY(this.getLeft(true)+l[0],this.getTop(true)+l[1]).setSize(e);m&&o&&m.show();this.fire("resizeend",l,h);b.applyResize(false,"");delete this.initPS}},
initComponent:function(){a.initComponent.call(this);this.cornerSprites=[];this.resizeable?this.bindRezBehavior():this.setResizable(false)},bindRezBehavior:function(){var h=this.onResizeEnd.bind(this),e=this.createRezBehavior(8),l=this.createRezBehavior(4),g=this.createRezBehavior(2),m=this.createRezBehavior(1),o=this.createRezBehavior("",g,l),p=this.createRezBehavior("",l,m),u=this.createRezBehavior("",e,g),w=this.createRezBehavior("",e,m);this.bindRezTrigger("_xn",e,h).bindRezTrigger("_xs",l,h).bindRezTrigger("_xw",
g,h).bindRezTrigger("_xe",m,h).bindRezTrigger("_xes",p,h).bindRezTrigger("_xsw",o,h).bindRezTrigger("_xwn",u,h).bindRezTrigger("_xne",w,h)},bindRezTrigger:function(h,e,l){var g=this,m=this.cornerSprites[this.cornerSprites.length]=this.$$(h);m.beforedrag=function(){g.onResizeStart(m)};m.drag=e;m.afterdrag=l;m.installDrag(true);return this},createRezBehavior:function(h,e,l){var g=this;return h==4||h==8?function(){if(g.enableH){var m=f.getDXY();g._zoom(h,m[1])}}:h==1||h==2?function(){if(g.enableW){var m=
f.getDXY();g._zoom(h,m[0])}}:function(){e.call(this);l.call(this)}},_zoom:function(h,e){var l=b.layer;if((h&1)!==0){off=this.initPS.size.width+e;off>=this.minW&&l.setWidth(off)}else if((h&2)!==0){off=this.initPS.size.width-e;if(off>=this.minW){l.setWidth(off);off=this.initPS.pos[0]+e;l.setLeft(off)}}if((h&4)!=0){off=this.initPS.size.height+e;off>=this.minH&&l.setHeight(off)}else if((h&8)!=0){off=this.initPS.size.height-e;if(off>=this.minH){l.setHeight(off);off=this.initPS.pos[1]+e;l.setTop(off)}}},
setResizable:function(h){this.checkClass(this.unresizeCS,!h);this.resizeable=h},getWrapperInsets:function(){return[6,1,1,1,7,2]}}});
CC.create("CC.ui.Win",CC.ui.Resizer,function(a){var k=window.CC;k.Tpl.def("CC.ui.win.Titlebar",'<div id="_g-win-hd" class="g-win-hd"><div class="fLe"></div><b class="icoSw" id="_ico"></b><span id="_tle" class="g-tle">\u63d0\u793a</span><div class="fRi"></div><div class="g-win-hd-ct" style="position:absolute;right:5px;top:7px;" id="_ctx"></div></div>');k.Tpl.def("CC.ui.win.TitlebarButton",'<a class="g-hd-btn" href="javascript:fGo();"></a>');var f=900,b=k.util.dd.Mgr,h=b.resizeHelper,e=k.Base.prototype.setXY,
l,g={ctype:"ct",autoRender:true,clickEvent:true,unselectable:true,cancelClickBubble:true,itemCfg:{template:"CC.ui.win.TitlebarButton"},ct:"_ctx",template:"CC.ui.win.Titlebar",selectionProvider:{forceSelect:true,selectedCS:false}},m={ctype:"item",cs:"g-win-clsbtn",template:"CC.ui.win.TitlebarButton",tip:"\u5173\u95ed",id:"_cls"};return{unmoveable:false,closeable:true,shadow:{ctype:"shadow",inpactY:-1,inpactH:5},innerCS:"g-win g-tbar-win",minCS:"g-win-min",maxCS:"g-win-max",minH:30,overflow:false,minW:80,
dragOpacity:0.6,initComponent:function(){var o=k.delAttr(this,"title");a.initComponent.call(this);var p=this.titlebar;if(p)k.extendIf(p,g);else p=g;p.title=o;var u=true;if((o=p.view)&&typeof o==="string"){p.view=this.dom(o);u=false}this.titlebar=k.ui.instance(p.ctype,p);p.view=o;p=this.titlebar;u&&this.addTitlebarNode(p);this.follow(p);delete this.title;this.overflow&&this.wrapper.fastStyleSet("overflow",this.overflow);if(this.closeable===true){if(u=p.clsBtn)k.extendIf(u,m);else u=m;u.onselect=this.onClsBtnClick;
if((o=u.view)&&typeof o==="string")u.view=this.dom(o);this.clsBtn=k.ui.instance(u);u.view=o;p.layout.add(this.clsBtn)}this.destoryOnClose&&this.on("closed",this.destory);this.domEvent("mousedown",this.trackZIndex).domEvent("mousedown",this.trackZIndex,true,null,this.titlebar.view).domEvent("dblclick",this.switchState,true,null,this.titlebar.view);this.unmoveable||b.installDrag(this,true,p.view);this.trackZIndex()},addTitlebarNode:function(o){this.wrapper.insertBefore(o)},dragstart:function(){if(this.unmoveable||
this.fire("movestart")===false)return false;this.shadow&&this.shadow.hide();h.applyMasker(true);this.decorateDrag(true);l=this.xy()},drag:function(){var o=b.getDXY();e.call(this,l[0]+o[0],l[1]+o[1])},dragend:function(){h.applyMasker(false);if(this.fire("moveend")===false){this.setXY(l);this.decorateDrag(false);return false}var o=b.getDXY(),p=l;this.left=this.top=false;this.setXY(p[0]+o[0],p[1]+o[1]);this.decorateDrag(false);l=null},decorateDrag:function(o){o?this.setOpacity(this.dragOpacity).wrapper.hide():
this.setOpacity(1).wrapper.show();this.shadow&&this.shadow.display(!o)},onClsBtnClick:function(){this.pCt.pCt.close()},setTitle:function(o){this.titlebar.setTitle(o);return this},trackZIndex:function(){if(this.zIndex!=f){f+=5;this.setZ(f)}},setZ:function(o){this.fastStyleSet("zIndex",o);for(var p=0,u=this.cornerSprites,w=u.length;p<w;p++)u[p].setZ(o+1);this.shadow&&this.shadow.setZ(o-1);this.zIndex=o;return this},switchState:function(){this.win_s!="max"?this.max():this.normalize()},getWrapperInsets:function(){return[29,
1,1,1,30,2]},setTitle:function(o){if(this.titlebar){this.titlebar.setTitle(o);this.title=o}return this},close:function(){if(this.fire("close")===false)return false;this.onClose();this.fire("closed");return this},onClose:function(){this.display(0)},_markStated:function(o){if(o){if(o=k.delAttr(this,"_normalBounds")){this.setXY(o[0]);this.setSize(o[1]);this.enableH=k.delAttr(this,"_enableH");this.enableW=k.delAttr(this,"_enableW");this.setResizable(k.delAttr(this,"_resizeable"));this.titlebar.draggable=
k.delAttr(this,"_draggable")}}else{this._normalBounds=[this.xy(),this.getSize(true)];this._enableH=this.enableH;this._enableW=this.enableW;this._resizeable=this.resizeable;this._draggable=this.titlebar.draggable}},min:function(){this.setState("min");return this},normalize:function(){return this.setState("normal")},max:function(){return this.setState("max")},setState:function(o){var p=this.win_s;if(this.win_s==o)return this;this.fire("statechange",o,p);switch(p){case "min":this.delClass(this.minCS);
break;case "max":this.delClass(this.maxCS);break;default:this._markStated()}switch(o){case "min":this.shadow&&this.shadow.show();this.addClass(this.minCS);this.setHeight(this.minH);this.setResizable(false);break;case "max":this.shadow&&this.shadow.hide();this.titlebar.draggable=false;this.addClass(this.maxCS);var u,w=this.pCt?this.pCt.view:this.view.parentNode;if(w===document.body)u=k.getViewport();else{w=k.fly(w);u=w.getSize();w.unfly()}this.setXY(0,0).setSize(u);this.setResizable(false);break;default:this._markStated(true);
this.shadow&&this.shadow.show()}this.win_s=o;this.fire("statechanged",o,p);return this}}});CC.ui.def("win",CC.ui.Win);CC.Tpl.def("CC.ui.Dialog.Bottom",'<div class="g-win-bottom"><div class="bottom-wrap"></div></div>');
CC.create("CC.ui.Dialog",CC.ui.Win,function(a){var k=window.CC,f=k.Event;return{bottomHeight:51,returnCode:false,defaultButton:false,initComponent:function(){this.createView();this.keyEventNode=this.view;if(this.bottomer===false)this.bottomHeight=0;else this.createBottom();a.initComponent.call(this);if(this.buttons&&this.bottomer!==false){this.bottomer.fromArray(this.buttons);delete this.buttons}this.keyEvent&&this.on("keydown",this.onKeydownEvent,null,true)},onBottomItemSelected:function(b){if(b.returnCode!==
false&&b.id){this.pCt.returnCode=b.id;var h=this.pCt["on"+b.id];if(!h||h.call(this.pCt,b)!==false)this.pCt.close()}},onKeydownEvent:function(b){if(f.ESC==b.keyCode)this.onCancel();else f.isEnterKey(b)&&this.onOk()},onOk:function(){this.bottomer&&this.defaultButton&&this.bottomer.selectionProvider.select(this.defaultButton,true)},onClsBtnClick:function(){this.pCt.pCt.returnCode=false;a.onClsBtnClick.apply(this,arguments)},onCancel:function(){this.returnCode=false;this.close()},show:function(b,h,e){this.modal=
h;this.modalParent=b;this.modalCallback=e;return a.show.call(this)},trackZIndex:function(){a.trackZIndex.call(this);this.masker&&this.masker.setZ(this.getZ()-2)},onShow:function(){a.onShow.call(this);if(this.modal){var b=this.masker;if(!b)b=this.masker=new k.ui.Mask;b.target||b.attach(this.modalParent||k.$body)}this.center(this.modalParent);this.trackZIndex.bind(this).timeout(0);this.focusDefButton()},onHide:function(){if(this.modal){if(this.modalCallback&&this.modalCallback(this.returnCode)===false)return this;
this.masker.detach();delete this.modal;delete this.modalParent;delete this.modalCallback}a.onHide.call(this)},focusDefButton:function(){if(this.bottomer){var b=this.bottomer.$(this.defaultButton);b&&b.focus(22)}},createBottom:function(){var b=this.bottomer=k.ui.instance(k.extendIf(this.bottomer,{ctype:"ct",pCt:this,itemCls:k.ui.Button,template:"CC.ui.Dialog.Bottom",ct:"_wrap",clickEvent:"click",keyEvent:true,selectionProvider:{forceSelect:true}}));this.follow(b);b.on("selected",this.onBottomItemSelected);
this.addBottomNode(b)},addBottomNode:function(b){this.view.appendChild(b.view)},getWrapperInsets:function(){var b=this.superclass.getWrapperInsets.call(this),h=this.bottomHeight-1;b[2]+=h;b[4]+=h;return b}}});CC.Tpl.def("Util.alert.input",'<div class="msgbox-input"><table class="swTb"><tbody><tr><td valign="top"><b class="icoIfo" id="_ico"></b></td><td><span id="_msg" class="swTit"></span>&nbsp;<input type="text" style="" class="gIpt" id="_input"/><p class="swEroMsg"><span id="_err"></span></p></span></td></tr></tbody></table></div>');
CC.extendIf(CC.Util,function(){function a(k){return this.indexOf(k.id)>=0}return{_sysWin:null,getSystemWin:function(){var k=this._sysWin;if(!k){k=this._sysWin=new CC.ui.Dialog({id:"sysWin",setState:fGo,cs:"sysWin bot",resizeable:false,width:400,hidden:true,autoRender:true,keyEvent:true,showTo:document.body,setZ:fGo,buttons:[{title:"\u53d6&nbsp;\u6d88",id:"cancel"},{title:"\u786e&nbsp;\u5b9a",id:"ok"},{title:"&nbsp;\u5426&nbsp;",id:"no"},{title:"&nbsp;\u662f&nbsp;",id:"yes"},{title:"\u5173&nbsp;\u95ed",
id:"close"}]});k.getInputEl=function(){return this.wrapper.dom("_input")}}return k},alert:function(k,f,b,h,e,l){f=f||"\u63d0\u793a";var g=this.getSystemWin();g.setTitle(f).setSize(400,153).wrapper.html('<div class="msgbox-dlg">'+(k||"")+"</div>");if(!h)l=h="ok";g.bottomer.filter(a,h);if(l)g.defaultButton=l;g.fastStyleSet("visibility","hidden");g.show(e||document.body,true,b);(function(){g.autoHeight().center(e);g.fastStyleSet("visibility","")}).timeout(0)},inputBox:function(k,f,b,h,e,l){f=f||"\u63d0\u793a";
var g=this.getSystemWin();g.setTitle(f).setSize(400,175).wrapper.html(CC.Tpl["Util.alert.input"]).dom("_msg").innerHTML=k;g.wrapper.dom("_input");if(!h){h="ok|cancel";l="ok"}g.bottomer.filter(a,h);if(l)g.defaultButton=l;g.show(e||document.body,true,b);(function(){g.getInputEl().focus()}).timeout(80)}}}());
(function(){var a=window.CC,k=a.Event,f=a.util.SelectionProvider.prototype;a.Tpl.def("CC.ui.Menu",'<div class="g-panel g-menu"><div id="_wrap" class="g-panel-wrap"><ul class="g-menu-opt" id="_bdy"  tabindex="1" hidefocus="on"></ul></div></div>').def("CC.ui.MenuItem",'<li class="g-menu-item"><span id="_tle" class="item-title"></span></li>');a.create("CC.ui.menu.MenuSelectionProvider",a.util.SelectionProvider,{forceSelect:true,selectedCS:false,onSelect:function(b,h){b.handleClick(h);f.onSelect.call(this,
b)},navigateKey:function(b){switch(b.keyCode){case k.UP:this.t.menubar?this.tryActive(this.t,true):this.pre();k.stop(b);break;case k.DOWN:this.t.menubar?this.tryActive(this.t,true):this.next();k.stop(b);break;case k.LEFT:this.t.menubar?this.pre():this.left();k.stop(b);break;case k.RIGHT:this.t.menubar?this.next():this.right();k.stop(b);break;case k.ENTER:this.enter();k.stop(b);break;case k.ESC:this.esc();k.stop(b);break;default:return this.defKeyNav(b)}},tryActive:function(b,h){var e=b.onItem;if(e&&
e.subMenu){e.showMenu(true);this.tryActive(e.subMenu)}else(e=b.getSelectionProvider().getNext())&&e.active(h)},getStartIndex:function(){var b=this.t,h=b.onItem;return h?b.indexOf(h):-1},next:function(){var b=this.t,h=this.getNext();h||(h=b.$(0));h&&h.active(b.menubar)},pre:function(){var b=this.t,h=this.getPre();h||(h=b.$(b.size()-1));h&&h.active(b.menubar)},left:function(){var b=this.t;if(b.menubar)this.pre();else if(b=b.pItem){b.showMenu(false);b.pCt.menubar?b.pCt.getSelectionProvider().pre():b.active()}},
right:function(){var b=this.t;if(b.menubar)this.next();else{var h=b.onItem;if(h&&h.subMenu){h.showMenu(true);this.tryActive(h.subMenu)}else b.getRoot().getSelectionProvider().next()}},esc:function(){var b=this.t,h=b.onItem;if(b.menubar){if(h){h.deactive(true);b.setAutoExpand(false)}}else{var e=h&&h.subMenu;if(e&&!e.hidden)h.active(false);else b.pItem?b.pItem.active(false):b.hide()}},enter:function(){var b=this.t.onItem;b&&this.select(b)}});a.create("CC.ui.MenuItem",a.Base,function(b){return{subMenu:null,
subCS:"sub-x",active:function(h){if(!this.disabled){var e=this.pCt,l=e.onItem;if(l!==this){l&&l.deactive(true);this.deactiveTimer&&this.clearDefer();e.onItem=this;(l=e.pItem)&&!l.isActive()&&l.active(h);this.decorateActive(true)}e.focus();this.subMenu&&this.showMenu(h)}},isActive:function(){return this.pCt.onItem===this},decorateActive:function(h){this.checkClass(this.pCt.activeCS,h)},deactive:function(h){var e=this.subMenu;this.pCt.onItem=null;this.deactiveTimer&&this.clearDefer();this.decorateActive(false);
e&&h&&!e.hidden&&this.showMenu(false)},deferDeactive:function(h){this.deactiveTimer=this.deactive.bind(this,h).timeout(100)},clearDefer:function(){clearTimeout(this.deactiveTimer);this.deactiveTimer=false},decorateExpand:function(h){this.checkClass(this.pCt.expandCS,h)},handleClick:function(h){var e=this.pCt;if(e.menubar){this.active(true);e.contexted||e.bindContext();e.setAutoExpand(true)}else if(this.subMenu){this.active(true);h&&k.stop(h)}else e.hideAll()},showMenu:function(h){var e=this.subMenu;
if(e)if(e.hidden!==!h){var l=this.pCt;e.rendered||e.render();if(h){this.decorateExpand(true);e.setZ((l.getZ()||8888)+2);l.menubar?e.anchorPos(this,"lb","hr",null,true,true):e.anchorPos(this,"rt","vd",null,true,true);e.focus(0)}else{this.decorateExpand(false);e.onItem&&e.onItem.deactive(true)}e.display(h)}},bindMenu:function(h){h.pItem=this;this.subMenu=h;this.decorateSub(true)},decorateSub:function(h){this.checkClass(this.subCS,h)},unbind:function(){var h=this.subMenu;if(h){this.decorateSub(false);
delete h.pItem;delete this.subMenu}},initComponent:function(){b.initComponent.call(this);if(this.array){this.bindMenu(new a.ui.Menu({array:this.array,showTo:document.body}));delete this.array}},onRender:function(){b.onRender.call(this);if(this.subMenu)this.subMenu.rendered||this.subMenu.render()},destory:function(){if(this.subMenu){this.subMenu.destory();this.unbind()}b.destory.call(this)}}});a.create("CC.ui.Menu",a.ui.Panel,function(b){return{hidden:true,width:115,pItem:null,activeCS:"itemOn",expandCS:"subHover",
clickEvent:"mousedown",shadow:true,onItem:null,selectionProvider:a.ui.menu.MenuSelectionProvider,itemCls:a.ui.MenuItem,ct:"_bdy",menubarCS:"g-menu-bar",separatorCS:"g-menu-separator",initComponent:function(){if(this.shadow===true)this.shadow=new a.ui.Shadow({inpactH:6,inpactY:-2,inpactX:-5,inpactW:9});b.initComponent.call(this);this.menubar&&this.addClass(this.menubarCS);if(this.array){this.fromArray(this.array);delete this.array}this.noUp();this.itemAction("mouseover",this.mouseoverCallback,true);
this.itemAction("mouseout",this.mouseoutCallback,true)},mouseoverCallback:function(h){var e=this.pItem,l=this.onItem;if(l!==h){l&&l.deactive(true);e&&e.deactiveTimer&&e.clearDefer();this.menubar&&!this.autoExpand?h.active():h.active(true)}else l&&l.clearDefer()},mouseoutCallback:function(h){if(this.menubar)this.autoExpand||h.deferDeactive();else h.deferDeactive(true)},attach:function(h,e){e=this.$(e);e.bindMenu(h);this.menubar&&e.decorateSub(false)},beforeAdd:function(h){b.beforeAdd.apply(this,arguments);
if(h.separator){this.addSeparator();delete h.separator}this.menubar&&h.subMenu&&h.decorateSub(false)},beforeRemove:function(h){h===this.onItem&&this.onItem.deactive();return b.beforeRemove.call(this,h)},detach:function(h){h=this.$(h);h.unbind()},getRoot:function(){var h=this.pItem;if(!h)return this;return h.pCt.getRoot()},hideAll:function(){var h=this.getRoot();if(h.menubar&&h.onItem){h.onItem.deactive(true);h.setAutoExpand(false)}else h.display(false)},onHide:function(){b.onHide.call(this);this.onItem&&
this.onItem.deactive(true);this.onDisplay(false)},onShow:function(){b.onShow.call(this);this.onDisplay(true)},onDisplay:fGo,setAutoExpand:function(h){this.autoExpand=h},addSeparator:function(){this._addNode(a.ui.Menu.Separator.view.cloneNode(true))},at:function(h,e,l){this.display(true);if(typeof h==="number"){this.anchorPos([h,e,0,0],"lb","hr",null,true,true);l!==false&&!this.menubar&&this.bindContext()}else{this.anchorPos(h,"lb","hr",null,true,true);e!==false&&!this.menubar&&this.bindContext()}},
destory:function(){this.each(function(){if(this.subMenu&&!this.disabledCascadeDel){var h=this.subMenu;this.pCt.detach(this);h.destory()}});b.destory.call(this)}}});a.ui.Menu.Separator=a.$$(a.$C({tagName:"LI",className:a.ui.Menu.prototype.separatorCS}));a.create("CC.ui.Menubar",a.ui.Menu,{menubar:true,hidden:false,shadow:false,onContextedRelease:function(){this.onItem&&this.onItem.deactive(true);this.getSelectionProvider().select(null);this.setAutoExpand(false);return false},bindContext:function(){return a.ui.Menu.prototype.bindContext.call(this,
this.onContextedRelease)}});a.ui.def("menu",a.ui.Menu);a.ui.def("menuitem",a.ui.MenuItem);a.ui.def("menubar",a.ui.Menubar)})();
(function(){var a=window.CC;a.Tpl.def("CC.ui.Tree",'<div class="g-tree"><div class="g-panel-body g-panel-body-noheader" id="_scrollor"><ul id="_ctx" class="g-tree-nd-ct  g-tree-arrows" tabindex="1" hidefocus="on"></ul></div></div>').def("CC.ui.TreeItem",'<li class="g-tree-nd"><div class="g-tree-nd-el g-unsel" unselectable="on" id="_head"><span class="g-tree-nd-indent" id="_ident"></span><img class="g-tree-ec-icon" id="_elbow" src="'+a.Tpl.BLANK_IMG+'"/><img unselectable="on" class="g-tree-nd-icon" src="'+
a.Tpl.BLANK_IMG+'" id="_ico" /><a class="g-tree-nd-anchor" unselectable="on" hidefocus="on" id="_tle"></a></div><ul class="g-tree-nd-ct" id="_bdy" style="display:none;" tabindex="1" hidefocus="on"></ul></li>').def("CC.ui.TreeItemSpacer",'<img class="g-tree-icon" src="'+a.Tpl.BLANK_IMG+'"/>');var k=a.ui.ContainerBase,f=k.prototype;a.create("CC.ui.TreeItem",k,{root:null,ct:"_bdy",dragNode:"_head",hoverCS:"g-tree-nd-over g-tree-ec-over",splitEndPlusCS:"g-tree-split-end-plus",splitEndMinCS:"g-tree-split-end-minus",
splitPlusCS:"g-tree-split-plus",splitMinCS:"g-tree-split-minus",splitCS:"g-tree-split",splitEndCS:"g-tree-split-end",nodeOpenCS:"g-tree-nd-opn",nodeClsCS:"g-tree-nd-cls",nodeLeafCS:"g-tree-nd-leaf",loadCS:"g-tree-nd-loading",elbowLineCS:"g-tree-elbow-line",springCS:"spring",mouseoverNode:"_head",mouseoverTarget:"_head",nodes:false,clickEvent:"click",clickEventNode:"_head",initComponent:function(){if(!this.root)this.root=this;if(this.array&&!this.nodes)this.nodes=true;f.initComponent.call(this);this._ident=
this.$$("_ident");this._elbow=this.$$("_elbow");this._head=this.$$("_head");if(this.nodes){this.domEvent("dblclick",this.expand,true,null,this._head.view);this.domEvent("mousedown",this.expand,true,null,this._elbow.view);this.domEvent("click",a.Event.noUp,true,null,this._elbow.view)}else this._head.addClass(this.nodeLeafCS);this._decElbowSt(false)},addIcon:function(l,g){var m=a.Tpl.$("CC.ui.TreeItemSpacer");g&&a.extend(m,g);a.fly(m).addClass(l).unfly();this.fly(this.titleNode).insertBefore(m).unfly();
return this},addSpring:function(l){l.view&&this.follow(l);this.fly(this.titleNode).insertBefore(l).unfly();a.fly(l).addClass(this.springCS).unfly()},expand:function(l){if(l!==true&&l!==false)l=!a.display(this.ct);if(this.root.tree.fire("expand",this,l)===false)return false;this._decElbowSt(l);a.display(this.ct,l);this.expanded=l;if(this.root.tree.fire("expanded",this,l)===false)return false},_decElbowSt:function(l){if(arguments.length==0)l=a.display(this.ct);var g=this.pCt;g=!g||g.ct.lastChild==this.view;
var m=this._elbow,o=this.splitEndPlusCS,p=this.splitEndMinCS,u=this.splitPlusCS,w=this.splitMinCS;if(this.nodes){if(g)if(m.hasClass(u))m.delClass(u);else m.hasClass(w)&&m.delClass(w);else if(m.hasClass(o))m.delClass(o);else m.hasClass(p)&&m.delClass(p);if(l){g?m.switchClass(o,p):m.switchClass(u,w);this._head.switchClass(this.nodeClsCS,this.nodeOpenCS)}else{g?m.switchClass(p,o):m.switchClass(w,u);this._head.switchClass(this.nodeOpenCS,this.nodeClsCS)}}else g?m.switchClass(this.splitCS,this.splitEndCS):
m.switchClass(this.splitEndCS,this.splitCS)},add:function(l){var g=this.children[this.children.length-1];f.add.call(this,l);l._decElbowSt();l._applyChange(this);if(g){g._decElbowSt();g._applyChange(this)}},_applyChange:function(l){this._applyRoot(l.root);this._applySibling();this._fixSpacer(l);if(this.nodes)this.itemCls=l.root.itemCls},_applyRoot:function(l){if(this.root!==l){this.root=l;if(this.nodes)for(var g=this.children,m=g.length-1;m>=0;m--)if(g[m].nodes)g[m]._applyRoot(l);else g[m].root=l}},
_applySibling:function(l){if(l){if(this.previous)this.previous.next=this.next;if(this.next)this.next.previous=this.previous;this.next=this.previous=null}else if(l=this.pCt){c=l.children;idx=c.indexOf(this);if(this.next=c[idx+1])this.next.previous=this;if(this.previous=c[idx-1])this.previous.next=this}else this.previous=this.next=null},clickEventTrigger:function(l){this.root.tree.fire("itemclick",this,l)},eachH:function(l,g){var m=this.children,o;if(g===h)g=0;for(var p=0,u=m.length;p<u;p++){o=m[p];
if(l.call(o,o,++g)===false)return false;if(o.nodes)if(o.eachH(l,g)===false)return false}},remove:function(l){l=this.$(l);var g=this.children[this.children.length-1]==l,m=l.previous;l._applySibling(true);f.remove.call(this,l);this.root.tree.getSelectionProvider().onItemRemoved(l);g&&this.size()>0&&this.children[this.children.length-1]._decElbowSt();m&&m._applyChange(this);return this},onRender:function(){this.root=this.pCt.root;this._applySibling();f.onRender.call(this);this.expanded&&this.expand(true)},
insert:function(l,g){f.insert.call(this,l,g);g._applyChange(this);g._decElbowSt()},getSpacerNodes:function(){var l=a.Tpl.forNode(a.Tpl["CC.ui.TreeItemSpacer"]);if(this.root===this)return l;for(var g=this._ident.view.childNodes,m=document.createDocumentFragment(),o=0,p=g.length;o<p;o++)m.appendChild(g[o].cloneNode(true));m.appendChild(l);return m},_fixSpacer:function(l){var g=this._ident.view;g.innerHTML="";g.appendChild(l.getSpacerNodes());l.next&&a.addClassIf(g.lastChild,l.elbowLineCS);if(this.nodes){l=
0;for(g=this.size();l<g;l++)this.children[l]._fixSpacer(this)}}});a.ui.TreeItem.prototype.itemCls=a.ui.TreeItem;a.ui.def("treeitem",a.ui.TreeItem);var b=a.ui.ContainerBase.prototype,h=window.undefined;a.create("CC.ui.tree.TreeSelectionProvider",a.util.SelectionProvider,{selectedCS:"g-tree-selected",decorateSelected:function(l,g){l._head.checkClass(this.selectedCS,g)},isSelected:function(l){return l._head.hasClass(this.selectedCS)},getNext:function(){var l=this.selected,g=this.t.root,m;if(l){l=l;for((m=
!(l.nodes&&l.expanded&&l.children.length>0))||(l=l.children[0]);;)if(m)if(l.next){l=l.next;if(this.canNext(l))break}else{if(l===g){l=null;break}l=l.pCt}else if(this.canNext(l))break;else m=true}else l=g;return l},getPre:function(){var l=this.selected,g=this.t.root,m;if(l){for(m=l.previous;(!m||!this.canPre(m)||m.nodes&&m.expanded&&m.children.length>0)&&m!=g;)if(m)m=m.nodes&&this.canPre(m)?m.children[m.children.length-1]:m.previous;else{m=l===g?null:l.pCt;break}if(m===l)m=null}else m=g;return m}});
a.create("CC.ui.tree.TreeItemLoadingIndicator",a.ui.Loading,{markIndicator:function(){this.target._head.addClass(this.target.loadCS)},stopIndicator:function(){var l=this.target;l._head.delClass(l.loadCS);l.getConnectionProvider().getConnectionQueue().isConnectorLoaded(l._dataConnectorId)&&l.expand(true)}});a.ui.TreeItem.prototype.indicator=a.ui.tree.TreeItemLoadingIndicator;var e={nodes:true,draggable:false,itemCls:a.ui.TreeItem,ctype:"treeitem"};a.create("CC.ui.Tree",a.ui.ContainerBase,{ct:"_ctx",
url:false,autoLoad:false,parentParamName:"pid",keyEvent:true,clickEventTrigger:a.ui.TreeItem.prototype.clickEventTrigger,clickEventNode:"_head",clickEvent:true,selectionProvider:a.ui.tree.TreeSelectionProvider,initComponent:function(){a.delAttr(this,"array");b.initComponent.call(this);if(!this.root||this.root.cacheId===h){var l=this.root||this.rootCfg;l&&delete this.rootCfg;this.root=this.instanceItem(a.extendIf(l,e))}if(this.hideRoot){this.root._head.hide();delete this.hideRoot}this.root.tree=this;
this.add(this.root);this.on("expand",this.onExpand,this)},onExpand:function(l,g){if(this.autoLoad&&g)if(!this.isItemRequested(l)){this.loadItem(l);return l.children.length>0}},loadItem:function(l){var g=this.getItemUrl(l);if(g){var m=l.getConnectionProvider();m.getIndicator();if(!this.isItemRequested(l))l._dataConnectorId=m.connect(g)}},isItemRequested:function(l){return!!l._dataConnectorId},getItemUrl:function(l){var g=a.templ(this,this.url);if(g)g+=(g.indexOf("?")>0?"&":"?")+encodeURIComponent(this.parentParamName)+
"="+encodeURIComponent(l.id);return g},$:function(l){return l},each:function(l){var g=this.root;if(l.call(g,g,0)!==false)return g.eachH(l,1)},setSize:function(l){b.setSize.apply(this,arguments);if(l!==false&&a.ie){var g=this.getScrollor();g!==this&&g.setWidth(this.width)}}});a.ui.def("tree",a.ui.Tree)})();
(function(){function a(m){return!!((m&3)==0&&(m%100||m%400==0&&m))}function k(m){(function(){g.hide();g.bindingEditor.value=m;g.bindingEditor=null}).timeout(200)}var f=window.CC,b=f.ui.Panel.prototype,h,e=[31,28,31,30,31,30,31,31,30,31,30,31],l=f.Event;f.Tpl.def("CC.ui.Datepicker",'<div class="g-datepicker" ><div style="position: relative;"><table cellspacing="0" cellpadding="0" class="entbox"><tbody><tr><td class="headline"><table width="100%" cellspacing="0" cellpadding="1" align="center" class="dxcalmonth"><tbody><tr><td align="left" class="month_btn_left"><span></span></td><td align="center"><table cellspacing="0" cellpadding="0" align="center"><tbody><tr><td><div id="_seltor" class="g-datepicker-selecor" style="display:none;"></div><div id="_planeY" class="planeYear" style="cursor: pointer;">1955</div></td><td class="comma">,</td><td><div id="_planeM" class="planeMonth" title="\u70b9\u51fb\u9009\u62e9\u6216\u76f4\u63a5\u8f93\u5165\u5e74\u4efd\u503c"></div></td></tr></tbody></table></td><td align="right" class="month_btn_right"><span></span></td></tr></tbody></table></td></tr><tr><td><table width="100%" cellspacing="0" cellpadding="0" class="g-datepicker-body"><tbody><tr><th class="month_spr"><span>\u6708</span></th><th><span>\u65e5</span></th><th><span>\u4e00</span></th><th><span>\u4e8c</span></th><th><span>\u4e09</span></th><th><span>\u56db</span></th><th><span>\u4e94</span></th><th><span>\u516d</span></th><th class="month_spr"><span>\u6708</span></th></tr></tbody></table></td></tr><tr><td id="_monthWrap"></td></tr><tr><td style="text-align:center;padding-bottom:5px;" id="_tdytd"></td></tr></tbody></table><div class="leftsplit" id="_preBar" onmouseover="CC.addClass(this, \'leftsplitOn\')" onmouseout="CC.delClass(this, \'leftsplitOn\')" ></div><div class="rightsplit" onmouseover="CC.addClass(this, \'rightsplitOn\')" onmouseout="CC.delClass(this, \'rightsplitOn\')" id="_nxtBar"></div></div></div>');
f.create("CC.ui.Datepicker",f.ui.Panel,{shadow:true,unselectable:true,eventable:true,value:new Date,fmt:"yy/mm/dd",mm:null,yy:null,dd:null,keyEvent:true,initComponent:function(){b.initComponent.call(this);this.monthWrap=this.dom("_monthWrap");this.domEvent("click",this.onDayClick,true,null,this.monthWrap).domEvent("click",this.onYearList,true,null,"_planeY").domEvent("click",this.onNavBarMove,true,null,"_nxtBar").domEvent("click",this.onNavBarMove,true,null,"_preBar");f.Util.qtip&&f.Util.qtip(this.$$("_planeY"),
"\u70b9\u51fb\u9009\u62e9\u6216\u76f4\u63a5\u8f93\u5165\u5e74\u4efd\u503c");this.value&&this.setValue(this.value,true);this.todayBtn=new f.ui.Button({showTo:this.dom("_tdytd"),title:"\u4eca\u5929"});this.follow(this.todayBtn).domEvent("click",this.toToday,true,null,this.todayBtn.view).selectorNode=this.dom("_seltor")},_hideYearSel:function(){f.fly(this.selectorNode).display(false).unfly()},onNavBarMove:function(m){l.element(m).id=="_nxtBar"?this.selectYear(this.yy+1):this.selectYear(this.yy-1)},selectYear:function(m){this.setValue(new Date(m,
this.mm,1),true)},toToday:function(){this.setValue(new Date)},onYearList:function(){var m=this.selectorNode;f.fly(m).bindContext().display(true).unfly();m.firstChild||this.createList();m.firstChild.value=this.yy;m.lastChild.value="";(function(){m.lastChild.focus()}).timeout(20)},createList:function(){var m=this.selectorNode,o=this.fly("_planeY");o.getSize();m.innerHTML=this.getSelectListHtml();var p=m.firstChild,u=m.lastChild;o.unfly();f.fly(u).fastStyleSet("width",p.offsetWidth).fastStyleSet("height",
p.offsetHeight).unfly();this.domEvent("change",function(){this.selectYear(p.value);this._hideYearSel()},false,null,p);this.noUp("click",m).bindEnter(function(){var w=parseInt(u.value.trim());isNaN(w)||this.selectYear(w);this._hideYearSel()},true,null,u)},getSelectListHtml:function(){for(var m=["<select>"],o=this.selectYearEnd||2100,p=this.selectYearStart||1900;p<=o;p++)m.push('<option value="'+p+'">'+p+"</option>");m.push('<input type="text" class="g-corner" />');return m.join("")},onDayClick:function(m){m=
l.element(m);if(m!=this.monthWrap){m=f.tagUp(m,"TD").id;m.indexOf("/")>0?this.setValue(new Date(m)):this.setValue(new Date(this.yy,parseInt(m),1),true)}},setValue:function(m,o){var p=this.currentDate;f.isDate(m)||(m=f.dateParse(m,this.fmt));var u=m.getFullYear();if(isNaN(u))__debug&&console.log("invalid date :"+m);else{var w=m.getMonth(),z=m.getDate();this.yy=u;this.mm=w;this.dd=z;this.currentDate=m;this.update(p);if(!o&&(!this.disableFilter||!this.disableFilter(u,w,z)))this.fire("select",f.dateFormat(m,
this.fmt),m)}},update:function(m){var o=this.mm+1,p=this.yy,u=this.dd;this.dom("_planeM").innerHTML=o+"\u6708";this.dom("_planeY").innerHTML=p+"\u5e74";var w=f.fly(this.monthWrap);if(m&&p==m.getFullYear()&&o==m.getMonth()+1){m=m.getMonth()+1+"/"+m.getDate()+"/"+m.getFullYear();f.delClass(w.dom(m),"selday")}else this.monthWrap.innerHTML=this.getMonthHtml(this.currentDate);m=o+"/"+u+"/"+p;(o=w.dom(m))&&f.addClass(o,"selday");w.unfly()},getMonthHtml:function(m){var o=[],p=new Date,u=p.getFullYear(),
w=m.getMonth()+1,z=m.getFullYear(),D=w!=2?e[w-1]:a(z)?29:28,B=w-1,t=z,v=t,d=B==0?12:B;if(d==12)t-=1;B=w+1;B=B>12?1:B;if(B==1)v+=1;var n;m=(m.getDay()-(m.getDate()-1))%7;n=m<0?m+7:m;m=d!=2?e[d-1]:a(t)?29:28;var q=m-n+1;if(n==0)q=m-6;o.push('<table class="g-datepicker-days"  width="100%" cellspacing="0" cellpadding="0"><tbody>');n=0;var y="preday";d=d;t=t;for(var x=this.disableFilter,F=0;F<6;F++){o.push('<tr><td class="month_sep');F+1===w&&o.push(" selmonth");o.push('" id="'+F+'"><a href="javascript:fGo()" hidefocus="on">'+
(F+1)+"</a></td>");for(var E=0;E<7;E++){o.push('<td class="'+y);if(E==6)o.push(" sateday");else E==0&&o.push(" sunday");x&&x(t,d,q)&&o.push(" disabledday");o.push('" id="'+d+"/"+q+"/"+t+'"><a');u===t&&p.getMonth()+1===d&&p.getDate()===q&&o.push(' class="today" title="\u4eca\u5929:'+t+"\u5e74"+d+"\u6708"+q+'\u65e5"');o.push(' href="javascript:fGo()" hidefocus="on">'+q+"</a></td>");q++;if(q>m&&n==0){n=q=1;y="curday";d=w;t=z}else if(n==1&&q>D){n=2;q=1;y="nxtday";d=B;t=v}}o.push('<td class="month_sep month_r');
F+7===w&&o.push(" selmonth");o.push('" id="'+(F+6)+'"><a href="javascript:fGo()" hidefocus="on">'+(F+7)+"</a></td></tr>")}o.push("</tbody></table>");return o.join("")}});h=f.ui.Datepicker;h.dateFormat="yy/mm/dd";var g;h.getInstance=function(){if(!g){g=h.instance=new h({hidden:true,showTo:document.body,autoRender:true});g.on("select",k)}return g};h.show=function(m){h.getInstance();g.dateFormat=h.dateFormat;g.bindingEditor=m;m=g;var o=f.fly(m.bindingEditor);m.display(true);m.setValue(m.bindingEditor.value.trim(),
true);m.anchorPos(o,"lb","hr",null,true,true);o.unfly();m.bindContext()}})();
(function(){var a=window.CC,k=a.Cache;a.create("CC.ui.grid.Column",a.Base,function(f){return{resizeDisabled:false,sortedCS:"sorted",ascCS:"asc",descCS:"desc",sortIndicatorCS:"sort-icon",createView:function(){this.view=a.$C({tagName:"TD",innerHTML:'<div class="hdrcell"></div>'});this.bdEl=this.view.firstChild;this.createViewBody(this.bdEl)},createViewBody:function(b){b.appendChild(a.$C({tagName:"span",id:"_tle"}))},onRender:function(){if(this.width!==false){var b=a.delAttr(this,"width");f.onRender.call(this);
this.width=b}else f.onRender.call(this)},cellBrush:function(b){return b},sortDecorator:function(b,h){this.addClassIf(this.sortedCS);if(h&&h!==this&&!h.order){h.checkClass(this.descCS,false);h.checkClass(this.ascCS,false)}var e=b==="desc";this.switchClass(e?this.ascCS:this.descCS,e?this.descCS:this.ascCS);if(this.pCt){e=this.pCt._sortDecorateEl;if(!e)e=this.pCt._sortDecorateEl=a.Tpl.forNode('<span class="'+this.sortIndicatorCS+'"></span>');e.parentNode!==this.bdEl&&this.bdEl.appendChild(e)}},setWidth:function(b,
h){var e=this.pCt,l=this.preWidth,g;g=!l?false:b-l;if(e){h&&this.lock(true);e.fireUp("colwidthchange",this.pCt.indexOf(this),this,b,g);if(b!==this.width){b=this.width;if(g!==false)g=b-l}e.fireUp("aftercolwidthchange",this.pCt.indexOf(this),this,b,g);h&&this.lock(false)}else this.width=b;this.preWidth=b;return this},locked:0,lock:function(b){b?this.locked++:this.locked--;if(this.locked<0){if(__debug)throw"lock operation failed: locked < 0";this.locked=0}}}});a.Tpl.def("CC.ui.Grid",'<div class="g-grid"></div>');
a.create("CC.ui.Grid",a.ui.Panel,function(f){return{layout:"row",plugins:[{name:"header",ctype:"gridhd"},{name:"content",ctype:"gridcontent"}],initComponent:function(){f.initComponent.call(this);this.plugins=this.addPluginsInner(this.getInitPlugins())},onRender:function(){var b=false,h=false;if(this.width!==false)b=a.delAttr(this,"width");if(this.height!==false)h=a.delAttr(this,"height");f.onRender.call(this);if(b!==false||h!==false)this.setSize(b,h)},extraRegisterEventMaps:function(b){for(var h=
a.getObjectLinkedValues(b,"gridEventHandlers",true),e=0,l=h.length;e<l;e++)this.attachPluginEventHandlers(b,h[e])},attachPluginEventHandlers:function(b,h){if(typeof h==="function")h=h(b);for(var e in h)this.on(e,h[e],b)},pluginComparator:function(b,h){var e=b.weight===void 0?b.ctype?a.ui.getCls(b.ctype).prototype.weight:0:b.weight,l=h.weight===void 0?h.ctype?a.ui.getCls(h.ctype).prototype.weight:0:h.weight;if(e===l)return 0;return e<l?-1:1},getInitPlugins:function(){var b=a.getObjectLinkedValues(this,
"plugins"),h;if(b.length===1)h=b[0];else if(b.length===0)return b;else{h=[];for(var e=0,l=b.length;e<l;e++)h=h.concat(b[e])}return h},addPluginsInner:function(b){b.sort(this.pluginComparator);var h,e,l,g,m,o=[];g=0;for(m=b.length;g<m;g++){e=b[g];h=e.name;h=e.cfgId||h;l={};a.extend(l,e);a.extend(l,a.delAttr(this,h));e=l.ctype;l.grid=this;__debug&&tester.ok(!!e,true);l=a.ui.instance(e,l);this.extraRegisterEventMaps(l);o[g]=l;this[h]=l}b=[];g=0;for(m=o.length;g<m;g++){e=o[g];h=e.name;this.fireOnce("beforeinit"+
h,e,this);if(e.initPlugin)if(l=e.initPlugin(this)){b.push(h);if(l===true)l=e;b.push(l);b.push(e)}this.fireOnce("afterinit"+h,e,this)}if(b.length){g=0;for(m=b.length;g<m;g+=3){this.fireOnce("beforeadd"+b[g],b[g+1],b[g+2]);this.layout.add(b[g+1]);this.fireOnce("afteradd"+b[g],b[g+1],b[g+2])}}return o},addPlugin:function(b){b=this.addPluginsInner([b]);this.plugins.push(b[0])},destoryPlugins:function(){var b=this;a.each(this.plugins,function(){this.destoryPlugin&&this.destoryPlugin(b)})},destory:function(){this.destoryPlugins();
f.destory.call(this)}}});a.ui.Grid.SCROLLBAR_WIDTH=17;a.ui.def("grid",a.ui.Grid);k.register("CC.ui.grid.Cell",function(){var f=a.$C({tagName:"TD",className:"grid-td"});f.appendChild(a.$C({tagName:"DIV",id:"_tle",className:"cell"}));return f});a.create("CC.ui.grid.Cell",a.Base,function(){return{brush:false,getTitleNode:function(){return this.view.firstChild},setTitle:function(){return this}}});k.register("CC.ui.grid.Row",function(){return a.$C({tagName:"TR",className:"grid-row"})});a.create("CC.ui.grid.Row",
a.ui.ContainerBase,{eventable:false,brush:false,itemCls:a.ui.grid.Cell,hoverCS:"row-over",blockMode:0,displayMode:3,createView:function(){if(this.pCt)this.pCt.createRowView(this);else{this.view=k.get("CC.ui.grid.Row");a.ui.ContainerBase.prototype.createView.call(this)}},mouseoverCallback:function(f){this.pCt.onRowOver(this,f)},mouseoutCallback:function(f){this.pCt.onRowOut(this,f)},getCell:function(f){var b=this.pCt.pCt.header;return this.$(b.indexOf(b.$(f)))},dataAt:function(f,b){if(b===void 0)return this.getCell(f).getValue();
this.getCell(f).setValue(b)},textAt:function(f,b,h){if(b===void 0)return this.$(f).getTitle();f=this.getCell(f);f.setTitle(b);h&&this.pCt.updateCell(f,b)},fire:fGo});a.ui.def("gridrow",a.ui.grid.Row)})();CC.Tpl.def("CC.ui.grid.Header",'<div class="g-grid-hd"><div class="hd-inner" id="_hd_inner"><table class="hd-tbl" id="_hd_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup><tbody><tr id="_ctx"></tr></tbody></table></div><div class="g-clear"></div></div>');
CC.create("CC.ui.grid.Header",CC.ui.ContainerBase,function(a){var k=CC.Base;return{itemCls:CC.ui.grid.Column,ct:"_ctx",peerCS:"peer",createView:function(){a.createView.call(this);this.grpEl=this.dom("_grp");this.hdTbl=this.$$("_hd_tbl")},onAdd:function(f){a.onAdd.apply(this,arguments);var b=CC.$C("COL");b.className=this.peerCS;this.grpEl.appendChild(b);f._colPeer=b},initPlugin:function(){return true},updateColWrapTblWidth:function(f,b){var h=this.hdTbl;if(h.width===false)h.setWidth(f);else b===false?
h.setWidth(h.width+f):h.setWidth(h.width+b)},gridEventHandlers:{colwidthchange:function(f,b,h){f=b.view;b.view=b._colPeer;k.prototype.setWidth.call(b,h);b.view=f},aftercolwidthchange:function(f,b,h,e){this.updateColWrapTblWidth(h,e)},contentscroll:function(f,b){if(parseInt(this.view.scrollLeft,10)!==b)this.view.scrollLeft=b}},fireUp:function(){var f=this.pCt;if(f)return f.fire.apply(f,arguments)},getColumnCount:function(){return this.children.length}}});
CC.ui.grid.Header.WEIGHT=CC.ui.grid.Header.prototype.weight=-100;CC.ui.def("gridhd",CC.ui.grid.Header);CC.Tpl.def("CC.ui.grid.Content",'<div class="g-grid-ct"><table class="ct-tbl" id="_ct_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup><tbody id="_ctx"></tbody></table></div>');
CC.create("CC.ui.grid.Content",CC.ui.Panel,function(a){var k=CC.Cache,f=CC.ui.ContainerBase.prototype;return{itemCls:CC.ui.grid.Row,ct:"_ctx",useContainerMonitor:true,syncWrapper:false,clickEvent:"click",selectionProvider:{selectedCS:"row-select"},lyInf:{h:"lead"},initComponent:function(){a.initComponent.call(this);this.ctTbl=this.$$("_ct_tbl")},initPlugin:function(){return true},setupColumnLever:function(){var b,h,e=[],l=this.grid.header.children.length,g=this.dom("_grp");for(h=0;h<l;h++){b=CC.$C("COL");
e[h]=b;g.appendChild(b)}this.levers=e;if(b=this.cacheWidths){delete this.cacheWidths;h=0;for(l=b.length;h<l;h++)b[h]!==void 0&&CC.fly(e[h]).setWidth(b[h]).unfly()}},onRender:function(){this.setup();a.onRender.call(this);this.batchUpdating=true;this.updateView();this.batchUpdating=false},setup:function(){this.setupColumnLever();this.setupEvent()},setupEvent:function(){this.domEvent("scroll",this.onScroll);this.on("resized",this.onResized)},bindClickInstaller:function(){this.itemAction(this.clickEvent,
this.onRowClick,false,null,this.dom("_ct_tbl"));this.itemAction("dblclick",this.onRowDblClick,false,null,this.dom("_ct_tbl"))},updateContentWrapTblWidth:function(b,h){var e=this.ctTbl;if(e.width===false)e.setWidth(b);else h===false?e.setWidth(e.width+b):e.setWidth(e.width+h)},updateLeversWidth:function(b,h){if(this.levers)CC.fly(this.levers[b]).setWidth(h).unfly();else{var e=this.cacheWidths;if(!e)e=this.cacheWidths=[];e[b]=h}},getScrollor:function(){return this},onAdd:function(b){this.altCS&&this.size()%
2&&b.addClass(this.altCS);a.onAdd.apply(this,arguments);this.rendered&&!this.batchUpdating&&this.updateRow(b)},onScroll:function(b){this.grid.fire("contentscroll",b,parseInt(this.view.scrollLeft,10)||0,this)},onRowClick:function(b,h){if(!this.clickDisabled&&!b.ignoreClick){var e=b.$(h.srcElement||h.target),l;if(e){if(e.disabled)return;if(!b.clickDisabled&&!e.ignoreClick)l=this.grid.fire("cellclick",e,h)}if(l!==false){this.fire("itemclick",b,h);this.grid.fire("rowclick",b,h)}}},dblclickDisabled:false,
onRowDblClick:function(b,h){if(!this.dblclickDisabled){var e=b.$(h.srcElement||h.target);if(!e||!e.disabled)this.grid.fire("rowdblclick",b,e,h)}},hoverEvent:false,onRowOver:function(b,h){this.hoverEvent===true&&this.grid.fire("rowover",b,h)},onRowOut:function(b,h){this.hoverEvent===true&&this.grid.fire("rowout",b,h)},instanceItem:function(b){if(b&&!b.cacheId){var h=this.grid.header.children;if(b.array){if(b.array.length!==h.length){e=b.array;i=0;for(len=h.length;i<len;i++)h[i].dataCol||e.insert(i,
{})}}else{var e=b.array=[];i=0;for(len=h.length;i<len;i++)e[e.length]={title:""}}}return a.instanceItem.apply(this,arguments)},onResized:function(b){if(b!==false)if(CC.ie)this.grid.fire("contentscroll",null,parseInt(this.view.scrollLeft,10)||0,this)},gridEventHandlers:{aftercolwidthchange:function(b,h,e,l){this.updateContentWrapTblWidth(e,l);this.updateLeversWidth(b,e,l)},sortcol:function(){this.sortByCol.apply(this,arguments)}},sortByCol:function(b,h,e,l){this.sort(function(g,m){var o=g.children[h].getValue(),
p=m.children[h].getValue();return e==="asc"?l(o,p):l(p,o)})},updateView:function(){var b=this.grid.header.children,h=b.length,e,l=this.children,g=l.length,m=[];for(e=0;e<h;e++)m[e]=b[e].cellBrush;for(e=0;e<g;e++)for(j=0;j<h;j++)this.updateCell(l[e].children[j],void 0,l[e].brush||m[j])},createRowView:function(b){b.view=k.get("CC.ui.grid.Row");f.createView.call(b)},updateRow:function(b){var h=this.grid.header.children,e=b.children,l=e.length;for(b=0;b<l;b++)this.updateCell(e[b],void 0,e[b].brush||h[b].cellBrush)},
updateCell:function(b,h,e){e||(e=b.brush||this.grid.header.$(b.pCt.indexOf(b)).cellBrush);if(h===void 0)h=b.title===void 0?b.value:b.title;b.getTitleNode().innerHTML=e.call(b,h)},cellAt:function(b,h){return this.children[b].children[h]},dataAt:function(b,h,e){if(e===void 0)return this.$(b).$(h).getValue();this.$(b).$(h).setValue(e)},textAt:function(b,h,e){if(e===void 0)return this.$(b).$(h).getTitle();this.$(b).$(h).setTitle(e)}}});CC.ui.grid.Column.prototype.dataCol=true;
CC.ui.grid.Content.WEIGHT=CC.ui.grid.Content.prototype.weight=-80;CC.ui.def("gridcontent",CC.ui.grid.Content);
CC.create("CC.ui.grid.ContentStoreProvider",CC.util.StoreProvider,{modifyCS:"g-form-mdy",filterChanged:true,isModified:function(a){var k=false;a.each(function(){if(this.modified){k=true;return false}});return k},decorateModified:function(a,k){var f=this;a.each(function(){this.modified&&f.decorateCellModified(this,k)})},decorateCellModified:function(a,k){if(a.modified!==k){a.checkClass(a.modifyCS||this.modifyCS,k);a.modified=k}},createNew:function(a,k){if(!a){a={array:[]};this.t.pCt.header.each(function(){a.array.push({title:""})})}return CC.util.StoreProvider.prototype.createNew.call(this,
a,k)},getItemQuery:function(a,k){var f=[],b,h=a.children,e;this.t.pCt.header.each(function(l,g){b=this.qid||this.id;e=h[g].getValue();if(b&&e!==undefined)f[f.length]=b+"="+encodeURIComponent(e)});if(b=f.length?f.join("&"):"")if(k)k+="&"+b;else k=b;return k}});CC.ui.grid.Content.prototype.storeProvider=CC.ui.grid.ContentStoreProvider;
CC.create("CC.ui.grid.ContentValidation",CC.util.ValidationProvider,{decorateValidation:fGo,decorateCellValidation:function(a,k,f){a.checkClass(this.errorCS,!k);k?a.setTip(""):a.setTip(f)},validator:function(a,k){var f=0,b=this.t.pCt.header.children,h=true,e=this.t.getStoreProvider().isNew(a),l=this;a.each(function(){if(e||this.modified)if(l.validateCell(this,b[f].validator)===false&&h===true)h=false;f++});h||k.push(h);return h},validateCell:function(a,k){var f=true;if(!k)k=this.t.pCt.header.$(a.pCt.indexOf(a)).validator;
if(k){var b=k.call(a,a.getValue());if(b!==true)f=false;this.decorateCellValidation(a,b===true,b)}return f},each:function(){var a=this.t.getStoreProvider();a.each.apply(a,arguments)}});CC.ui.grid.Content.prototype.validationProvider=CC.ui.grid.ContentValidation;CC.ui.Grid.prototype.autoFit=false;
CC.create("CC.ui.grid.plugins.ColumnWidthControler",null,function(){Math=window.Math;return{autoFitCS:"g-grid-fit",minColWidth:10,initialize:function(a){CC.extend(this,a)},initPlugin:function(a){a.autoFit&&a.addClass(this.autoFitCS)},gridEventHandlers:{resized:function(a){if(a!==false)if(this.hasInitColWidths){if(this.grid.autoFit){a=Math.max(0,a-CC.ui.Grid.SCROLLBAR_WIDTH);this.autoColWidths(a)}}else{a=Math.max(0,a-CC.ui.Grid.SCROLLBAR_WIDTH);this.initColWidths(a);this.hasInitColWidths=true}},aftercolwidthchange:function(a,
k){k._widthcontrolset||this.autoColWidths()}},initColWidths:function(a){var k=a,f=this.grid.header,b=f.getColumnCount(),h,e=this.minColWidth,l=this;f.each(function(){h=this.width;if(h!==false){if(h<1)h=Math.floor(a*h);b--;l.setColWidth0(this,Math.max(h,e));k-=this.width}});h=Math.max(Math.floor(k/b),e);f.each(function(){this.width===false&&l.setColWidth0(this,h)})},getAutoWidthLen:function(a){return Math.max(0,(a||this.grid.width)-CC.ui.Grid.SCROLLBAR_WIDTH)},setColWidth0:function(a,k){a._widthcontrolset=
true;a.setWidth(k,true);delete a._widthcontrolset},deliverDelta:function(a){__debug&&console.log("auto dw:",a);var k=this.grid.header.children,f=k.length,b,h,e=this.minColWidth,l,g,m=[],o=[];for(l=0;l<f;l++)if(!k[l].locked&&!k[l].resizeDisabled)m[m.length]=k[l];for(;a!==0&&m.length;){k=Math.floor(a/m.length);l=0;for(f=m.length;l<f;l++){g=m[l];h=g.width;b=Math.max(g.width+k,e);if(b!==h){this.setColWidth0(g,b);if(g.width!==h)a-=g.width-h;else o.push(g)}else o.push(g)}for(l=0;l<o.length;l++)m.remove(o[l]);
o=[]}__debug&&console.log("remain dw:",a)},autoColWidths:function(a){if(this.grid.autoFit){a||(a=this.getAutoWidthLen());var k=0;this.grid.header.each(function(){k+=this.width});var f=a-k;__debug&&console.log("grid width:",a,",current width:",k,",dw:",f);f!=0&&this.deliverDelta(f)}},getConstrain:function(a){if(a.resizeDisabled)return[a.width,a.width];var k=a.width-Math.max(this.minColWidth,a.minW,0);if(this.grid.autoFit){var f=this.grid.header;a=f.indexOf(a);f=f.children;minW=maxW=0;a=a+1;for(var b=
f.length;a<b;a++){maxW+=f[a].width;minW=Math.max(this.minColWidth,f[a].minW,0)}return[k,maxW-minW]}return[k,Math.MAX_VALUE]}}});CC.ui.def("colwidthctrl",CC.ui.grid.plugins.ColumnWidthControler);CC.ui.Grid.prototype.plugins.push({name:"colwidthctrl",ctype:"colwidthctrl"});
CC.create("CC.ui.grid.plugins.Editation",null,function(){var a=CC.Event,k=window.Math;CC.ui.grid.Column.prototype.editable=true;CC.ui.grid.Row.prototype.editable=true;CC.ui.grid.Cell.prototype.editable=true;CC.ui.grid.Cell.prototype.getValue=function(){return this.value===undefined?this.title:this.value};CC.ui.grid.Cell.prototype.setValue=function(f){this.value=f;return this};return{editable:true,trigMode:"cellclick",editorCS:"g-flot-editor",initialize:function(f){f&&CC.extend(this,f);var b=this;
switch(this.trigMode){case "cellclick":this.grid.on(this.trigMode,function(h){b.strictStartEdit(h)});break;case "rowdblclick":this.grid.on(this.trigMode,function(h,e){e&&b.strictStartEdit(e)})}f=null},isCellEditable:function(f,b){b||(b=this.grid.header.$(f.pCt.indexOf(f)));return this.editable&&b.editor&&b.editable&&f.pCt.editable&&!f.disabled&&f.editable},strictStartEdit:function(f){var b=f.pCt.indexOf(f),h=this.grid.header.$(b);this.isCellEditable(f,h)&&this.startEdit(f,b,h)},getEditor:function(f){var b=
f.editor;if(b&&(!b.cacheId||typeof b==="string")){if(typeof b==="string")b={ctype:b};CC.extendIf(b,{showTo:document.body,autoRender:true,shadow:true});if(b.shadow===true)b.shadow=CC.ui.instance({ctype:"shadow",inpactH:6,inpactY:-2,inpactX:-5,inpactW:9});b=f.editor=this.createEditor(b);b.addClass(this.editorCS)}return b},createEditor:function(f){f=CC.ui.instance(f);var b=this;f.on("blur",function(){this.bindingCell&&b.endEdit(this.bindingCell)});f.on("keydown",function(h){if(this.bindingCell){var e=
this.bindingCell;if(a.TAB===h.keyCode){b.endEdit(e);if(e=b.getNextEditableBlock(e.pCt,e.pCt.indexOf(e))){b.startEdit(e);a.stop(h);return false}}else if(a.ESC===h.keyCode){b.endEdit(e);a.stop(h);return false}}});return f},getNextEditableBlock:function(f,b){var h=f.children[b+1];if(h)this.isCellEditable(h)||(h=this.getNextEditableBlock(f,b+1));else if(f=f.pCt.children[f.pCt.indexOf(f)+1])h=this.getNextEditableBlock(f,-1);return h},startEdit:function(f,b,h){this.startEdit0.bind(this,f,b,h).timeout(0)},
startEdit0:function(f,b,h){f.scrollIntoView(this.grid.content.getScrollor(),true);if(b===undefined)b=f.pCt.indexOf(f);h||(h=this.grid.header.$(b));var e=this.getEditor(h);if(e){e.bindingCell=f;f.bindingEditor=e;this.setBoundsForEditor(f,e);e.setValue(f.getValue()).setTitle(f.getTitle()).show().focus();this.grid.fire("editstart",f,e,h,b,this)}},endEdit:function(f){var b=this.grid,h=f.pCt.indexOf(f),e=f.bindingEditor,l,g;if(b.fire("edit",f,e,h,this)!==false){e.hide();l=e.getValue();g=f.getValue();if(l!=
g){g=e.getText();b.content.updateCell(f,g);f.setValue(l);f.title=g;this.grid.content.getValidationProvider().validateCell(f);f.modified||b.content.getStoreProvider().decorateCellModified(f,true)}b.fire("editend",f,e,h,this);e.bindingCell=null;delete f.bindingEditor}},setBoundsForEditor:function(f,b){var h=f.getSize(),e=f.absoluteXY();b.setSize(h);if(b.height<h.height)e[1]+=k.floor((h.height-b.height)/2);b.setXY(e)}}});CC.ui.def("grideditor",CC.ui.grid.plugins.Editation);
CC.create("CC.ui.grid.plugins.Toolbar",null,{installWhen:"afteraddcontent",defCType:"smallbar",tb:false,initialize:function(a){CC.extend(this,a);this.gridEventHandlers={};this.gridEventHandlers[this.installWhen]=this.installUI},initPlugin:function(){var a=this.tb||{};if(!a.ctype)a.ctype=this.defCType;a.layout="tablize";this.tb=CC.ui.instance(a)},installUI:function(){this.grid.fire("beforeadd"+this.name,this.tb,this);this.grid.layout.add(this.tb);this.grid.fire("afteradd"+this.name,this.tb,this)}});
CC.ui.def("gridtb",CC.ui.grid.plugins.Toolbar);
CC.create("CC.ui.grid.plugins.Pagenation",null,{current:false,count:0,size:10,autoLoad:true,params:false,customQuery:false,disabled:false,initialize:function(a){CC.extend(this,a)},initPlugin:function(a){a.content.on("statuschange",this._onConnectorStatusChange,this);this.autoLoad&&a.on("rendered",this.go,this)},gridEventHandlers:{afteraddtb:function(a){this.installUI(a);this.tb=a}},installUI:function(a){var k=this;a.layout.fromArray([{id:"first",tip:"\u7b2c\u4e00\u9875",icon:"g-icon-navfirst",onclick:k.go.bind(k,
1)},{id:"pre",lyInf:{separator:true},tip:"\u4e0a\u4e00\u9875",icon:"g-icon-navpre",onclick:k.pre.bind(k)},{lyInf:{separator:true},id:"current",template:'<span class="lbl">\u7b2c <span><input class="g-ipt-text g-corner" style="text-align:center;" id="_i" size="3"/></span> \u9875</span>',ctype:"base",clickDisabled:true},{id:"next",tip:"\u4e0b\u4e00\u9875",icon:"g-icon-navnxt",onclick:k.next.bind(k)},{lyInf:{separator:true},id:"last",tip:"\u6700\u540e\u4e00\u9875",icon:"g-icon-navlast",onclick:function(){k.go(k.count)}},
{lyInf:{separator:true},id:"total",template:'<span class="lbl">\u5171<span id="_t">0</span>\u9875</span>',ctype:"base",clickDisabled:true},{id:"refresh",tip:"\u5237\u65b0\u5f53\u524d\u9875",icon:"g-icon-ref",onclick:function(){k.refresh()}}]);this.currentEl=a.$("current").dom("_i");this.totalEl=a.$("total").dom("_t");a.bindEnter(function(){k.currentEl.value.trim()&&k.go(parseInt(k.currentEl.value))},true,null,this.currentEl)},refresh:function(){this.go(this.current,true)},setSize:function(a){this.size=
a;return this},disable:function(a){this.disabled=a;this.updateUIStatus();return this},go:function(a,k){if(!this.disabled){if(!a||typeof a==="number")a={current:a||1};var f=a.current;if((this.current!==f||k)&&f>0)this.grid.fire("page:beforechange",a,this)!==false&&this.onPageChange(a)}return this},isResponseOk:function(){return true},onPageChange:function(a){if(this.url){a||(a={});a=this.createQuery(a);this.grid.content.getConnectionProvider().connect(CC.templ(this,this.url,2),{success:this._onSuccess,
params:a})}},_onConnectorStatusChange:function(a){if(a==="open")this.tb.$("refresh").disable(true);else a==="final"&&this.tb.$("refresh").disable(false)},createQuery:function(a){CC.extendIf(a,{size:this.size,count:this.count,current:this.current});this.params&&CC.extend(a,params);this.customQuery&&this.customQuery(a);return a},_onSuccess:function(a){var k=this.t.pCt.pagenation;if(k.isResponseOk(a)){json=a.getJson();k.size=json.size;k.count=json.count;k.current=json.current||a.params.current;if(k.current>
k.count)k.current=k.count;this.t.destoryChildren();this.defaultDataProcessor("json",json.data);k.grid.fire("page:afterchange",k,json,a);k.updateUIStatus()}},updateUIStatus:function(){var a=this.tb,k=this.current,f=this.count,b=this.disabled||f===1||k<=1;a.$("first").disable(b);a.$("pre").disable(b);b=this.disabled||k===f||f===1;a.$("next").disable(b);a.$("last").disable(b);this.currentEl.value=k||"";this.totalEl.innerHTML=f;a.$("refresh").disable(this.disabled||f==0)},next:function(){this.current!==
this.count&&this.go(this.current+1)},pre:function(){this.current-1>=1&&this.go(this.current-1)}});CC.ui.def("gridpage",CC.ui.grid.plugins.Pagenation);
CC.create("CC.ui.grid.plugins.ColumnResizer",null,function(){var a=CC.util.dd.Mgr,k=a.resizeHelper,f=CC.Event,b=window.Math,h,e=[0,0,0,0],l=0;CC.ui.grid.Column.prototype.resizeDisabled=false;return{resizeDisabled:false,monitorLen:10,initialize:function(g){CC.extend(this,g)},install:function(g){g.itemAction("mousemove",this.onColMouseMove,false,this).itemAction("mousedown",this.onColMouseDown,false,this)},dragstart:function(){this.grid.fire("colresizestart",h,h.pCt.indexOf(h));var g=this.getIndicator(),
m=this.leftIndicator,o=h.absoluteXY(),p;l=o[0]+h.view.offsetWidth-b.floor(g.getWidth(true)/2);p=o[1]+h.view.offsetHeight;g.setXY(l,p).appendTo(document.body);m.setXY(o[0]-b.floor(g.getWidth(true)/2),p).appendTo(document.body)},drag:function(){this.rightIndicator.view.style.left=l+a.getDXY()[0]+"px"},dragend:function(){var g=a.getDXY()[0];g&&h.setWidth(h.getWidth(true)+g,true);this.leftIndicator.del();this.rightIndicator.del();this.grid.fire("colresizeend",this,h.pCt.indexOf(h))},afterdrag:function(){h=
null;k.applyMasker(false,"")},onColMouseMove:function(g,m){var o=g.view.style;if(g.resizeDisabled||a.isDragging()){if(o.cursor!="")o.cursor=""}else if(g.view.offsetWidth-f.pageX(m)+g.absoluteXY()[0]<this.monitorLen)o.cursor="col-resize";else if(o.cursor!="")o.cursor=""},onColMouseDown:function(g,m){if(g.view.style.cursor==="col-resize"&&!g.resizeDisabled&&!a.isDragging()){h=g;k.applyMasker(true,"col-resize");a.setMonitor(this).setBounds(this.calColWidthConstrain(g)).startDrag(g,m);f.preventDefault(m)}},
calColWidthConstrain:function(g){if(this.grid.colwidthctrl){dx=this.grid.colwidthctrl.getConstrain(g);e[1]=-1*dx[0];e[0]=dx[1]}else{e[1]=b.max(g.minW,0);e[0]=b.MAX_VALUE}return e},gridEventHandlers:{afteraddheader:function(g){this.install(g)}},indicatorCS:"g-grid-cwidctor",getIndicator:function(){var g=this.rightIndicator;if(!g){var m={view:"div",ctype:"base",cs:this.indicatorCS};g=this.rightIndicator=CC.ui.instance(m);this.leftIndicator=CC.ui.instance(m);this.grid.header.follow(g).follow(this.leftIndicator)}return g}}});
CC.ui.def("colresizer",CC.ui.grid.plugins.ColumnResizer);CC.ui.Grid.prototype.plugins.push({name:"colresizer",ctype:"colresizer"});
CC.create("CC.ui.grid.plugins.RowChecker",null,{name:"rowchecker",cell:{title:"&nbsp;",maxW:20,minW:20,resizeDisabled:true,id:"rowCheckerCol",dataCol:false,checkedCS:"g-check-checked",cellBrush:function(){return'<span class="g-checkbox g-form-el"><img class="chkbk" src="'+CC.Tpl.BLANK_IMG+'"></span>'},brush:function(){return'<span class="g-checkbox g-form-el" title="\u5168\u9009/\u53cd\u9009"><img class="chkbk" src="'+CC.Tpl.BLANK_IMG+'"></span>'},onRender:function(){this.superclass.onRender.call(this);
this.domEvent("click",function(){var a=this.pCt.pCt.content.getSelectionProvider(),k=this.selected=!this.selected;this.checkClass(this.checkedCS,k);a.mode===0&&a.selectAll(k)})}},initialize:function(a){var k=CC.extend({},this.cell);if(a){a.cell&&CC.extend(k,CC.delAttr("cell",a));CC.extend(this,a)}this.grid.header.array&&this.grid.header.array.insert(0,k)},gridEventHandlers:{afteraddcontent:function(a){a.on("selectchange",function(k,f,b){var h=k.getCell("rowCheckerCol"),e=a.grid.header.$("rowCheckerCol");
h.checkClass(e.checkedCS,b.isSelected(k));f&&f.getCell("rowCheckerCol").checkClass(e.checkedCS,b.isSelected(f))})}}});CC.ui.grid.plugins.RowChecker.WEIGHT=CC.ui.grid.plugins.RowChecker.prototype.weight=CC.ui.grid.Header.WEIGHT-2;CC.ui.def("gridrowchecker",CC.ui.grid.plugins.RowChecker);CC.ui.grid.Column.prototype.sortable=undefined;CC.ui.grid.Column.prototype.order=undefined;CC.ui.grid.Column.prototype.dt=undefined;
CC.create("CC.ui.grid.plugins.Sorter",null,{trigEvent:"click",order:"desc",dt:"string",initialize:function(a){CC.extend(this,a)},gridEventHandlers:{afteraddheader:function(a){a.itemAction(this.trigEvent,this.onColClick,false,this)}},onColClick:function(a){if(a.sortable||a.sortable===undefined&&a.dataCol)this.sort(a,a.order===undefined?this.order:a.order==="desc"?"asc":"desc")},sort:function(a,k){var f=a.pCt.indexOf(a),b=a.dt===undefined?this.dt:a.dt;b=a.comparator?a.comparator:CC.util.TypeConverter.getComparator(b);
if(this.grid.fire("sortcol",a,f,k,b)!==false){if(b=this.preSorted)b=CC.Base.byCid(b);if(b&&b!==a)b.order=undefined;this.preSorted=a.cacheId;a.order=k;a.sortDecorator(k,b);this.grid.fire("sortcolend",a,f,k,b)}}});CC.ui.def("gridsorter",CC.ui.grid.plugins.Sorter);CC.ui.Grid.prototype.plugins.push({name:"sorter",ctype:"gridsorter"});CC.ui.grid.Content.prototype.expandableRowContent=false;CC.ui.grid.Cell.prototype._isExpandTrig=false;
CC.create("CC.ui.grid.plugins.ExpandableRow",null,{initialize:function(a){var k=CC.extend({},this.cell);if(a){a.cell&&CC.extend(k,CC.delAttr("cell",a));CC.extend(this,a)}this.grid.header.array&&this.grid.header.array.insert(0,k);if(a=this.grid.content){a.template='<div class="g-grid-ct"><table class="ct-tbl" id="_ct_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup></table></div>';a.ct="_ct_tbl";a.createRowView=this._createRowViewProxy}},cell:{dataCol:false,title:"&nbsp;",
maxW:20,minW:20,resizeDisabled:true,sortable:false,cellBrush:function(){this.pCt._rowExpandind=false;this._isExpandTrig=true;this.addClass("exptrigcell");return'<a href="javascript:void(0)" class="trig"></a>'}},_createRowViewProxy:function(a){var k=this.grid.header.children.length,f=this.expandableRowContent;if(f)f=CC.templ(a,f);k=CC.Tpl.forNode(['<table><tbody><tr></tr><tr><td class="g-gridrow-expandtd0"></td>','<td class="g-gridrow-expandtd1" colspan="'+(k-1)+'"><div id="_expand_area" class="g-gridrow-expandarea hid">'+
(f?f:"")+"</div></td>","</tr></tbody></table>"].join(""),a);a.view=k.removeChild(k.firstChild);a.ct=a.view.firstChild;a.expandRowContentEl=a.dom("_expand_area")},gridEventHandlers:{cellclick:function(a,k){if(a._isExpandTrig){var f=a.pCt;this.expandRow(f,!f._rowExpandind);CC.Event.stop(k)}}},getRowContentEl:function(a){return a.dom("_expand_area")},expandRow:function(a,k){if(a._rowExpandind!==k)if(this.grid.fire("expandablerow:beforeexpand",a,k)!==false){a._rowExpandind=k;CC.fly(a.expandRowContentEl).display(k).unfly();
a.checkClass("g-gridrow-expand",k);this.grid.fire("expandablerow:afterexpand",a,k)}}});CC.ui.grid.plugins.ExpandableRow.WEIGHT=CC.ui.grid.plugins.ExpandableRow.prototype.weight=CC.ui.grid.Header.WEIGHT-1;CC.ui.def("gridexpandablerow",CC.ui.grid.plugins.ExpandableRow);CC.ui.ContainerBase.prototype.isForm=false;
(function(){var a,k=window.CC,f=k.Base,b=k.Tpl;k.create("CC.ui.form.FormElement",f,{name:false,value:undefined,element:false,elementNode:"_el",eventable:true,validator:false,validateOnblur:true,elementCS:"g-form-el",initComponent:function(){var l=this.view;if(!l)this.view=b.$(this.template||this.type);l=this.element;if(!l){l=this.dom(this.elementNode);if(!l)l=this.view;this.element=l}this.focusNode=l;this.addClass(this.elementCS);f.prototype.initComponent.call(this);this.name&&this.setName(this.name);
if(this.value){l=k.delAttr(this,"value");this.setValue(l)}this.focusCS&&this.bindFocusCS()},bindFocusCS:function(l){if(l)this.focusCS=l;this.on("focus",this._switchFocusCS);this.on("blur",this._switchFocusCS)},_switchFocusCS:function(){if(this.focused){this.addClassIf(this.focusCS);this.focusCallback()}else this.delClass(this.focusCS)},focusCallback:fGo,onFocusTrigger:function(){if(!this.focused){this.focused=true;this.onfocus&&this.onfocus();this.fire("focus")}},onBlurTrigger:function(){if(this.focused){this.focused=
false;this.validateOnblur&&this.validator&&this.checkValid();this.onblur&&this.onblur();this.fire("blur")}},onKeydownTrigger:function(l){this.fire("keydown",l)},checkValid:function(){var l=this.validator?this.validator(this.getValue()):true;this.decorateValid(l);return l},decorateValid:function(l){var g=this.errorCS;g&&this.checkClass(g,l!==true)},setValue:function(l){this.value=this.element.value=l;return this},getValue:function(){return this.element.value},getText:function(){return this.getValue()},
setName:function(l){this.name=this.element.name=l;return this},getForm:function(){for(var l=this.pCt;l;){if(l.isForm)return l;l=l.pCt}return null},active:fGo,deactive:fGo,mouseupCallback:function(l){this.onclick&&this.onclick(l,this.element)}});var h=k.ui.form.FormElement;a=h.prototype;var e=k.ui.form;b.def("Text",'<input type="text" class="g-ipt-text g-corner" />').def("Textarea",'<textarea class="g-textarea g-corner" />').def("Checkbox",'<span tabindex="0" class="g-checkbox"><input type="hidden" id="_el" /><img src="'+
b.BLANK_IMG+'" class="chkbk" /><label id="_tle"></label></span>').def("Select",'<select class="g-corner"/>').def("CC.ui.form.Label",'<span><label id="_tle" class="cap"></label></span>');k.create("CC.ui.form.Text",h,{template:"Text",initComponent:function(){a.initComponent.call(this);this.domEvent("focus",this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger)},maxH:20,focusCS:"g-ipt-text-hover",focusCallback:function(l){a.focusCallback.call(this,l);var g=
this;(function(){g.view.select()}).timeout(20)}});k.ui.def("text",e.Text);k.create("CC.ui.form.Textarea",h,e.Text.constructors,{template:"Textarea",focusCallback:h.prototype.focusCallback,maxH:f.prototype.maxH});k.ui.def("textarea",e.Textarea);k.create("CC.ui.form.Checkbox",h,{template:"Checkbox",hoverCS:"g-check-over",clickCS:"g-check-click",checkedCS:"g-check-checked",initComponent:function(){a.initComponent.call(this);if(this.checked){delete this.checked;this.setChecked(true)}this.domEvent("focus",
this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger)},mouseupCallback:function(l){this.setChecked(!this.checked);a.mouseupCallback.call(this,l)},setChecked:function(l){if(this.checked!==l){this.checked=l;this.element.checked=l;this.checkClass(this.checkedCS,l);this.oncheck&&this.oncheck(l)}return this}});k.ui.def("checkbox",e.Checkbox);k.Tpl.def("CC.ui.form.RadioGroup",'<input type="hidden" />');k.create("CC.ui.form.RadioGroup",h,{getChecked:function(){return this.currentRadio&&
f.byCid(this.currentRadio)},setChecked:function(l,g){if(g){var m=this.getChecked();if(!m||m!==l){m&&m.setChecked(false);this.currentRadio=l.cacheId;m=l.getValue();m!==undefined&&this.setValue(m)}}else{this.currentRadio=null;this.setValue("")}}});k.ui.def("radiogrp",k.ui.form.RadioGroup);k.create("CC.ui.form.Radio",h,e.Checkbox.constructors,{innerCS:"g-radio",template:"Checkbox",hoverCS:"g-radio-over",clickCS:"g-radio-click",checkedCS:"g-radio-checked",elementNode:false,mouseupCallback:function(l){this.checked||
this.setChecked(true);a.mouseupCallback.call(this,l)},getGroup:function(){var l=this.getForm();if(l){var g=l._RADIOGROUPS;if(!g)g=l._RADIOGROUPS={};var m=g[this.name];if(m)return f.byCid(m);else{m=k.ui.instance("radiogrp",{pCt:l,showTo:l.ct,name:this.name});l.follow(m);g[this.name]=m.cacheId;return m}}},setChecked:function(l){var g=this.checked;e.Checkbox.prototype.setChecked.apply(this,arguments);if(g!==l&&l&&this.name)(g=this.getGroup())&&g.setChecked(this,true);return this}});k.ui.def("radio",
e.Radio);k.create("CC.ui.form.Select",h,{template:"Select",initComponent:function(){a.initComponent.call(this);this.domEvent("focus",this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger).domEvent("change",this.onChangeTrigger);if(this.array){for(var l=0,g=this.array,m=g.length;l<m;l++)this.add(g[l]);delete this.array}if(this.selectedIndex){this.element.selectedIndex=this.selectedIndex;delete this.selectedIndex}},onChangeTrigger:function(){this.onchange&&
this.onchange()},getText:function(){var l=this.element.options[this.element.selectedIndex];return l?l.text:""},add:function(l){var g=document.createElement("OPTION");this.element.appendChild(g);k.extend(g,l)}});k.ui.def("select",e.Select);k.create("CC.ui.form.Label",k.Base,{labelNode:"_tle"});k.ui.def("label",k.ui.form.Label)})();
CC.Tpl.def("CC.ui.form.Line",'<li class="g-form-ln"><label class="desc" id="_lbl"><span id="_tle"></span><span class="req" id="_req">*</span></label><div id="_ctx" class="field-ct"></div></li>').def("CC.ui.form.Layer",'<ul class="g-formfields"></ul>').def("CC.ui.form.FormLayer",'<form><ul id="_ctx" class="g-formfields"></ul></form>').def("CC.ui.form.FieldsetUL",'<fieldset class="g-fieldset g-corner"><legend id="_tle"></legend><div id="_ctx" class="fieldset-ct"></div><div class="g-clear"></div></fieldset>');
CC.create("CC.ui.form.Line",CC.ui.ContainerBase,function(a){return{labelNode:"_lbl",hlabel:false,hlabelCS:"g-form-hln",reqNode:"_req",labelFor:0,ct:"_ctx",title:false,initComponent:function(){a.initComponent.call(this);this.hlabel&&this.addClass(this.hlabelCS);if(this.title===false&&this.labelNode!==false){var k=this.dom(this.labelNode);k.parentNode.removeChild(k)}this.required&&CC.fly(this.reqNode).show().unfly()},onAdd:function(k){a.onAdd.apply(this,arguments);if(this.labelFor!==false&&this.$(this.labelFor)===
k)if(k.element){var f=this.dom(this.labelNode);if(f)f.htmlFor=k.element.id}}}});CC.ui.def("fieldline",CC.ui.form.Line);CC.create("CC.ui.form.Layer",CC.ui.ContainerBase,{itemCls:CC.ui.form.Line,ct:"_ctx"});CC.ui.def("fieldlayer",CC.ui.form.Layer);CC.create("CC.ui.form.FormLayer",CC.ui.ContainerBase,{itemCls:CC.ui.form.Line,ct:"_ctx",getFormEl:function(){return this.view},byName:function(a,k){return this.byId(a,"name",k)}});CC.ui.def("form",CC.ui.form.FormLayer);
CC.ui.form.Fieldset=function(a){return new CC.ui.form.Layer(CC.extendIf(a,{template:"CC.ui.form.FieldsetUL",itemCls:CC.ui.form.Layer,ct:"_ctx"}))};CC.ui.form.Line.prototype.itemCls=CC.ui.form.Layer;CC.ui.def("fieldset",CC.ui.form.Fieldset);CC.Tpl.def("CC.ui.form.Combox",'<div class="g-panel g-combo" tabindex="1" hidefocus="on"><div class="g-panel-wrap g-combo-wrap" id="_wrap"><input type="hidden" id="_el" /><div class="unedit-txt" id="_uetxt"></div><span class="downIco" id="_trigger"></span></div></div>');
CC.create("CC.ui.form.Combox",CC.ui.form.FormElement,function(a){function k(){return true}var f=CC.Event;return{hoverCS:"g-combo-on",uneditCS:"g-combo-unedit",downCS:"g-combo-dwn",selectorCS:"g-combo-list",_leaveFocus:true,maxH:21,filterContent:true,selector:false,initComponent:function(){var b=CC.delAttr(this,"array");this.editor=new CC.ui.form.Text({name:this.name});a.initComponent.call(this);this.uneditNode=this.dom("_uetxt");this.dom("_wrap").insertBefore(this.editor.view,null);var h=this.selector;
h=h?CC.ui.instance(h):this.createDefSelector();var e=this.getSelectioner(h);b&&e.fromArray(b);this.attach(h,e);this._bindKey();if(this.uneditable){delete this.uneditable;this.setEditable(false)}else this.setEditable(true);this.selected&&e.getSelectionProvider().select(this.selected);delete this.selected;this.domEvent("focus",this.onFocusTrigger);this.domEvent("blur",this.onBodyBlurTrigger);this.domEvent("focus",this.onFocusTrigger,false,null,this.editor.element);this.domEvent("blur",this.onBodyBlurTrigger,
false,null,this.editor.element);this.domEvent("keydown",this.onKeydownTrigger);this.wheelEvent(this.onMouseWheel,true);this.on("blur",this.checkSelected)},onHide:function(){this.selector.hidden||this.selector.hide();a.onHide.apply(this,arguments)},createDefSelector:function(){return CC.ui.instance({ctype:"folder",showTo:document.body,shadow:true,getScrollor:function(){if(!this.scrollor)this.scrollor=this.dom("_scrollor");return this.scrollor}})},getSelectioner:function(b){return this.selectioner||
b},onMouseWheel:function(b){b=CC.Event.getWheel(b);if(b>0)this.selectioner.selectionProvider.pre();else b<0&&this.selectioner.selectionProvider.next()},onBodyBlurTrigger:function(){this.selector.hidden&&this._leaveFocus&&this.onBlurTrigger()},onBlurTrigger:function(){this.leaveFocusOn();a.onBlurTrigger.call(this)},disable:function(b){a.disable.call(this,b);this.editor.disable(b)},setScrollorHeight:function(b){this.selector.fly("_scrollor").setHeight(b).unfly()},setEditable:function(b){if(this.uneditable!==
undefined&&this.uneditable==b)return this;if(this.uneditable&&b)this.delClass(this.uneditCS).unEvent("click",this.onUneditableClick);else b?this.domEvent("click",this.onUneditableClick,true,null,"_trigger").domEvent("mousedown",this.leaveFocusOff,false,null,"_trigger"):this.addClass(this.uneditCS).domEvent("click",this.onUneditableClick).unEvent("click",this.onUneditableClick,"_trigger").unEvent("mousedown",this.leaveFocusOff,"_trigger");this.uneditable=!b;this.focusNode=!b?this.view:this.editor.element;
return this},onKeydownTrigger:function(b){if(this._keyHandler(b)===false){f.stop(b);return false}a.onKeydownTrigger.apply(this,arguments)},onUneditableClick:function(){var b=!this.selector.hidden;this.leaveFocusOff();!b&&this.filterContent&&this.selectioner.filter(k);this.showBox(!b)},leaveFocusOff:function(){if(this._leaveFocus!==false)this._leaveFocus=false},leaveFocusOn:function(){if(this._leaveFocus!==true)this._leaveFocus=true},attach:function(b,h){this.selector=b;this.selectioner=h;this.follow(b);
b.display(false);b.shadow&&b.shadow.setZ(999);b.addClass(this.selectorCS);h.on("selected",this.onSelected,this);h.on("itemclick",this.onclickEvent,this);this._savSelKeyHdr=b.defKeyNav;var e=this;h.getSelectionProvider().defKeyNav=function(l){e._keyHandler(l,true)}},onBoxContexted:function(b){if(b)if(this.ancestorOf(f.element(b)))return false;this.leaveFocusOn();this.showBox(false);this.leaveFocusOff();this.onBlurTrigger()},onclickEvent:function(){this.showBox(false)},_keyHandler:function(b,h){var e=
b.keyCode;if(e==27||e==13)if(!this.selector.hidden){this.showBox(false);f.stop(b);return false}if(!h)return this.selectioner.selectionProvider.navigateKey(b)},_filtHandler:function(b){b=b.keyCode;var h=this.selectioner,e=h.selectionProvider;if(!(b===e.UP||b===e.DOWN||this.noFilt||b===27||b===13||b===9)){var l=this.editor.element.value;l==""&&e.select(null);e.selected&&b!=f.LEFT&&b!=f.RIGHT&&e.select(null);if(this.filterContent&&l!=this.preValue){h.filter(this.matcher,this);this.preValue=l}this.leaveFocusOff();
this.showBox(true)}},showBox:function(b){var h=this.selector,e=!h.hidden;if(e!=b)if(b){h.display(true);this.preferPosition();h.shadow&&h.shadow.reanchor();this.uneditable?this.focus(true):this.editor.focus(true);if(!e){this.checkSelected();this.addClass(this.downCS);h.bindContext(this.onBoxContexted,false,this).display(true)}}else{h.display(false);this._leaveFocus||(this.uneditable?this.focus(true):this.editor.focus(true));this.delClass(this.downCS)}},active:function(){this.showBox(true)},deactive:function(){this.showBox(false)},
checkSelected:function(){var b=this.selectioner,h=b.getSelectionProvider(),e=this.getValue();if(e===""&&h.selected)h.select(null);else if(!(h.selected&&this.getItemValue(h.selected)==e)){h.select(null);var l=this;b.each(function(g){if(!g.hidden&&!g.disabled&&l.getItemValue(g)===e){h.select(g);return false}})}},preferPosition:function(){var b=this.selector;this.noAutoWidth||b.setWidth(this.preferWidth());b.anchorPos(this,"lb","hr",null,true,true)},preferWidth:function(){return this.getWidth()},_bindKey:function(){this.domEvent("keydown",
this._keyHandler,false,null,this.editor.view);this.domEvent("keyup",this._filtHandler,false,null,this.editor.view)},onSelected:function(b){this.setValueFromItem(b,true);!this.uneditable&&this.focused&&this.editor.focus(true)},getItemValue:function(b){if(b.getValue)return b.getValue();if(b.value!==undefined)return b.value;return b.getTitle()},getItemTitle:function(b){return b.title!==undefined?b.title:b.value},setValue:function(b,h){a.setValue.call(this,b);this.selector&&!h&&this.checkSelected();return this},
getText:function(){if(this.uneditable)return this.title||"";return this.editor.getValue()},setTitle:function(b){if(this.uneditable)this.uneditNode.innerHTML=b;else this.editor.setValue(b);this.title=b;return this},setValueFromItem:function(b,h){var e=this.getItemValue(b),l=this.getItemTitle(b);this.setValue(e,h);this.setTitle(l);return this},getValue:function(){return a.getValue.call(this)},matcher:function(b){var h=this.getItemTitle(b),e=this.editor.element.value;if(e==""){b.setTitle(h);return true}if(h.indexOf(e)>=
0){if(b=b.titleNode||b.dom("_tle"))b.innerHTML=h.replace(e,'<span class="g-match">'+e+"</span>");return true}b.setTitle(h);return false},select:function(b){this.selectioner.selectionProvider.select(b)}}});CC.ui.def("combo",CC.ui.form.Combox);CC.Tpl.def("CC.ui.form.Progressbar",'<table class="g-progressbar" cellspacing="0" cellpadding="0" border="0"><tr><td class="g-progress-l"><i>&nbsp;</i><input type="hidden" id="_el" /></td><td class="g-progress-c"><img id="_img" src="http://www.bgscript.com/s.gif" alt=""/></td><td class="g-progress-r"><i>&nbsp;</i></td></tr></table>');
CC.create("CC.ui.form.Progressbar",CC.ui.form.FormElement,function(a){if(!CC.ui.form.Progressbar.img)CC.ui.form.Progressbar.img="http://www.bgscript.com/images/progressbar.gif";return{range:100,value:0,initComponent:function(){this.createView();if(CC.ui.form.Progressbar.img){this.img=this.dom("_img");this.img.src=CC.ui.form.Progressbar.img}a.initComponent.call(this)},setValue:function(k){if(k>=100){CC.fly(this.img).fastStyleSet("width","100%").unfly();this.onstop();this.fire("progressstop",this);
return a.setValue.call(this,100)}CC.fly(this.img).fastStyleSet("width",k+"%").unfly();return a.setValue.call(this,k)},onstop:fGo}});CC.ui.def("progressbar",CC.ui.form.Progressbar);
(function(){var a=CC.ui.form.FormElement.prototype,k=CC.Event;CC.Tpl.def("CC.ui.form.DatepickerField",'<div class="g-datepicker-field"><div class="field-wrap"><input type="text" class="g-corner" id="_el" /><a title="\u70b9\u51fb\u9009\u62e9\u65e5\u671f" tabindex="-1" class="trigger" id="_trigger" href="javascript:fGo();"></a></div></div>');CC.create("CC.ui.form.DatepickerField",CC.ui.form.FormElement,{focusCS:"g-datepicker-field-focus",triggerHoverCS:"triggerOn",contextCS:"g-datepicker-field-ctx",
_leaveFocus:true,maxH:20,applyTimeout:200,initComponent:function(){a.initComponent.call(this);this.bindHoverStyle(this.triggerHoverCS,true,null,null,null,"_trigger","_trigger").domEvent("click",this.onTriggerClick,false,null,"_trigger").domEvent("mousedown",this.leaveFocusOff,false,null,"_trigger").domEvent("mousedown",this.onFocusTriggerDelay).domEvent("focus",this.onFocusTrigger,false,null,this.element).domEvent("blur",this.onTrackBlur,false,null,this.element).domEvent("keydown",this.onKeydownTrigger,
false,null,this.element)},active:function(){this.showDatepicker(true)},deactive:function(){this.showDatepicker(false)},onHide:function(){this.getDatepicker().hidden||this.getDatepicker().hide();CC.ui.form.FormElement.prototype.onHide.apply(this,arguments)},onTrackBlur:function(){!this._leaveFocus&&this.datepicker&&this.datepicker.hidden?this.leaveFocusOn():this.onBlurTrigger()},onFocusTriggerDelay:function(){var f=this;(function(){f.leaveFocusOn();f.onFocusTrigger()}).timeout(0)},onBlurTrigger:function(){this._leaveFocus&&
a.onBlurTrigger.call(this)},leaveFocusOff:function(){if(this._leaveFocus!==false)this._leaveFocus=false},leaveFocusOn:function(){if(this._leaveFocus!==true)this._leaveFocus=true},onTriggerClick:function(){this.showDatepicker(!!this.getDatepicker().hidden)},showDatepicker:function(f){var b=this.getDatepicker();this.datepicker.display(f);if(f){this.getValue()&&b.setValue(this.getValue(),true);b.anchorPos(this,"rb","hl",null,true,true);b.bindContext(this.onDatepickerContexted,false,this,null,this,this.contextCS).focus(0)}else this.focus()},
onDatepickerContexted:function(f){if(f)this.ancestorOf(k.element(f))||this.onBlurTrigger()},getDatepicker:function(){var f=this.datepicker;if(!f){f=this.datepicker=new CC.ui.Datepicker({showTo:document.body,autoRender:true,hidden:true});this.follow(f);f.on("select",this._onDateSelect).on("keydown",this.onKeydownTrigger,this)}return f},onKeydownTrigger:function(f){if(k.isEscKey(f)||k.isEnterKey(f)){if(!this.getDatepicker().hidden){k.stop(f);this.showDatepicker(false);return false}if(k.isEnterKey(f)){this.getDatepicker().toToday();
return false}}a.onKeydownTrigger.apply(this,arguments)},_onDateSelect:function(f){var b=this.pCt;(function(){b.showDatepicker(false);b.setValue(f)}).timeout(b.applyTimeout)},setSize:function(f,b){a.setSize.apply(this,arguments);if(f.width)b=f.width;b!==false&&this.fly("_trigger").unfly();return this},getText:function(){return this.getValue()}});CC.ui.def("datepicker",CC.ui.form.DatepickerField)})();
CC.create("CC.ui.form.ValidationProvider",CC.util.ValidationProvider,function(){return{validator:function(a,k){var f=a.validator?a.validator(a.getValue()):this.htmlValidator.call(a);f!==true&&k.push(f);return f},htmlValidator:function(){return true},each:function(a){this.t.eachH(function(){if(this.element&&a.apply(this,arguments)===false)return false});this.eachHtml(a)},eachHtml:fGo}});CC.ui.def("formvalidation",CC.ui.form.ValidationProvider);CC.ui.form.FormLayer.prototype.validationProvider=CC.ui.form.ValidationProvider;
CC.create("CC.ui.form.StoreProvider",CC.util.StoreProvider,function(){return{queryString:function(){return CC.formQuery(this.t.getFormEl())},save:function(){this.beforeSave()!==false&&this.t.fire("store:beforesave",this)!==false&&this.onSave()},getSaveUrl:function(){return this.mappingUrl(this.saveUrl)},beforeSave:function(){return this.t.getValidationProvider().validateAll()===true}}});CC.ui.form.FormLayer.prototype.storeProvider=CC.ui.form.StoreProvider;