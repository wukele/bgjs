function fGo(){}if(window.__debug===undefined)var __debug=false;
(function(){function a(u,k,n){for(var t=0,w=n.length;t<w;t++){var x=n[t];if(C.isArray(x))arguments.callee(u,k,x);else typeof x==="function"?C.extend(u,x(k)):C.extend(u,x)}}var b=window.document,e=navigator.userAgent.toLowerCase(),g=0,f=window.String,h,l=b.compatMode==="CSS1Compat",d=e.indexOf("opera")>-1,m=/webkit|khtml/.test(e);e.indexOf("chrome");var o=!d&&e.indexOf("msie")>-1,q=!d&&e.indexOf("msie 7")>-1,p=!d&&e.indexOf("msie 6")>-1;e=!m&&e.indexOf("gecko")>-1;var v=o&&!l||!o&&!l,A=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,
z=Array.prototype.slice;if(o&&!q)try{b.execCommand("BackgroundImageCache",false,true)}catch(D){}var C={version:"2010.5",$:function(u,k){var n=typeof u==="string"||u instanceof f;if(n&&!k)return b.getElementById(u);if(!n)return u;if(k.id==u)return k;k=k.firstChild;for(n=[];k;){if(k.id==u)return k;k.firstChild&&n.push(k);k=k.nextSibling;if(!k)if(k=n.pop())k=k.firstChild}return null},each:function(u,k){if(u.length===h)for(var n in u){if(k.call(u[n],n,u[n])===false)break}else{n=0;for(var t=u.length,w=
u[0];n<t&&k.call(w,n,w)!==false;w=u[++n]);}return u},eachH:function(u,k,n){u=u;for(var t;u;){t=n.call(u);if(t!==h)return t;u=u[k]}},extend:function(u,k){u||(u={});if(k)for(var n in k)u[n]=k[n];return u},extendIf:function(u,k){u||(u={});if(k)for(var n in k)if(u[n]===h)u[n]=k[n];return u},create:function(){var u=function(){this.initialize.apply(this,arguments)};if(arguments.length===0)return u;var k=u.prototype,n,t,w=this.$A(arguments);if(typeof w[0]==="string"){t=w[0];n=w[1];w.shift()}else n=w[0];
w.shift();if(n)n=n.prototype;else if(__debug)k.toString=function(){return(this.id?this.id:"")+(this.title?"$"+this.title:"")+"@"+this.type};if(n){function x(){}x.prototype=n;u.prototype=k=new x;k.superclass=n;u.superclass=n}if(t){k.type=t;if(t.indexOf(".")>0)this.attr(window,t,u);else window[t]=u}u.constructors=w;a(k,n,w);return k.constructor=u},ajaxRequest:function(){try{if(window.XMLHttpRequest)return new XMLHttpRequest;else if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(u){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(k){return null}}}catch(n){__debug&&
console.log("createXMLHttpRequest",n);return false}},attr:function(u,k,n){if(typeof k==="string")k=k.split(".");for(var t,w=0,x=k.length-1;w<x;w++){t=u;u=u[k[w]];if(typeof u==="undefined"||u===null)t[k[w]]=u={}}if(n===h)return u[k[w]];u[k[w]]=n},queryString:function(u){if(!u)return"";var k=[];for(var n in u){var t=u[n];n=encodeURIComponent(n);var w=typeof t;if(w==="undefined")k.push(n,"=&");else if(w!="function"&&w!="object")k.push(n,"=",encodeURIComponent(t),"&");else if(this.isArray(t))if(t.length){w=
0;for(var x=t.length;w<x;w++)k.push(n,"=",encodeURIComponent(t[w]===h?"":t[w]),"&")}else k.push(n,"=&")}k.pop();return k.join("")},formQuery:function(u){var k="",n="";u=C.$(u);for(var t=u.elements,w=t.length,x=0;x<w;x++){n=t[x];if(n.tagName==="INPUT")if(n.type==="radio"||n.type==="checkbox")if(!n.checked)continue;if(u=n.name||n.id){if(k!="")k+="&";k+=encodeURIComponent(n.name||n.id)+"="+encodeURIComponent(n.value)}}return k},validate:function(){var u=C.$A(arguments),k=null;if(!C.isArray(u[0])){k=
C.$(u[0]);u.remove(0)}var n=C.isArray(n)?{}:u.pop(),t=n.queryString,w=t?"":{};C.each(u,function(x,B){x=B[0].tagName?B[0]:k?k[B[0]]:C.$(B[0]);var F=x.value,G=B[1],H=typeof B[2]==="function"?B[3]:B[2];if(!H||typeof H!="object")H=n;if(!H.ignoreNull&&(F==""||F==null)){H.callback?H.callback(G,x,k):C.alert(G,x,k);H.nofocus||x.focus();return w=false}if(typeof B[2]==="function"){var J=B[2](F,x,k),K=J!==false;if(typeof J==="string"){G=J;K=false}if(!K){H.callback?H.callback(G,x,k):C.alert(G,x,k);H.nofocus||
x.focus();return w=false}}if(t&&!k)w+=w==""?(typeof x.name==="undefined"||x.name===""?x.id:x.name)+"="+F:"&"+B[0]+"="+F;else k||(w[B[0]]=F)});if(w!==false&&k&&t)w=C.formQuery(k);return w},uniqueID:function(){return g++},templ:function(u,k,n,t){return k.replace(/\{([\w_$]+)\}/g,function(w,x){var B=u[x];if(B===h||B===null){if(n===h)return"";switch(n){case 0:return"";case 1:return x;default:return w}}return t?encodeURIComponent(B):B})},isFunction:function(u){return u instanceof Function||typeof u===
"function"},isString:function(u){return u instanceof f||typeof u==="string"},isArray:function(u){return u instanceof Array},isDate:function(u){return u instanceof Date},alert:function(u){alert(u)},tip:function(u){alert(u)},delAttr:function(u,k){var n=u[k];n!==h&&delete u[k];return n},addClass:function(u,k){var n=u.className.replace(k,"").trim();n+=" "+k;u.className=n},addClassIf:function(u,k){if(!this.hasClass(u,k)){var n=u.className.replace(k,"").trim();n+=" "+k;u.className=n}},delClass:function(u,
k){u.className=u.className.replace(k,"").trim()},hasClass:function(u,k){return k&&(" "+u.className+" ").indexOf(" "+k+" ")!=-1},switchClass:function(u,k,n){C.delClass(u,k);C.addClass(u,n)},setClass:function(u,k){u.className=k},display:function(u,k,n){if(k===h)return C.$(u).style.display!="none";n=n!==h?n:"block";C.$(u).style.display=k?n:"none"},disable:function(u,k){if(k===h)return C.$(u).disabled;C.$(u).disabled=k},insertAfter:function(u,k){var n=k.nextSibling;n==null?k.parentNode.insertBefore(u,
k):k.parentNode.insertBefore(u,n);return u},isNumber:function(u){return u instanceof Number||typeof u=="number"},isMail:function(u){return A.test(u)},dateFormat:function(u,k){if(!k)return u.toLocaleString();var n=k.charAt(2);k=k.split(n);for(var t="",w=0,x=k.length;w<x;w++){switch(k[w]){case "mm":var B=u.getMonth()+1;if(B<10)B="0"+B;t+=B;break;case "yy":t+=u.getFullYear();break;case "dd":B=u.getDate();if(B<10)B="0"+B;t+=B;break}if(w!=x-1)t+=n}return t},dateParse:function(u,k){if(!k)return new Date(u);
var n=[0,0,0],t=k.charAt(2);k=k.split(t);u=u.split(t);for(var w=0,x=k.length;w<x;w++)if(k[w]=="mm")n[0]=u[w];else if(k[w]=="dd")n[1]=u[w];else n[2]=u[w];return new Date(n.join(t))},addDate:function(u,k,n){var t=null;switch(u){case "year":t=new Date(parseInt(k.getFullYear())+1,k.getMonth(),k.getDate());break;case "month":t=new Date(k.getFullYear(),k.getMonth()+n,k.getDate());break;case "day":t=new Date(k.getFullYear(),k.getMonth(),k.getDate()+n);break}return t},$C:function(u,k){if(typeof u==="string")return(k||
b).createElement(u);var n=u.tagName;delete u.tagName;k=this.extend((k||b).createElement(n),u);u.tagName=n;return k},$N:function(u){return b.getElementsByName(u)},$T:function(u,k){return(k||b).getElementsByTagName(u)},tagUp:function(u,k){for(;u&&u.tagName!==k;)if((u=u.parentNode)&&u.tagName==="BODY")return null;return u},getObjectLinkedValues:function(u,k,n){var t=[];n=!!n;var w;if(u.hasOwnProperty(k)){w=u[k];if(!n||w)t.push(u[k])}if(u.constructor.prototype.hasOwnProperty(k)){w=u.constructor.prototype[k];
if(!n||w)t.push(w)}for(u=u.superclass;u;){if(u.hasOwnProperty(k)){w=u[k];if(!n||w)t.push(u[k])}u=u.superclass}return t},loadResource:function(u,k,n,t){var w=C.delAttr(u,"src"),x=C.delAttr(u,"href"),B=this.$C(u,t);if(k||n)if(B.readyState)B.onreadystatechange=function(){if(B.readyState=="loaded"||B.readyState=="complete"){B.onreadystatechange=null;n&&setTimeout(function(){B.parentNode.removeChild(B)},1);k&&k.call(B)}};else B.onload=function(){n&&setTimeout(function(){B.parentNode.removeChild(B)},1);
k&&k.call(B)};if(w)B.src=w;if(x)B.href=x;this.$T("head")[0].appendChild(B);return B},loadScript:function(u,k,n){u=this.loadResource({tagName:"script",src:u,type:"text/javascript"},k,true);if(n)u.id=n;return u},loadCSS:function(u,k,n){u=this.loadResource({tagName:"link",rel:"stylesheet",href:u,type:"text/css"},k);if(n)u.id=n;return u},loadStyle:function(u,k){var n=this._styleEl;if(!n){n=this._styleEl=this.$C({tagName:"style",type:"text/css"});this.$T("head")[0].appendChild(n)}n.styleSheet&&(n.styleSheet.cssText+=
u)||n.appendChild((k||b).createTextNode(u));return n},noCache:function(){return"&noCacheReq="+(new Date).getTime()},$A:function(u){return z.call(u)},frameDoc:function(u){return u.contentWindow?u.contentWindow.document:u.contentDocument},frameWin:function(u){return u.contentWindow},getDocumentHeight:function(){return Math.max(b.compatMode!="CSS1Compat"?b.body.scrollHeight:b.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(b.compatMode!="CSS1Compat"?
b.body.scrollWidth:b.documentElement.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return o?l?b.documentElement.clientHeight:b.body.clientHeight:self.innerHeight},getViewportWidth:function(){return o?l?b.documentElement.clientWidth:b.body.clientWidth:self.innerWidth},getViewport:function(){return{width:this.getViewportWidth(),height:this.getViewportHeight()}},ie:o,ie7:q,ie6:p,strict:l,safari:m,gecko:e,opera:d,borderBox:v};window.CC&&C.extend(C,window.CC);window.CC=C;if(!C.Util)C.Util=
{};C.util={};return C})();
(function(){var a=Array.prototype.slice;CC.extendIf(String.prototype,function(){var b=new RegExp("<script[^>]*>([\\S\\s]*?)<\/script>","img"),e=/<script[^>]*>([\S\s]*?)<\/script>/im,g=new RegExp("<style[^>]*>([\\S\\s]*?)</style>","img"),f=/<style[^>]*>([\S\s]*?)<\/style>/im,h=new RegExp("(?:^\\s*)|(?:\\s*$)","g");return{trim:function(){return this.replace(h,"")},escape:function(){return escape(this)},unescape:function(){return unescape(this)},checkSpecialChar:function(){if(this.search(/[%\'\"\/\\]/)!=-1)return false;
return true},truncate:function(l,d){l=l||30;d=d===undefined?"...":d;return this.length>l?this.slice(0,l-d.length)+d:this},stripScript:function(l){if(!l)return this.replace(b,"");return this.replace(b,function(d){l(d);return""})},stripStyle:function(l){if(!l)return this.replace(g,"");return this.replace(g,function(d){l(d);return""})},innerScript:function(){this.match(e);return RegExp.$1},innerStyle:function(){this.match(f);return RegExp.$1},execScript:function(){return this.replace(b,function(l){l.match(e);
window.execScript?execScript(RegExp.$1):window.eval(RegExp.$1);return""})},execStyle:function(){return this.replace(g,function(l){l.match(f);CC.loadStyle(RegExp.$1);return""})},camelize:function(){var l=this.split("-"),d=l.length;if(d==1)return l[0];for(var m=this.charAt(0)=="-"?l[0].charAt(0).toUpperCase()+l[0].substring(1):l[0],o=1;o<d;o++)m+=l[o].charAt(0).toUpperCase()+l[o].substring(1);return m}}}());CC.extendIf(Function.prototype,{bind:function(){var b=this,e=a.call(arguments,1),g=arguments[0];
return function(){return b.apply(g,e)}},bindAsListener:function(b){var e=this;return function(g){return e.call(b,g||window.event)}},bindRaw:function(b){var e=this;return function(){return e.apply(b,arguments)}},timeout:function(b,e){if(e)return setInterval(this,b||0);return setTimeout(this,b||0)}});CC.extendIf(Array.prototype,{remove:function(b){if(typeof b==="number"){if(b<0||b>=this.length)throw"Index Of Bounds:"+this.length+","+b;this.splice(b,1);return this.length}if(this.length>0&&this[this.length-
1]===b)this.pop();else{b=this.indexOf(b);b!=-1&&this.splice(b,1)}return this.length},indexOf:function(b){for(var e=0,g=this.length;e<g;e++)if(this[e]===b)return e;return-1},insert:function(b,e){return this.splice(b,0,e)},include:function(b){return this.indexOf(b)!=-1},clear:function(){this.splice(0,this.length)}})})();
(function(){var a=window.CC;a.Cache={MAX_ITEM_SIZE:5,callbacks:[],register:function(b,e,g){if(this[b])this[b][1]=e;else this[b]=[null,e];g!==undefined&&this.sizeFor(b,g)},get:function(b){b=this[b];if(b===undefined)return null;var e=b[1];b=b[0];if(b===null)return e();if(b.length>1)return b.pop();if(e)return e();return null},put:function(b,e){var g=this[b];if(g){(b=g[0])||(g[0]=b=[this.MAX_ITEM_SIZE]);b.length-1>=b[0]||b.push(e)}else this[b]=[[this.MAX_ITEM_SIZE,e]]},remove:function(b){this[b]&&delete this[b]},
sizeFor:function(b,e){var g=this[b];g||(this[b]=g=[[]]);g[0]||(g[0]=[]);g[0][0]=e}};a.Cache.register("div",function(){return a.$C("DIV")})})();
(function(){var a={},b={};CC.util.TypeConverter={reg:function(e,g){a[e]=g},get:function(e){var g=a[e];if(!g){g=this.create.apply(this,arguments);if(!g)throw"\u672a\u8bc6\u522b\u7684\u6570\u636e\u7c7b\u578b:"+e;a[e]=g}return g},getComparator:function(e){var g=b[e];if(!g){var f=this.get(e);g=b[e]=f?function(h,l){h=f(h);l=f(l);if(h>l)return 1;if(h<l)return-1;return 0}:function(h,l){if(h>l)return 1;if(h<l)return-1;return 0}}return g},create:function(e){var g=/[\$,%]/g,f;switch(e){case "":case undefined:f=
function(h){return h===null||h===undefined?h:h.toString()};break;case "string":f=function(h){return h===undefined||h===null?"":h.toString()};break;case "int":f=function(h){return h!==undefined&&h!==null&&h!==""?parseInt(h.toString().replace(g,""),10):""};break;case "float":f=function(h){return h!==undefined&&h!==null&&h!==""?parseFloat(h.toString().replace(g,""),10):""};break;case "bool":f=function(h){return h===true||h==="true"||h==1};break;case "date":f=function(h,l){if(!h)return"";if(CC.isDate(h))return h;
if(l){if(l==="timestamp")return new Date(h*1E3);if(l==="time")return new Date(parseInt(h,10));return Date.parseDate(h,l)}return(h=Date.parse(h))?new Date(h):null};break}return f}}})();
(function(){var a={"1c":["width","95%"],"2c":["width","45%"],"3c":["width","30%"],"4c":["width","20%"],"5c":["width","10%"],c:function(f,h){f.view.style.width=h+"%"},w:function(f,h){f.view.style.width=h},h:function(f,h){f.view.style.height=h},d:function(f,h){f.view.style.display=h},db:["display","block"],dib:["display","inline-block"],dh:["display","hidden"],np:["padding","0px"],nb:["border","0px"],fl:["float","left"],fr:["float","right"],cb:["clear","both"],tl:["textAlign","left"],tr:["textAlign",
"right"],tc:["textAlign","center"],p:function(f,h){f.view.style.padding=h},pl:function(f,h){f.view.style.paddingLeft=h},pr:function(f,h){f.view.style.paddingRight=h},pt:function(f,h){f.view.style.paddingTop=h},pb:function(f,h){f.view.style.paddingBottom=h},bd:function(f,h){f.view.style.border=h},bdl:function(f,h){f.view.style.borderLeft=h},bdr:function(f,h){f.view.style.borderRight=h},bdt:function(f,h){f.view.style.borderTop=h},bdb:function(f,h){f.view.style.borderBottom=h},z:function(f,h){f.view.style.zIndex=
h},lnl:["borderLeft","1px solid #CCC"],lnt:["borderTop","1px solid #CCC"],lnb:["borderBottom","1px solid #CCC"],lnr:["borderRight","1px solid #CCC"],lnx:["border","1px solid #CCC"],m:function(f,h){f.view.style.margin=h},ml:function(f,h){f.view.style.marginLeft=h},mr:function(f,h){f.view.style.marginRight=h},mt:function(f,h){f.view.style.marginTop=h},mb:function(f,h){f.view.style.marginBottom=h},pa:["position","absolute"],pr:["position","relative"],b:function(f,h){f.view.style.bottom=h},l:function(f,
h){f.view.style.left=h},r:function(f,h){f.view.style.right=h},t:function(f,h){f.view.style.top=h},of:function(f,h){f.view.style.overflow=h},oh:["overflow","hidden"],oa:["overflow","auto"],v:function(f,h){h=h.split("=");f.view.style[h[0]]=h[1]}},b=/\s+/,e=CC.borderBox,g;CC.util.CssParser=function(){};CC.extendIf(CC.util.CssParser.prototype,{def:function(f,h){var l=this.rules;if(!l)l=this.rules={};if(typeof f==="object")for(var d in f)l[d]=f[d];else l[f]=h;return this},parse:function(f,h){var l,d;h=
h.split(b);var m,o,q=this.rules,p,v;m=0;for(o=h.length;m<o;m++){d=h[m];p=d.indexOf(":");if(p>0){v=d.substring(p+1);v=v.replace(/,/g," ");d=d.substr(0,p)}else v=false;if(d.charAt(0)==="^"){d=d.substring(1);if(d.charAt(0)==="$"){if(!e)continue;d=d.substring(1)}d=q&&q[d]||a[d]||d;l||(l=[]);l.push(d);l.push(v)}else if(d.charAt(0)==="$"){if(e){d=d.substring(1);(d=q&&q[d]||a[d])&&this.applyRule(f,d,v)}}else{d=q&&q[d]||a[d]||d;this.applyRule(f,d,v)}}if(l&&l.length>0&&f.children){m=0;h=f.children;for(o=h.length;m<
o;m++){s=h[m];f=0;for(q=l.length;f<q;f+=2)this.applyRule(s,l[f],l[f+1])}}},applyRule:function(f,h,l){if(CC.isArray(h))f.setStyle(h[0],l||h[1]);else if(typeof h==="object")for(var d in h)f.setStyle(d,h[d]);else if(typeof h==="string")if(h.charAt(0)!=="."){if(h.indexOf(" ")<0)throw"CC.util.CssParser: Unsupported instruction '"+h+"'";this.parse(f,h)}else f.addClass(h.substring(1));else typeof h==="function"&&h(f,l,this)}});CC.util.CssParser.getParser=function(){g||(g=new CC.util.CssParser);return g}})();
(function(){var a=CC.Eventable=function(b){b&&CC.extend(this,b);CC.extend(this,a.prototype)};a.prototype={fire:function(b){__debug&&console.log("\u53d1\u9001:%s,%o,\u6e90:%o",b,arguments,this);if(this.events){var e=this.events[b];if(e){var g=CC.$A(arguments),f=g.length,h,l,d,m;g.shift();e._evtLocked=true;l=0;for(d=e.length;l<d;l++){m=e[l];if(!m.removed){if(m.args)g[f]=m.args;h=m.ds?m.cb.apply(m.ds,g):m.cb.apply(this,g);if(h===false)break}}e._evtLocked=false}}if(this.subscribers){l=0;for(d=this.subscribers.length;l<
d;l++){e=this.subscribers[l];e.fireSubscribe.apply(e,arguments)}}return h},on:function(b,e,g,f){if(!b||!e){__debug&&console.trace();throw"eid or callback can not be null";}if(!this.events)this.events={};var h=this.events[b];h||(h=this.events[b]=[]);h[h.length]={cb:e,ds:g,args:f};return this},un:function(b,e){if(!this.events)return this;if(e===undefined){delete this.events[b];return this}var g=this.events[b];if(g){if(g._evtLocked)g=this.events[b]=g.slice(0);for(b=0;b<g.length;b++){var f=g[b];if(f.cb==
e){g.remove(b);f.removed=true;break}}}return this},fireOnce:function(b){var e=this.fire.apply(this,arguments);this.un(b);return e},to:function(b){if(!this.subscribers)this.subscribers=[];if(!(this.subscribers.indexOf(b)>0)){this.subscribers.push(b);return this}}};a.prototype.fireSubscribe=a.prototype.fire})();
(function(){var a=CC.Event={},b=window.document,e=CC.opera,g=CC.chrome,f=CC.ie;new CC.Eventable;CC.extend(a,{BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,readyList:[],contentReady:false,noUp:function(h){a.stopPropagation(h||window.event);return false},noDef:function(h){a.preventDefault(h||window.event)},element:function(h){return h.srcElement||h.target},pageX:function(h){if(h.pageX==null&&h.clientX!=null){var l=b.documentElement,d=b.body;return h.clientX+(l&&l.scrollLeft||
d&&d.scrollLeft||0)-(l.clientLeft||0)}return h.pageX},pageY:function(h){if(h.pageY==null&&h.clientY!=null){var l=b.documentElement,d=b.body;return h.clientY+(l&&l.scrollTop||d&&d.scrollTop||0)-(l.clientTop||0)}return h.pageY},pageXY:function(h){if(h.pageX==null&&h.clientX!=null){var l=b.documentElement,d=b.body;return[h.clientX+(l&&l.scrollLeft||d&&d.scrollLeft||0)-(l.clientLeft||0),h.clientY+(l&&l.scrollTop||d&&d.scrollTop||0)-(l.clientTop||0)]}return[h.pageX,h.pageY]},which:function(h){if(!h.which&&
(h.charCode||h.charCode===0?h.charCode:h.keyCode))return h.charCode||h.keyCode},isLeftClick:function(h){return h.which&&h.which===1||h.button&&h.button===1},isEnterKey:function(h){return h.keyCode===13},isEscKey:function(h){return h.keyCode===27},getWheel:function(h){if(h.wheelDelta){delta=h.wheelDelta/120;if(e)delta=-delta}else if(h.detail)delta=-h.detail/3;return delta},stop:function(h){h.preventDefault&&h.preventDefault();h.stopPropagation&&h.stopPropagation();if(CC.ie){h.returnValue=false;h.cancelBubble=
true}},preventDefault:function(h){h.preventDefault&&h.preventDefault();h.returnValue=false},stopPropagation:function(h){h.stopPropagation&&h.stopPropagation();h.cancelBubble=true},toggle:function(h,l,d,m,o,q,p){h=CC.$(h);l=CC.$(l);var v=CC.display(l),A=v?m:d;o=v?o:q;CC.delClass(h,v?d:m);CC.addClass(h,A);CC.display(l,!v);if(p)h.innerHTML=o;h.title=o},observers:false,_observeAndCache:function(h,l,d,m){if(!this.observers)this.observers=[];if(h.addEventListener){this.observers.push([h,l,d,m]);h.addEventListener(l,
d,m)}else if(h.attachEvent){this.observers.push([h,l,d,m]);h.attachEvent("on"+l,d)}},unloadCache:function(){if(this.observers){for(var h=0;h<this.observers.length;h++){this.un.apply(this,this.observers[h]);this.observers[h][0]=null}this.observers=false}},on:function(h,l,d,m){m=m||false;if(l=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||h.attachEvent))l="keydown";this._observeAndCache(h,l,d,m);return this},un:function(h,l,d,m){h=CC.$(h);m=m||false;if(l=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||
h.detachEvent))l="keydown";if(h.removeEventListener)h.removeEventListener(l,d,m);else h.detachEvent&&h.detachEvent("on"+l,d);return this},setDragable:function(h,l,d,m,o,q){if(d){l||(l=h);var p=function(A){var z=A||window.event;if(a.isLeftClick(z)){if(!l.__ondraged){o&&o(z,l);l.__ondraged=true}if(m)if(!m(z,l))return false;A=z.clientX;z=z.clientY;var D=A-l._x,C=z-l._y;l._x=A;l._y=z;l.style.left=l.offsetLeft+D;l.style.top=l.offsetTop+C}else v(z)},v=function(A){if(l.__ondraged){if(q)q(A||window.event,
l);l.__ondraged=false}a.un(b,"mousemove",p);a.un(b,"mouseup",arguments.callee);a.un(b,"selectstart",a.noUp)};h.onmousedown=function(A){if(!l.unmoveable){A=A||window.event;var z=A.clientY;l._x=A.clientX;l._y=z;a.on(b,"mousemove",p);a.on(b,"selectstart",a.noUp);a.on(b,"mouseup",v)}}}else h.onmousedown=h.onmouseup=null},ready:function(h){this.readyList.push(h)},_onContentLoad:function(){if(!a.contentReady){a.contentReady=true;a.defUIReady&&a.defUIReady();for(var h=0;h<a.readyList.length;h++)a.readyList[h].call(window)}}});
CC.ready=function(){a.ready.apply(a,arguments)};b.addEventListener&&!e&&!g&&b.addEventListener("DOMContentLoaded",a._onContentLoad,false);f&&window==top&&function(){if(!a.contentReady){try{b.documentElement.doScroll("left")}catch(h){setTimeout(arguments.callee,0);return}a._onContentLoad()}}();e&&b.addEventListener("DOMContentLoaded",function(){if(!a.contentReady){for(var h=0;h<b.styleSheets.length;h++)if(b.styleSheets[h].disabled){setTimeout(arguments.callee,0);return}a._onContentLoad()}},false);
a.on(window,"load",a._onContentLoad)})();if(!window.console)window.console={};if(!window.tester)window.tester=window.fireunit||{};CC.extendIf(console,{debug:fGo,info:fGo,trace:fGo,log:fGo,warn:fGo,error:fGo,assert:fGo,dir:fGo,count:fGo,group:fGo,groupEnd:fGo,time:fGo,timeEnd:fGo});
CC.extendIf(tester,{ok:function(a,b){if(typeof a==="function")a=a();if(typeof b==="function")b=b();if(a!=b){alert("assert failed in testing "+a+"=="+b);console.group("\u65ad\u8a00\u5931\u8d25:",a,b);console.error(a,b);console.trace();console.groupEnd()}},testDone:fGo});
CC.create("CC.util.JSONPConnector",null,{initialize:function(a){this.cfg=a},abort:function(){this.cleaned||this._clean()},setRequestHeader:fGo,getResponseHeader:fGo,open:function(a,b){if(b)this.url=b},send:function(a){var b=this.cfg||{};url=this.url||b.url;isQ=url.indexOf("?")>=0;win=b.win||window;fn="jsonp_"+ +new Date;doc=b.win?CC.frameDoc(win):document;script=doc.createElement("script");jsonp=b.jsonp||"jsonp";hd=doc.getElementsByTagName("head")[0];self=this;url+=isQ?"&"+jsonp+"="+fn:"?"+jsonp+
"="+fn;a&&(url+=typeof a==="string"?a:CC.queryString(a));script.type="text/javascript";b.charset&&(script.charset=b.charset);b.deffer&&(script.deffer=b.deffer);script.src=url;win[fn]=function(){self._clean()};this._win=win;this._script=script;this._fn=fn;this.cleaned=false;win[fn]=function(){if(!self.cleaned){self._clean();self._fireState(4,200,arguments)}};script.onreadystatechange=script.onload=function(){var e=this.readyState;if(!self.cleaned&&(!e||e==="loaded"||e==="complete")){self._clean();
self._fireState(4,-1)}};hd.appendChild(script)},_clean:function(){try{delete this._win[this._fn];delete this._win;delete this._fn;this._script.onreadystatechange=null;this._script.parentNode.removeChild(this._script);delete this._script;delete this.cfg}catch(a){}this.cleaned=true},_fireState:function(a,b,e){this.readyState=a;if(b!==undefined)this.status=b;this.onreadystatechange.call(this,e)}});
(function(){var a=window.CC,b=a.Ajax=a.create();b.connect=function(e){e=new b(e);e.connect();return e};b.prototype={method:"GET",url:null,asynchronous:true,timeout:false,disabledComp:undefined,contentType:"application/x-www-form-urlencoded",msg:"\u6570\u636e\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u5019...",cache:true,success:function(e){e.invokeHtml()},displayPanel:null,initialize:function(e){a.extend(this,e);this.method=this.method.toUpperCase()},setOption:function(e){a.extend(this,e)},setMsg:fGo,_onTimeout:function(){if(!(this.xmlReq.readyState>=
4)){__debug&&console.log("ajax request timeout for "+this.url);this.abort();this._fire("timeout",this);this._close()}},closed:false,_close:function(){if(!this.closed){this.timeout&&clearTimeout(this._tid);if(this.onfinal)this.caller?this.onfinal.call(this.caller,this):this.onfinal.call(this,this);this._fire("final",this);this.disabledComp&&a.disable(this.disabledComp,false);this.json!==undefined&&delete this.json;this.xmlDoc!==undefined&&delete this.xmlDoc;this.text!==undefined&&delete this.text;
this.params=this.xmlReq=this.disabledComp=null;this.busy=0;this.closed=true}},abort:function(){if(this.xmlReq!==null){this.xmlReq.abort();this.aborted=true;this._close()}},_req:function(){if(!this.xmlReq)this.xmlReq=this.method==="JSONP"?new a.util.JSONPConnector(this):a.ajaxRequest()},_setHeaders:function(){this._req();if(this.method==="POST")this.xmlReq.setRequestHeader("Content-type",this.contentType+(this.encoding?"; charset="+this.encoding:""));var e=this.xmlReq;this.headers&&a.each(this.headers,
function(g,f){e.setRequestHeader(g,f)})},open:function(){this._req();this.busy=1;this._fire("open",this);if(this.timeout)this._tid=setTimeout(this._onTimeout.bind(this),this.timeout);this.disabledComp&&a.disable(this.disabledComp,true);var e=this.params,g=this.cache,f=this.url;if(e||g){var h=f.indexOf("?")>0;if(g)f=h?f+"&__uid="+ +new Date:f+"?__uid="+ +new Date;if(e){if(!h&&!g)f+="?";f=f+"&"+(typeof e==="string"?e:a.queryString(e))}}this.xmlReq.open(this.method,f,this.asynchronous)},send:function(e){this._fire("send",
this);this._setHeaders();this.xmlReq.onreadystatechange=this._onReadyStateChange.bindRaw(this);this.setMsg(this.msg);if(!e)e=this.data;if(e){if(typeof e==="object")e=a.queryString(e);this.xmlReq.send(e)}else this.xmlReq.send()},connect:function(e){if(this.busy)try{this.abort()}catch(g){__debug&&console.log(g)}this.open();this.send(e)},setRequestHeader:function(e,g){this._req();try{this.xmlReq.setRequestHeader(e,g)}catch(f){this._close();console.log(f)}},getResponseHeader:function(e){return this.xmlReq.getResponseHeader(e)},
_fire:function(e){this.status=e;if(this.statuschange)this.statuschange.call(this.caller||this,e,this);b.fire("statuschange",e,this);this.fire("statuschange",e,this);if(b.fire.apply(b,arguments)!==false)if(this.fire.apply(this,arguments)!==false)return;return false},_onReadyStateChange:function(){var e=this.xmlReq;if(e.readyState===4)if(!this.aborted)if(this._fire("load",this)!==false){var g=this.success,f=this.failure;try{if(e.status==200){this.loaded=true;if(this._fire("success",this)===false)return false;
if(g)this.method==="JSONP"?g.apply(this.caller||this,arguments):g.call(this.caller||this,this)}else{e.status==0&&__debug&&console.error("\u62d2\u7edd\u8bbf\u95ee,\u786e\u8ba4\u662f\u5426\u8de8\u57df,",this.url);if(this._fire("failure",this)===false)return false;if(f)f.call(this.caller||this,this)}}catch(h){__debug&&console.error(h);this._close();throw h;}this._close()}},getText:function(){if(this.text)return this.text;this._fire("text",this.text=this.xmlReq.responseText,this);return this.text},getXmlDoc:function(){if(this.xmlDoc)return this.xmlDoc;
this._fire("xmlDoc",this.xmlDoc=this.xmlReq.responseXML.documentElement,this);return this.xmlDoc},getJson:function(){if(this.json)return this.json;var e;try{this.json=e=eval("("+this.getText()+");")}catch(g){__debug&&console.log("Internal server error : a request responsed with wrong json format:\n"+g+"\n"+this.getText());throw g;}this._fire("json",e,this);return this.json},invokeScript:function(){return eval(this.getText())},invokeHtml:function(){var e=[],g=[],f=this.getText().stripScript(function(h){e[e.length]=
h});g=[];f=f.stripStyle(function(h){g[g.length]=h.innerStyle()});g.join("").execStyle();if(this.displayPanel)a.$(this.displayPanel).innerHTML=f;e.join("").execScript();f=e=g=null}};a.Eventable.call(b.prototype);a.Eventable.call(b)})();
(function(a){var b=a.Eventable,e={},g=a.Cache,f=a.Event,h=a.Base=function(k){if(k!==z)this.view=a.$(k)};h.find=function(k){for(var n in e)if(e[n].id===k)return e[n];return null};h.findByCid=h.byCid=function(k){return e[k]};h.byDom=function(k,n){for(var t,w=n&&n.view||d;k!==w;){if(k.cicyId)if((t=h.byCid(k.cicyId))&&!t.delegated)if(n){if(t.pCt===n)return t}else return t;k=k.parentNode}return null};var l=a.Tpl;if(!l)l=a.Tpl={};a.extend(l,{BLANK_IMG:window.BLANK_IMG||"http://bgjs.googlecode.com/svn/trunk/cicy/default/s.gif",
$:function(k,n,t,w){var x=g.get(k);if(!x){n||(n=k);x=this[n];if(typeof x=="undefined")return null;n=g.get("div");n.innerHTML=t?t(x,w):x;x=n.removeChild(n.firstChild);g.put("div",n);g.put(k,x)}return x.cloneNode(true)},$$:function(k){return a.$$(this.$(k))},remove:function(k){g.remove(k);delete this[k]},forNode:function(k,n,t){if(n)k=a.templ(n,k,t);n=g.get("div");n.innerHTML=k;k=n.removeChild(n.firstChild);g.put("div",n);return k},def:function(k,n){if(arguments.length>=3){n=a.$A(arguments);n.shift();
n=n.join("")}this[k]=n;return this}});f.on(window,"unload",function(){var k=[];try{for(var n in e)k[k.length]=e[n];n=0;for(var t=k.length;n<t;n++)k[n].cacheId&&k[n].destory()}catch(w){__debug&&console.log(w)}finally{e=null}});var d=window.document,m=d.defaultView,o={},q=/(-[a-z])/gi,p=function(k,n){return n.charAt(1).toUpperCase()},v=["vid","hid","hid","hid"],A=["vvi","dbl","dbi",""],z,D=window.Math,C=window.parseInt,u=a.util.CssParser.getParser();a.extend(h.prototype,{type:"CC.Base",view:false,height:false,
width:false,left:false,top:false,minW:0,minH:0,maxH:D.MAX,maxW:D.MAX,clickDisabled:false,pCt:false,eventable:false,initialize:function(k){k&&a.extend(this,k);this.eventable&&b.apply(this);this.initComponent();this.autoRender&&this.render()},createView:function(){if(this.view){if(typeof this.view==="string")this.view=a.$(this.view)}else{if(this.hasOwnProperty("template")||this.constructor.prototype.hasOwnProperty("template")||this.superclass&&this.superclass.hasOwnProperty("template")){this.view=this.template.charAt(0)===
"<"?l.forNode(this.template,this):l.$(this.template);delete this.template}else this.view=l.$(this.type);if(!this.view)this.view=this.createView0(this.superclass)}if(!this.view)this.view=a.$C("DIV")},createView0:function(k){if(!k)return null;var n;if(n=k.hasOwnProperty("template")?l.$(k.template):l.$(k.type))return n;return arguments.callee(k.superclass)},cacheId:z,__flied:z,strHtml:false,innerCS:false,cs:false,id:z,title:z,titleNode:false,hoverCS:false,icon:false,css:false,unselectable:false,disabled:false,
tip:false,qtip:false,shadow:false,initComponent:function(){if(this.__flied===z){var k=this.cacheId="c"+a.uniqueID();e[k]=this;this.createView()}if(this.strHtml){this.html(this.strHtml);delete this.strHtml}this.innerCS&&this.addClass(this.innerCS);this.cs&&this.addClass(this.cs);if(this.id&&!this.view.id)this.view.id=this.id;if(this.id===z)this.id="comp"+a.uniqueID();this.view.cicyId=k;if(this.title)if(this.titleNode){if(!this.titleNode.tagName)this.titleNode=this.dom(this.titleNode)}else this.titleNode=
this.dom("_tle");this.icon&&this.setIcon(this.icon);this.clickCS&&this.bindClickStyle(this.clickCS);this.hoverCS&&this.bindHoverStyle(this.hoverCS);this.css&&this.cset(this.css);this.unselectable&&this.noselect();this.title&&this.setTitle(this.title);this.top!==false&&this.setTop(this.top);this.left!==false&&this.setLeft(this.left);if(this.disabled){this.disabled=1;this.disable(true)}if(this.tip)this.setTip(this.tip===true?this.title:this.tip);this.qtip&&a.Util.qtip&&a.Util.qtip(this);if(this.shadow){this.shadow=
a.ui.instance(this.shadow===true?"shadow":this.shadow);this.follow(this.shadow)}},__delegations:false,delegated:false,follow:function(k){var n=this.__delegations;if(!n)n=this.__delegations=[];k.delegated=true;n.push(k);if(!k.pCt)k.pCt=this;this.rendered&&!k.rendered&&k.render();return this},observes:false,destory:function(){this.pCt&&!this.delegated?this.pCt.remove(this):this.del();if(this.cacheId!==z){delete e[this.cacheId];var k=this.observes,n,t,w;if(k){var x;n=0;for(t=k.length;n<t;n++){w=k[n];
x=w[3]||this.view;if(x.removeEventListener)x.removeEventListener(w[0],w[2],true);else x.detachEvent&&x.detachEvent("on"+w[0],w[2])}this.observes=null}if(k=this.__delegations){n=0;for(t=k.length;n<t;++n){k[n].pCt=null;k[n].cacheId&&k[n].destory()}this.__delegations=null}this.view.cicyId=null;delete this.view;delete this.cacheId}},hidden:z,showTo:false,onRender:function(){if(this.hidden){this.hidden=z;this.display(false)}this.width!==false&&this.setWidth(this.width,true);this.height!==false&&this.setHeight(this.height,
true);var k=this.showTo;if(k){k=a.$(k);delete this.showTo}if(k){if(k.view)k=k.view;k.appendChild(this.view)}if(k=this.__delegations)for(var n=0,t=k.length;n<t;n++)k[n].rendered||k[n].render();if(this.shadow){this.getZ()||this.setZ(1001);this.shadow.attach(this)}},rendered:false,render:function(){if(this.rendered||this.fireOnce("render")===false)return false;this.rendered=true;this.onRender();this.fireOnce("rendered");if(!this.hidden&&this.shadow){var k=this.shadow;(function(){k.reanchor().display(true)}).timeout(0)}},
fire:fGo,fireOnce:fGo,un:fGo,hide:function(){return this.display(false)},show:function(){return this.display(true)},fly:function(k){k=this.dom(k);this.__flied!==z&&this.__flied>0&&this.unfly();if(k)return a.fly(k);return null},unfly:function(){if(this.__flied!==z){this.view=null;this.blockMode=this.displayMode=1;this.width=this.top=this.left=this.height=false;this.__flied-=1;this.__flied===0&&g.put("flycomp",this)}},addClass:function(k){var n=this.view,t=n.className.replace(k,"").trim();t+=" "+k;
n.className=t;return this},checkClass:function(k,n){if(k){var t=this.hasClass(k);if(n)t||this.addClass(k);else t&&this.delClass(k)}},addClassIf:function(k){if(this.hasClass(k))return this;var n=this.view,t=n.className.replace(k,"").trim();t+=" "+k;n.className=t;return this},delClass:function(k){var n=this.view;n.className=n.className.replace(k,"").trim();return this},hasClass:function(k){return k&&(" "+this.view.className+" ").indexOf(" "+k+" ")!=-1},switchClass:function(k,n){this.delClass(k);this.addClass(n);
return this},setClass:function(k){this.view.className=k;return this},$T:function(k){return this.view.getElementsByTagName(k)},dom:function(k){return a.$(k,this.view)},noUp:function(k,n){return this.domEvent(k||"click",f.noUp,true,null,n)},clear:a.ie?function(){for(var k=g.get("div"),n=this.view;n.firstChild;)k.appendChild(n.firstChild);k.innerHTML="";g.put("div",k);return this}:function(){for(var k=this.view;k.firstChild;)k.removeChild(k.firstChild);return this},del:function(){this.view.parentNode&&
this.view.parentNode.removeChild(this.view)},disabledCS:"g-disabled",displayMode:1,blockMode:1,display:function(k){if(k===z)return!this.hasClass(v[this.displayMode]);if(this.hidden!==!k){this.hidden=!k;k?this.onShow():this.onHide()}return this},onShow:function(){this.delClass(v[this.displayMode]);if(!this.displayMode||this.blockMode!==2)this.addClassIf(A[this.displayMode]);if(this.shadow){var k=this.shadow;(function(){k.reanchor().display(true)}).timeout(0)}},onHide:function(){if(!this.hasClass(v[this.displayMode])){if(!this.displayMode||
this.blockMode!==2)this.hasClass(A[this.displayMode])&&this.delClass(A[this.displayMode]);this.addClass(v[this.displayMode])}this.shadow&&this.shadow.display(false);this.contexted&&this.releaseContext()},setBlockMode:function(k){this.blockMode=k;return this},setDisplayMode:function(k){this.displayMode=k;if(k===0)this.blockMode=0;return this},disable:function(k){if(arguments.length===0)return this.disabled;k=!!k;if(this.disabled!==k){var n=this.disableNode||this.view;this.disabled=this.dom(n).disabled=
k;this.disabledCS&&this.checkClass(this.disabledCS,k);k&&this.hoverCS&&this.hasClass(this.hoverCS)&&this.delClass(this.hoverCS);if(k&&n.tabIndex>=0){this._tmpTabIdx=n.tabIndex||0;n.tabIndex=-1}else if(this._tmpTabIdx){n.tabIndex=this._tmpTabIdx;delete this._tmpTabIdx}}return this},append:function(k){this.view.appendChild(k.view||k);return this},html:function(k,n,t){if(n){var w=[],x=[];k=k.stripScript(function(B){w[w.length]=B});x=[];k=k.stripStyle(function(B){x[x.length]=B.innerStyle()});x.join("").execStyle();
this.view.innerHTML=k;w.join("").execScript();t&&t.call(this);k=w=x=null;return this}(this.ct||this.view).innerHTML=k;return this},appendHtml:function(k,n){if(n)k="<"+n+">"+k+"</"+n+">";(this.ct||this.view).appendChild(a.Tpl.forNode(k));return this},appendText:function(k){(this.ct||this.view).appendChild(d.createTextNode(k));return this},appendTo:function(k){k.type?k.append(this.view):a.$(k).appendChild(this.view);return this},insertAfter:function(k){var n=a.fly(k);k=n.view;var t=this.view,w=t.nextSibling;
w?t.parentNode.insertBefore(k,w):t.parentNode.appendChild(k);n.unfly();return this},insertBefore:function(k){k=a.$$(k).view;this.view.parentNode.insertBefore(k,this.view);return this},setZ:function(k){this.fastStyleSet("zIndex",k);this.shadow&&this.shadow.setZ(k-1);return this},getZ:function(){return this.fastStyle("zIndex")|0},style:function(k,n){if(n===z)return this.getStyle(k);return this.setStyle(k,n)},getOpacity:function(){return this.getStyle("opacity")},setOpacity:function(k){this.view.style.opacity=
k==1?"":k<1.0E-5?0:k;return this},setStyle:function(k,n){if(k==="opacity")this.setOpacity(n);else{var t=this.view.style;t[k==="float"||k==="cssFloat"?t.styleFloat===z?"cssFloat":"styleFloat":k.camelize()]=n}return this},getStyle:function(){return m&&m.getComputedStyle?function(k){var n=this.view,t;if(k=="float")k="cssFloat";if(t=n.style[k])return t;if(n=m.getComputedStyle(n,"")){if(!(t=o[k]))t=o[k]=k.replace(q,p);return n[t]}return null}:function(k){var n=this.view,t;if(k=="opacity"){if(typeof n.style.filter==
"string")if(t=n.style.filter.match(/alpha\(opacity=(.*)\)/i)){t=parseFloat(t[1]);if(!isNaN(t))return t?t/100:0}return 1}else if(k=="float")k="styleFloat";if(!(t=o[k]))t=o[k]=k.replace(q,p);if(k=n.style[t])return k;if(n=n.currentStyle)return n[t];return null}}(),fastStyleSet:function(k,n){this.view.style[k]=n;return this},fastStyle:function(){return m&&m.getComputedStyle?function(k){var n=this.view,t;if(t=n.style[k])return t;if(n=m.getComputedStyle(n,""))return n[k];return null}:function(k){var n=
this.view,t;if(t=n.style[k])return t;if(n=n.currentStyle)return n[k];return null}}(),setIcon:function(k){var n=this.fly(this.iconNode||"_ico");this.iconCS&&this.addClassIf(this.iconCS);if(n){typeof k==="string"?n.addClass(k):n.display(k);n.unfly()}return this},setTip:function(k){if(this.view&&!this.qtip)this.view.title=k;this.tip=k;return this},getTitle:function(){return this.title},brush:false,setTitle:function(k){this.title=k;if(this.titleNode){if(!this.titleNode.tagName)this.titleNode=this.dom(this.titleNode)}else this.titleNode=
this.dom("_tle");if(this.titleNode)this.titleNode.innerHTML=this.brush?this.brush(k):k;if(this.tip&&this.view&&!this.qtip)this.view.title=k;if(this.qtip===true)this.qtip=k;return this},setWidth:function(k){this.setSize(k,false);return this},getWidth:function(k){if(k&&this.width!==false)return this.width;return this.getSize().width},setHeight:function(k){this.setSize(false,k);return this},getHeight:function(k){if(k&&this.height!==false)return this.height;return this.getSize().height},getOuterW:function(k){var n=
this.outerW;if(!k||n===z)this.outerW=n=(C(this.fastStyle("borderLeftWidth"),10)||0)+(C(this.fastStyle("borderRightWidth"),10)||0)+(C(this.fastStyle("paddingLeft"),10)||0)+(C(this.fastStyle("paddingRight"),10)||0);return n},getOuterH:function(k){var n=this.outerH;if(!k||n===z)this.outerH=n=(C(this.fastStyle("borderTopWidth"),10)||0)+(C(this.fastStyle("borderBottomWidth"),10)||0)+(C(this.fastStyle("paddingTop"),10)||0)+(C(this.fastStyle("paddingBottom"),10)||0);return n},getContentSize:function(k){var n=
this.getSize(k);return[n.width-this.getOuterW(k),n.height-this.getOuterH(k)]},setSize:function(k,n){if(k.width!==z){n=k.width;if(n!==false){if(n<this.minW)n=this.minW;if(n>this.maxW)n=this.maxW;this.fastStyleSet("width",a.borderBox?n+"px":D.max(n-this.getOuterW(),0)+"px");this.width=n}n=k.height;if(n!==false){if(n<this.minH)n=this.minH;if(n>this.maxH)n=this.maxH;if(n<0)k.height=n=0;this.fastStyleSet("height",a.borderBox?n+"px":D.max(n-this.getOuterH(),0)+"px");this.height=n}return this}if(k!==false){if(k<
this.minW)k=this.minW;if(k>this.maxW)k=this.maxW;this.fastStyleSet("width",a.borderBox?k+"px":D.max(k-this.getOuterW(),0)+"px");this.width=k}if(n!==false){if(n<this.minH)n=this.minH;if(n>this.maxH)n=this.maxH;this.fastStyleSet("height",a.borderBox?n+"px":D.max(n-this.getOuterH(),0)+"px");this.height=n}return this},setXY:function(k,n){if(a.isArray(k))if(k[0]!==false||k[1]!==false){if(k[0]!==false){this.fastStyleSet("left",k[0]+"px");this.left=k[0]}if(k[1]!==false){this.fastStyleSet("top",k[1]+"px");
this.top=k[1]}return this}if(k!==false||n!==false){if(k!==false){this.fastStyleSet("left",k+"px");this.left=k}if(n!==false){this.fastStyleSet("top",n+"px");this.top=n}}return this},setTop:function(k){this.setXY(false,k);return this},getTop:function(k){if(k&&this.top!==false)return this.top;return this.top=C(this.fastStyle("top"),10)||this.view.offsetTop},setLeft:function(k){this.setXY(k,false);return this},getLeft:function(k){if(k&&this.left!==false)return this.left;return this.left=C(this.fastStyle("left"),
10)||this.view.offsetLeft},xy:function(k){return[this.getLeft(k),this.getTop(k)]},absoluteXY:function(){var k,n,t;n=d.body||d.documentElement;t=this.view;if(t==n||!this.display())return[0,0];if(t.getBoundingClientRect){n=t.getBoundingClientRect();k=a.fly(d);t=k.getScroll();k.unfly();return[n.left+t.left,n.top+t.top]}var w=0,x=0;k=t;for(var B=this.fastStyle("position")=="absolute",F=a.fly(t);k;){w+=k.offsetLeft;x+=k.offsetTop;F.view=k;if(!B&&F.fastStyle("position")=="absolute")B=true;if(a.gecko){var G=
C(F.fastStyle("borderTopWidth"),10)||0,H=C(F.fastStyle("borderLeftWidth"),10)||0;w+=H;x+=G;if(k!=t&&F.fastStyle("overflow")!="visible"){w+=H;x+=G}}k=k.offsetParent}if(a.safari&&B){w-=n.offsetLeft;x-=n.offsetTop}if(a.gecko&&!B){F.view=n;w+=C(F.fastStyle("borderLeftWidth"),10)||0;x+=C(F.fastStyle("borderTopWidth"),10)||0}for(k=t.parentNode;k&&k!=n;){F.view=k;if(!a.opera||k.tagName!="TR"&&F.fastStyle("display")!="inline"){w-=k.scrollLeft;x-=k.scrollTop}k=k.parentNode}F.unfly();return[w,x]},absoluteX:function(){return this.absoluteXY()[0]},
absoluteY:function(){return this.absoluteXY()[1]},getSize:function(k){if(k&&this.width!==false&&this.height!==false)return{width:this.width,height:this.height};var n=this.view;k=D.max(n.offsetWidth,n.clientWidth);if(!k){k=C(this.fastStyle("width"),10)||0;a.borderBox||(k+=this.getOuterW())}n=D.max(n.offsetHeight,n.clientHeight);if(!n){n=C(this.fastStyle("height"),10)||0;a.borderBox||(n+=this.getOuterH())}return{width:k,height:n}},setBounds:function(k,n,t,w){this.setXY(k,n);return this.setSize(t,w)},
anchorPos:function(k,n,t,w,x,B){if(k.view){var F=k.absoluteXY(),G=k.getSize(true);k=[F[0],F[1],G.width,G.height]}G=this.getSize(true);F=G.width;G=G.height;var H=k[0],J=k[1],K=k[2];k=k[3];var y;y=n.charAt(0)==="l"?H-F:H+K;n=n.charAt(1)==="t"?J-G:J+k;if(t)if(t.charAt(0)==="h")y=t.charAt(1)==="l"?y-F:y+F;else n=t.charAt(1)==="u"?n-G:n+G;if(w){y+=w[0];n+=w[1]}if(x){w=a.getViewport();t=w.height;w=w.width;if(y<0){y=0;if(J+k>n&&J<n+G)n=J-G}if(y+F>w)y=J+k>n&&J<n+G?H-F:w-F;if(n<0&&J+k+G<=t)n=H+K>y&&H<y+F?
J+k:0;if(n+G>t&&J-G>=0)n=H+K>y&&H<y+F?J-G:t-G}F=[y,n];B&&this.setXY(F);return F},cset:function(k){u.parse(this,k);return this},clip:function(){var k=this.view;if(k._overflow)return this;this._overflow=k.style.overflow||"auto";if(this._overflow!=="hidden")k.style.overflow="hidden";return this},unclip:function(){if(!this._overflow)return this;this.view.style.overflow=this._overflow=="auto"?"":this._overflow;this._overflow=null;return this},copyViewport:function(k){k=a.$$(k);k.setXY(this.xy());k.setSize(this.getSize());
return this},focus:function(k){if(this.disabled)return this;var n=this.focusNode?this.dom(this.focusNode):this.view;if(k)(function(){try{n.focus()}catch(w){}}).timeout(k);else try{n.focus()}catch(t){}return this},cssText:function(k){if(k)if(typeof k=="string")for(var n=/\s?([a-z\-]*)\:\s?([^;]*);?/gi,t;(t=n.exec(k))!=null;)this.setStyle(t[1],t[2]);else if(typeof k=="object")for(n in k)this.setStyle(n,k[n]);else typeof k=="function"&&this.cssText(k.call());return this},noselect:function(){var k=this,
n=typeof this.unselectable,t=false;if(n!="undefined"&&n!="boolean"){t=true;k=this.fly(this.unselectable)}k.view.unselectable="on";k.noUp("selectstart");k.addClass("noselect");t&&k.unfly();return this},autoHeight:function(k,n){var t=this.getHeight();this.clip();this.view.style.height=1;setTimeout(function(){var w=C(this.view.scrollHeight,10);if(k)this.setHeight(t);else{this.setHeight(w);this.unclip();n&&n()}}.bind(this),0);return this},getScroll:function(){var k=this.view,n=d;if(k==n||k==n.body){if(a.ie&&
a.strict){k=n.documentElement.scrollLeft||n.body.scrollLeft||0;n=n.documentElement.scrollTop||n.body.scrollTop||0}else{k=window.pageXOffset||n.body.scrollLeft||0;n=window.pageYOffset||n.body.scrollTop||0}return{left:k,top:n}}else return{left:k.scrollLeft,top:k.scrollTop}},ancestorOf:function(k,n){k=k.view||k;var t=this.view;if(t.contains&&!a.safari)return t.contains(k);else if(t.compareDocumentPosition)return!!(t.compareDocumentPosition(k)&16);if(n===z)n=65535;k=k.parentNode;for(var w=d.body;k!=w&&
n>0&&k!==null;){if(k==t)return true;k=k.parentNode;n--}return false},domEvent:function(k,n,t,w,x,B){if(k=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||this.view.attachEvent))k="keydown";if(!this.observes)this.observes=[];var F=w||this;w=function(G){G=G||window.event;if(F.disabled){f.stop(G);return false}t&&f.stop(G);return n.call(F,G)};if(x){x=this.dom(x);if(!x)return this;this.observes.push([k,n,w,x,B])}else{x=this.view;this.observes.push([k,n,w])}if(x.addEventListener)x.addEventListener(k,
w,B);else x.attachEvent&&x.attachEvent("on"+k,w);return this},wheelEvent:function(k,n,t,w,x){a.ie||a.opera?this.domEvent("mousewheel",k,n,t,w,x):this.domEvent("DOMMouseScroll",k,n,t,w,x)},unEvent:function(k,n,t){if(k=="keypress"&&(navigator.appVersion.match(/ Konqueror | Safari | KHTML /)||this.view.attachEvent))k="keydown";var w=this.observes;if(w){t=t!==z?t.tagName?t:this.dom(t):this.view;for(var x=0,B=w.length;x<B;x++){var F=w[x];if(F[0]==k&&F[1]==n&&(F[3]==t||F[3]===z)){if(t.removeEventListener)t.removeEventListener(k,
F[2],F[4]);else t.detachEvent&&t.detachEvent("on"+k,F[2]);w.remove(x);return this}}}},bindEnter:function(k,n,t,w){return this.domEvent("keydown",function(x){if(f.isEnterKey(x)){n&&f.stop(x);k.call(this,x)}},false,t,w)},bindAlternateStyle:function(k,n,t,w,x,B,F,G,H){var J=k+"Node",K=k+"Target";G=G||this[J];var y=H||this[K];if(G){G=this.dom(G);delete this[J]}else G=this.view;if(y){y=this.dom(y);delete this[K]}else y=this.view;H=this;if(y==this.view){x=x||H[k+"Callback"];B=B||H[n+"Callback"]}this.domEvent(k,
function(E){var I=false;if(x)I=x.call(this,E);I!==true&&a.addClass(y,t)},w,F,G);this.domEvent(n,function(E){var I=false;if(B)I=B.call(this,E);I!==true&&a.delClass(y,t)},w,F,G);return this},bindHoverStyle:function(k,n,t,w,x,B,F){return this.bindAlternateStyle("mouseover","mouseout",k||this.hoverCS,n,t||this.onMouseHover,w||this.onMouseOff,x||this,B,F)},bindFocusStyle:function(k,n,t,w,x,B,F){return this.bindAlternateStyle("focus","blur",k,n,t||this.onfocusHover,w||this.onfocusOff,x||this,B,F)},bindClickStyle:function(k,
n,t,w,x,B,F){this.bindAlternateStyle("mousedown","mouseup",k,n,t,w,x,B,F);this.domEvent("mouseout",function(){this.docked||this.delClass(k)});return this},bindContext:function(k,n,t,w,x,B){if(this.contexted)return this;var F=w?this.dom(w):this.view;t||(t=this);var G=this;n=function(H){if(k)if(k.call(t,H,F)===false)return;f.un(d,"mousedown",arguments.callee);f.un(F,"mousedown",f.noUp);var J=F==G.view?G:a.fly(F);G.contexted=false;delete G.__contextedCb;x&&a.fly(x).delClass(B).unfly();J.display(false).unfly();
G.fire("contexted",false,H,F)};f.on(F,"mousedown",f.noUp);f.on(d,"mousedown",n);this.contexted=true;this.__contextedCb=n;x&&a.fly(x).addClass(B).unfly();this.fire("contexted",true,F);return this},releaseContext:function(){this.contexted&&this.__contextedCb()},$$:function(k){(k=a.$$(k,this.view))&&this.follow(k);return k},attr:function(k,n,t){if(k=this.dom(k))return k=a.attr(k,n,t)},setCloseable:function(k){this.closeable=k;var n=this.fly(this.closeNode||"_cls");n&&n.display(k).unfly();return this},
offsetsTo:function(k){var n=this.absoluteXY();k=a.fly(k);var t=k.absoluteXY();k.unfly();return[n[0]-t[0],n[1]-t[1]]},scrollIntoView:function(k,n){var t=k?k.view||k:a.$body.view,w=this.getHiddenAreaOffsetVeti(t);if(w!==false)t.scrollTop=w;if(n){w=this.getHiddenAreaOffsetHori(k);if(w!==false)t.scrollLeft=w}return this},scrollChildIntoView:function(k,n){this.fly(k).scrollIntoView(this.view,n).unfly();return this},getHiddenAreaOffsetVeti:function(k){var n=k.view||k,t=this.view,w=this.offsetsTo(n);k=C(n.scrollTop,
10);w=w[1]+k;t=t.offsetHeight;var x=w+t;n=n.clientHeight;var B=k+n;if(t>n||w<k)return w;else if(x>B){x-=n;if(k!=x)return x}return false},getHiddenAreaOffsetHori:function(k){var n=k.view||k,t=this.view;k=C(n.scrollLeft,10);var w=this.offsetsTo(n)[0]+k;t=t.offsetWidth;n=n.clientWidth;var x=w+t,B=k+n;if(t>n||w<k)return w;else if(x>B){x-=n;if(x!=k)return x}return false}});h.create=function(k,n){if(typeof k==="string")n=new h[k](n);else{n=new h;n.initialize(k)}return n};h.applyOption=function(k,n){k=a.fly(k);
k.initialize(n);k.render();k.unfly()};a.$$=function(k,n){if(!k||k.view)return k;var t="c"+a.uniqueID();if(!n){if(k=a.$(k)){k=new h(k);k.cacheId=t;e[t]=k}return k}if(k=n&&n.view?a.$(k,n.view):a.$(k,n)){k=new h(k);k.cacheId=t;e[t]=k}return k};g.register("flycomp",function(){var k=new h;k.__flied=0;return k});a.fly=function(k){if(k)if(typeof k=="string")k=a.$(k);else if(k.view){if(k.__flied!==z)k.__flied+=1;return k}if(!k){console.trace();throw"Node not found.";}var n=g.get("flycomp");n.view=k;return n};
if(a.ie){h.prototype.getOpacity=function(){var k=this.view;if(k.filters[0])return parseFloat(k.filters[0].Opacity/100);if(value=(this.getStyle(k,"filter")||"").match(/alpha\(opacity=(.*)\)/))if(value[1])return parseFloat(value[1])/100;return 1};h.prototype.setOpacity=function(k){var n=this.view.style;n.zoom=1;n.filter=(n.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(k==1?"":" alpha(opacity="+k*100+")");return this}}a.ui={ctypes:{},def:function(k,n){this.ctypes[k]=n},getCls:function(k){return this.ctypes[k]},
instance:function(k,n){if(typeof k==="string")return new this.ctypes[k](n);if(!k)return h.create();if(k.cacheId)return k;n=k.ctype;if(!n)return h.create(k);return new this.ctypes[n](k)}};a.ui.def("base",function(k){return h.create(k)});f.defUIReady=function(){a.$body=a.$$(d.body);if(d.body.lang!=="zh")d.body.lang="zh"}})(CC);
CC.util.BrushFactory={floatBrush:function(a,b){var e=Math.pow(10,a);switch(b){case "%":e*=100;var g=e/100;return function(f){return Math.round(f*e)/g+"%"};default:return function(f){return Math.round(f*e)/e}}},date:function(a){a||(a="yy/mm/dd");return function(b){return CC.dateFormat(b,a)}},get:function(a){if(!this.cache)this.cache={};var b=this.cache[a];if(!b)switch(a){case ".xx":b=CC.util.BrushFactory.floatBrush(2);this.reg(a,b);break;case ".xx%":b=CC.util.BrushFactory.floatBrush(2,"%");this.reg(a,
b);break}return b},reg:function(a,b){if(!this.cache)this.cache={};this.cache[a]=b}};CC.util.d2d={};CC.util.d2d.Point=function(a,b){this.x=a||0;this.y=b||0};CC.util.d2d.Rect=function(a,b,e,g){if(arguments.length===4){this.l=a||0;this.t=b||0;this.w=e||0;this.h=g||0}else{this.l=a[0];this.t=a[1];this.w=a[2];this.h=a[3]}this.valid=true};
CC.extend(CC.util.d2d.Rect.prototype,{valid:true,l:0,t:0,w:0,h:0,isEnter:function(a){if(this.valid){var b=a.x;a=a.y;return(b=b>=this.l&&b<=this.l+this.w&&a>=this.t&&a<=this.t+this.h)?this:false}return false},update:fGo,toString:function(){return this.valueOf()+""},valueOf:function(){return[this.l,this.t,this.w,this.h]}});
CC.create("CC.util.d2d.RectZoom",CC.util.d2d.Rect,function(a){var b=window.Math,e=b.max,g=b.min;return{pZoom:null,initialize:function(f){this.valid=true;f&&CC.extend(this,f);f=CC.delAttr(this,"rects");this.rects=[];if(f)for(var h=0,l=f.length;h<l;h++)this.add(f[h])},prepare:fGo,getRects:function(){return this.rects},add:function(f,h){f.pZoom&&f.pZoom.remove(f);this.rects.push(f);h&&this.update();f.pZoom=this;return this},remove:function(f,h){delete f.pZoom;this.rects.remove(f);h&&this.update();return this},
contains:function(f){for(var h=false,l,d=0,m=this.rects,o=m.length;d<o;d++){l=m[d];if(l===f){h=this;break}if(l.contains)if(h=l.contains(f))break}return h},isEnter:function(f){if(this.valid&&a.isEnter.call(this,f)){var h,l=this.rects,d=l.length,m;for(h=0;h<d;h++)if(m=l[h].isEnter(f))return m}return false},union:function(){var f,h=this.rects,l=h.length,d,m=[],o=[],q=[],p=[];if(l===0)m=o=q=p=0;else{for(f=0;f<l;f++){d=h[f];m.push(d.t);o.push(d.t+d.h);q.push(d.l);p.push(d.l+d.w)}q=g.apply(b,q);p=e.apply(b,
p);m=g.apply(b,m);o=e.apply(b,o)}this.l=q;this.t=m;this.w=p-q;this.h=o-m},update:function(){this.clear();this.prepare();var f,h=this.rects,l=h.length;for(f=0;f<l;f++)h[f].update();this.union()},clear:fGo}});
CC.create("CC.util.d2d.ComponentRect",CC.util.d2d.Rect,{z:-1,initialize:function(a,b){this.comp=a;this.valid=true;a.ownRect=this;b&&this.update()},update:function(){if(this.hidden){this.l=this.t=this.w=this.h=0;this.z=-1}else{var a=this.comp,b=a.getSize(),e=a.absoluteXY();this.z=a.getZ();this.l=e[0];this.t=e[1];this.w=b.width;this.h=b.height}},destory:function(){delete this.comp.ownRect;this.comp=null}});
CC.create("CC.util.AsynchronizeQueue",null,{openEvt:"open",finalEvt:"final",initialize:function(a){this.waitQueue=[];this.requestQueue=[];a&&CC.extend(this,a);this.connectorKeys={};this.connectors={};this.max=0},join:function(a){this.waitQueue.push(a);a.on(this.openEvt,this.getConnectorBinder(this.openEvt));this.max++;var b=CC.uniqueID().toString();this.connectorKeys[a]=b;this.connectors[b]=a;if(this.onincrease)this.onincrease.call(this.caller?this.caller:this,a,this);return b},out:function(a){if(this.waitQueue.indexOf(a)>=
0){this.waitQueue.remove(a);a.un(this.openEvt,this.getConnectorBinder(this.openEvt));this.onOut(a)}else if(this.requestQueue.indexOf(a)>=0){this.requestQueue.remove(a);a.un(this.finalEvt,this.getConnectorBinder(this.finalEvt));this.onOut(a)}},getConnector:function(a){return this.connectors[a]},isConnectorBusy:function(a){return(a=this.getConnector(a))&&a.busy},isConnectorLoaded:function(a){return(a=this.getConnector(a))&&a.loaded},onOut:function(a){delete this.connectors[CC.delAttr(a,this.connectorKeys)];
if(this.ondecrease)this.ondecrease.call(this.caller?this.caller:this,a,this);if(this.waitQueue.length==0&&this.requestQueue.length==0&&this.onempty){this.onempty.call(this.caller?this.caller:this,this);this.max=0}},getConnectorBinder:function(a){var b=this.connectorBinders;if(!b)b=this.connectorBinders={};var e=b[a];if(!e){switch(a){case this.finalEvt:e=this.onConnectorFinal.bindAsListener(this);break;case this.openEvt:e=this.onConnectorOpen.bindAsListener(this);break}if(e)b[a]=e}return e},onConnectorFinal:function(a){if(this.onfinal)this.onfinal.call(this.caller?
this.caller:this,a,this);this.out(a)},onConnectorOpen:function(a){this.waitQueue.remove(a);this.requestQueue.push(a);if(this.requestQueue.length===1)if(this.onfirstopen)this.onfirstopen.call(this.caller?this.caller:this,a,this);if(this.onopen)this.onopen.call(this.caller?this.caller:this,a,this);a.on(this.finalEvt,this.getConnectorBinder(this.finalEvt))}});
CC.create("CC.util.Tracker",null,{max:20,initialize:function(a){this.area=[];a&&CC.extend(this,a)},track:function(a){var b=this.area;b.indexOf(a)!==-1&&b.remove(a);b.push(a);b.length>this.max&&b.pop();__debug&&console.log("\u8bb0\u5f55:",a)},isValid:fGo,validCaller:null,pop:function(){for(var a=this.validCaller||this,b=this.area,e=b.length-1;e>=0;e--){__debug&&console.log("\u62b9\u9664:",this.isValid.call(a,b[e]),b[e]);if(this.isValid.call(a,b[e]))return b[e];b.pop()}},remove:function(a){this.area.remove(a)},
size:function(){return this.area.length}});
(function(){var a=window.CC,b=a.Base,e=b.prototype,g=a.ui;if(!a.layout)a.layout={};a.layout.def=function(d,m){this[d]=m;return this};a.create("CC.ui.Item",b,{});a.ui.def("item",a.ui.Item);a.create("CC.layout.Layout",null,{ct:false,items:false,layoutOnChange:false,deffer:false,initialize:function(d){d&&a.extend(this,d);(d=a.delAttr(this,"ct"))&&this.attach(d)},beforeAdd:fGo,itemCS:false,add:function(d,m){d.cacheId||(d=this.ct.instanceItem(d));var o=d.lyInf;if(o)m&&a.extend(o,m);else d.lyInf=o=m||{};
this.beforeAdd(d,o);this.itemCS&&d.addClassIf(this.itemCS);this.ct.add(d);if(this.isUp()){this.layoutOnChange?this.doLayout():this.layoutChild(d);d.rendered||d.render()}return this},isUp:function(){return!this.invalidate&&this.ct.rendered},display:function(d,m){d.display(m);this.layoutOnChange&&this.doLayout()},doLayout:function(){if(this.isUp())if(this.ct.hidden){__debug&&console.log(this,"\u5bb9\u5668\u5904\u4e8e\u9690\u85cf\u72b6\u6001,\u672a\u7acb\u5373\u5e03\u5c40..");this.defferArgs=arguments}else if(this.deffer!==
false){var d=a.$A(arguments),m=this;(function(){m.ct&&m.onLayout.apply(m,d)}).timeout(this.deffer)}else this.onLayout.apply(this,arguments)},cfgFrom:function(d){return d.lyInf||{}},insert:function(){this.layoutOnChange&&this.doLayout.bind(this).timeout(0)},layoutChild:fGo,remove:function(){this.layoutOnChange&&this.doLayout.bind(this).timeout(0)},fromArray:function(d){var m=this.ct,o=m.itemCls,q,p=m.itemCfg||false;if(typeof o==="string")o=g.ctypes[o];var v=this.invalidate;this.invalidate=true;for(var A=
0,z=d.length;A<z;A++){q=d[A];if(!q.cacheId){if(!q.ctype&&p)q=a.extendIf(q,p);q=m.instanceItem(q,o,true)}this.add(q)}this.invalidate=v;this.isUp()&&this.doLayout()},ctCS:false,wrCS:false,attach:function(d){this.ct=d;if(d.deffer!==undefined)this.deffer=d.deffer;this.ctCS&&d.addClass(this.ctCS);this.wrCS&&d.wrapper.addClass(this.wrCS);if(this.items){this.fromArray(this.items);delete this.items}if(d.items){this.fromArray(d.items);delete d.items}return this},detach:function(){if(this.ct)this.wrapper=this.ct=
null;return this},onLayout:function(){for(var d=0,m,o=this.ct.children,q=o.length;d<q;d++){m=o[d];this.layoutChild(m);m.rendered||m.render()}}});var f=a.layout.Layout.prototype,h=a.create(a.layout.Layout,{doLayout:function(){f.doLayout.call(this);this.doLayout=fGo}});a.layout.def("default",h);a.Tpl.def("CC.ui.Panel",'<div class="g-panel"></div>');a.create("CC.ui.ContainerBase",b,{children:null,eventable:true,ct:null,minH:0,minW:0,maxH:65535,maxW:65535,itemCls:a.ui.Item,autoRender:false,items:false,
array:false,initialize:function(){b.prototype.initialize.apply(this,arguments);if(this.array){this.fromArray(this.array);delete this.array}},keyEvent:undefined,useContainerMonitor:false,cancelClickBubble:false,clickEvent:false,selectionProvider:false,connectionProvider:false,initComponent:function(){e.initComponent.call(this);this.keyEvent&&this.bindKeyInstaller();this.useContainerMonitor&&this.clickEvent&&this.bindClickInstaller();this.selectionProvider&&this.getSelectionProvider();this.connectionProvider&&
this.getConnectionProvider();this.children=[];this.createLayout()},layout:"default",lyCfg:false,createLayout:function(){if(typeof this.layout==="string"){var d=this.lyCfg||{};d.ct=this;this.layout=new a.layout[this.layout](d);this.lyCfg&&delete this.lyCfg}else this.layout.attach(this)},ct:false,createView:function(){e.createView.call(this);if(this.ct){if(typeof this.ct==="string")this.ct=this.dom(this.ct)}else this.ct=this.view;if(!this.ct)this.ct=this.view;this.wrapper=this.ct==this.view?this:this.$$(this.ct)},
destoryed:false,destory:function(){this.destoryed=true;this.destoryChildren();var d=this.bndActs,m;if(d)for(;d.length>0;){m=d[0];this.unEvent(m[0],m[2],m[3]);d.remove(0)}this.layout.detach();this.wrapper=this.ct=null;e.destory.call(this)},onRender:function(){e.onRender.call(this);this.layout.doLayout()},_addNode:function(d,m){m===undefined?this.ct.appendChild(d):this.ct.insertBefore(this.ct.childNodes[m],d)},_removeNode:function(d){d.parentNode.removeChild(d)},add:function(d){d.cacheId||(d=this.instanceItem(d));
if(this.fire("beforeadd",d)!==false&&this.beforeAdd(d)!==false){this.onAdd.apply(this,arguments);this.afterAdd(d);this.fire("add",d)}return this},__click:false,onAdd:function(d){this.children.push(d);this._addNode(d.view);if(d.pCt){if(d.pCt!==this){d.pCt.remove(d);d.pCt=this}}else d.pCt=this;if(!this.useContainerMonitor&&this.clickEvent&&!d.__click){var m=d.__click=this.clickEventTrigger,o=this.clickEventNode?d.dom(this.clickEventNode):d.view;d.domEvent(this.clickEvent===true?"mousedown":this.clickEvent,
m,this.cancelClickBubble,null,o)}},beforeAdd:fGo,afterAdd:fGo,ctClickTrigger:function(d,m){!d.disabled&&!d.clickDisabled&&this.fire("itemclick",d,m)},clickEventTrigger:function(d){var m=this.pCt;this.clickDisabled||m.fire("itemclick",this,d)},remove:function(d){d=this.$(d);if(d.delegated){this.__delegations.remove(d);d.view.parentNode&&d.view.parentNode.removeChild(d.view)}else if(this.fire("beforeremove",d)!==false&&this.beforeRemove(d)!==false){this.onRemove.apply(this,arguments);this.fire("remove",
d)}return this},beforeRemove:fGo,onRemove:function(d){d.pCt=null;this.children.remove(d);this._removeNode(d.view)},removeAll:function(){var d,m=this.children;for(this.invalidate();m.length>0;){d=m[0];this.remove(d)}this.validate()},destoryChildren:function(){var d,m=this.children;for(this.invalidate();m.length>0;){d=m[0];this.remove(d);d.destory()}this.destoryed||this.validate()},$:function(d){if(d===null||d===undefined||d===false)return null;if(d.tagName)return b.byDom(d,this);if(typeof d==="number")return this.children[d];
if(d.view)return d;for(var m=this.children,o=0,q=m.length;o<q;o++)if(m[o].id==d)return m[o];return null},onShow:function(){e.onShow.call(this);var d=this.layout;if(d.defferArgs){__debug&&console.log(this,"\u5bb9\u5c40\u663e\u793a\u65f6\u5e03\u5c40..",d.defferArgs);d.doLayout.apply(d,d.defferArgs);d.defferArgs=false;if(this.shadow)(function(){this.shadow.reanchor().display(true)}).bind(this).timeout(d.deffer||0)}},indexOf:function(d){d=this.$(d);return!d?-1:this.children.indexOf(d)},size:function(){return this.children.length},
contains:function(d){d.type||(d=this.$(d));return d.pCt===this},insertBefore:function(d,m){this.insert(this.indexOf(m),d)},_insertBefore:function(d,m){this.ct.insertBefore(d,m)},insert:function(d,m){m.pCt===this&&this.indexOf(m)<d&&d--;if(this.fire("beforeadd",m)!==false&&this.beforeAdd(m)!==false){if(m.pCt&&m.rendered){m.pCt.remove(m);m.pCt=this}this.onInsert.apply(this,arguments);this.fire("add",m)}return this},onInsert:function(d,m){this.children.insert(d,m);(d=this.children[d+1])?this._insertBefore(m.view,
d.view):this._addNode(m.view)},clear:function(){for(var d=this.children,m=0,o=d.length;m<o;m++)this.remove(d[0]);return this},swap:function(d,m){var o=this.children,q=this.indexOf(d),p=this.indexOf(m);d=this.children[q];m=this.children[p];o[q]=m;o[p]=d;d=d.view;m=m.view;if(d.swapNode)d.swapNode(m);else{o=m.parentNode;q=m.nextSibling;if(q==d)o.insertBefore(d,m);else if(m==d.nextSibling)o.insertBefore(m,d);else{d.parentNode.replaceChild(m,d);o.insertBefore(d,q)}}return this},sort:function(d){var m=
this.children;d===undefined?m.sort():m.sort(d);d=document.createDocumentFragment();for(var o=0,q=m.length;o<q;o++)d.appendChild(m[o].view);this.ct.appendChild(d);this.sorted=true;return this},reverse:function(){var d=this.children;d.reverse();for(var m=document.createDocumentFragment(),o=0,q=d.length;o<q;o++)m.appendChild(d[o].view);this.ct.appendChild(m);return this},filter:function(d,m){m=m||window;a.each(this.children,function(){d.call(m,this)?this.display(1):this.display(0)});return this},filterBy:function(d,
m,o,q){for(var p=this.children,v=this.children.length,A=0,z=q||false,D,C;A<v;A++){q=p[A];if(z){if(q[m]===o)D=d.call(q)}else{C=q[m]||false;if(C==o)D=d.call(q)}if(D===false)break}return this},each:function(d,m){var o,q,p,v=this.children;o=0;for(p=v.length;o<p;o++){q=v[o];q=d.call(m||q,q,o);if(q===false)break}return q},parentOf:function(d){if(!d)return false;if(d.pCt==this)return true;var m=this;return a.eachH(d,"pCt",function(){if(this==m)return 1})==true},fromArray:function(d,m){m=m||this.itemCls;
if(typeof m==="string")m=a.ui.ctypes[m];for(var o,q=this.itemCfg||false,p=0,v=d.length;p<v;p++){o=d[p];if(!o.cacheId){if(!o.ctype&&q)o=a.extendIf(o,q);o=this.instanceItem(o,m,true)}this.add(o)}return this},instanceItem:function(d,m,o){if(!m){m=this.itemCls;if(typeof m==="string")m=a.ui.ctypes[m]}d||(d={});if(!d.cacheId){if(!o&&this.itemCfg)d=a.extendIf(d,this.itemCfg);d.pCt=this;d=d.ctype?g.instance(d):new (m||a.ui.Item)(d);if(d.array&&d.children){d.fromArray(d.array);delete d.array}}return d},bndActs:false,
itemAction:function(d,m,o,q,p,v){q=q||this;var A=function(z){var D=z.target||z.srcElement;if((v===undefined||D.tagName===v)&&D!==this.view)if(D=this.$(D))return D.disabled?false:m.call(q,D,z)};if(!this.bndActs)this.bndActs=[];this.bndActs.push([d,m,A,p]);this.domEvent(d,A,o,null,p);p=A=null;return this},unItemAction:function(d,m,o){for(var q=this.bndActs,p=0,v=q.length;p<v;p++){var A=q[p];if(A[0]===d&&A[1]===m&&A[3]===o){o!==undefined&&(o.tagName||this.dom(o));this.unEvent(d,A[2],A[3]);q.remove(p);
return this}}return this},bindKeyInstaller:function(){if(this.keyEvent===undefined)this.keyEvent=true;var d=this.keyEvent===true?"keydown":this.keyEvent,m=this.keyEventNode=this.keyEventNode?this.dom(this.keyEventNode):this.ct;if(m.tabIndex===-1){m.tabIndex=0;m.hideFocus="on"}this.domEvent(d,this._onKeyPress,this.cancelKeyBubble,null,m);return this},bindClickInstaller:function(){this.itemAction(this.clickEvent===true?"mousedown":this.clickEvent,this.ctClickTrigger,this.cancelClickBubble)},_onKeyPress:function(d){!this.disabled&&
this.fire("keydown",d)!==false&&this.onKeyPressing(d)},onKeyPressing:fGo,focus:function(d){if(this.disabled)return this;var m=this.keyEventNode||this.ct;if(d!==undefined)(function(){try{m.focus()}catch(q){}}).timeout(0);else try{m.focus()}catch(o){}return this},validate:function(){this.layout.invalidate=false;this.layout.doLayout();return this},invalidate:function(){this.layout.invalidate=true;return this},doLayout:function(){!this.layout.invalidate&&this.rendered&&this.layout.doLayout.apply(this.layout,
arguments);return this},autoHeight:function(){var d=this.ct;this.setSize(this.getWidth(true)+d.scrollWidth-d.clientWidth,this.getHeight(true)+d.scrollHeight-d.clientHeight);return this},center:function(d){var m,o=d?d.view?d.view:d:this.pCt?this.pCt.view:this.view.parentNode;if(!o)o=document.body;if(o==document.body||o==document.documentElement){m=a.getViewport();d=[0,0]}else{o=a.fly(o);m=o.getSize();d=o.absoluteXY();o.unfly()}o=(m.height-this.height)/2|0;this.setXY(Math.max(d[0]+((m.width-this.width)/
2|0),0),Math.max(d[1]+o-o/2|0,0));return this},byId:function(d,m,o){var q=[],p=null,v=this.children,A=this.children[0],z=0;m||(m="id");if(o)p=[];for(;A;){if(A[m]===d){if(!o)return A;p[p.length]=A}A.children&&A.children.length>0&&q.push(A);A=v[++z];if(!A)if(A=q.pop()){v=A.children;z=0;A=v[0]}}return p},eachH:function(d){var m=this.children,o,q=0,p=0,v=[];for(o=m[0];o;){o.children&&v.push(o);q++;if(d.call(o,p,q)===false)break;o=m[++p];if(!o)if(o=v.pop()){p=0;m=o.children;o=m[0]}}},getScrollor:function(){return this.scrollor||
this.height===false&&this.width===false&&this.pCt?this.pCt.wrapper:this.wrapper}});h=a.ui.ContainerBase;var l=a.ui.ContainerBase.prototype;l.find=l.byId;g.def("ct",h);a.create("CC.ui.Panel",h,function(d){return{ct:"_wrap",deffer:false,syncWrapper:true,initComponent:function(){var m=false,o=false,q=false,p=false;if(this.width!==false){m=this.width;this.width=false}if(this.height!==false){o=this.height;this.height=false}if(this.left!==false){q=this.left;this.left=false}if(this.top!==false){p=this.top;
this.top=false}if(this.insets){var v=this.insets;v[4]=v[0]+v[2];v[5]=v[1]+v[3]}d.initComponent.call(this);if(this.insets){v=this.insets;this.wrapper.setXY(v[3],v[0])}if(m!==false||o!==false)this.setSize(m,o);if(q!==false||p!==false)this.setXY(q,p)},getWrapperInsets:function(){var m=this.insets;if(!m){m=this.wrapper;this.insets=m=[parseInt(m.fastStyle("top"),10)||0,parseInt(m.fastStyle("right"),10)||0,parseInt(m.fastStyle("bottom"),10)||0,parseInt(m.fastStyle("left"),10)||0];m[4]=m[0]+m[2];m[5]=m[1]+
m[3]}return m},setSize:function(m,o,q){var p=this.width,v=this.height;if(!q){p=p===false?m:p===m?false:m;v=v===false?o:v===o?false:o}if(p!==false||v!==false){d.setSize.call(this,p,v);if(p!==false)p=this.width;if(v!==false)v=this.height;m=this.wrapper;if(m.view!==this.view&&this.syncWrapper){q=this.getWrapperInsets();o=p===false?p:Math.max(p-q[5],0);q=v===false?v:Math.max(v-q[4],0);m.setSize(o,q);if(o!==false)o=m.width;if(q!==false)q=m.height}else{o=p===false?p:Math.max(p-this.getOuterW(),0);q=v===
false?v:Math.max(v-this.getOuterH(),0)}this.fire("resized",o,q,p,v);this.doLayout(o,q,p,v)}return this},setXY:function(m,o){if(a.isArray(m)){o=m[1];m=m[0]}var q=0,p=0;if(m!==this.left&&m!==false||o!==this.top&&o!==false){if(m!==this.left&&m!==false){this.fastStyleSet("left",m+"px");q=m-this.left;this.left=m}else m=false;if(o!==this.top&&o!==false){this.fastStyleSet("top",o+"px");p=o-this.top;this.top=o}else o=false;if(m!==false||o!==false)this.fire("reposed",m,o,q,p)}return this}}});(function(d){var m=
{insets:[1,1,1,1],template:"WrapPanel",ct:"_wrap",innerCS:"g-borderpanel",wrCS:"g-borderpanel-wrap"};a.ui.BorderPanel=function(o,q){o||(o={});a.extendIf(o,m);o=new (q||d)(o);o.wrapper.addClassIf(o.wrCS);return o}})(a.ui.Panel);g.def("panel",a.ui.Panel)})();
(function(){function a(y){y=y||window.E;m.stop(y);return false}function b(){k||(k=K.$(v.dragZoom));if(k){if(v.ownRect)if(k.contains(v.ownRect)){H=v.ownRect.valid;v.ownRect.valid=false}k.update()}}function e(y){v=this;__debug&&console.group("\u62d6\u653e"+this);__debug&&console.log("beforedrag");if((!this.beforedrag||this.beforedrag(y)!==false)&&this.fire("beforedrag",y)!==false){w||(w=this);if(w!==this&&w.beforedrag)if(w.beforedrag(y)===false){w=v=false;return}C=v.absoluteXY();A=z=m.pageXY(y);m.stop(y);
if(!B){B=true;x||(x=this);if(!x.movesb)x.movesb=false;if(!w.drag)w.drag=false;m.on(q,"mouseup",l).on(q,"mousemove",h).on(q,"selectstart",a)}b();if(__debug&&k)console.log("\u5f53\u524dzoom:",this.dragZoom||k)}else v=false}function g(){var y=D;y[0]=z[0]-A[0];y[1]=z[1]-A[1];if(G){var E=G;if(y[0]<E[1])y[0]=E[1];else if(y[0]>E[0])y[0]=E[0];if(y[1]<E[3])y[1]=E[3];else if(y[1]>E[2])y[1]=E[2]}}function f(){if((t=k.isEnter(n))&&t.comp!==v){if(p!==t.comp){if(p!==null){if(__debug)console.log("\u79bb\u5f00:",
p.title||p);x.sbout&&x.sbout(p,v,J)}p=t.comp;if(p.disabled)p=null;else{if(__debug)console.log("\u8fdb\u5165:",p.title||p);x.sbover&&x.sbover(p,v,J)}}p&&x.sbmove&&x.sbmove(p,J)}else if(p!==null){if(__debug)console.log("\u79bb\u5f00:",p.title||p);x.sbout&&x.sbout(p,v,J);p=null}}function h(y){J=y||o.E;z=m.pageXY(y);n.x=z[0];n.y=z[1];g();if(!u){__debug&&console.log("dragstart       mouse x,y is ",z,"dxy:",D);if(!w.dragstart||w.dragstart(y,v)!==false)u=true}if((w.drag===false||w.drag(y)!==false)&&k)f();
m.stop(y)}function l(y){if(v){y=y||o.E;if(B){m.un(q,"mouseup",arguments.callee).un(q,"mousemove",h).un(q,"selectstart",a);if(u){__debug&&console.log("dragend         mouse delta x,y is ",D,",mouse event:",y);if(p!==null){x.sbdrop&&x.sbdrop(p,v,y);if(__debug)console.log(v.toString(),"\u4e22\u5728",p.title||p,"\u4e0a\u9762")}w.dragend&&w.dragend(y,v);u=false}p=null;if(k){k.clear();F=false;k=null}t=null;B=false}__debug&&console.log("afterdrag");w.afterdrag&&w.afterdrag(y);v.fire("afterdrag",y);if(H!==
undefined){v.ownRect.valid=H;H=undefined}v=null;x=w=G=false;J=null;__debug&&console.groupEnd()}}var d=window.CC;d.util.dd={};var m=d.Event,o=window,q=o.document,p=null,v=null,A,z,D=[0,0],C,u=false,k,n=new d.util.d2d.Point,t,w,x=false,B=false,F=false,G=false,H=undefined,J,K=d.util.dd.Mgr={zmCache:{root:new d.util.d2d.RectZoom},installDrag:function(y,E,I,N,L){if(E){y.draggable=true;if(L)(L=y.dom(L)||L)&&y.domEvent("mousedown",function(M){var O=m.element(M);if(O===L||O.id===L)K.startDrag(this,M)},false,
null,I);else y.domEvent("mousedown",e,false,null,I);if(N)y.beforedrag=function(){w=x=N}}else{y.draggable=false;y.unEvent("mousedown",e,I||y.dragNode)}},startDrag:function(y,E){e.call(y,E)},setSource:function(y){v=y;return this},setDragMonitor:function(y){DN=y;return this},setDropMonitor:function(y){w=y;return this},setMonitor:function(y){DN=w=y;return this},setZoom:function(y,E){(k=y)&&E&&k.update();return this},$:function(y,E){var I=this.zmCache[y];if(!I&&E){I=this.zmCache;if(y==="root")throw"can't named root";
if(typeof E==="string"){E=I[E];if(!E)throw"parent zoom doesn't exist.";}else if(E===true)E=I.root;I=I[y]=new d.util.d2d.RectZoom;E.add(I)}return I},setBounds:function(y){G=y;return this},getBounds:function(){return G},getRoot:function(){return this.zmCache.root},remove:function(y){var E=this.zmCache[y];if(E&&y!=="root"){E.pZoom.remove(E);delete this.zmCache[y]}return E},addComp:function(y,E){E=this.$(E,true);E.add(new d.util.d2d.ComponentRect(y));return this},removeComp:function(y,E){E=this.$(E);
var I=E.getRects();d.each(I,function(){if(this.comp===y){E.remove(this);this.destory();return false}});return this},getIMXY:function(){return A},getIEXY:function(){return C},getDXY:function(){return D},getXY:function(){return z},getSource:function(){return v},getTarget:function(){return p},update:function(){k&&k.update();return this},isDragging:function(){return u},resizeHelper:{resizeCS:"g-resize-ghost",maskerCS:"g-resize-mask",applyResize:function(y,E){this.resizing=y;this.applyLayer(y);this.applyMasker(y,
E)},applyLayer:function(y){var E=this.layer;if(!E)E=this.layer=d.Base.create({view:d.$C("DIV"),autoRender:true,cs:this.resizeCS,hidden:true});y?E.appendTo(q.body):E.del();E.display(y);return this},applyMasker:function(y,E){var I=this.masker;if(!I)I=this.masker=d.Base.create({view:d.$C("DIV"),autoRender:true,cs:this.maskerCS,hidden:true,unselectable:true});y&&d.ie&&I.setSize(d.getViewport());y?I.appendTo(q.body):I.del();I.display(y);E!==undefined&&I.fastStyleSet("cursor",E);return this}}};d.extendIf(d.Base.prototype,
{installDrag:function(y){K.installDrag(this,y);return this},getDDProvider:function(){return K},beforedrag:false,dragstart:false,dragend:false,afterdrag:false,drag:false,sbover:false,sbout:false,sbdrop:false,sbmove:false});d.create("CC.util.d2d.ContainerDragZoom",d.util.d2d.RectZoom,{prepare:function(){var y=this.ct.getScrollor().view,E=y.clientHeight,I=y.scrollTop,N=K.getSource();__debug&&console.group("zoom rects");var L=this;this.ct.each(function(M,O){if(this!==N){M=this.view;var P=M.offsetTop;
if(P+M.offsetHeight-I>0)if(P-I-E<0){L.add(new d.util.d2d.ComponentRect(this));__debug&&console.log("item index:",O)}else return false}});__debug&&console.groupEnd()},clear:function(){this.rects.clear()},addComp:function(y){if(d.isArray(y))for(var E=0,I=y.length;E<I;E++)this.addComp(y[E]);else this.add(new d.util.d2d.ComponentRect(y))}});d.ui.def("ctzoom",d.util.d2d.ContainerDragZoom);d.create("CC.util.dd.Indicator",d.ui.ContainerBase,{hidden:true,template:d.ie?'<table class="g-float-tip g-clear g-openhand"><tr><td><table class="tipbdy"><tr><td id="_tle" class="important_txt"></td></tr><tr><td id="_msg" class="important_subtxt"></td></tr></table></td></tr></table>':
'<div class="g-float-tip g-clear g-openhand"><div class="tipbdy"><div id="_tle" class="important_txt"></div><div id="_msg" class="important_subtxt"></div></div></div>',shadow:{ctype:"shadow",inpactY:-1,inpactH:5},setMsg:function(y,E){if(y!==false){if(!this.msgNode)this.msgNode=this.dom("_msg");this.msgNode.innerHTML=y}if(E!==undefined){if(!this.titleNode)this.titleNode=this.dom("_tle");this.titleNode.innerHTML=E}this.shadow&&this.shadow.resize()},prepare:function(y,E){if(y===undefined)y=15;if(E===
undefined)E=-10;this.rendered||this.render();var I=K.getIMXY();y+=I[0];E+=I[1];this.initX=y;this.initY=E;this.setXY(y,E);this.show();K.resizeHelper.applyMasker(true);K.resizeHelper.masker.addClass("g-openhand");this.appendTo(document.body)},setXY:function(){this.superclass.setXY.apply(this,arguments);this.shadow&&this.shadow.repos();return this},reanchor:function(){this.setXY(this.initX+D[0],this.initY+D[1])},end:function(){K.resizeHelper.applyMasker(false);K.resizeHelper.masker.delClass("g-openhand");
this.hide().del()}});d.ui.def("ddindicator",d.util.dd.Indicator);K.getIndicator=function(y){var E=this.indicator;if(!E)E=this.indicator=d.ui.instance(d.extend({ctype:"ddindicator"},y));return E}})();
(function(){var a=CC.ui.ContainerBase.prototype;CC.create("CC.util.ProviderBase",null,{initialize:function(b){this.inited=true;b&&CC.extend(this,b)},setTarget:function(b){this.t=b},each:function(){this.t.each.apply(this.t,arguments)}});CC.util.ProviderFactory={create:function(b,e,g){var f=b+"Provider",h=b.toLowerCase()+"Provider",l="CC.util."+f;CC.create(l,e||CC.util.ProviderBase,g);a["get"+f]=function(d,m){m=this[h];if(!m||m===true||!m.inited){var o=CC.getObjectLinkedValues(this,h,true);d&&o.insert(0,
d);d={};m=false;for(var q=0,p=o.length;q<p;q++){var v=o[q];if(v===true&&!m)m=CC.attr(window,l);if(typeof v==="string"&&d.ctype===undefined)d.ctype=v;else if(typeof v==="function"&&!m)m=v;else CC.extendIf(d,v)}if(!m&&!d.ctype)m=m=CC.attr(window,l);m=this[h]=m?new m(d):CC.ui.instance(d);m.setTarget(this)}return m}}}})();
CC.util.ProviderFactory.create("Connection",null,{indicatorDisabled:false,subscribe:false,reader:false,ajaxCfg:false,setTarget:function(){CC.util.ProviderBase.prototype.setTarget.apply(this,arguments);this.initConnection()},initConnection:function(){this.createSyncQueue();this.ajaxCfg&&this.ajaxCfg.url&&this.connect()},createSyncQueue:function(){this.syncQueue=new CC.util.AsynchronizeQueue({caller:this,onempty:this.onConnectorsFinish,onfirstopen:this.onConnectorFirstOpen})},defaultLoadSuccess:function(a){this.t.fire("defdataload",
a,this);var b=this.loadType;b==="html"?this.defaultDataProcessor(b,a.getText()):this.defaultDataProcessor(b,a.getJson())},defaultDataProcessor:function(a,b){switch(a){case "html":this.t.wrapper.html(b,true);break;default:this.reader?(this.t.layout||this.t).fromArray(CC.util.DataTranslator.get(this.reader).read(b,this.t)):(this.t.layout||this.t).fromArray(b);break}},_setConnectorMsg:function(a){this.caller.getIndicator().setTitle(a)},getIndicator:function(a){if(this.indicator&&this.indicator.cacheId)return this.indicator;
return this.createIndicator(a)},connect:function(a,b){var e=this.ajaxCfg;if(e){if(a)e.url=a}else e={url:a||this.url};e.caller=this;b&&CC.extend(e,b);if(!e.success){if(e.caller!==this)throw"\u5982\u679c\u4f7f\u7528\u9ed8\u8ba4\u5904\u7406,ajaxCfg\u7684caller\u987b\u4e3a\u5f53\u524d\u7684connection provider";e.success=this.defaultLoadSuccess}!this.indicatorDisabled&&!this.indicator&&this.getIndicator();return this.bindConnector(e)},getConnectionQueue:function(){return this.syncQueue},createIndicator:function(a){var b=
this.indicator||this.t.indicator;a||(a={});a.target=this.t;a.targetLoadCS=this.loadCS;if(typeof b=="function")a=new b(a);else{if(typeof b==="string"){if(!a.ctype)a.ctype=b}else typeof b==="object"&&CC.extendIf(a,b);if(!a.ctype)a.ctype="loading";a=CC.ui.instance(a)}this.indicator=a;this.t.follow(a);return a},bindConnector:function(a){var b=this.createConnector(a),e=this.syncQueue.join(b);this.subscribe&&b.to(this.t);b.url=CC.templ(this.t,a.url);b.connect();return e},createConnector:function(a){return new CC.Ajax(a)},
onConnectorsFinish:function(a){this.t.fire("connection:connectorsfinish",this,a);this.indicatorDisabled||this.getIndicator().stopIndicator()},onConnectorFirstOpen:function(a){this.t.fire("connection:connectorsopen",this,a);this.indicatorDisabled||this.getIndicator().markIndicator()}});
CC.util.ProviderFactory.create("Selection",null,function(a){var b=CC.Event,e={isValid:function(g){return!g.hidden&&!g.disabled}};return{mode:1,tracker:false,UP:b.UP,DOWN:b.DOWN,selectedIndex:-1,autoscroll:true,autoFocus:true,selectedCS:"selected",unselectable:false,initialize:function(){a.initialize.apply(this,arguments);if(this.tracker===true)this.tracker=new CC.util.Tracker(e)},setMode:function(g){this.selectAll(false);this.mode=g;return this},setTarget:function(g){g.keyEvent===undefined&&g.bindKeyInstaller();
a.setTarget.apply(this,arguments);g.on("itemclick",this.itemSelectionTrigger,this).on("keydown",this.navigateKey,this).on("remove",this.onItemRemoved,this);if(this.selected!==undefined){var f=this.selected;delete this.selected;this.select(f)}},setSelected:function(g,f,h,l){f?this.select(g,h,l):this.unselect(g);return this},itemSelectionTrigger:function(g,f){this.unselectable||(this.mode?this.select(g,false,f):this.setSelected(g,!this.isSelected(g),false,f))},onItemRemoved:function(g){if(g===this.selected){this.decorateSelected(g,
false);this.select(null)}else if(g===this.previous)this.previous=null;this.tracker&&this.tracker.remove(g)},navigateKey:function(g){var f=g.keyCode;if(f===this.UP){this.pre();b.stop(g)}else if(f===this.DOWN){this.next();b.stop(g)}else return this.defKeyNav(g)},defKeyNav:fGo,getSelection:function(){var g=this,f=[];g.t.each(function(){g.isSelected(this)&&f.push(this)});return f},decorateSelected:function(g,f){var h=this.selectedCS;h&&g.checkClass(h,f)},select:function(g,f,h){if(this.unselectable||this.disabled)return this;
var l=this.t;if(!l.rendered){l.on("rendered",function(){l.selectionProvider.select(g)});return this}g=this.t.$(g);if(!g)return this.selectAll(false);if(g.disabled)return this;if((this.forceSelect||!this.isSelected(g))&&this.t.fire("select",g,this,h)!==false){this.onSelectChanged(g,true,h);this.onSelect(g,f,h);this.t.fire("selected",g,this,h)}return this},unselect:function(g){g=this.t.$(g);this.onSelectChanged(g,false);return this},onSelect:function(g,f){this.autoFocus&&this.t.wrapper.focus();!f&&
this.autoscroll&&g.scrollIntoView(this.t.getScrollor());g.onselect&&g.onselect()},onSelectChanged:function(g,f){if(this.hasChanged(g,f)){var h=this.selected,l=this.previous;g&&this.decorateSelected(g,f);if(this.mode)if(f){h&&this.decorateSelected(h,false);this.previous=h;this.selected=g;this.selectedIndex=this.t.indexOf(g)}else{if(g===h){this.selected=null;this.selectedIndex=-1}}else if(f){this.previous=h;this.selected=g}else if(h===g){this.previous=null;this.selected=l}else if(g===l&&l)this.previous=
null;this.tracker&&h&&f&&this.tracker.track(h);this.t.fire("selectchange",g,h,this);if(__debug){console.group("selectchanged data");console.log("\u5f53\u524d\u9009\u62e9:",this.selected);console.log("\u524d\u4e00\u4e2a\u9009\u62e9:",this.previous);console.groupEnd()}}},hasChanged:function(g,f){return!(g===this.selected&&f)||!(g&&this.isSelected(g)===f)},isSelected:function(g){return!g.hidden&&g.hasClass(this.selectedCS)},isSelectable:function(){return!this.unselectable},setSelectable:function(g){this.unselectable=
!g},canNext:function(g){return!g.disabled&&!g.hidden},canPre:function(g){return!g.disabled&&!g.hidden},getStartIndex:function(){return this.selectedIndex},getNext:function(){for(var g=this.getStartIndex()+1,f=this.t.children,h=f.length;g<=h-1&&!this.canNext(f[g]);)g++;if(g>=0&&g<=h-1)return f[g];return null},getPre:function(){for(var g=this.getStartIndex()-1,f=this.t.children,h=f.length;g>=0&&!this.canPre(f[g]);)g--;if(g>=0&&g<=h-1)return f[g];return null},next:function(){var g=this.getNext();g&&
this.select(g);return g},pre:function(){var g=this.getPre();g&&this.select(g);return g},selectAllInner:function(g){var f=this;this.t.each(function(){f.setSelected(this,g,true)})},selectAll:function(g){if(this.mode&&!g){this.selected&&this.unselect(this.selected);return this}this.selectAllInner(g);return this},selectOpp:function(){var g=this;this.t.each(function(){g.setSelected(this,!g.isSelected(this),false)})}}});
CC.util.ProviderFactory.create("Validation",null,{errorCS:"g-form-error",focusOnError:true,decorateValidation:function(a,b){if(b)b.checkClass(b.errorCS||this.errorCS,!a)},validator:fGo,validateAll:function(a){var b=this,e=[],g;this.each(function(){g=b.validate(this,e,a);if(g!==true){if(e.length===1&&b.focusOnError)try{this.focus()}catch(f){}if(g===null)return false}});return e.length?e:true},validate:function(a,b,e){b||(b=[]);var g;g=this.validator(a,b,e);if(this.t.fire("validation:start",a,b,e)===
false)g=null;if(b.length>0){if(g!==null)g=false}else g=true;this.notifyValidation(!!g,a,b,e);return g},notifyValidation:function(a,b,e,g){this.decorateValidation(a,b,e,g);this.t.fire(a?"validation:success":"validation:failed",b,e,g,this);return this},isInvalid:function(a,b){var e=[];return this.validate(a,e,b)===true?false:e}});
CC.util.ProviderFactory.create("Store",null,{enableIndicator:true,modifyUrl:false,addUrl:false,delUrl:false,updateIdOnAdd:true,shareParams:false,setupUrlFromItem:true,submitModify:true,isResponseOk:function(a){return CC.util.StoreProvider.isResponseOk&&CC.util.StoreProvider.isResponseOk(a)||true},mappingUrl:function(a,b){if(a){if(this.shareParams)a=CC.templ(this.shareParams,a,2,true);if(b&&this.setupUrlFromItem)a=CC.templ(b,a,2,true)}return a},getDelUrl:function(a){return this.mappingUrl(this.delUrl,
a)},getDelQuery:function(a){var b="";if(a){b=this.itemQueryTempl||"";if(this.shareParams)b=CC.templ(this.shareParams,b,2,true);if(b)b=CC.templ(a,b)}if(this.shareParams){if(b)b+="&";b+=CC.queryString(this.shareParams)}return b},getSaveUrl:function(a,b){return this.mappingUrl(b?this.addUrl:this.modifyUrl,a)},onSaveFail:fGo,beforeDel:function(a){return this.t.getValidationProvider().isInvalid(a,"del")===false},del:function(a){if(a&&this.isNew(a)){a.pCt.remove(a);a.destory()}else this.beforeDel(a)!==
false&&this.t.fire("store:beforedel",a,this)!==false&&this.onDel(a);return this},delAll:function(){var a=this;this.each(function(){a.del(this)})},delSelection:function(){var a=this;CC.each(this.t.getSelectionProvider().getSelection(),function(){a.del(this)})},onDel:function(a){this.t.getConnectionProvider().connect(this.getDelUrl(a),{method:"POST",data:this.getDelQuery(a),caller:this,success:function(b){if(this.isResponseOk(b)){this.afterDel(a);this.t.fire("store:afterdel",a,b,this)}else b.failure.call(b.caller,
b)},failure:function(b){this.onDelFail(a,b);this.t.fire("store:delfail",a,b,this)}})},onDelFail:fGo,afterDel:function(a){if(a){a.pCt.remove(a);a.destory()}},save:function(a){var b=this.isNew(a);this.isModified(a)&&this.beforeSave(a,b)!==false&&this.t.fire("store:beforesave",a,b,this)!==false&&this.onSave(a,b);return this},each:function(a){var b=this;this.filterChanged?this.t.each(function(){if(b.isNew(this)||b.isModified(this))a.apply(this,arguments)}):CC.util.StoreProvider.prototype.each.apply(this,
arguments)},saveAll:function(a){if(!a)if(this.t.getValidationProvider().validateAll()!==true)return this;var b=this;this.each(function(){b.save(this,true)});return this},createNew:function(a,b){a=this.t.instanceItem(a);this.decorateNew(a,true);(this.t.layout||this.t).add(a);b&&a.scrollIntoView(this.t.getScrollor());return a},beforeSave:function(a){return this.t.getValidationProvider().isInvalid(a,"save")===false},onSave:function(a,b){this.t.getConnectionProvider().connect(this.getSaveUrl(a,b),{method:"POST",
caller:this,data:this.queryString(a,this.shareParams),success:function(e){if(this.isResponseOk(e)){this.decorateModified(a,false);b&&this.decorateNew(a,false);this.afterSave(a,b,e);this.t.fire("store:aftersave",a,b,e,this)}else e.failure.call(e.caller,e)},failure:function(e){this.onSaveFail(a,b,e);this.t.fire("store:savefail",a,b,e,this)}})},afterSave:function(a,b,e){if(b&&this.updateIdOnAdd)a.id=this.getCreationId(e)},getCreationId:function(a){return(a.getText()||"").trim()},decorateNew:function(a,
b){if(a)a.newed=b;return this},decorateModified:function(a,b){if(a)a.modified=b;return this},isModified:function(a){return a?a.modified:false},isModifiedAll:function(){var a=this,b=false;this.each(function(){if(a.isModified(this)){b=true;return false}});return b},isNew:function(a){return a?a.newed:false},itemQueryTempl:false,queryString:function(a,b){var e="";if(a){e=this.itemQueryTempl||"";if(b)e=CC.templ(b,e,2,true);if(e)e=CC.templ(a,e,2,true);e=this.getItemQuery(a,e)}if(b){if(e)e+="&";e+=CC.queryString(b)}return e},
getItemQuery:fGo});CC.util.Validators={NoEmpty:function(a){if(!a||a.trim()=="")return"\u8be5\u9879\u4e0d\u80fd\u4e3a\u7a7a";return true},Mail:function(a){return!CC.isMail(a)?"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e":true}};
(function(){var a=CC.Event,b=CC.util.dd.Mgr;CC.create("CC.util.dd.AbstractCtMonitor",null,{initialize:function(e){e&&CC.extend(this,e);(e=this.zoom)||(e={ctype:"ctzoom"});if(e.ctype!==undefined)e=this.zoom=CC.ui.instance(e);this.pZoom&&this.pZoom.add(e)},trigger:"_dragger",dragCS:false,indicator:false,mgrIndicator:true,beforedrag:function(e){var g=a.element(e);if(g.id!==this.trigger)return false;b.setSource(this.ct.$(g));a.stop(e)},dragstart:function(e,g){b.setZoom(this.pZoom||this.zoom,true);this.dragCS&&
g.addClass(this.dragCS);this.mgrIndicator&&b.getIndicator().prepare()},getIndicator:function(){var e=this.indicator;if(e&&!e.cacheId){if(!e.showTo)e.showTo=document.body;this.indicator=e=CC.ui.instance(e)}return e},drag:function(){this.mgrIndicator&&b.getIndicator().reanchor()},dragend:function(e,g){this.indicator&&this.getIndicator().hide();this.dragCS&&g.delClass(this.dragCS);this.mgrIndicator&&b.getIndicator().end()},sbover:fGo,sbout:fGo,sbdrop:fGo,afterdrag:fGo})})();
CC.util.DataTranslator={trans:{array:{read:function(a){for(var b=0,e=a.length;b<e;b++)a[b]={title:a[b]};return a}},gridmaptranslator:{read:function(a,b){var e=b.grid.header.children,g={},f=0,h;b=0;for(h=e.length;b<h;b++)if(e[b].dataCol){g[e[b].id]=f;f++}e=a.shift();f=[];var l;if(e){b=0;for(h=e.length;b<h;b++){l=e[b];if(CC.isArray(l)){l[0]=g[l[0]];l._isa=true}else if(g[l]!==undefined)e[b]=g[l]}var d,m,o,q,p,v;for(b=0;b<h;b++){o=e[b];m=typeof o==="number";l=0;for(g=a.length;l<g;l++){(d=f[l])||(d=f[l]=
{array:[]});if(m)d.array[o]={title:a[l][b]};else if(o._isa){q=a[l][b];v=d.array[o[0]]={title:q[0]};d=1;for(p=q.length;d<p;d++)v[o[d]]=q[d]}else d[o]=a[l][b]}}}return f}},gridarraytranslator:{read:function(a){for(var b=CC.util.DataTranslator.get("array"),e=0,g=a.length;e<g;e++)a[e]={array:b.read(a[e])};return a}}},reg:function(a,b){this.trans[a]=b;return this},get:function(a){return this.trans[a]}};
(function(){var a=window.CC,b=a.ui,e=b.ContainerBase,g=a.layout.Layout.prototype,f=window.Math,h=a.util.dd.Mgr,l;a.Tpl.def("CC.ui.BorderLayoutSpliter",'<div class="g-layout-split"></div>').def("CCollapseBarH",'<table cellspacing="0" cellpadding="0" border="0" class="g-layout-split"><tr><td class="cb-l"></td><td class="cb-c"><div class="expander" id="_expander"><a class="nav" id="_navblock" href="javascript:fGo()"></a></div></td><td class="cb-r"></td></tr></table>').def("CCollapseBarV",'<table cellspacing="0" cellpadding="0" border="0" class="g-layout-split"><tr><td class="cb-l"></td></tr><tr><td class="cb-c"><div class="expander" id="_expander"><a class="nav" id="_navblock" href="javascript:fGo()"></a></div></td></tr><tr><td class="cb-r"></td></tr></table>');
b.BorderLayoutSpliter=a.create(a.Base,function(d){var m;return{type:"CC.ui.BorderLayoutSpliter",ghostCS:"g-layout-sp-ghost",initComponent:function(){this.ct=this.layout.ct.wrapper;if(this.dir=="north"||this.dir=="south")this.dxDisd=true;d.initComponent.call(this);h.installDrag(this,true)},getRestrict:function(){var o=this.layout,q=this.ct,p,v,A=this.dir,z=o[A],D=z.lyInf,C=o.vgap,u=o.hgap,k=D.gap==l?C:D.gap,n=D.gap==l?u:D.gap;D=o.cgap;var t=q.height;q=q.width;switch(A){case "north":v=-1*z.height;p=
t+v-k;if(o=o.south){k=o.lyInf;if(k.cbar&&!k.cbar.hidden){D=k.cgap===l?D:k.cgap;p-=D}if(!o.hidden&&!o.contexted)p-=o.height+(k.gap==l?C:k.gap)}if(p>z.maxH-z.height)p=z.maxH-z.height;if(f.abs(v)>z.height-z.minH)v=-1*(z.height-z.minH);break;case "south":p=z.height;v=-1*t+p+k;if(o=o.north){k=o.lyInf;if(k.cbar&&!k.cbar.hidden){D=k.cgap===l?D:k.cgap;v+=D}if(!o.hidden&&!o.contexted)v+=o.height+(k.gap==l?C:k.gap)}if(p>z.height-z.minH)p=z.height-z.minH;if(f.abs(v)>z.maxH-z.height)v=-1*(z.maxH-z.height);break;
case "west":v=-1*z.width;p=q+v-n;if(o=o.east){k=o.lyInf;if(k.cbar&&!k.cbar.hidden){D=k.cgap===l?D:k.cgap;p-=D}if(!o.hidden&&!o.contexted)p-=o.width+(k.gap==l?u:k.gap)}if(p>z.maxW-z.width)p=z.maxW-z.width;if(f.abs(v)>z.width-z.minW)v=-1*(z.width-z.minW);break;case "east":p=z.width;v=-1*q+p+n;if(o=o.west){k=o.lyInf;if(k.cbar&&!k.cbar.hidden){D=k.cgap===l?D:k.cgap;v+=D}if(!o.hidden&&!o.contexted)v+=o.width+(k.gap===l?u:k.gap)}if(p>z.width-z.minW)p=z.width-z.minW;if(f.abs(v)>z.maxW-z.width)v=-1*(z.maxW-
z.width);break}return A==="west"||A==="east"?[p,v,0,0]:[0,0,p,v]},applyGhost:function(o){var q=this.splitGhost;if(!q)q=this.splitGhost=this.$$(a.$C({tagName:"DIV",className:this.ghostCS}));if(o){this.copyViewport(q);m=[q.left,q.top];q.appendTo(this.ct)}else q.del();return q},beforedrag:function(){this.applyGhost(true);h.setBounds(this.getRestrict());h.resizeHelper.applyMasker(true);h.resizeHelper.masker.fastStyleSet("cursor",this.fastStyle("cursor"))},drag:function(){var o=h.getDXY();h.getIEXY();
this.dxDisd?this.splitGhost.setTop(m[1]+o[1]):this.splitGhost.setLeft(m[0]+o[0])},dragend:function(){var o=this.layout[this.dir],q=h.getDXY(),p=o.lyInf;q=this.dxDisd?this.dir==="north"?o.height+q[1]:o.height-q[1]:this.dir==="west"?o.width+q[0]:o.width-q[0];if(p.autoCollapseWidth!==false&&q<=(p.autoCollapseWidth||40))this.layout.collapse(o,true);else{this.dxDisd?o.setHeight(q):o.setWidth(q);this.layout.doLayout()}},afterdrag:function(){this.applyGhost(false);h.resizeHelper.applyMasker(false);h.resizeHelper.masker.fastStyleSet("cursor",
"")}}});b.BorderLayoutCollapseBar=a.create(e,{type:"CC.ui.BorderLayoutCollapseBar",hidden:true,innerCS:"g-layout-cbar",ct:"_expander",compContextedCS:"g-layout-contexted",sliperCS:"g-layout-sliper g-f1",navBlockCS:{east:"g-nav-block-l",west:"g-nav-block-r",south:"g-nav-block-u",north:"g-nav-block-d"},initComponent:function(){this.template=this.dir==="south"||this.dir==="north"?"CCollapseBarH":"CCollapseBarV";e.prototype.initComponent.call(this);if(this.dir==="west"||this.dir==="east")this.addClass(this.innerCS+
"-v");this.centerExpander=this.dom("_expander");this.navBlock=this.dom("_navblock");a.fly(this.navBlock).addClass(this.navBlockCS[this.dir]).unfly();this.domEvent("mousedown",this.onBarClick,true).domEvent("mousedown",this.onNavBlockClick,true,null,this.navBlock);this.sliperEl=a.$C({tagName:"A",className:this.sliperCS,href:"javascript:fGo()"});this.comp.append(this.sliperEl);this.comp.domEvent("click",this.sliperAction,false,null,this.sliperEl)},destory:function(){this.sliperEl=this.navBlock=this.centerExpander=
null;this.compShadow&&this.compShadow.destory();e.prototype.destory.call(this)},sliperAction:function(){this.pCt.layout.collapse(this,true)},onNavBlockClick:function(){var d=this.comp;d.setXY(1E4,1E4);d.contexted&&d.releaseContext();this.itsLayout.collapse(d,false)},makeFloat:function(){var d=this.comp;d.addClass(this.compContextedCS).show();this.setCompContextedBounds();var m=d.absoluteXY();d.appendTo(document.body).setXY(m);d.collapse&&d.collapsed&&d.collapse(false);this.getShadow().attach(d).display(true);
d=d.lyInf;if(!d.cancelAutoHide){this.resetAutoHideTimer();d.autoHideTimer=this.onTimeout.bind(this).timeout(d.autoHideTimeout||5E3)}},getShadow:function(){var d=this.compShadow;if(!d)d=this.compShadow=b.instance("shadow",{inpactH:9,inpactY:-2,inpactX:-4,inpactW:10});return d},onTimeout:function(){var d=this.comp;d.contexted?d.releaseContext():this.unFloat();this.resetAutoHideTimer()},resetAutoHideTimer:function(){var d=this.comp.lyInf;if(d.autoHideTimer){clearTimeout(d.autoHideTimer);delete d.autoHideTimer}},
unFloat:function(){var d=this.comp;d.lyInf.autoHideTimer&&this.resetAutoHideTimer();d.pCt._addNode(d.view);d.delClass(this.compContextedCS);this.getShadow().detach()},onCompReleaseContext:function(){this.pCt.layout.cfgFrom(this).cbar.unFloat()},onBarClick:function(){var d=this.comp;if(d.contexted)d.releaseContext();else{d.bindContext(this.onCompReleaseContext,true,null,null,this.navBlock,this.navBlockCS[this.dir]+"-on");this.makeFloat()}},setCompContextedBounds:function(){var d=this.comp,m=this.dir;
if(m==="west")d.setBounds(this.left+this.width+1,this.top,false,this.height);else if(m==="east")d.setBounds(this.left-d.width-1,this.top,false,this.height);else m==="north"?d.setBounds(this.left,this.top+this.height+1,this.width,false):d.setBounds(this.left,this.top-d.height-1,this.width,false)},setSize:function(){e.prototype.setSize.apply(this,arguments);var d;if(this.dir==="north"||this.dir==="south"){d=f.max(0,this.width-6)+"px";this.centerExpander.style.width=d;if(a.ie)this.centerExpander.parentNode.style.width=
d}else{d=f.max(0,this.height-6)+"px";this.centerExpander.style.height=d;if(a.ie)this.centerExpander.parentNode.style.height=d}}});a.create("CC.layout.BorderLayout",a.layout.Layout,{hgap:5,vgap:5,cgap:32,cpgap:5,wrCS:"g-borderlayout-ct",itemCS:"g-borderlayout-item",separatorVCS:"g-ly-split-v",separatorHCS:"g-ly-split-h",add:function(d,m){g.add.call(this,d,m);var o,q;if(!m)m=d.lyInf;o=m.dir;q=m.split;o||(o="center");this[o]=d;if(q&&o!=="center"){q=m.separator=new b.BorderLayoutSpliter({dir:o,layout:this});
q.addClass(o==="west"||o==="east"?this.separatorVCS:this.separatorHCS);q.appendTo(this.ct.ct).show()}d.addClass(this.itemCS+"-"+(o||"center"));m.collapsed===l?this.doLayout():this.collapse(d,m.collapsed);return this},getCollapseBar:function(d){var m,o;m=d.lyInf;o=m.cbar;if(!o&&!m.noSidebar){o=m.cbar=new b.BorderLayoutCollapseBar({dir:m.dir,comp:d,itsLayout:this,autoRender:true});o.addClass(o.innerCS+"-"+m.dir).appendTo(this.ct.ct)}return o},collapse:function(d,m){var o=this.getCollapseBar(d),q=d.lyInf;
q.collapsed=m;q.separator&&q.separator.display(!m);d.collapse&&d.collapse(m);o&&o.display(m);d.display(!m);this.doLayout()},onLayout:function(){g.onLayout.call(this);var d=this.ct.wrapper,m=d.getWidth(true);d=d.getHeight(true);var o=0,q=0,p=this.north,v,A,z=this.vgap,D=this.cgap,C=this.cpgap,u=C+C,k=this.hgap,n,t;if(p){n=p.lyInf;if((v=n.cbar)&&!v.hidden){t=n.cgap===l?D:n.cgap;v.setBounds(o+C,q+C,m-u,t-u);t=n.cgap===l?D:n.cgap;q+=t}if(!p.hidden&&!p.contexted){v=p.getHeight(true);p.setBounds(o,q,m,
p.height);q+=v;t=n.gap===l?z:n.gap;(A=n.separator)&&A.setBounds(o,q,m,t);q+=t}p.contexted&&p.releaseContext()}if(p=this.south){n=p.lyInf;if((v=n.cbar)&&!v.hidden){t=n.cgap===l?D:n.cgap;d-=t;v.setBounds(o+C,d+C,m-u,t-u)}if(!p.hidden&&!p.contexted){v=p.getHeight(true);d-=v;p.setBounds(o,d,m,p.height);t=n.gap===l?z:n.gap;A=n.separator;d-=t;A&&A.setBounds(o,d,m,t)}p.contexted&&p.releaseContext()}d-=q;if(p=this.east){n=p.lyInf;if((v=n.cbar)&&!v.hidden){t=n.cgap===l?D:n.cgap;m-=t;v.setBounds(m+C,q,t-u,
d)}if(!p.hidden&&!p.contexted){v=p.getWidth(true);m-=v;p.setBounds(m,q,p.width,d);A=n.separator;t=n.gap===l?k:n.gap;m-=t;A&&A.setBounds(m,q,t,d)}p.contexted&&p.releaseContext()}if(p=this.west){n=p.lyInf;if((v=n.cbar)&&!v.hidden){t=n.cgap===l?D:n.cgap;v.setBounds(o+C,q,t-u,d);o+=t;m-=t}if(!p.hidden&&!p.contexted){v=p.getWidth(true);p.setBounds(o,q,p.width,d);o+=v;t=n.gap===l?k:n.gap;A=n.separator;m-=v+t;A&&A.setBounds(o,q,t,d);o+=t}p.contexted&&p.releaseContext()}(p=this.center)&&p.setBounds(o,q,m,
d)},remove:function(d){var m=d.lyInf;delete this[m.dir];var o=m.separator;if(o){o.destory();delete m.separator}if(o=m.cbar){o.destory();delete m.cbar}g.remove.apply(this,arguments)},detach:function(){var d=this;this.invalidated=true;a.each(["east","south","west","north","center"],function(){d[this]&&d.remove(d[this])});g.detach.call(this)}});a.layout.def("border",a.layout.BorderLayout)})();
(function(){var a=CC.layout,b=a.Layout,e=b.prototype,g=window.Math,f=CC.Base;CC.create("CC.layout.CardLayout",b,{wrCS:"g-card-ly-ct",layoutChild:function(h){var l=this.ct.wrapper.getContentSize(true);h.rendered?h.setSize(l[0],l[1]):f.prototype.setSize.apply(h,l)}});a.def("card",a.CardLayout);CC.create("CC.layout.QQLayout",b,{wrCS:"g-card-ly-ct",beforeAdd:function(h,l){h.fastStyleSet("position","absolute").setLeft(0);if(l&&l.collapsed===false){h.collapse(false);this.frontOne=h}else h.collapse(true);
e.beforeAdd.apply(this,arguments)},onLayout:function(){e.onLayout.apply(this,arguments);var h=this.frontOne,l=this.ct,d=l.wrapper.height,m=l.wrapper.width,o,q,p,v,A=l.children;v=l.size();for(p=o=0;o<v;o++){q=A[o];if(!q.hidden){if(q==h)break;q.setBounds(false,p,m,q.minH);d-=q.height;p+=q.height}}h&&h.setTop(p);v=v-1;for(p=l.wrapper.height;v>o;v--){q=A[v];p-=q.minH;q.setBounds(false,p,m,q.minH);d-=q.height}h&&h.setSize(m,d)},collapse:function(h,l){var d=h.lyInf,m=this.frontOne;if(d.collapsed!==l){if(m&&
m!==h){m.collapse&&m.collapse(true);m.lyInf.collapsed=true}h.collapse&&h.collapse(l);this.frontOne=(d.collapsed=l)?null:h;this.doLayout();this.ct.fire("collapsed",h,l)}}});a.def("qq",a.QQLayout);CC.create("CC.layout.RowLayout",b,{wrCS:"g-row-ly",onLayout:function(){var h=this.ct.wrapper,l=h.getWidth(true);h=h.getHeight(true);var d,m,o,q=this.ct.children,p,v,A=[];d=0;for(m=q.length;d<m;d++){o=q[d];if(!o.hidden){p=o.lyInf;switch(p.h){case "auto":case undefined:h-=o.getHeight();break;case "lead":A[A.length]=
o;break;default:v=p.h;if(CC.isNumber(v))if(v>=1){o.setHeight(v);h-=o.height}else if(v>=0){v=g.floor(v*h);o.setHeight(v);h-=o.height}}p=p.w;if(p===undefined)o.setWidth(l);else p<1&&o.setWidth(g.floor(p*l))}}d=0;for(m=A.length;d<m;d++){o=A[d];p=o.lyInf;v=p.len;v=CC.isNumber(v)?g.floor(v*h):g.floor(h/(m-d));o.setHeight(v);h-=o.height}d=0;for(m=q.length;d<m;d++){o=q[d];o.rendered||o.render()}}});a.RowLayout.prototype.layoutChild=a.RowLayout.prototype.onLayout;a.def("row",a.RowLayout);CC.create("CC.layout.TableLayout",
b,{attach:function(h){this._items=h.lyCfg&&h.lyCfg.items;h._addNode=h._removeNode=fGo;e.attach.apply(this,arguments)},fromArray:function(h){var l=h.length,d,m,o,q=[];for(d=0;d<l;d++){o=h[d];if(CC.isArray(o))for(m=0;m<o.length;m++)o[m]&&o[m].ctype&&q.push(o[m]);else o&&o.ctype&&q.push(o)}e.fromArray.call(this,q)},onLayout:function(){if(!this.layouted){e.onLayout.apply(this,arguments);this.layouted=true;var h=this.tableEl,l=this.tableEl=CC.$C("TABLE"),d=this.ct;l.className="g-ly-tbl";if(this.tblCs){CC.fly(l).addClass(this.tblCs).unfly();
delete this.tblCs}h&&f.applyOption(l,h);if(this.group){var m=this.group,o=CC.$C("COLGROUP"),q=m.cols,p;for(h=0;h<q;h++){p=CC.$C("COL");m[h]&&f.applyOption(p,m[h]);o.appendChild(p)}delete this.group;l.appendChild(o)}m=CC.$C("TBODY");if(o=this._items){q=o.length;p=d.children;var v,A,z,D,C,u,k,n;for(A=h=0;h<q;h++){r=o[h];C=CC.$C("TR");if(CC.isArray(r)){v=0;for(D=r.length;v<D;v++)if(z=r[v]){k=z.td;n=z.ctype;if(!k&&!n)f.applyOption(C,z);else{u=CC.$C("TD");u.className="tbl-td";z.tdcs&&CC.fly(u).addClass(z.tdcs).unfly();
if(k){if(k.cols){u.colSpan=k.cols;delete k.cols}f.applyOption(u,k)}if(n){z=p[A++];u.appendChild(z.view)}C.appendChild(u)}}else{u=CC.$C("TD");u.className="tbl-td";C.appendChild(u)}}else{u=CC.$C("TD");if(r.td){k=r.td;if(k.cols){u.colSpan=k.cols;delete u.cols}f.applyOption(u,k)}r.tr&&f.applyOption(C,r.tr);if(r.ctype){z=p[A++];u.appendChild(z.view)}C.appendChild(u)}m.appendChild(C)}}l.appendChild(m);d.wrapper.append(l);delete this._items}}});CC.layout.def("table",CC.layout.TableLayout)})();
CC.create("CC.layout.TablizeLayout",CC.layout.Layout,{attach:function(a){var b=this;this.tableEl=CC.Tpl.forNode('<table class="g-ly-tablize"><tr id="_tr"></tr></table>');this.trEl=CC.$("_tr",this.tableEl);a._addNode=function(e){var g=CC.$C("TD");g.className="tblly-td";g.appendChild(e);b.trEl.appendChild(g)};a.wrapper.append(this.tableEl);CC.layout.Layout.prototype.attach.apply(this,arguments)},add:function(a){CC.layout.Layout.prototype.add.apply(this,arguments);if(a.lyInf&&a.lyInf.separator){this.addSeparator();
delete a.lyInf.separator}},onLayout:function(){if(!this.layouted){this.layouted=true;CC.layout.Layout.prototype.onLayout.apply(this,arguments)}},addSeparator:function(){this.trEl.appendChild(CC.$C({tagName:"TD",innerHTML:'<span class="tblly-sep"> | </span>',className:"tblly-td"}))}});CC.layout.def("tablize",CC.layout.TablizeLayout);CC.Tpl.def("CC.ui.TabItemLayout",'<div class="g-panel"><div class="auto-margin" id="_margin"><a href="javascript:fGo()" id="_rigmov" class="auto-rigmov" style="right:0px;"></a><a href="javascript:fGo()" style="left:0px;" id="_lefmov" class="auto-lefmov"></a><div class="auto-scrollor" id="_scrollor" tabindex="1" hidefocus="on"><div class="auto-offset" id="_wrap"></div></div></div></div>');
CC.create("CC.ui.tab.TabItemLayout",CC.layout.Layout,function(a){return{layoutOnChange:true,horizonMargin:5,navLeftWidth:24,navRightWidth:24,ctCS:"g-autoscroll-ly",disabledLeftNavCS:"g-disabled auto-lefmov-disabled",disabledRightNavCS:"g-disabled auto-rigmov-disabled",navPanelCS:"g-mov-tab",getMargins:function(){return[this.marginLeft||this.horizonMargin,this.marginRight||this.horizonMargin]},attach:function(b){a.attach.call(this,b);var e=b.dom("_margin").style,g=this.getMargins();e.marginLeft=g[0]+
"px";e.marginRight=g[1]+"px";this.scrollor=b.$$("_scrollor");e=this.lefNav=b.$$("_lefmov");b=this.rigNav=b.$$("_rigmov");e.disabledCS=this.disabledLeftNavCS;b.disabledCS=this.disabledRightNavCS;this.attachEvent()},attachEvent:function(){var b=this.lefNav,e=this.rigNav;this.ct.on("remove",this.onStructureChange,this).on("closed",this.onStructureChange,this).domEvent("mousedown",this.onNavMousedown,true,this,b.view).domEvent("mouseup",this.onNavMouseup,true,this,b.view).domEvent("mousedown",this.onNavMousedown,
true,this,e.view).domEvent("mouseup",this.onNavMouseup,true,this,e.view)},onStructureChange:function(){this.hasLeft()&&!this.hasRight()&&this.requireMoreSpace();this.doLayout()},getDirFromEvent:function(b){return this.lefNav.view.id===CC.Event.element(b).id?"l":"r"},scrollToNext:function(b,e){var g=this.getNextHiddenItem(b);if(g){this.scrollItemIntoView(g);if(!e)this.mousedownTimer=arguments.callee.bind(this,b).timeout(300)}else{clearTimeout(this.mousedownTimer);this.mousedownTimer=null}},scrollItemIntoView:function(b){if(!b)b=
this.ct.selectionProvider.selected;if(b){b=this.getScrollIntoViewDelta(b);if(b!==0){__debug&&console.log("scroll delta:"+b);this.setScrollLeft(this.getScrollLeft()+b)}this.checkStatus()}},onNavMousedown:function(b){this.mousedownTimer=this.scrollToNext.bind(this,this.getDirFromEvent(b)).timeout(300)},onNavMouseup:function(b){if(this.mousedownTimer){clearTimeout(this.mousedownTimer);this.mousedownTimer=null}this.scrollToNext(this.getDirFromEvent(b),true)},add:function(b){b.scrollIntoView=this.scrollItemIntoView.bind(this);
a.add.apply(this,arguments)},getScrollViewWidth:function(){return this.scrollor.view.clientWidth},getScrollLeft:function(){return parseInt(this.scrollor.view.scrollLeft,10)||0},setScrollLeft:function(b){this.scrollor.view.scrollLeft=b},hasLeft:function(){return this.scrollor.view.scrollLeft>0},hasRight:function(){return this.ct.size()>0&&this.getScrollRigthLength(this.ct.children[this.ct.size()-1])>0},getScrollLeftLength:function(b){return this.getScrollLeft()-b.view.offsetLeft},getScrollRigthLength:function(b){var e=
this.getScrollViewWidth(),g=this.getScrollLeft();return b.view.offsetLeft+b.view.offsetWidth-g-e},getScrollIntoViewDelta:function(b){var e=this.getScrollLeftLength(b);__debug&&console.log("scroll left dx:",e);if(e>0)return-1*e;e=this.getScrollRigthLength(b);__debug&&console.log("scroll right dx:",e);return e>0?e:0},requireMoreSpace:function(){var b=this.getNextHiddenItem("l");b&&this.scrollItemIntoView(b)},getLastVisibleItem:function(){var b=this.ct.children,e=0;for(e=b.length-1;e>=0;e--)if(!b[e].hidden&&
this.getScrollRigthLength(b[e])<=0)return b[e]},getNextHiddenItem:function(b){var e=this.ct.children,g=0,f=e.length;if(b==="l")for(;g<f;g++){b=e[g];if(!b.hidden)if(this.getScrollLeftLength(b)<=0)return e[g-1]}else for(g=f-1;g>=0;g--){b=e[g];if(!b.hidden)if(this.getScrollRigthLength(b)<=0)return e[g+1]}},fixIEOnLayout:function(b){var e=this.ct,g=this.getMargins();b=(b||e.getWidth(true))-g[0]-g[1];e.fly("_margin").setWidth(b).unfly();b-=this.navLeftWidth+this.navRightWidth;this.scrollor.setWidth(b)},
onLayout:function(b){__debug&&console.group("TabItem\u5e03\u5c40("+this.ct+")");a.onLayout.apply(this,arguments);var e=this.ct.selectionProvider.selected;CC.ie&&this.fixIEOnLayout(b);if(b!==undefined){var g=false;if(this.preWidth===undefined)this.preWidth=b;else g=b-this.preWidth;this.preWidth=b;if(g)if(g>0)this.hasRight()||this.setScrollLeft(this.getScrollLeft()-g)}e?this.scrollItemIntoView(e):this.checkStatus();__debug&&console.groupEnd()},checkStatus:function(){var b=this.ct,e=!this.hasLeft(),
g=!this.hasRight();__debug&&console.log("checking nav disabled,","hasL:",!e,"hasR:",!g);this.lefNav.disable(e);this.rigNav.disable(g);b.checkClass(this.navPanelCS,!e||!g)}}});CC.layout.def("tabitem",CC.ui.tab.TabItemLayout);
(function(){var a=window.CC,b=a.Base.prototype;a.Tpl.def("CC.ui.Shadow",a.ie6?'<div class="g-dxshadow"></div>':'<div class="g-shadow" style="display:none;"><div class="g-shadow-t" id="_t"></div><div class="g-shadow-lt" id="_lt"></div><div class="g-shadow-rt" id="_rt"></div><div class="g-shadow-l" id="_l"></div><div class="g-shadow-lb" id="_lb"></div><div class="g-shadow-r" id="_r"></div><div class="g-shadow-rb" id="_rb"></div><div class="g-shadow-b" id="_b"></div></div>');a.create("CC.ui.Shadow",
a.Base,{inpactW:8,inpactH:0,inpactX:-4,inpactY:4,shadowWidth:6,offset:4,hidden:true,target:false,initComponent:function(){b.initComponent.call(this);this.target&&this.attach(this.target);if(a.ie&&!a.ie6){this.shadowR=this.dom("_r");this.shadowB=this.dom("_b");this.shadowL=this.dom("_l");this.shadowT=this.dom("_t")}},attach:function(e){this.target=e;this.target.eventable&&this.target.on("resized",this.reanchor,this).on("reposed",this.reanchor,this);this.setZ((this.target.fastStyle("zIndex")||1)-1);
if(a.ie6){this._ie6OffDt=Math.floor(this.offset/2);this.view.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"}return this},detach:function(){if(this.target.eventable){this.target.un("resized",this.reanchor,this);this.target.un("reposed",this.reanchor,this)}this.target=null;this.display(false);return this},setRightSize:a.ie6?function(e,g){e!==false&&this.setWidth(e-this.offset-this._ie6OffDt+this.inpactW-1);g!==false&&
this.setHeight(g-this.offset-this._ie6OffDt+this.inpactH)}:function(e,g){if(e!==false){e+=this.inpactW;e!=this.width&&this.setWidth(e)}if(g!==false){g+=this.inpactH;g!=this.height&&this.setHeight(g)}if(a.ie){var f=a.fly(this.shadowR),h=this.shadowWidth*2;if(g!==false){g=g-h;f.setHeight(g);f.view=this.shadowL;f.setHeight(g)}if(e!==false){g=e-h;f.view=this.shadowB;f.setWidth(g);f.view=this.shadowT;f.setWidth(g)}f.unfly()}},setRightPos:a.ie6?function(e){e[0]+=this.inpactX-this._ie6OffDt+1;e[1]+=this.inpactY-
this._ie6OffDt;this.setXY(e)}:function(e){this.setXY(e[0]+this.inpactX,e[1]+this.inpactY-1)},resize:function(){var e=this.target.getSize(true);this.setRightSize(e.width,e.height)},repos:function(){this.setRightPos(this.target.absoluteXY())},reanchor:function(){var e=!this.hidden;this.resize();this.repos();e&&b.display.call(this,true);return this},display:function(e){if(e===undefined)return b.display.call(this);if(e=e&&this.target&&!this.target.hidden){this.reanchor();this.appendTo(document.body)}else this.del();
return b.display.call(this,e)}});a.ui.def("shadow",a.ui.Shadow)})();
(function(){var a=window.CC,b=a.Base.prototype;a.Tpl.def("CC.ui.Loading",'<div class="g-loading"><div class="g-loading-indicator"><span id="_tle">\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u5019...</span></div></div>');a.create("CC.ui.Loading",a.Base,{loadMaskCS:"g-loading-mask",monitor:false,initComponent:function(){b.initComponent.call(this);this.monitor&&this.setMonitor(a.delAttr("monitor",this))},attach:function(e){this.target=e},setMonitor:function(e){this.monitor&&this.monitor.un("open",this.whenOpen,
this).un("send",this.whenSend,this).un("success",this.whenSuccess,this).un("final",this.whenFinal,this);e&&e.on("open",this.whenOpen,this).on("send",this.whenSend,this).on("success",this.whenSuccess,this).on("final",this.whenFinal,this);this.monitor=e},whenSend:fGo,whenSuccess:function(){this.loaded=true},whenOpen:function(){this.markIndicator()},whenFinal:function(){this.stopIndicator();this.target.shadow&&this.target.shadow.reanchor()},targetLoadCS:false,maskDisabled:false,loadMsgDisabled:false,
markIndicator:function(){if(!this.disabled){this.busy=true;this.targetLoadCS&&a.fly(this.target).addClass(this.targetLoadCS).unfly();if((!this.mask||!this.mask.tagName)&&!this.maskDisabled)this.mask=a.$C({tagName:"DIV",className:this.loadMaskCS});this.mask&&!this.maskDisabled&&this.target.wrapper.append(this.mask).unfly();this.loadMsgDisabled||this.target.wrapper.append(this)}},stopIndicator:function(){this.targetLoadCS&&a.fly(this.target).delClass(this.targetLoadCS).unfly();if(!this.maskDisabled){this.mask&&
this.mask.parentNode&&this.mask.parentNode.removeChild(this.mask);this.del()}this.busy=false;this.loaded=true},isBusy:function(){return this.busy},isLoaded:function(){return this.loaded},destory:function(){this.setMonitor(null);this.superclass.destory.call(this)}});a.ui.def("loading",a.ui.Loading)})();
CC.create("CC.ui.Mask",CC.Base,{template:'<div class="g-modal-mask"></div>',onactive:null,initComponent:function(){CC.Base.prototype.initComponent.call(this);this.target&&this.attach(this.target);this.opacity&&this.setOpacity(this.opacity);this.domEvent("mousedown",this.onMaskResponsed,true)},onMaskResponsed:function(){this.fire("active",this);this.onactive&&this.onactive()},attach:function(a){this.target=a=a||CC.$body;a.eventable&&a.on("resized",this.onTargetResized,this);var b=CC.fly(a);if(a===
CC.$body||a===document.body){CC.$body.domEvent("resize",this.onWindowResize,false,this,window);this.onWindowResize()}else this.setSize(b.getSize());this.setXY(0,0);b.unfly();this.appendTo(a);return this},detach:function(){var a=this.target;if(a===CC.$body||a===document.body)CC.$body.unEvent("resize",this.onWindowResize,window);a.eventable&&a.un("resized",this.onTargetResized);this.del();this.target=null;return this},onTargetResized:function(a,b,e,g){this.setSize(e,g)},onWindowResize:function(){this.setSize(CC.getViewport())},
destory:function(){this.target&&this.detach();CC.Base.prototype.destory.call(this)}});
CC.create("CC.ui.Viewport",CC.ui.Panel,{bodyCS:"g-viewport-body",cs:"g-viewport",mg:[0,0,0,0],initComponent:function(){this.showTo=document.body;if(!this.view)this.view=CC.$C("DIV");CC.Event.on(window,"resize",this.onWindowResize.bind(this));CC.ui.Panel.prototype.initComponent.call(this);CC.$body.addClass(this.bodyCS);this.onWindowResize()},onWindowResize:function(){var a=CC.getViewport(),b=0,e=0,g=this.mg;b=g[1];e=g[2];a.width-=g[1]+g[3];a.height-=g[0]+g[2];if(this.maxW<a.width){g=a.width-this.maxW;
b+=Math.floor(g/2);a.width-=g}if(this.maxH<a.height){g=a.height-this.height;e+=Math.floor(g/2);a.height-=g}this.setBounds(b,e,a.width,a.height)}});CC.ui.def("viewport",CC.ui.Viewport);CC.Tpl.def("CC.ui.FolderItem",'<li class="g-unsel"><b id="_ico" class="icos"></b><a id="_tle" class="g-tle"></a></li>').def("CC.ui.Folder",'<div class="g-folder g-grp-bdy"><div class="g-grp-bdy" id="_scrollor"><ul id="_bdy" tabindex="1" hidefocus="on"></ul></div></div>');
CC.create("CC.ui.Folder",CC.ui.ContainerBase,{itemCfg:{template:"CC.ui.FolderItem",hoverCS:"on",icon:"icoNote",blockMode:2},keyEvent:true,ct:"_bdy",clickEvent:true,useContainerMonitor:true,template:"CC.ui.Folder",selectionProvider:true});CC.ui.def("folder",CC.ui.Folder);CC.Tpl.def("CC.ui.Button",'<table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="g-btn-l"><i>&nbsp;</i></td><td class="g-btn-c"><em unselectable="on"><button type="button" class="g-btn-text" id="_tle"></button></em></td><td class="g-btn-r"><i>&nbsp;</i></td></tr></tbody></table>');
CC.create("CC.ui.Button",CC.Base,function(a){return{iconNode:"_tle",focusNode:"_tle",hoverCS:"g-btn-over",clickCS:"g-btn-click",iconCS:"g-btn-icon",focusCS:"g-btn-focus",tip:false,disableNode:"_tle",innerCS:"g-btn",blockMode:"",_onclick:function(){this.onclick&&this.onclick.call(this)},initComponent:function(){a.initComponent.call(this);if(!this.title||this.title=="")this.addClass(this.noTxtCS||"g-btn-notxt");this.element=this.dom("_tle");this.domEvent("mousedown",this._gotFocus);this.domEvent("click",
this._onclick);this.focusCS&&this.bindFocusStyle(this.focusCS);this.dockable&&this.docked&&this.setDocked(true)},setDocked:function(b){this.docked=b;this.checkClass(this.clickCS,b);return this},_gotFocus:function(){try{this.element.focus()}catch(b){}},mouseupCallback:function(){if(this.dockable)return this.docked=!this.docked}}});
CC.create("CC.ui.DropButton",CC.ui.Button,{downCS:"g-btn-dwn",_onclick:function(a){this.array&&this.createMenu();if(this.menu){CC.Event.stop(a);this.showMenu(!!this.menu.hidden)}CC.ui.DropButton.superclass._onclick.apply(this,arguments)},showMenu:function(a){if(a){this.menu.at(this,true);this.menu.focus(0)}else this.menu.hide()},decorateDown:function(a){this.checkClass(this.downCS,a)},createMenu:function(a){var b=this;a=CC.extendIf(a||this.menuCfg,{ctype:"menu",array:this.array,width:120,showTo:document.body,
onDisplay:function(e){b.decorateDown(e)}});delete this.array;this.menu=CC.ui.instance(a);this.menu.render()}});CC.ui.def("button",CC.ui.Button);CC.ui.def("dropbutton",CC.ui.DropButton);CC.Tpl["CC.ui.BarItem"]='<table class="g-baritem" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="g-btn-l"><i>&nbsp;</i></td><td class="g-btn-c"><em unselectable="on"><button type="button" class="g-btn-text" id="_tle"></button></em></td><td class="g-btn-r"><i>&nbsp;</i></td></tr></tbody></table>';
CC.Tpl["CC.ui.Toolbar"]='<div class="g-tbar"><div class="g-tbar-wr" id="_wrap"></div></div>';CC.create("CC.ui.Bigbar",CC.ui.Panel,{keyEvent:false,clickEvent:true,syncWrapper:false,itemCfg:{template:"CC.ui.BarItem",hoverCS:"g-baritem-over",downCS:"g-baritem-dwn",innerCS:"g-baritem",clickCS:"g-baritem-click",focusCS:false,title:false},selectionProvider:{autoscroll:false,forceSelect:true},maxH:38,innerCS:"g-bigbar",itemCls:CC.ui.Button,template:"CC.ui.Toolbar"});CC.ui.def("bigbar",CC.ui.Bigbar);
CC.create("CC.ui.BigbarDropButton",CC.ui.DropButton,{template:"CC.ui.BarItem",hoverCS:"g-baritem-over",downCS:"g-baritem-dwn",innerCS:"g-baritem",clickCS:"g-baritem-click",focusCS:false,title:false});CC.ui.def("bigbardropbtn",CC.ui.BigbarDropButton);
CC.create("CC.ui.Smallbar",CC.ui.Panel,{syncWrapper:false,selectionProvider:{autoscroll:false,forceSelect:true},clickEvent:true,itemCfg:{template:"CC.ui.BarItem",hoverCS:"g-smallbar-item-over",downCS:"g-smallbar-item-dwn",clickCS:"g-smallbar-item-click",innerCS:"g-smallbar-item",focusCS:false},maxH:26,innerCS:"g-smallbar",itemCls:CC.ui.Button,template:"CC.ui.Toolbar"});CC.ui.def("smallbar",CC.ui.Smallbar);
CC.create("CC.ui.SmallbarDropButton",CC.ui.DropButton,{template:"CC.ui.BarItem",hoverCS:"g-smallbar-item-over",downCS:"g-smallbar-item-dwn",clickCS:"g-smallbar-item-click",innerCS:"g-smallbar-item",focusCS:false});CC.ui.def("smallbardropbtn",CC.ui.SmallbarDropButton);
(function(){var a=CC.ui.ContainerBase.prototype,b=CC.ui.Panel.prototype;CC.Tpl.def("CC.ui.TabItem",'<table unselectable="on" class="g-unsel g-tab-item"><tbody><tr id="_ctx"><td class="tLe" id="_tLe"></td><td class="bdy"><nobr id="_tle" class="g-tle">\u9009\u53611</nobr></td><td class="btn" id="_btnC"><a href="javascript:fGo()" title="\u5173\u95ed" id="_trigger" class="g-ti-btn"></a></td><td class="tRi" id="_tRi"></td></tr></tbody></table>');CC.create("CC.ui.TabItem",CC.ui.ContainerBase,{hoverCS:false,
autoReload:false,closeable:true,unselectable:true,ct:"_ctx",blockMode:2,loadCS:"g-tabitem-loading",initComponent:function(){a.initComponent.call(this);var e=this.cacheBtnNode=this.dom("_btnC");e&&e.parentNode.removeChild(e);this.bindClsEvent();this.closeable!==undefined&&this.setCloseable(this.closeable);this.panel&&this.setContentPanel(this.panel)},addButton:function(e){var g=this.cacheBtnNode.cloneNode(true);e.view=g;g.id=e.id;e.iconNode="_trigger";g=CC.Base.create(e);this.add(g);return g},syncPanelDestory:undefined,
getContentPanel:function(e){var g=this.panel,f;if(!g&&e){g=this.src?new CC.ui.IFramePanel:new CC.ui.Panel;this.setContentPanel(g)}if(g&&!g.pCt){if((ct=this.pCt)&&(f=ct.getContentPanel()))f.layout.add(g);if(this.syncPanelDestory===undefined)this.syncPanelDestory=true}return g},setContentPanel:function(e){this.panel&&delete this.panel.bindingTabItem;e.cacheId||(e=CC.ui.instance(e));this.panel=e;e.bindingTabItem=this;return this},_addNode:function(e){this.buttonOrient!="l"?this.fly("_tRi").insertBefore(e).unfly():
this.fly("_tLe").insertAfter(e).unfly()},onClsClick:function(){this.closeable&&this.pCt.getDisc()>1&&this.pCt.close(this)},bindClsEvent:function(){var e=this.$$(this.closeNode);e||(e=this.addButton({id:"_clsBtn",blockMode:2,icon:"g-ti-clsbtn"}));this.domEvent("click",this.onClsClick,true,null,e.view).domEvent("dblclick",this.onClsClick,true);e.view.onmousedown=CC.Event.noUp},setCloseable:function(e){if(this.cacheBtnNode){this.closeable=e;this.$("_clsBtn").display(e)}else a.setCloseable.call(this,
e);return this},loadType:"html",loadContent:function(e){var g=this.getContentPanel(true);g.getConnectionProvider().loadType=this.loadType||"html";g=g.getConnectionProvider();if(!g.indicator){g.indicatorDisabled=false;g.getIndicator({markIndicator:this.onIndicatorStart,stopIndicator:this.onIndicatorStop})}if(e||(this.autoReload||!this.isContentLoaded())&&!this.isContentBusy())this._dataConnectorId=g.connect(e||this.src||this.url);return this},isContentLoaded:function(){return this._dataConnectorId&&
this.getContentPanel(true).getConnectionProvider().getConnectionQueue().isConnectorLoaded(this._dataConnectorId)},isContentBusy:function(){return this._dataConnectorId&&this.getContentPanel(true).getConnectionProvider().getConnectionQueue().isConnectorBusy(this._dataConnectorId)},onIndicatorStart:function(){var e=this.target.bindingTabItem;e.addClass(e.loadCS)},onIndicatorStop:function(){var e=this.target.bindingTabItem;e&&e.delClass(e.loadCS)},destory:function(){this.syncPanelDestory&&this.panel&&
this.panel.destory();a.destory.call(this)}});CC.ui.def("tabitem",CC.ui.TabItem);CC.create("CC.ui.Tab",CC.ui.Panel,{keyEvent:true,clickEvent:true,template:"CC.ui.TabItemLayout",innerCS:"g-tab",keyEventNode:"_scrollor",vcs:"g-vtab",vtab:false,selectionProvider:{UP:CC.Event.LEFT,DOWN:CC.Event.RIGHT,tracker:true,selectedCS:"g-tab-selectitem"},syncWrapper:false,maxH:33,itemCls:CC.ui.TabItem,floatCS:"g-tab-float",autoLoad:true,destoryItemOnclose:false,lyCfg:{navPanelCS:"g-mov-tab",horizonMargin:5,navLeftWidth:24,
navRightWidth:24},initComponent:function(){b.initComponent.call(this);this.on("selected",this.onItemSelected);if(this.vtab){this.addClass(this.vcs);delete this.vtab}if(this["float"]){this.addClass(this.floatCS+(this["float"]===true?"":this["float"]));delete this["float"]}},onItemSelected:function(e){if((e.url||e.src)&&this.autoLoad)e.loadContent();var g=this;(function(){var f=g.selectionProvider.previous;f&&f.getContentPanel()&&!f.panel.hidden&&f.panel.hide();g.displayItem(e,true);e.getContentPanel()&&
e.panel.show()}).timeout(0)},close:function(e){e=this.$(e);if(e.closeable)if(this.fire("close",e)!==false){this.displayItem(e,0);this.fire("closed",e);if(e.destoryOnClose===true||this.destoryItemOnclose)e.destory()}},getContentPanel:function(){var e=this.contentPanel;if(typeof e==="string")e=this.contentPanel=CC.Base.find(e);return e},displayItem:function(e,g){e=this.$(e);if(!e.closeable&&!g)return false;e.display(g);var f=this.selectionProvider;if(!g&&f.selected===e){if(f.tracker.size())if(g=f.tracker.pop()){f.select(g);
f.tracker.pop();return}e=this.indexOf(e);g=e-1;for(var h=this.children;g>=0&&(h[g].hidden||h[g].disabled);)g--;if(g>=0)f.select(h[g]);else{g=h.length;for(e+=1;e<g&&(h[e].hidden||h[e].disabled);)e++;e<g&&f.select(h[e])}}},getDisc:function(){for(var e=0,g=this.children,f=0,h=g.length;f<h;f++)g[f].hidden||e++;return e}});CC.ui.def("tab",CC.ui.Tab)})();
CC.ie?CC.Tpl.def("CC.ui.FloatTip",'<table class="g-float-tip g-clear"><tr><td><table class="tipbdy"><tr><td id="_tle" class="important_txt"></td></tr><tr><td id="_msg" class="important_subtxt"></td></tr></table></td></tr><tr><td class="btm_cap" id="_cap"></td></tr></table>'):CC.Tpl.def("CC.ui.FloatTip",'<div class="g-float-tip g-clear"><div class="tipbdy"><div id="_tle" class="important_txt"></div><div id="_msg" class="important_subtxt"></div></div><div class="btm_cap" id="_cap"></div></div>');
CC.create("CC.ui.FloatTip",CC.ui.Panel,function(a){function b(d){h=f.pageXY(d||window.event)}var e=window.CC,g,f=e.Event,h=[-10000,-10000],l=false;e.Util.ftip=function(d,m,o,q,p){g||(g=e.ui.instance({ctype:"tip",showTo:document.body,autoRender:true}));e.fly(g.tail).show().unfly();g.show(d,m,o,q,p);return g};e.Util.qtip=function(d,m){g||(g=new e.ui.FloatTip({showTo:document.body,autoRender:true}));g.tipFor(d,m)};return{timeout:2500,delay:500,reuseable:true,shadow:true,qmode:false,zIndex:10002,hoverTipCS:"g-small-tip",
initComponent:function(){a.initComponent.call(this);this.msg&&this.setMsg(this.msg);this.tail=this.dom("_cap");this.setXY(-10000,-10000).setZ(this.zIndex);this.qmode?this.createQtip():this.createFtip()},display:function(d){d&&this.timerId&&this.killTimer();return a.display.apply(this,arguments)},onShow:function(){a.onShow.call(this);if(this.timeout)this.timerId=this._timeoutCall.bind(this).timeout(this.timeout)},onHide:function(){this.killTimer();a.onHide.call(this);this.setXY(-10000,-10000)},setRightPosForTarget:function(d){d=
e.fly(d);var m=d.absoluteXY();this.anchorPos([m[0],m[1],0,0],"lt","hr",false,true,true);d.unfly()},setRightPosForHover:function(d){this.anchorPos([d[0],d[1],0,0],"lb","hr",[5,24],true,true)},_timeoutCall:function(){a.display.call(this,false);this.killTimer(true);this.ontimeout&&this.ontimeout()},killPretimer:function(){if(this.pretimerId){clearTimeout(this.pretimerId);this.pretimerId=false}},killTimer:function(d){if(this.timerId){clearTimeout(this.timerId);this.timerId=false}!this.reuseable&&d&&this.destory()},
setMsg:function(d,m){this.fly("_msg").html(d).unfly();m&&this.setTitle(m);this.shadow&&!this.shadow.hidden&&this.shadow.reanchor();return this},show:function(d,m,o,q,p){if(arguments.length==0)return a.show.call(this);this.setMsg(d,m);if(p!==undefined)this.timeout=p;this.qmode&&this.createFtip();this.display(true);if(o){this.setRightPosForTarget(o);q&&e.fly(o).focus(true).unfly()}return this},createFtip:function(){this.qmode=false;this.delClass(this.hoverTipCS);if(this.shadow){this.shadow.inpactY=
-1;this.shadow.inpactH=-12}},createQtip:function(){this.qmode=true;this.addClassIf(this.hoverTipCS);if(this.shadow){this.shadow.inpactY=e.ui.Shadow.prototype.inpactY;this.shadow.inpactH=e.ui.Shadow.prototype.inpactH}},tipFor:function(d,m,o){e.fly(d).domEvent("mouseover",function(){var q=this;if(!l){f.on(document,"mousemove",b);l=true}this.pretimerId&&this.killPretimer();this.pretimerId=function(){q.killTimer();q.setMsg(d.qtip||d.tip||d.title||m,o);e.fly(q.tail).hide().unfly();q.qmode||q.createQtip();
q.display(true).setRightPosForHover(h)}.timeout(this.delay)},true,this).domEvent("mouseout",this.onTargetMouseout,true,this).unfly()},onTargetMouseout:function(){this.qmode&&this.display(false);if(l){f.un(document,"mousemove",b);l=false}this.killPretimer()}}});CC.ui.def("tip",CC.ui.FloatTip);CC.Tpl.def("CC.ui.TitlePanel",'<div class="g-panel g-titlepanel"><h3 class="g-titlepanel-hd" id="_tleBar"><a id="_btnFN" class="g-icoFld" href="javascript:fGo()"></a><a id="_tle" class="g-tle" href="javascript:fGo()"></a></h3><div id="_scrollor" class="g-panel-wrap g-titlepanel-wrap"></div></div>');
CC.create("CC.ui.TitlePanel",CC.ui.Panel,function(a){return{unselectable:"_tleBar",ct:"_scrollor",minH:22,openCS:"g-icoOpn",clsCS:"g-icoFld",foldNode:"_btnFN",initComponent:function(){a.initComponent.call(this);this.domEvent("mousedown",this.onTriggerClick,true,null,this.foldNode).domEvent("mousedown",this.onTitleClick,true,null,this.titleNode||"_tle");this.header=this.$$("_tleBar");this.collapsed&&this.collapse(this.collapsed,true)},getWrapperInsets:function(){return[this.minH,0,0,0,this.minH,0]},
onTriggerClick:function(){this.collapse(!this.wrapper.hidden,true)},onTitleClick:function(){this.onTriggerClick()},collapse:function(b,e){this.attr(this.foldNode,"className",b?this.openCS:this.clsCS);this.wrapper.display(!b);this.collapsed=b;this.fire("collapsed",b);if(e&&this.pCt)this.pCt.layout.collapse?this.pCt.layout.collapse(this,b):this.pCt.layout.doLayout();return this}}});CC.ui.def("titlepanel",CC.ui.TitlePanel);CC.Tpl.def("CC.ui.Foldable",'<div class="g-foldable"><div class="g-foldablewrap"><b title="\u9690\u85cf" id="_trigger" class="icos icoCls"></b><div id="_tle"></div></div></div>');
CC.create("CC.ui.Foldable",CC.Base,{clsGroupCS:"g-gridview-clsview",unselectable:true,initComponent:function(){this.createView();CC.Base.prototype.initComponent.call(this);this.domEvent("click",this.foldView,true,null);if(this.array){this.target.fromArray(this.array);delete this.array}},foldView:function(a){var b=CC.fly(this.foldNode?this.target.dom(this.foldNode):this.target.ct||this.target);if(a!==true&&a!==false)a=!b.display();if(this.fire("expand",this,a)===false)b.unfly();else{this.nodeBlockMode!==
undefined&&b.setBlockMode(this.nodeBlockMode);b.display(a).unfly();this.target.shadow&&this.target.shadow.reanchor();this.dom("_trigger").title=a?"\u9690\u85cf":"\u5c55\u5f00";this.checkClass(this.clsGroupCS,!a);this.expanded=a;this.fire("expanded",this,a);return this}},brush:function(a){if(this.target.children)return"<strong>"+a+'</strong><span id="_view_span">(<strong><a id="_view_cnt" href="javascript:fGo();">'+this.target.size()+"</a></strong>)</span>";return a}});CC.ui.def("foldable",CC.ui.Folderable);
CC.create("CC.util.IFrameConnectionProvider",CC.util.ConnectionProvider,{traceLoad:true,indicatorDisabled:true,defaultLoadSuccess:fGo,setTarget:function(a){CC.util.ConnectionProvider.prototype.setTarget.apply(this,arguments);if(a.src||a.url)this.connect(a.src||a.url)},initConnection:function(){if(this.traceLoad)this.t.domEvent(CC.ie?"readystatechange":"load",this.traceFrameLoad,false,this,this.t.getFrameEl());CC.util.ConnectionProvider.prototype.initConnection.apply(this,arguments)},createSyncQueue:function(){CC.util.ConnectionProvider.prototype.createSyncQueue.call(this);
this.syncQueue.openEvt="connection:open";this.syncQueue.finalEvt="connection:final"},onFrameLoad:function(a){this.t.loaded=true;try{this.t.fire("connection:success",this.t,this);this.success&&this.success(this,a)}catch(b){console.warn(b)}this.onFinal()},traceFrameLoad:function(a){var b=this.t;switch(CC.Event.element(a).readyState||a.type){case "loading":this.syncQueue.isConnectorBusy(this.connectorKey)||b.fire("connection:open",this.t,this);break;case "load":case "complete":b.getFrameEl().src&&b.getFrameEl().src!==
"about:blank"&&this.onFrameLoad(a);break}},abort:function(){this.t.getFrameEl().src=CC.ie?"about:blank":"";this.onFinal()},onFinal:function(){this.t.fire("connection:final",this.t,this)},bindConnector:function(a){this.connectorKey&&this.syncQueue.isConnectorBusy(this.connectorKey)&&this.abort();this.connectorKey=this.syncQueue.join(this.t);CC.extend(this,a);this.connectInner();return this.connectorKey},connectInner:function(){this.t.fire("connection:open",this.t,this);(function(){try{this.t.getFrameEl().src=
this.url}catch(a){__debug&&console.warn(a)}}).bind(this).timeout(0)}});CC.Tpl.def("CC.ui.IFramePanel",'<iframe class="g-framepanel" frameBorder="no" scrolling="auto" hideFocus=""></iframe>');
CC.create("CC.ui.IFramePanel",CC.ui.Panel,{traceResize:false,connectionProvider:CC.util.IFrameConnectionProvider,ct:undefined,onRender:function(){CC.ui.Panel.prototype.onRender.call(this);var a=this.pCt;if(this.traceResize){a.on("resized",this.onContainerResize,this);this.onContainerResize(false,false,a.wrapper.getWidth(true),a.wrapper.getHeight(true))}},getFrameEl:function(){return this.view},getWin:function(){return CC.frameWin(this.getFrameEl())},onContainerResize:function(a,b){this.setSize(a,
b)},$:function(a){return CC.frameDoc(this.view).getElementById(a)},connect:function(a){this.getConnectionProvider().connect(a)}});CC.ui.def("iframe",CC.ui.IFramePanel);CC.Tpl.def("CC.ui.Resizer",'<div class="g-panel g-resizer"><div class="g-win-e" id="_xe"></div><div class="g-win-s" id="_xs"></div><div class="g-win-w" id="_xw"></div><div class="g-win-n" id="_xn"></div><div class="g-win-sw" id="_xsw"></div><div class="g-win-es" id="_xes"></div><div class="g-win-wn" id="_xwn"></div><div class="g-win-ne" id="_xne"></div><div class="g-panel-wrap g-resizer-wrap" id="_wrap"></div></div>');
CC.create("CC.ui.Resizer",CC.ui.Panel,function(a){var b=window.CC,e=b.util.dd.Mgr,g=e.resizeHelper;return{resizeable:true,enableH:true,enableW:true,unresizeCS:"g-win-unresize",width:500,height:250,minW:12,minH:6,onResizeStart:function(f){if(this.resizeable){var h=this.absoluteXY(),l=this.getSize(true);if(!b.borderBox){l.width-=1;l.height-=1}this.initPS={pos:h,size:l};g.applyResize(true,f.fastStyle("cursor"));g.layer.setXY(h).setSize(l);this.fire("resizestart")}},onResizeEnd:function(){var f=e.getDXY();
if(f[0]===0&&f[1]===0){g.applyResize(false);g.masker.fastStyleSet("cursor","")}else if(this.initPS){var h=g.layer.getSize(true);if(!b.borderBox){if(h.width!==0)h.width+=1;if(h.height!==0)h.height+=1}var l=g.layer.xy(),d=this.initPS.pos;f=this.initPS.size;f=[h.width-f.width,h.height-f.height];var m=this.shadow,o=m&&!m.hidden;l[0]-=d[0];l[1]-=d[1];m&&o&&m.hide();this.setXY(this.getLeft(true)+l[0],this.getTop(true)+l[1]).setSize(h);m&&o&&m.show();this.fire("resizeend",l,f);g.applyResize(false,"");delete this.initPS}},
initComponent:function(){a.initComponent.call(this);this.cornerSprites=[];this.resizeable?this.bindRezBehavior():this.setResizable(false)},bindRezBehavior:function(){var f=this.onResizeEnd.bind(this),h=this.createRezBehavior(8),l=this.createRezBehavior(4),d=this.createRezBehavior(2),m=this.createRezBehavior(1),o=this.createRezBehavior("",d,l),q=this.createRezBehavior("",l,m),p=this.createRezBehavior("",h,d),v=this.createRezBehavior("",h,m);this.bindRezTrigger("_xn",h,f).bindRezTrigger("_xs",l,f).bindRezTrigger("_xw",
d,f).bindRezTrigger("_xe",m,f).bindRezTrigger("_xes",q,f).bindRezTrigger("_xsw",o,f).bindRezTrigger("_xwn",p,f).bindRezTrigger("_xne",v,f)},bindRezTrigger:function(f,h,l){var d=this,m=this.cornerSprites[this.cornerSprites.length]=this.$$(f);m.beforedrag=function(){d.onResizeStart(m)};m.drag=h;m.afterdrag=l;m.installDrag(true);return this},createRezBehavior:function(f,h,l){var d=this;return f==4||f==8?function(){if(d.enableH){var m=e.getDXY();d._zoom(f,m[1])}}:f==1||f==2?function(){if(d.enableW){var m=
e.getDXY();d._zoom(f,m[0])}}:function(){h.call(this);l.call(this)}},_zoom:function(f,h){var l=g.layer;if((f&1)!==0){off=this.initPS.size.width+h;off>=this.minW&&l.setWidth(off)}else if((f&2)!==0){off=this.initPS.size.width-h;if(off>=this.minW){l.setWidth(off);off=this.initPS.pos[0]+h;l.setLeft(off)}}if((f&4)!=0){off=this.initPS.size.height+h;off>=this.minH&&l.setHeight(off)}else if((f&8)!=0){off=this.initPS.size.height-h;if(off>=this.minH){l.setHeight(off);off=this.initPS.pos[1]+h;l.setTop(off)}}},
setResizable:function(f){this.checkClass(this.unresizeCS,!f);this.resizeable=f},getWrapperInsets:function(){return[6,1,1,1,7,2]}}});
CC.create("CC.ui.Win",CC.ui.Resizer,function(a){var b=window.CC;b.Tpl.def("CC.ui.win.Titlebar",'<div id="_g-win-hd" class="g-win-hd"><div class="fLe"></div><b class="icoSw" id="_ico"></b><span id="_tle" class="g-tle">\u63d0\u793a</span><div class="fRi"></div><div class="g-win-hd-ct" style="position:absolute;right:5px;top:7px;" id="_ctx"></div></div>');b.Tpl.def("CC.ui.win.TitlebarButton",'<a class="g-hd-btn" href="javascript:fGo();"></a>');var e=900,g=b.util.dd.Mgr,f=g.resizeHelper,h=b.Base.prototype.setXY,
l,d={ctype:"ct",autoRender:true,clickEvent:true,unselectable:true,cancelClickBubble:true,itemCfg:{template:"CC.ui.win.TitlebarButton"},ct:"_ctx",template:"CC.ui.win.Titlebar",selectionProvider:{forceSelect:true,selectedCS:false}},m={ctype:"item",cs:"g-win-clsbtn",template:"CC.ui.win.TitlebarButton",tip:"\u5173\u95ed",id:"_cls"};return{unmoveable:false,closeable:true,shadow:{ctype:"shadow",inpactY:-1,inpactH:5},innerCS:"g-win g-tbar-win",minCS:"g-win-min",maxCS:"g-win-max",minH:30,overflow:false,minW:80,
dragOpacity:0.6,initComponent:function(){var o=b.delAttr(this,"title");a.initComponent.call(this);var q=this.titlebar;if(q)b.extendIf(q,d);else q=d;q.title=o;var p=true;if((o=q.view)&&typeof o==="string"){q.view=this.dom(o);p=false}this.titlebar=b.ui.instance(q.ctype,q);q.view=o;q=this.titlebar;p&&this.addTitlebarNode(q);this.follow(q);delete this.title;this.overflow&&this.wrapper.fastStyleSet("overflow",this.overflow);if(this.closeable===true){if(p=q.clsBtn)b.extendIf(p,m);else p=m;p.onselect=this.onClsBtnClick;
if((o=p.view)&&typeof o==="string")p.view=this.dom(o);this.clsBtn=b.ui.instance(p);p.view=o;q.layout.add(this.clsBtn)}this.destoryOnClose&&this.on("closed",this.destory);this.domEvent("mousedown",this.trackZIndex).domEvent("mousedown",this.trackZIndex,true,null,this.titlebar.view).domEvent("dblclick",this.switchState,true,null,this.titlebar.view);this.unmoveable||g.installDrag(this,true,q.view);this.trackZIndex()},addTitlebarNode:function(o){this.wrapper.insertBefore(o)},dragstart:function(){if(this.unmoveable||
this.fire("movestart")===false)return false;this.shadow&&this.shadow.hide();f.applyMasker(true);this.decorateDrag(true);l=this.xy()},drag:function(){var o=g.getDXY();h.call(this,l[0]+o[0],l[1]+o[1])},dragend:function(){f.applyMasker(false);if(this.fire("moveend")===false){this.setXY(l);this.decorateDrag(false);return false}var o=g.getDXY(),q=l;this.left=this.top=false;this.setXY(q[0]+o[0],q[1]+o[1]);this.decorateDrag(false);l=null},decorateDrag:function(o){o?this.setOpacity(this.dragOpacity).wrapper.hide():
this.setOpacity(1).wrapper.show();this.shadow&&this.shadow.display(!o)},onClsBtnClick:function(){this.pCt.pCt.close()},setTitle:function(o){this.titlebar.setTitle(o);return this},trackZIndex:function(){if(this.zIndex!=e){e+=5;this.setZ(e)}},setZ:function(o){this.fastStyleSet("zIndex",o);for(var q=0,p=this.cornerSprites,v=p.length;q<v;q++)p[q].setZ(o+1);this.shadow&&this.shadow.setZ(o-1);this.zIndex=o;return this},switchState:function(){this.win_s!="max"?this.max():this.normalize()},getWrapperInsets:function(){return[29,
1,1,1,30,2]},setTitle:function(o){if(this.titlebar){this.titlebar.setTitle(o);this.title=o}return this},close:function(){if(this.fire("close")===false)return false;this.onClose();this.fire("closed");return this},onClose:function(){this.display(0)},_markStated:function(o){if(o){if(o=b.delAttr(this,"_normalBounds")){this.setXY(o[0]);this.setSize(o[1]);this.enableH=b.delAttr(this,"_enableH");this.enableW=b.delAttr(this,"_enableW");this.setResizable(b.delAttr(this,"_resizeable"));this.titlebar.draggable=
b.delAttr(this,"_draggable")}}else{this._normalBounds=[this.xy(),this.getSize(true)];this._enableH=this.enableH;this._enableW=this.enableW;this._resizeable=this.resizeable;this._draggable=this.titlebar.draggable}},min:function(){this.setState("min");return this},normalize:function(){return this.setState("normal")},max:function(){return this.setState("max")},setState:function(o){var q=this.win_s;if(this.win_s==o)return this;this.fire("statechange",o,q);switch(q){case "min":this.delClass(this.minCS);
break;case "max":this.delClass(this.maxCS);break;default:this._markStated()}switch(o){case "min":this.shadow&&this.shadow.show();this.addClass(this.minCS);this.setHeight(this.minH);this.setResizable(false);break;case "max":this.shadow&&this.shadow.hide();this.titlebar.draggable=false;this.addClass(this.maxCS);var p,v=this.pCt?this.pCt.view:this.view.parentNode;if(v===document.body)p=b.getViewport();else{v=b.fly(v);p=v.getSize();v.unfly()}this.setXY(0,0).setSize(p);this.setResizable(false);break;default:this._markStated(true);
this.shadow&&this.shadow.show()}this.win_s=o;this.fire("statechanged",o,q);return this}}});CC.ui.def("win",CC.ui.Win);CC.Tpl.def("CC.ui.Dialog.Bottom",'<div class="g-win-bottom"><div class="bottom-wrap"></div></div>');
CC.create("CC.ui.Dialog",CC.ui.Win,function(a){var b=window.CC,e=b.Event,g;b.ui.Dialog.getOpenning=function(){return b.Base.byCid(g)};b.ui.def("dlg",b.ui.Dialog);return{bottomHeight:51,returnCode:false,defaultButton:false,initComponent:function(){this.createView();this.keyEventNode=this.view;if(this.bottomer===false)this.bottomHeight=0;else this.createBottom();a.initComponent.call(this);if(this.buttons&&this.bottomer!==false){this.bottomer.fromArray(this.buttons);delete this.buttons}this.keyEvent&&
this.on("keydown",this.onKeydownEvent,null,true)},onBottomItemSelected:function(f){if(f.returnCode!==false&&f.id){this.pCt.returnCode=f.id;var h=this.pCt["on"+f.id];if(!h||h.call(this.pCt,f)!==false)this.pCt.close()}},onKeydownEvent:function(f){if(e.ESC==f.keyCode)this.onCancel();else e.isEnterKey(f)&&this.onOk()},onOk:function(){this.bottomer&&this.defaultButton&&this.bottomer.selectionProvider.select(this.defaultButton,true)},onClsBtnClick:function(){this.pCt.pCt.returnCode=false;a.onClsBtnClick.apply(this,
arguments)},onCancel:function(){this.returnCode=false;this.close()},show:function(f,h,l){this.modal=h;this.modalParent=f;this.modalCallback=l;return a.show.call(this)},trackZIndex:function(){a.trackZIndex.call(this);this.masker&&this.masker.setZ(this.getZ()-2)},onShow:function(){a.onShow.call(this);if(this.modal){var f=this.masker;if(!f)f=this.masker=new b.ui.Mask;f.target||f.attach(this.modalParent||b.$body)}this.center(this.modalParent);this.trackZIndex.bind(this).timeout(0);this.focusDefButton();
g=this.cacheId},onHide:function(){if(this.modal){if(this.modalCallback&&this.modalCallback(this.returnCode)===false)return this;this.masker.detach();delete this.modal;delete this.modalParent;delete this.modalCallback}a.onHide.call(this)},focusDefButton:function(){if(this.bottomer){var f=this.bottomer.$(this.defaultButton);f&&f.focus(22)}},createBottom:function(){var f=this.bottomer=b.ui.instance(b.extendIf(this.bottomer,{ctype:"ct",pCt:this,itemCls:b.ui.Button,template:"CC.ui.Dialog.Bottom",ct:"_wrap",
clickEvent:"click",keyEvent:true,selectionProvider:{forceSelect:true}}));this.follow(f);f.on("selected",this.onBottomItemSelected);this.addBottomNode(f)},addBottomNode:function(f){this.view.appendChild(f.view)},getWrapperInsets:function(){var f=this.superclass.getWrapperInsets.call(this),h=this.bottomHeight-1;f[2]+=h;f[4]+=h;return f}}});CC.Tpl.def("Util.alert.input",'<div class="msgbox-input"><table class="swTb"><tbody><tr><td valign="top"><b class="icoIfo" id="_ico"></b></td><td><span id="_msg" class="swTit"></span>&nbsp;<input type="text" style="" class="gIpt" id="_input"/><p class="swEroMsg"><span id="_err"></span></p></span></td></tr></tbody></table></div>');
CC.extendIf(CC.Util,function(){function a(b){return this.indexOf(b.id)>=0}return{_sysWin:null,getSystemWin:function(){var b=this._sysWin;if(!b){b=this._sysWin=new CC.ui.Dialog({id:"sysWin",setState:fGo,cs:"sysWin bot",resizeable:false,width:400,hidden:true,autoRender:true,keyEvent:true,showTo:document.body,setZ:fGo,buttons:[{title:"\u53d6&nbsp;\u6d88",id:"cancel"},{title:"\u786e&nbsp;\u5b9a",id:"ok"},{title:"&nbsp;\u5426&nbsp;",id:"no"},{title:"&nbsp;\u662f&nbsp;",id:"yes"},{title:"\u5173&nbsp;\u95ed",
id:"close"}]});b.getInputEl=function(){return this.wrapper.dom("_input")}}return b},alert:function(b,e,g,f,h,l){e=e||"\u63d0\u793a";var d=this.getSystemWin();d.setTitle(e).setSize(400,153).wrapper.html('<div class="msgbox-dlg">'+(b||"")+"</div>");if(!f)l=f="ok";d.bottomer.filter(a,f);if(l)d.defaultButton=l;d.fastStyleSet("visibility","hidden");d.show(h||document.body,true,g);(function(){d.autoHeight().center(h);d.fastStyleSet("visibility","")}).timeout(0)},inputBox:function(b,e,g,f,h,l){e=e||"\u63d0\u793a";
var d=this.getSystemWin();d.setTitle(e).setSize(400,175).wrapper.html(CC.Tpl["Util.alert.input"]).dom("_msg").innerHTML=b;d.wrapper.dom("_input");if(!f){f="ok|cancel";l="ok"}d.bottomer.filter(a,f);if(l)d.defaultButton=l;d.show(h||document.body,true,g);(function(){d.getInputEl().focus()}).timeout(80)}}}());
(function(){var a=window.CC,b=a.Event,e=a.util.SelectionProvider.prototype;a.Tpl.def("CC.ui.Menu",'<div class="g-panel g-menu"><div id="_wrap" class="g-panel-wrap"><ul class="g-menu-opt" id="_bdy"  tabindex="1" hidefocus="on"></ul></div></div>').def("CC.ui.MenuItem",'<li class="g-menu-item"><span id="_tle" class="item-title"></span></li>');a.create("CC.ui.menu.MenuSelectionProvider",a.util.SelectionProvider,{forceSelect:true,selectedCS:false,onSelect:function(g,f){g.handleClick(f);e.onSelect.call(this,
g)},navigateKey:function(g){switch(g.keyCode){case b.UP:this.t.menubar?this.tryActive(this.t,true):this.pre();b.stop(g);break;case b.DOWN:this.t.menubar?this.tryActive(this.t,true):this.next();b.stop(g);break;case b.LEFT:this.t.menubar?this.pre():this.left();b.stop(g);break;case b.RIGHT:this.t.menubar?this.next():this.right();b.stop(g);break;case b.ENTER:this.enter();b.stop(g);break;case b.ESC:this.esc();b.stop(g);break;default:return this.defKeyNav(g)}},tryActive:function(g,f){var h=g.onItem;if(h&&
h.subMenu){h.showMenu(true);this.tryActive(h.subMenu)}else(h=g.getSelectionProvider().getNext())&&h.active(f)},getStartIndex:function(){var g=this.t,f=g.onItem;return f?g.indexOf(f):-1},next:function(){var g=this.t,f=this.getNext();f||(f=g.$(0));f&&f.active(g.menubar)},pre:function(){var g=this.t,f=this.getPre();f||(f=g.$(g.size()-1));f&&f.active(g.menubar)},left:function(){var g=this.t;if(g.menubar)this.pre();else if(g=g.pItem){g.showMenu(false);g.pCt.menubar?g.pCt.getSelectionProvider().pre():g.active()}},
right:function(){var g=this.t;if(g.menubar)this.next();else{var f=g.onItem;if(f&&f.subMenu){f.showMenu(true);this.tryActive(f.subMenu)}else g.getRoot().getSelectionProvider().next()}},esc:function(){var g=this.t,f=g.onItem;if(g.menubar){if(f){f.deactive(true);g.setAutoExpand(false)}}else{var h=f&&f.subMenu;if(h&&!h.hidden)f.active(false);else g.pItem?g.pItem.active(false):g.hide()}},enter:function(){var g=this.t.onItem;g&&this.select(g)}});a.create("CC.ui.MenuItem",a.Base,function(g){return{subMenu:null,
subCS:"sub-x",active:function(f){if(!this.disabled){var h=this.pCt,l=h.onItem;if(l!==this){l&&l.deactive(true);this.deactiveTimer&&this.clearDefer();h.onItem=this;(l=h.pItem)&&!l.isActive()&&l.active(f);this.decorateActive(true)}h.focus();this.subMenu&&this.showMenu(f)}},isActive:function(){return this.pCt.onItem===this},decorateActive:function(f){this.checkClass(this.pCt.activeCS,f)},deactive:function(f){var h=this.subMenu;this.pCt.onItem=null;this.deactiveTimer&&this.clearDefer();this.decorateActive(false);
h&&f&&!h.hidden&&this.showMenu(false)},deferDeactive:function(f){this.deactiveTimer=this.deactive.bind(this,f).timeout(100)},clearDefer:function(){clearTimeout(this.deactiveTimer);this.deactiveTimer=false},decorateExpand:function(f){this.checkClass(this.pCt.expandCS,f)},handleClick:function(f){var h=this.pCt;if(h.menubar){this.active(true);h.contexted||h.bindContext();h.setAutoExpand(true)}else if(this.subMenu){this.active(true);f&&b.stop(f)}else h.hideAll()},showMenu:function(f){var h=this.subMenu;
if(h)if(h.hidden!==!f){var l=this.pCt;h.rendered||h.render();if(f){this.decorateExpand(true);h.setZ((l.getZ()||8888)+2);l.menubar?h.anchorPos(this,"lb","hr",null,true,true):h.anchorPos(this,"rt","vd",null,true,true);h.focus(0)}else{this.decorateExpand(false);h.onItem&&h.onItem.deactive(true)}h.display(f)}},bindMenu:function(f){f.pItem=this;this.subMenu=f;this.decorateSub(true)},decorateSub:function(f){this.checkClass(this.subCS,f)},unbind:function(){var f=this.subMenu;if(f){this.decorateSub(false);
delete f.pItem;delete this.subMenu}},initComponent:function(){g.initComponent.call(this);if(this.array){this.bindMenu(new a.ui.Menu({array:this.array,showTo:document.body}));delete this.array}},onRender:function(){g.onRender.call(this);if(this.subMenu)this.subMenu.rendered||this.subMenu.render()},destory:function(){if(this.subMenu){this.subMenu.destory();this.unbind()}g.destory.call(this)}}});a.create("CC.ui.Menu",a.ui.Panel,function(g){return{hidden:true,width:115,pItem:null,activeCS:"itemOn",expandCS:"subHover",
clickEvent:"mousedown",shadow:true,onItem:null,selectionProvider:a.ui.menu.MenuSelectionProvider,itemCls:a.ui.MenuItem,ct:"_bdy",menubarCS:"g-menu-bar",separatorCS:"g-menu-separator",initComponent:function(){if(this.shadow===true)this.shadow=new a.ui.Shadow({inpactH:6,inpactY:-2,inpactX:-5,inpactW:9});g.initComponent.call(this);this.menubar&&this.addClass(this.menubarCS);if(this.array){this.fromArray(this.array);delete this.array}this.noUp();this.itemAction("mouseover",this.mouseoverCallback,true);
this.itemAction("mouseout",this.mouseoutCallback,true)},mouseoverCallback:function(f){var h=this.pItem,l=this.onItem;if(l!==f){l&&l.deactive(true);h&&h.deactiveTimer&&h.clearDefer();this.menubar&&!this.autoExpand?f.active():f.active(true)}else l&&l.clearDefer()},mouseoutCallback:function(f){if(this.menubar)this.autoExpand||f.deferDeactive();else f.deferDeactive(true)},attach:function(f,h){h=this.$(h);h.bindMenu(f);this.menubar&&h.decorateSub(false)},beforeAdd:function(f){g.beforeAdd.apply(this,arguments);
if(f.separator){this.addSeparator();delete f.separator}this.menubar&&f.subMenu&&f.decorateSub(false)},beforeRemove:function(f){f===this.onItem&&this.onItem.deactive();return g.beforeRemove.call(this,f)},detach:function(f){f=this.$(f);f.unbind()},getRoot:function(){var f=this.pItem;if(!f)return this;return f.pCt.getRoot()},hideAll:function(){var f=this.getRoot();if(f.menubar&&f.onItem){f.onItem.deactive(true);f.setAutoExpand(false)}else f.display(false)},onHide:function(){g.onHide.call(this);this.onItem&&
this.onItem.deactive(true);this.onDisplay(false)},onShow:function(){g.onShow.call(this);this.onDisplay(true)},onDisplay:fGo,setAutoExpand:function(f){this.autoExpand=f},addSeparator:function(){this._addNode(a.ui.Menu.Separator.view.cloneNode(true))},at:function(f,h,l){this.display(true);if(typeof f==="number"){this.anchorPos([f,h,0,0],"lb","hr",null,true,true);l!==false&&!this.menubar&&this.bindContext()}else{this.anchorPos(f,"lb","hr",null,true,true);h!==false&&!this.menubar&&this.bindContext()}},
destory:function(){this.each(function(){if(this.subMenu&&!this.disabledCascadeDel){var f=this.subMenu;this.pCt.detach(this);f.destory()}});g.destory.call(this)}}});a.ui.Menu.Separator=a.$$(a.$C({tagName:"LI",className:a.ui.Menu.prototype.separatorCS}));a.create("CC.ui.Menubar",a.ui.Menu,{menubar:true,hidden:false,shadow:false,onContextedRelease:function(){this.onItem&&this.onItem.deactive(true);this.getSelectionProvider().select(null);this.setAutoExpand(false);return false},bindContext:function(){return a.ui.Menu.prototype.bindContext.call(this,
this.onContextedRelease)}});a.ui.def("menu",a.ui.Menu);a.ui.def("menuitem",a.ui.MenuItem);a.ui.def("menubar",a.ui.Menubar)})();
(function(){var a=window.CC;a.Tpl.def("CC.ui.Tree",'<div class="g-tree"><div class="g-panel-body g-panel-body-noheader" id="_scrollor"><ul id="_ctx" class="g-tree-nd-ct  g-tree-arrows" tabindex="1" hidefocus="on"></ul></div></div>').def("CC.ui.TreeItem",'<li class="g-tree-nd"><div class="g-tree-nd-el g-unsel" unselectable="on" id="_head"><span class="g-tree-nd-indent" id="_ident"></span><img class="g-tree-ec-icon" id="_elbow" src="'+a.Tpl.BLANK_IMG+'"/><img unselectable="on" class="g-tree-nd-icon" src="'+
a.Tpl.BLANK_IMG+'" id="_ico" /><a class="g-tree-nd-anchor" unselectable="on" hidefocus="on" id="_tle"></a></div><ul class="g-tree-nd-ct" id="_bdy" style="display:none;" tabindex="1" hidefocus="on"></ul></li>').def("CC.ui.TreeItemSpacer",'<img class="g-tree-icon" src="'+a.Tpl.BLANK_IMG+'"/>');var b=a.ui.ContainerBase,e=b.prototype;a.create("CC.ui.TreeItem",b,{root:null,ct:"_bdy",expandEvent:"dblclick",dragNode:"_head",hoverCS:"g-tree-nd-over g-tree-ec-over",splitEndPlusCS:"g-tree-split-end-plus",splitEndMinCS:"g-tree-split-end-minus",
splitPlusCS:"g-tree-split-plus",splitMinCS:"g-tree-split-minus",splitCS:"g-tree-split",splitEndCS:"g-tree-split-end",nodeOpenCS:"g-tree-nd-opn",nodeClsCS:"g-tree-nd-cls",nodeLeafCS:"g-tree-nd-leaf",loadCS:"g-tree-nd-loading",elbowLineCS:"g-tree-elbow-line",springCS:"spring",mouseoverNode:"_head",mouseoverTarget:"_head",nodes:false,clickEvent:"click",clickEventNode:"_head",initComponent:function(){if(!this.root)this.root=this;if(this.array&&!this.nodes)this.nodes=true;e.initComponent.call(this);this._ident=
this.$$("_ident");this._elbow=this.$$("_elbow");this._head=this.$$("_head");if(this.nodes){this.expandEvent&&this.domEvent(this.expandEvent,this.expand,true,null,this._head.view);this.domEvent("mousedown",this.expand,true,null,this._elbow.view).domEvent("click",a.Event.noUp,true,null,this._elbow.view)}else this._head.addClass(this.nodeLeafCS);this._decElbowSt(false)},addIcon:function(l,d){var m=a.Tpl.$("CC.ui.TreeItemSpacer");d&&a.extend(m,d);a.fly(m).addClass(l).unfly();this.fly(this.titleNode).insertBefore(m).unfly();
return this},addSpring:function(l){l.view&&this.follow(l);this.fly(this.titleNode).insertBefore(l).unfly();a.fly(l).addClass(this.springCS).unfly()},expand:function(l){if(l!==true&&l!==false)l=!a.display(this.ct);if(this.root.tree.fire("expand",this,l)===false)return false;this._decElbowSt(l);a.display(this.ct,l);this.expanded=l;return this.root.tree.fire("expanded",this,l)},_decElbowSt:function(l){if(arguments.length==0)l=a.display(this.ct);var d=this.pCt;d=!d||d.ct.lastChild==this.view;var m=this._elbow,
o=this.splitEndPlusCS,q=this.splitEndMinCS,p=this.splitPlusCS,v=this.splitMinCS;if(this.nodes){if(d)if(m.hasClass(p))m.delClass(p);else m.hasClass(v)&&m.delClass(v);else if(m.hasClass(o))m.delClass(o);else m.hasClass(q)&&m.delClass(q);if(l){d?m.switchClass(o,q):m.switchClass(p,v);this._head.switchClass(this.nodeClsCS,this.nodeOpenCS)}else{d?m.switchClass(q,o):m.switchClass(v,p);this._head.switchClass(this.nodeOpenCS,this.nodeClsCS)}}else d?m.switchClass(this.splitCS,this.splitEndCS):m.switchClass(this.splitEndCS,
this.splitCS)},add:function(l){e.add.call(this,l);l._decElbowSt();l._applyChange(this);if(l=l.previous){l._decElbowSt();l._applyChange(this)}},_applyChange:function(l){this._applyRoot(l.root);this._applySibling();this._fixSpacer(l);if(this.nodes)this.itemCls=l.root.itemCls},_applyRoot:function(l){if(this.root!==l){this.root=l;if(this.nodes)for(var d=this.children,m=d.length-1;m>=0;m--)if(d[m].nodes)d[m]._applyRoot(l);else d[m].root=l}},_applySibling:function(l){if(l){if(this.previous)this.previous.next=
this.next;if(this.next)this.next.previous=this.previous;this.next=this.previous=null}else if(l=this.pCt){c=l.children;idx=c.indexOf(this);if(this.next=c[idx+1])this.next.previous=this;if(this.previous=c[idx-1])this.previous.next=this}else this.previous=this.next=null},clickEventTrigger:function(l){this.root.tree.fire("itemclick",this,l)},eachH:function(l,d){var m=this.children,o;if(d===f)d=0;for(var q=0,p=m.length;q<p;q++){o=m[q];if(l.call(o,o,++d)===false)return false;if(o.nodes)if(o.eachH(l,d)===
false)return false}},remove:function(l){l=this.$(l);var d=this.children[this.children.length-1]==l,m=l.previous;l._applySibling(true);e.remove.call(this,l);this.root.tree.getSelectionProvider().onItemRemoved(l);d&&this.size()>0&&this.children[this.children.length-1]._decElbowSt();m&&m._applyChange(this);return this},onRender:function(){this.root=this.pCt.root;this._applySibling();e.onRender.call(this);if(this.expanded){delete this.expanded;this.expand(true)}},insert:function(l,d){e.insert.call(this,
l,d);d._applyChange(this);d._decElbowSt()},getSpacerNodes:function(){var l=a.Tpl.forNode(a.Tpl["CC.ui.TreeItemSpacer"]);if(this.root===this)return l;for(var d=this._ident.view.childNodes,m=document.createDocumentFragment(),o=0,q=d.length;o<q;o++)m.appendChild(d[o].cloneNode(true));m.appendChild(l);return m},_fixSpacer:function(l){var d=this._ident.view;d.innerHTML="";d.appendChild(l.getSpacerNodes());l.next&&a.addClassIf(d.lastChild,l.elbowLineCS);if(this.nodes){l=0;for(d=this.size();l<d;l++)this.children[l]._fixSpacer(this)}}});
a.ui.TreeItem.prototype.itemCls=a.ui.TreeItem;a.ui.def("treeitem",a.ui.TreeItem);var g=a.ui.ContainerBase.prototype,f=window.undefined;a.create("CC.ui.tree.TreeSelectionProvider",a.util.SelectionProvider,{selectedCS:"g-tree-selected",decorateSelected:function(l,d){l._head.checkClass(this.selectedCS,d)},isSelected:function(l){return l._head.hasClass(this.selectedCS)},getNext:function(){var l=this.selected,d=this.t.root,m;if(l){l=l;for((m=!(l.nodes&&l.expanded&&l.children.length>0))||(l=l.children[0]);;)if(m)if(l.next){l=
l.next;if(this.canNext(l))break}else{if(l===d){l=null;break}l=l.pCt}else if(this.canNext(l))break;else m=true}else l=d;return l},getPre:function(){var l=this.selected,d=this.t.root,m;if(l){for(m=l.previous;(!m||!this.canPre(m)||m.nodes&&m.expanded&&m.children.length>0)&&m!=d;)if(m)m=m.nodes&&this.canPre(m)?m.children[m.children.length-1]:m.previous;else{m=l===d?null:l.pCt;break}if(m===l)m=null}else m=d;return m}});a.create("CC.ui.tree.TreeItemLoadingIndicator",a.ui.Loading,{markIndicator:function(){this.target._head.addClass(this.target.loadCS)},
stopIndicator:function(){var l=this.target;l._head.delClass(l.loadCS);l.getConnectionProvider().getConnectionQueue().isConnectorLoaded(l._dataConnectorId)&&l.expand(true)}});a.ui.TreeItem.prototype.indicator=a.ui.tree.TreeItemLoadingIndicator;var h={nodes:true,draggable:false,itemCls:a.ui.TreeItem,ctype:"treeitem"};a.create("CC.ui.Tree",a.ui.ContainerBase,{ct:"_ctx",url:false,autoLoad:false,parentParamName:"pid",keyEvent:true,clickEventTrigger:a.ui.TreeItem.prototype.clickEventTrigger,clickEventNode:"_head",
clickEvent:true,selectionProvider:a.ui.tree.TreeSelectionProvider,initComponent:function(){a.delAttr(this,"array");g.initComponent.call(this);if(!this.root||this.root.cacheId===f){var l=this.root||this.rootCfg;l&&delete this.rootCfg;this.root=this.instanceItem(a.extendIf(l,h))}if(this.hideRoot){this.root._head.hide();delete this.hideRoot}this.root.tree=this;this.add(this.root);this.on("expand",this.onExpand,this)},onExpand:function(l,d){if(this.autoLoad&&d)if(!this.isItemRequested(l)){this.loadItem(l);
return l.children.length>0}},loadItem:function(l){var d=this.getItemUrl(l);if(d){var m=l.getConnectionProvider();m.getIndicator();if(!this.isItemRequested(l))l._dataConnectorId=m.connect(d)}},isItemRequested:function(l){return!!l._dataConnectorId},getItemUrl:function(l){var d=a.templ(this,this.url);if(d)d+=(d.indexOf("?")>0?"&":"?")+encodeURIComponent(this.parentParamName)+"="+encodeURIComponent(l.id);return d},$:function(l){return l},each:function(l){var d=this.root;if(l.call(d,d,0)!==false)return d.eachH(l,
1)},setSize:function(l){g.setSize.apply(this,arguments);if(l!==false&&a.ie){var d=this.getScrollor();d!==this&&d.setWidth(this.width)}}});a.ui.def("tree",a.ui.Tree)})();
(function(){function a(p){return!!((p&3)==0&&(p%100||p%400==0&&p))}function b(p,v){return v!=2?m[v-1]:a(p)?29:28}function e(p){p=(p.getDay()-(p.getDate()-1))%7;return p<0?p+7:p}function g(p){(function(){q.hide();q.bindingEditor.value=p;q.bindingEditor=null}).timeout(200)}function f(){var p=q,v=h.fly(p.bindingEditor);p.display(true);p.setValue(p.bindingEditor.value.trim(),true);p.anchorPos(v,"lb","hr",null,true,true);v.unfly();p.bindContext()}var h=window.CC,l=h.ui.Panel.prototype,d,m=[31,28,31,30,
31,30,31,31,30,31,30,31],o=h.Event;h.Tpl.def("CC.ui.Datepicker",'<div class="g-datepicker" ><div style="position: relative;"><table cellspacing="0" cellpadding="0" class="entbox"><tbody><tr><td class="headline"><table width="100%" cellspacing="0" cellpadding="1" align="center" class="dxcalmonth"><tbody><tr><td align="left" class="month_btn_left"><span></span></td><td align="center"><table cellspacing="0" cellpadding="0" align="center"><tbody><tr><td><div id="_seltor" class="g-datepicker-selecor" style="display:none;"></div><div id="_planeY" class="planeYear" style="cursor: pointer;">1955</div></td><td class="comma">,</td><td><div id="_planeM" class="planeMonth" title="\u70b9\u51fb\u9009\u62e9\u6216\u76f4\u63a5\u8f93\u5165\u5e74\u4efd\u503c"></div></td></tr></tbody></table></td><td align="right" class="month_btn_right"><span></span></td></tr></tbody></table></td></tr><tr><td><table width="100%" cellspacing="0" cellpadding="0" class="g-datepicker-body"><tbody><tr><th class="month_spr"><span>\u6708</span></th><th><span>\u65e5</span></th><th><span>\u4e00</span></th><th><span>\u4e8c</span></th><th><span>\u4e09</span></th><th><span>\u56db</span></th><th><span>\u4e94</span></th><th><span>\u516d</span></th><th class="month_spr"><span>\u6708</span></th></tr></tbody></table></td></tr><tr><td id="_monthWrap"></td></tr><tr><td style="text-align:center;padding-bottom:5px;" id="_tdytd"></td></tr></tbody></table><div class="leftsplit" id="_preBar" onmouseover="CC.addClass(this, \'leftsplitOn\')" onmouseout="CC.delClass(this, \'leftsplitOn\')" ></div><div class="rightsplit" onmouseover="CC.addClass(this, \'rightsplitOn\')" onmouseout="CC.delClass(this, \'rightsplitOn\')" id="_nxtBar"></div></div></div>');
h.create("CC.ui.Datepicker",h.ui.Panel,{shadow:true,unselectable:true,eventable:true,value:new Date,fmt:"yy/mm/dd",mm:null,yy:null,dd:null,keyEvent:true,initComponent:function(){l.initComponent.call(this);this.monthWrap=this.dom("_monthWrap");this.domEvent("click",this.onDayClick,true,null,this.monthWrap).domEvent("click",this.onYearList,true,null,"_planeY").domEvent("click",this.onNavBarMove,true,null,"_nxtBar").domEvent("click",this.onNavBarMove,true,null,"_preBar");h.Util.qtip&&h.Util.qtip(this.$$("_planeY"),
"\u70b9\u51fb\u9009\u62e9\u6216\u76f4\u63a5\u8f93\u5165\u5e74\u4efd\u503c");this.value&&this.setValue(this.value,true);this.todayBtn=new h.ui.Button({showTo:this.dom("_tdytd"),title:"\u4eca\u5929"});this.follow(this.todayBtn).domEvent("click",this.toToday,true,null,this.todayBtn.view).selectorNode=this.dom("_seltor")},_hideYearSel:function(){h.fly(this.selectorNode).display(false).unfly()},onNavBarMove:function(p){o.element(p).id=="_nxtBar"?this.selectYear(this.yy+1):this.selectYear(this.yy-1)},selectYear:function(p){this.setValue(new Date(p,
this.mm,1),true)},toToday:function(){this.setValue(new Date)},onYearList:function(){var p=this.selectorNode;h.fly(p).bindContext().display(true).unfly();p.firstChild||this.createList();p.firstChild.value=this.yy;p.lastChild.value="";(function(){p.lastChild.focus()}).timeout(20)},createList:function(){var p=this.selectorNode,v=this.fly("_planeY");v.getSize();p.innerHTML=this.getSelectListHtml();var A=p.firstChild,z=p.lastChild;v.unfly();h.fly(z).fastStyleSet("width",A.offsetWidth).fastStyleSet("height",
A.offsetHeight).unfly();this.domEvent("change",function(){this.selectYear(A.value);this._hideYearSel()},false,null,A);this.noUp("click",p).bindEnter(function(){var D=parseInt(z.value.trim());isNaN(D)||this.selectYear(D);this._hideYearSel()},true,null,z)},getSelectListHtml:function(){for(var p=["<select>"],v=this.selectYearEnd||2100,A=this.selectYearStart||1900;A<=v;A++)p.push('<option value="'+A+'">'+A+"</option>");p.push('<input type="text" class="g-corner" />');return p.join("")},onDayClick:function(p){p=
o.element(p);if(p!=this.monthWrap){p=h.tagUp(p,"TD").id;p.indexOf("/")>0?this.setValue(new Date(p)):this.setValue(new Date(this.yy,parseInt(p),1),true)}},setValue:function(p,v){var A=this.currentDate;h.isDate(p)||(p=h.dateParse(p,this.fmt));var z=p.getFullYear();if(isNaN(z))__debug&&console.log("invalid date :"+p);else{var D=p.getMonth(),C=p.getDate();this.yy=z;this.mm=D;this.dd=C;this.currentDate=p;this.update(A);if(!v&&(!this.disableFilter||!this.disableFilter(z,D,C)))this.fire("select",h.dateFormat(p,
this.fmt),p)}},update:function(p){var v=this.mm+1,A=this.yy,z=this.dd;this.dom("_planeM").innerHTML=v+"\u6708";this.dom("_planeY").innerHTML=A+"\u5e74";var D=h.fly(this.monthWrap);if(p&&A==p.getFullYear()&&v==p.getMonth()+1){p=p.getMonth()+1+"/"+p.getDate()+"/"+p.getFullYear();h.delClass(D.dom(p),"selday")}else this.monthWrap.innerHTML=this.getMonthHtml(this.currentDate);p=v+"/"+z+"/"+A;(v=D.dom(p))&&h.addClass(v,"selday");D.unfly()},getMonthHtml:function(p){var v=[],A=new Date,z=A.getFullYear(),
D=p.getMonth()+1,C=p.getFullYear(),u=b(C,D),k=D-1,n=C,t=n,w=k==0?12:k;if(w==12)n-=1;k=D+1;k=k>12?1:k;if(k==1)t+=1;var x=e(p);p=b(n,w);var B=p-x+1;if(x==0)B=p-6;v.push('<table class="g-datepicker-days"  width="100%" cellspacing="0" cellpadding="0"><tbody>');x=0;var F="preday";w=w;n=n;for(var G=this.disableFilter,H=0;H<6;H++){v.push('<tr><td class="month_sep');H+1===D&&v.push(" selmonth");v.push('" id="'+H+'"><a href="javascript:fGo()" hidefocus="on">'+(H+1)+"</a></td>");for(var J=0;J<7;J++){v.push('<td class="'+
F);if(J==6)v.push(" sateday");else J==0&&v.push(" sunday");G&&G(n,w,B)&&v.push(" disabledday");v.push('" id="'+w+"/"+B+"/"+n+'"><a');z===n&&A.getMonth()+1===w&&A.getDate()===B&&v.push(' class="today" title="\u4eca\u5929:'+n+"\u5e74"+w+"\u6708"+B+'\u65e5"');v.push(' href="javascript:fGo()" hidefocus="on">'+B+"</a></td>");B++;if(B>p&&x==0){x=B=1;F="curday";w=D;n=C}else if(x==1&&B>u){x=2;B=1;F="nxtday";w=k;n=t}}v.push('<td class="month_sep month_r');H+7===D&&v.push(" selmonth");v.push('" id="'+(H+6)+
'"><a href="javascript:fGo()" hidefocus="on">'+(H+7)+"</a></td></tr>")}v.push("</tbody></table>");return v.join("")}});d=h.ui.Datepicker;d.dateFormat="yy/mm/dd";var q;d.getInstance=function(){if(!q){q=d.instance=new d({hidden:true,showTo:document.body,autoRender:true});q.on("select",g)}return q};d.show=function(p){d.getInstance();q.dateFormat=d.dateFormat;q.bindingEditor=p;f(true)}})();
(function(){var a=window.CC,b,e=a.Cache;a.create("CC.ui.grid.Column",a.Base,function(g){return{resizeDisabled:false,sortedCS:"sorted",ascCS:"asc",descCS:"desc",sortIndicatorCS:"sort-icon",createView:function(){this.view=a.$C({tagName:"TD",innerHTML:'<div class="hdrcell"></div>'});this.bdEl=this.view.firstChild;this.createViewBody(this.bdEl)},createViewBody:function(f){f.appendChild(a.$C({tagName:"span",id:"_tle"}))},onRender:function(){if(this.width!==false){var f=a.delAttr(this,"width");g.onRender.call(this);
this.width=f}else g.onRender.call(this)},cellBrush:function(f){return f},sortDecorator:function(f,h){this.addClassIf(this.sortedCS);if(h&&h!==this&&!h.order){h.checkClass(this.descCS,false);h.checkClass(this.ascCS,false)}f=f==="desc";this.switchClass(f?this.ascCS:this.descCS,f?this.descCS:this.ascCS);if(this.pCt){f=this.pCt._sortDecorateEl;if(!f)f=this.pCt._sortDecorateEl=a.Tpl.forNode('<span class="'+this.sortIndicatorCS+'"></span>');f.parentNode!==this.bdEl&&this.bdEl.appendChild(f)}},setWidth:function(f,
h){var l=this.pCt,d=this.preWidth,m;m=!d?false:f-d;if(l){h&&this.lock(true);l.fireUp("colwidthchange",this.pCt.indexOf(this),this,f,m);if(f!==this.width){f=this.width;if(m!==false)m=f-d}l.fireUp("aftercolwidthchange",this.pCt.indexOf(this),this,f,m);h&&this.lock(false)}else this.width=f;this.preWidth=f;return this},onShow:function(){this.pCt.fireUp("showcolumn",true,this,this.pCt.indexOf(this))},onHide:function(){this.pCt.fireUp("showcolumn",false,this,this.pCt.indexOf(this))},locked:0,lock:function(f){f?
this.locked++:this.locked--;if(this.locked<0){if(__debug)throw"lock operation failed: locked < 0";this.locked=0}}}});a.Tpl.def("CC.ui.Grid",'<div class="g-grid"></div>');a.create("CC.ui.Grid",a.ui.Panel,function(g){return{layout:"row",plugins:[{name:"header",ctype:"gridhd"},{name:"content",ctype:"gridcontent"}],initComponent:function(){g.initComponent.call(this);this.plugins=this.addPluginsInner(this.getInitPlugins())},onRender:function(){var f=false,h=false;if(this.width!==false)f=a.delAttr(this,
"width");if(this.height!==false)h=a.delAttr(this,"height");g.onRender.call(this);if(f!==false||h!==false)this.setSize(f,h)},extraRegisterEventMaps:function(f){for(var h=a.getObjectLinkedValues(f,"gridEventHandlers",true),l=0,d=h.length;l<d;l++)this.attachPluginEventHandlers(f,h[l])},attachPluginEventHandlers:function(f,h){if(typeof h==="function")h=h(f);for(var l in h)this.on(l,h[l],f)},pluginComparator:function(f,h){f=f.weight===b?f.ctype?a.ui.getCls(f.ctype).prototype.weight:0:f.weight;h=h.weight===
b?h.ctype?a.ui.getCls(h.ctype).prototype.weight:0:h.weight;if(f===h)return 0;return f<h?-1:1},getInitPlugins:function(){var f=a.getObjectLinkedValues(this,"plugins"),h;if(f.length===1)h=f[0];else if(f.length===0)return f;else{h=[];for(var l=0,d=f.length;l<d;l++)h=h.concat(f[l])}return h},addPluginsInner:function(f){f.sort(this.pluginComparator);var h,l,d,m,o,q=[];m=0;for(o=f.length;m<o;m++){l=f[m];h=l.name;h=l.cfgId||h;d={};a.extend(d,l);a.extend(d,a.delAttr(this,h));l=d.ctype;d.grid=this;__debug&&
tester.ok(!!l,true);d=a.ui.instance(l,d);this.extraRegisterEventMaps(d);q[m]=d;this[h]=d}f=[];m=0;for(o=q.length;m<o;m++){l=q[m];h=l.name;this.fireOnce("beforeinit"+h,l,this);if(l.initPlugin)if(d=l.initPlugin(this)){f.push(h);if(d===true)d=l;f.push(d);f.push(l)}this.fireOnce("afterinit"+h,l,this)}if(f.length){m=0;for(o=f.length;m<o;m+=3){this.fireOnce("beforeadd"+f[m],f[m+1],f[m+2]);this.layout.add(f[m+1]);this.fireOnce("afteradd"+f[m],f[m+1],f[m+2])}}return q},addPlugin:function(f){f=this.addPluginsInner([f]);
this.plugins.push(f[0])},destoryPlugins:function(){var f=this;a.each(this.plugins,function(){this.destoryPlugin&&this.destoryPlugin(f)})},destory:function(){this.destoryPlugins();g.destory.call(this)}}});a.ui.Grid.SCROLLBAR_WIDTH=17;a.ui.def("grid",a.ui.Grid);e.register("CC.ui.grid.Cell",function(){var g=a.$C({tagName:"TD",className:"grid-td"});g.appendChild(a.$C({tagName:"DIV",id:"_tle",className:"cell"}));return g});a.create("CC.ui.grid.Cell",a.Base,function(){return{brush:false,getTitleNode:function(){return this.view.firstChild},
setTitle:function(){return this}}});a.ui.grid.Column.prototype.colCls=a.ui.grid.Cell;e.register("CC.ui.grid.Row",function(){return a.$C({tagName:"TR",className:"grid-row"})});a.create("CC.ui.grid.Row",a.ui.ContainerBase,{eventable:false,brush:false,itemCls:a.ui.grid.Cell,hoverCS:"row-over",blockMode:0,displayMode:3,createView:function(){if(this.pCt)this.pCt.createRowView(this);else{this.view=e.get("CC.ui.grid.Row");a.ui.ContainerBase.prototype.createView.call(this)}},mouseoverCallback:function(g){this.pCt.onRowOver(this,
g)},mouseoutCallback:function(g){this.pCt.onRowOut(this,g)},fromArray:function(g){for(var f,h=this.pCt.grid.header.children,l=0,d=g.length;l<d;l++){cls=h[l].colCls;if(typeof cls==="string")cls=a.ui.ctypes[cls];f=g[l];if(!f.cacheId){f.ctype||(f=a.extendIf(f));f=this.instanceItem(f,cls,true)}this.add(f)}return this},getCell:function(g){var f=this.pCt.pCt.header;return this.$(f.indexOf(f.$(g)))},dataAt:function(g,f){if(f===b)return this.getCell(g).getValue();this.getCell(g).setValue(f)},textAt:function(g,
f,h){if(f===b)return this.$(g).getTitle();g=this.getCell(g);g.setTitle(f);h&&this.pCt.updateCell(g,f)},fire:fGo});a.ui.def("gridrow",a.ui.grid.Row)})();CC.Tpl.def("CC.ui.grid.Header",'<div class="g-grid-hd"><div class="hd-inner" id="_hd_inner"><table class="hd-tbl" id="_hd_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup><tbody><tr id="_ctx"></tr></tbody></table></div><div class="g-clear"></div></div>');
CC.create("CC.ui.grid.Header",CC.ui.ContainerBase,function(a){var b=CC.Base;return{itemCls:CC.ui.grid.Column,ct:"_ctx",peerCS:"peer",createView:function(){a.createView.call(this);this.grpEl=this.dom("_grp");this.hdTbl=this.$$("_hd_tbl")},onAdd:function(e){a.onAdd.apply(this,arguments);var g=CC.$C("COL");g.className=this.peerCS;this.grpEl.appendChild(g);e._colPeer=g},initPlugin:function(){return true},updateColWrapTblWidth:function(e,g){var f=this.hdTbl;if(f.width===false)f.setWidth(e);else g===false?
f.setWidth(f.width+e):f.setWidth(f.width+g)},gridEventHandlers:{colwidthchange:function(e,g,f){e=g.view;g.view=g._colPeer;b.prototype.setWidth.call(g,f);g.view=e},aftercolwidthchange:function(e,g,f,h){this.updateColWrapTblWidth(f,h)},contentscroll:function(e,g){if(parseInt(this.view.scrollLeft,10)!==g)this.view.scrollLeft=g},showcolumn:function(e,g){g._colPeer.style.width=e?g.width+"px":"0px";e||this.updateColWrapTblWidth(false,-g.width)}},fireUp:function(){var e=this.pCt;if(e)return e.fire.apply(e,
arguments)},getColumnCount:function(){return this.children.length}}});CC.ui.grid.Header.WEIGHT=CC.ui.grid.Header.prototype.weight=-100;CC.ui.def("gridhd",CC.ui.grid.Header);CC.Tpl.def("CC.ui.grid.Content",'<div class="g-grid-ct"><table class="ct-tbl" id="_ct_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup><tbody id="_ctx"></tbody></table></div>');
CC.create("CC.ui.grid.Content",CC.ui.Panel,function(a){var b,e=CC.Cache,g=CC.ui.ContainerBase.prototype;return{itemCls:CC.ui.grid.Row,ct:"_ctx",useContainerMonitor:true,syncWrapper:false,clickEvent:"click",selectionProvider:{selectedCS:"row-select"},lyInf:{h:"lead"},initPlugin:function(){this.ctTbl=this.$$("_ct_tbl");return true},setupColumnLever:function(){var f,h,l=this.levers=[],d=this.grid.header.children,m=d.length,o=this.dom("_grp");for(h=0;h<m;h++){f=this.$$(CC.$C("COL"));l[h]=f;d[h].hidden&&
this.setCellsVisible(false,h,f);o.appendChild(f.view)}if(f=this.cacheWidths){delete this.cacheWidths;h=0;for(m=f.length;h<m;h++)f[h]!==b&&l[h].setWidth(f[h])}},onRender:function(){this.setup();a.onRender.call(this);this.batchUpdating=true;this.updateView();this.batchUpdating=false},setup:function(){this.setupColumnLever();this.setupEvent()},setupEvent:function(){this.domEvent("scroll",this.onScroll);this.on("resized",this.onResized)},bindClickInstaller:function(){this.itemAction(this.clickEvent,this.onRowClick,
false,null,this.dom("_ct_tbl"));this.itemAction("dblclick",this.onRowDblClick,false,null,this.dom("_ct_tbl"))},updateContentWrapTblWidth:function(f,h){var l=this.ctTbl;if(l.width===false)l.setWidth(f);else h===false?l.setWidth(l.width+f):l.setWidth(l.width+h)},updateLeversWidth:function(f,h){if(this.levers)this.levers[f].setWidth(h);else{var l=this.cacheWidths;if(!l)l=this.cacheWidths=[];l[f]=h}},setCellsVisible:function(f,h,l){if(this.levers){h=l||this.levers[h];h.view.style.width=f?h.width+"px":
"0px"}},getScrollor:function(){return this},onAdd:function(f){this.altCS&&this.size()%2&&f.addClass(this.altCS);a.onAdd.apply(this,arguments);this.rendered&&!this.batchUpdating&&this.updateRow(f);f.rendered||f.render()},onInsert:function(f,h){a.onInsert.apply(this,arguments);this.rendered&&!this.batchUpdating&&this.updateRow(h);h.rendered||h.render()},onScroll:function(f){this.grid.fire("contentscroll",f,parseInt(this.view.scrollLeft,10)||0,this)},onRowClick:function(f,h){if(!this.clickDisabled&&
!f.ignoreClick){var l=f.$(h.srcElement||h.target),d;if(l){if(l.disabled)return;if(!f.clickDisabled&&!l.ignoreClick)d=this.grid.fire("cellclick",l,h)}if(d!==false){this.fire("itemclick",f,h);this.grid.fire("rowclick",f,h)}}},dblclickDisabled:false,onRowDblClick:function(f,h){if(!this.dblclickDisabled){var l=f.$(h.srcElement||h.target);if(!l||!l.disabled)this.grid.fire("rowdblclick",f,l,h)}},hoverEvent:false,onRowOver:function(f,h){this.hoverEvent===true&&this.grid.fire("rowover",f,h)},onRowOut:function(f,
h){this.hoverEvent===true&&this.grid.fire("rowout",f,h)},instanceItem:function(f){if(f&&!f.cacheId){var h=this.grid.header.children;if(f.array){if(f.array.length!==h.length){l=f.array;i=0;for(len=h.length;i<len;i++)h[i].dataCol||l.insert(i,{})}}else{var l=f.array=[];i=0;for(len=h.length;i<len;i++)l[l.length]={title:""}}}return a.instanceItem.apply(this,arguments)},onResized:function(f){if(f!==false)if(CC.ie)this.grid.fire("contentscroll",null,parseInt(this.view.scrollLeft,10)||0,this)},gridEventHandlers:{aftercolwidthchange:function(f,
h,l,d){this.updateContentWrapTblWidth(l,d);this.updateLeversWidth(f,l,d)},sortcol:function(){this.sortByCol.apply(this,arguments)},showcolumn:function(f,h,l){this.setCellsVisible(f,l);f||this.updateContentWrapTblWidth(false,-h.width)}},sortByCol:function(f,h,l,d){this.sort(function(m,o){m=m.children[h].getValue();o=o.children[h].getValue();return l==="asc"?d(m,o):d(o,m)})},updateView:function(){var f=this.grid.header.children,h=f.length,l,d=this.children,m=d.length,o=[];for(l=0;l<h;l++)o[l]=f[l].cellBrush;
for(l=0;l<m;l++)for(j=0;j<h;j++)this.updateCell(d[l].children[j],b,d[l].brush||o[j])},createRowView:function(f){f.view=e.get("CC.ui.grid.Row");g.createView.call(f)},updateRow:function(f){var h=this.grid.header.children,l=f.children,d=l.length;for(f=0;f<d;f++)this.updateCell(l[f],b,l[f].brush||h[f].cellBrush)},updateCell:function(f,h,l){l||(l=f.brush||this.grid.header.$(f.pCt.indexOf(f)).cellBrush);if(h===b)h=f.title===b?f.value:f.title;f.getTitleNode().innerHTML=l.call(f,h)},cellAt:function(f,h){return this.children[f].children[h]},
dataAt:function(f,h,l){if(l===b)return this.$(f).$(h).getValue();this.$(f).$(h).setValue(l)},textAt:function(f,h,l){if(l===b)return this.$(f).$(h).getTitle();this.$(f).$(h).setTitle(l)}}});CC.ui.grid.Column.prototype.dataCol=true;CC.ui.grid.Content.WEIGHT=CC.ui.grid.Content.prototype.weight=-80;CC.ui.def("gridcontent",CC.ui.grid.Content);CC.Tpl.def("CC.ui.grid.TreeCellBody",'<div class="g-tree-nd-el g-tree-nd-cls g-tree-nd g-tree-arrows"><div class="g-tree-nd-indent" id="_ident"><div class="g-tree-ec-icon" id="_pls"></div><div class="g-tree-nd-icon" id="_ico"></div></div><div class="g-tree-nd-anchor" id="_wr"><span id="_tle" class="g-unsel" unselectable="on"></span></div><div class="g-clear"></div></div>');
CC.create("CC.ui.grid.TreeCell",CC.ui.grid.Cell,function(a){return{splitPlusCS:"g-tree-split-plus",splitMinCS:"g-tree-split-minus",nodeOpenCS:"g-tree-nd-opn",nodeClsCS:"g-tree-nd-cls",nodeLeafCS:"g-tree-nd-leaf",rowHoverCS:"g-tree-nd-over g-tree-ec-over",identW:16,initComponent:function(){a.initComponent.call(this);this.domEvent("mousedown",this.onElbowClick,true,null,this._elbow.view).domEvent("click",CC.Event.noUp,true,null,this._elbow.view);this._checkIfNodes(false);this.pCt.treeCell=this},onElbowClick:function(){this.pCt.expand(!this.pCt.expanded)},
createView:function(){a.createView.call(this);var b=CC.Tpl.$("CC.ui.grid.TreeCellBody");this.titleNode=CC.$("_tle",b);this._elbow=this.$$(CC.$("_pls",b));this._icon=this.$$(CC.$("_ico",b));this._ident=this.$$(CC.$("_ident",b));this._head=this.$$(b);var e=this.view.firstChild;e.id="";e.appendChild(b);this.addClass("g-treegrid-cell")},getTitleNode:function(){return this.titleNode},_decElbowSt:function(b){console.log("_decElbowSt",this.cacheId);console.trace();if(b===undefined)b=this.pCt.expanded;if(this.pCt.nodes)if(b){this._elbow.switchClass(this.splitPlusCS,
this.splitMinCS);this._head.switchClass(this.nodeClsCS,this.nodeOpenCS)}else{this._elbow.switchClass(this.splitMinCS,this.splitPlusCS);this._head.switchClass(this.nodeOpenCS,this.nodeClsCS)}},_checkIfNodes:function(b){if(this.pCt.nodes)this._head.hasClass(this.nodeLeafCS)&&this._head.delClass(this.nodeLeafCS);else this._head.hasClass(this.nodeLeafCS)||this._head.addClass(this.nodeLeafCS);this._decElbowSt(b)}}});CC.ui.def("treecell",CC.ui.grid.TreeCell);
CC.create("CC.ui.grid.TreeRow",CC.ui.grid.Row,function(a){return{_curIdent:0,initComponent:function(){a.initComponent.call(this);if(this.nodes){nds=CC.delAttr(this,"nodes");for(var b=0,e=nds.length;b<e;b++)this.addItem(nds[b]);if(!nds.length)this.nodes=nds}},onRender:function(){a.onRender.call(this);if(this.expanded){delete this.expanded;this.expand(true)}},addItem:function(b){var e=this.nodes;if(!e)e=this.nodes=[];b.hidden=this.hidden||!this.expanded;b=this.pCt.instanceItem(b);b.pNode=this;this.view.parentNode===
this.pCt.ct&&this._addItemView(b);e.push(b);b._applyChange(this);this.rendered&&this.treeCell._checkIfNodes();(e=b.previous)&&e._applyChange(this);return b},removeItem:function(b,e){this.rendered&&b._removeFromView(e);b.pNode=null;e=b.previous;this.nodes.remove(b);b._applySibling(true);e&&e._applySibling();this.rendered&&this.treeCell._checkIfNodes()},insertItem:function(b,e){var g=this.nodes;e.pNode===this&&g.indexOf(e)<b&&b--;if(!g)g=this.nodes=[];if(e.pNode)e.pNode.removeItem(e);else{e.hidden=
this.hidden||!this.expanded;e=this.pCt.instanceItem(e)}e.pNode=this;g.insert(b,e);if(this.rendered){delete e.pCt;g[b+1]?this.pCt.insert(this.pCt.indexOf(g[b+1]),e):this.pCt.insert(this.pCt.indexOf(this)+1,e);e.pCt=this.pCt;this.treeCell._checkIfNodes()}e._applyChange(this);return e},expanded:false,expand:function(b){if(this.expanded!==b){if(this.pCt.grid.fire("expandtree",this,b)===false)return false;this.treeCell._decElbowSt(b);this._expandContent(b);this.expanded=b;return this.pCt.grid.fire("expandedtree",
this,b)}},onHide:function(){a.onHide.call(this);if(this.nodes)for(var b=0,e=this.nodes,g=e.length;b<g;b++)e.hidden||e[b].display(false)},onShow:function(){a.onShow.call(this);if(this.expanded&&this.nodes)for(var b=0,e=this.nodes,g=e.length;b<g;b++)e[b].hidden&&e[b].display(true)},_applySibling:function(b){if(b){if(this.previous)this.previous.next=this.next;if(this.next)this.next.previous=this.previous;this.next=this.previous=null}else if(b=this.pNode){c=b.nodes;idx=c.indexOf(this);if(this.next=c[idx+
1])this.next.previous=this;if(this.previous=c[idx-1])this.previous.next=this}else this.previous=this.next=null},_applyChange:function(){this._applySibling();this._fixSpacer()},_fixSpacer:function(b){if(b=b||this.pNode){var e=this.treeCell;b=b._curIdent+e.identW;e._head.view.style.paddingLeft=b+"px";this._curIdent=b;if(this.nodes){e=0;b=this.nodes;for(var g=b.length;e<g;e++)b[e]._fixSpacer(this)}}},_navInsertPlaceHold:function(){return this.nodes?!this.nodes[this.nodes.length-1]?this:this.nodes[this.nodes.length-
1]._navInsertPlaceHold():this},_addItemView:function(b){var e=this.pCt.indexOf(this._navInsertPlaceHold())+1;delete b.pCt;this.pCt.insert(e,b);b.pCt=this.pCt;if(b.nodes){e++;for(var g=b.nodes,f=g.length,h=0;h<f;h++)e=b._batchAddItemView(g[h],e)}},_batchAddItemView:function(b,e){delete b.pCt;this.pCt.insert(e,b);b.pCt=this.pCt;e++;if(b.nodes)for(var g=b.nodes,f=g.length,h=0;h<f;h++)e=b._batchAddItemView(g[h],e);return e},_removeFromView:function(b){if(this.nodes)for(var e=this.nodes,g=0,f=e.length;g<
f;g++)if(e[g].nodes)e[g]._removeFromView();else e[g].pCt&&e[g].pCt.remove(e[g],true);!b&&this.pCt&&this.pCt.remove(this,true)},_expandContent:function(b){if(this.nodes)for(var e=0,g=this.nodes,f=g.length;e<f;e++)g[e].display(b)},mouseoverCallback:function(){this.treeCell._ident.addClass(this.treeCell.rowHoverCS);a.mouseoverCallback.apply(this,arguments)},mouseoutCallback:function(){this.treeCell._ident.delClass(this.treeCell.rowHoverCS);a.mouseoutCallback.apply(this,arguments)},destory:function(){if(this.nodes)for(var b=
0,e=this.nodes,g=e.length;b<g;b++)e[b].destory();a.destory.call(this)}}});CC.create("CC.ui.grid.TreeContent",CC.ui.grid.Content,function(a){return{itemCls:CC.ui.grid.TreeRow,onAdd:function(b){a.onAdd.apply(this,arguments);b._applyChange();if(b.nodes)for(var e=this.indexOf(b)+1,g=0,f=b.nodes,h=f.length;g<h;g++)e=b._batchAddItemView(f[g],e)},remove:function(b,e){a.remove.apply(this,arguments);!e&&b.pNode?b.pNode.removeItem(b,true):b._removeFromView(true)}}});CC.ui.def("treecontent",CC.ui.grid.TreeContent);
CC.create("CC.ui.grid.ContentStoreProvider",CC.util.StoreProvider,{modifyCS:"g-form-mdy",filterChanged:true,isModified:function(a){var b=false;a.each(function(){if(this.modified){b=true;return false}});return b},decorateModified:function(a,b){var e=this;a.each(function(){this.modified&&e.decorateCellModified(this,b)})},decorateCellModified:function(a,b){if(a.modified!==b){a.checkClass(a.modifyCS||this.modifyCS,b);a.modified=b}},createNew:function(a,b){if(!a){a={array:[]};this.t.pCt.header.each(function(){a.array.push({title:""})})}return CC.util.StoreProvider.prototype.createNew.call(this,
a,b)},getItemQuery:function(a,b){var e=[],g,f=a.children,h,l=this.submitModify;this.t.pCt.header.each(function(d,m){if(!l||f[m].modified){g=this.qid||this.id;h=f[m].getValue();if(g&&h!==undefined)e[e.length]=g+"="+encodeURIComponent(h)}});if(g=e.length?e.join("&"):"")if(b)b+="&"+g;else b=g;return b}});CC.ui.grid.Content.prototype.storeProvider=CC.ui.grid.ContentStoreProvider;
CC.create("CC.ui.grid.ContentValidation",CC.util.ValidationProvider,{decorateValidation:fGo,decorateCellValidation:function(a,b,e){a.checkClass(this.errorCS,!b);b?a.setTip(""):a.setTip(e)},validator:function(a,b){var e=0,g=this.t.pCt.header.children,f=true,h=this.t.getStoreProvider().isNew(a),l=this;a.each(function(){if(h||this.modified)if(l.validateCell(this,g[e].validator)===false&&f===true)f=false;e++});f||b.push(f);return f},validateCell:function(a,b){var e=true;if(!b)b=this.t.pCt.header.$(a.pCt.indexOf(a)).validator;
if(b){b=b.call(a,a.getValue());if(b!==true)e=false;this.decorateCellValidation(a,b===true,b)}return e},each:function(){var a=this.t.getStoreProvider();a.each.apply(a,arguments)}});CC.ui.grid.Content.prototype.validationProvider=CC.ui.grid.ContentValidation;CC.ui.Grid.prototype.autoFit=false;
CC.create("CC.ui.grid.plugins.ColumnWidthControler",null,function(){Math=window.Math;return{autoFitCS:"g-grid-fit",minColWidth:10,initialize:function(a){CC.extend(this,a)},initPlugin:function(a){a.autoFit&&a.addClass(this.autoFitCS)},gridEventHandlers:{resized:function(a){if(a!==false)if(this.hasInitColWidths){if(this.grid.autoFit){a=Math.max(0,a-CC.ui.Grid.SCROLLBAR_WIDTH);this.autoColWidths(a)}}else{a=Math.max(0,a-CC.ui.Grid.SCROLLBAR_WIDTH);this.initColWidths(a);this.hasInitColWidths=true}},aftercolwidthchange:function(a,
b){b._widthcontrolset||this.autoColWidths()},showcolumn:function(){this.autoColWidths()}},initColWidths:function(a){var b=a,e=this.grid.header,g=e.getColumnCount(),f,h=this.minColWidth,l=this;e.each(function(){if(!this.hidden){f=this.width;if(f!==false){if(f<1)f=Math.floor(a*f);g--;l.setColWidth0(this,Math.max(f,h));b-=this.width}}});f=Math.max(Math.floor(b/g),h);e.each(function(){this.width===false&&!this.hidden&&l.setColWidth0(this,f)})},getAutoWidthLen:function(a){return Math.max(0,(a||this.grid.width)-
CC.ui.Grid.SCROLLBAR_WIDTH)},setColWidth0:function(a,b){a._widthcontrolset=true;a.setWidth(b,true);delete a._widthcontrolset},deliverDelta:function(a){__debug&&console.log("auto dw:",a);var b=this.grid.header.children,e=b.length,g,f,h=this.minColWidth,l,d,m=[],o=[];for(l=0;l<e;l++)if(!b[l].locked&&!b[l].resizeDisabled&&!b[l].hidden)m[m.length]=b[l];for(;a!==0&&m.length;){b=Math.floor(a/m.length);l=0;for(e=m.length;l<e;l++){d=m[l];f=d.width;g=Math.max(d.width+b,h);if(g!==f){this.setColWidth0(d,g);
if(d.width!==f)a-=d.width-f;else o.push(d)}else o.push(d)}for(l=0;l<o.length;l++)m.remove(o[l]);o=[]}__debug&&console.log("remain dw:",a)},autoColWidths:function(a){if(this.grid.autoFit){a||(a=this.getAutoWidthLen());var b=0;this.grid.header.each(function(){this.hidden||(b+=this.width||0)});var e=a-b;__debug&&console.log("grid width:",a,",current width:",b,",dw:",e);e!=0&&this.deliverDelta(e)}},getConstrain:function(a){if(a.hidden)return[0,0];if(a.resizeDisabled)return[a.width,a.width];var b=a.width-
Math.max(this.minColWidth,a.minW,0);if(this.grid.autoFit){var e=this.grid.header;a=e.indexOf(a);e=e.children;minW=maxW=0;a=a+1;for(var g=e.length;a<g;a++)if(!e[a].hidden){maxW+=e[a].width;minW=Math.max(this.minColWidth,e[a].minW,0)}return[b,maxW-minW]}return[b,Math.MAX_VALUE]}}});CC.ui.def("colwidthctrl",CC.ui.grid.plugins.ColumnWidthControler);CC.ui.Grid.prototype.plugins.push({name:"colwidthctrl",ctype:"colwidthctrl"});
CC.create("CC.ui.grid.plugins.Editation",null,function(){var a=CC.Event,b=window.Math;CC.ui.grid.Column.prototype.editable=true;CC.ui.grid.Row.prototype.editable=true;CC.ui.grid.Cell.prototype.editable=true;CC.ui.grid.Cell.prototype.getValue=function(){return this.value===undefined?this.title:this.value};CC.ui.grid.Cell.prototype.setValue=function(e){this.value=e;return this};return{editable:true,trigMode:"cellclick",editorCS:"g-flot-editor",initialize:function(e){e&&CC.extend(this,e);var g=this;
switch(this.trigMode){case "cellclick":this.grid.on(this.trigMode,function(f){g.strictStartEdit(f)});break;case "rowdblclick":this.grid.on(this.trigMode,function(f,h){h&&g.strictStartEdit(h)})}e=null},isCellEditable:function(e,g){g||(g=this.grid.header.$(e.pCt.indexOf(e)));return this.editable&&g.editor&&g.editable&&e.pCt.editable&&!e.disabled&&e.editable},strictStartEdit:function(e){var g=e.pCt.indexOf(e),f=this.grid.header.$(g);this.isCellEditable(e,f)&&this.startEdit(e,g,f)},getEditor:function(e){var g=
e.editor;if(g&&(!g.cacheId||typeof g==="string")){if(typeof g==="string")g={ctype:g};CC.extendIf(g,{showTo:document.body,autoRender:true,shadow:true});if(g.shadow===true)g.shadow=CC.ui.instance({ctype:"shadow",inpactH:6,inpactY:-2,inpactX:-5,inpactW:9});g=e.editor=this.createEditor(g);g.addClass(this.editorCS)}return g},createEditor:function(e){e=CC.ui.instance(e);var g=this;e.on("blur",function(){this.bindingCell&&g.endEdit(this.bindingCell)});e.on("keydown",function(f){if(this.bindingCell){var h=
this.bindingCell;if(a.TAB===f.keyCode){g.endEdit(h);if(h=g.getNextEditableBlock(h.pCt,h.pCt.indexOf(h))){g.startEdit(h);a.stop(f);return false}}else if(a.ESC===f.keyCode){g.endEdit(h);a.stop(f);return false}}});return e},getNextEditableBlock:function(e,g){var f=e.children[g+1];if(f)this.isCellEditable(f)||(f=this.getNextEditableBlock(e,g+1));else if(e=e.pCt.children[e.pCt.indexOf(e)+1])f=this.getNextEditableBlock(e,-1);return f},startEdit:function(e,g,f){this.startEdit0.bind(this,e,g,f).timeout(0)},
startEdit0:function(e,g,f){e.scrollIntoView(this.grid.content.getScrollor(),true);if(g===undefined)g=e.pCt.indexOf(e);f||(f=this.grid.header.$(g));var h=this.getEditor(f);if(h){h.bindingCell=e;e.bindingEditor=h;this.setBoundsForEditor(e,h);h.setValue(e.getValue()).setTitle(e.getTitle()).show().focus();this.grid.fire("editstart",e,h,f,g,this)}},endEdit:function(e){var g=this.grid,f=e.pCt.indexOf(e),h=e.bindingEditor,l,d;if(g.fire("edit",e,h,f,this)!==false){h.hide();l=h.getValue();d=e.getValue();if(l!=
d){d=h.getText();g.content.updateCell(e,d);e.setValue(l);e.title=d;this.grid.content.getValidationProvider().validateCell(e);e.modified||g.content.getStoreProvider().decorateCellModified(e,true)}g.fire("editend",e,h,f,this);h.bindingCell=null;delete e.bindingEditor}},setBoundsForEditor:function(e,g){var f=e.getSize();e=e.absoluteXY();g.setSize(f);if(g.height<f.height)e[1]+=b.floor((f.height-g.height)/2);g.setXY(e)}}});CC.ui.def("grideditor",CC.ui.grid.plugins.Editation);
CC.create("CC.ui.grid.plugins.Toolbar",null,{installWhen:"afteraddcontent",defCType:"smallbar",tb:false,initialize:function(a){CC.extend(this,a);this.gridEventHandlers={};this.gridEventHandlers[this.installWhen]=this.installUI},initPlugin:function(){var a=this.tb||{};if(!a.ctype)a.ctype=this.defCType;a.layout="tablize";this.tb=CC.ui.instance(a)},installUI:function(){this.grid.fire("beforeadd"+this.name,this.tb,this);this.grid.layout.add(this.tb);this.grid.fire("afteradd"+this.name,this.tb,this)}});
CC.ui.def("gridtb",CC.ui.grid.plugins.Toolbar);
CC.create("CC.ui.grid.plugins.Pagenation",null,{current:false,count:0,size:10,autoLoad:true,params:false,customQuery:false,disabled:false,initialize:function(a){CC.extend(this,a)},initPlugin:function(a){a.content.on("statuschange",this._onConnectorStatusChange,this);this.autoLoad&&a.on("rendered",this.go,this)},gridEventHandlers:{afteraddtb:function(a){this.installUI(a);this.tb=a}},installUI:function(a){var b=this;a.layout.fromArray([{id:"first",tip:"\u7b2c\u4e00\u9875",icon:"g-icon-navfirst",onclick:b.go.bind(b,
1)},{id:"pre",lyInf:{separator:true},tip:"\u4e0a\u4e00\u9875",icon:"g-icon-navpre",onclick:b.pre.bind(b)},{lyInf:{separator:true},id:"current",template:'<span class="lbl">\u7b2c <span><input class="g-ipt-text g-corner" style="text-align:center;" id="_i" size="3"/></span> \u9875</span>',ctype:"base",clickDisabled:true},{id:"next",tip:"\u4e0b\u4e00\u9875",icon:"g-icon-navnxt",onclick:b.next.bind(b)},{lyInf:{separator:true},id:"last",tip:"\u6700\u540e\u4e00\u9875",icon:"g-icon-navlast",onclick:function(){b.go(b.count)}},
{lyInf:{separator:true},id:"total",template:'<span class="lbl">\u5171<span id="_t">0</span>\u9875</span>',ctype:"base",clickDisabled:true},{id:"refresh",tip:"\u5237\u65b0\u5f53\u524d\u9875",icon:"g-icon-ref",onclick:function(){b.refresh()}}]);this.currentEl=a.$("current").dom("_i");this.totalEl=a.$("total").dom("_t");a.bindEnter(function(){b.currentEl.value.trim()&&b.go(parseInt(b.currentEl.value))},true,null,this.currentEl)},refresh:function(){this.go(this.current,true)},setSize:function(a){this.size=
a;return this},disable:function(a){this.disabled=a;this.updateUIStatus();return this},go:function(a,b){if(!this.disabled){if(!a||typeof a==="number")a={current:a||1};var e=a.current;if((this.current!==e||b)&&e>0)this.grid.fire("page:beforechange",a,this)!==false&&this.onPageChange(a)}return this},isResponseOk:function(){return true},onPageChange:function(a){if(this.url){a||(a={});a=this.createQuery(a);this.grid.content.getConnectionProvider().connect(CC.templ(this,this.url,2),{success:this._onSuccess,
params:a})}},_onConnectorStatusChange:function(a){if(a==="open")this.tb.$("refresh").disable(true);else a==="final"&&this.tb.$("refresh").disable(false)},createQuery:function(a){CC.extendIf(a,{size:this.size,count:this.count,current:this.current});this.params&&CC.extend(a,params);this.customQuery&&this.customQuery(a);return a},_onSuccess:function(a){var b=this.t.pCt.pagenation;if(b.isResponseOk(a)){json=a.getJson();b.size=json.size;b.count=json.count;b.current=json.current||a.params.current;if(b.current>
b.count)b.current=b.count;this.t.destoryChildren();this.defaultDataProcessor("json",json.data);b.grid.fire("page:afterchange",b,json,a);b.updateUIStatus()}},updateUIStatus:function(){var a=this.tb,b=this.current,e=this.count,g=this.disabled||e===1||b<=1;a.$("first").disable(g);a.$("pre").disable(g);g=this.disabled||b===e||e===1;a.$("next").disable(g);a.$("last").disable(g);this.currentEl.value=b||"";this.totalEl.innerHTML=e;a.$("refresh").disable(this.disabled||e==0)},next:function(){this.current!==
this.count&&this.go(this.current+1)},pre:function(){this.current-1>=1&&this.go(this.current-1)}});CC.ui.def("gridpage",CC.ui.grid.plugins.Pagenation);
CC.create("CC.ui.grid.plugins.ColumnResizer",null,function(){var a=CC.util.dd.Mgr,b=a.resizeHelper,e=CC.Event,g=window.Math,f,h=[0,0,0,0],l=0;CC.ui.grid.Column.prototype.resizeDisabled=false;return{resizeDisabled:false,monitorLen:10,initialize:function(d){CC.extend(this,d)},install:function(d){d.itemAction("mousemove",this.onColMouseMove,false,this).itemAction("mousedown",this.onColMouseDown,false,this)},dragstart:function(){this.grid.fire("colresizestart",f,f.pCt.indexOf(f));var d=this.getIndicator(),
m=this.leftIndicator,o=f.absoluteXY(),q;l=o[0]+f.view.offsetWidth-g.floor(d.getWidth(true)/2);q=o[1]+f.view.offsetHeight;d.setXY(l,q).appendTo(document.body);m.setXY(o[0]-g.floor(d.getWidth(true)/2),q).appendTo(document.body)},drag:function(){this.rightIndicator.view.style.left=l+a.getDXY()[0]+"px"},dragend:function(){var d=a.getDXY()[0];d&&f.setWidth(f.getWidth(true)+d,true);this.leftIndicator.del();this.rightIndicator.del();this.grid.fire("colresizeend",this,f.pCt.indexOf(f))},afterdrag:function(){f=
null;b.applyMasker(false,"")},onColMouseMove:function(d,m){var o=d.view.style;if(d.resizeDisabled||a.isDragging()){if(o.cursor!="")o.cursor=""}else if(d.view.offsetWidth-e.pageX(m)+d.absoluteXY()[0]<this.monitorLen)o.cursor="col-resize";else if(o.cursor!="")o.cursor=""},onColMouseDown:function(d,m){if(d.view.style.cursor==="col-resize"&&!d.resizeDisabled&&!a.isDragging()){f=d;b.applyMasker(true,"col-resize");a.setMonitor(this).setBounds(this.calColWidthConstrain(d)).startDrag(d,m);e.preventDefault(m)}},
calColWidthConstrain:function(d){if(this.grid.colwidthctrl){dx=this.grid.colwidthctrl.getConstrain(d);h[1]=-1*dx[0];h[0]=dx[1]}else{h[1]=g.max(d.minW,0);h[0]=g.MAX_VALUE}return h},gridEventHandlers:{afteraddheader:function(d){this.install(d)}},indicatorCS:"g-grid-cwidctor",getIndicator:function(){var d=this.rightIndicator;if(!d){var m={view:"div",ctype:"base",cs:this.indicatorCS};d=this.rightIndicator=CC.ui.instance(m);this.leftIndicator=CC.ui.instance(m);this.grid.header.follow(d).follow(this.leftIndicator)}return d}}});
CC.ui.def("colresizer",CC.ui.grid.plugins.ColumnResizer);CC.ui.Grid.prototype.plugins.push({name:"colresizer",ctype:"colresizer"});
CC.create("CC.ui.grid.plugins.RowChecker",null,{name:"rowchecker",cell:{title:"&nbsp;",maxW:20,minW:20,resizeDisabled:true,id:"rowCheckerCol",dataCol:false,checkedCS:"g-check-checked",cellBrush:function(){return'<span class="g-checkbox g-form-el"><img class="chkbk" src="'+CC.Tpl.BLANK_IMG+'"></span>'},brush:function(){return'<span class="g-checkbox g-form-el" title="\u5168\u9009/\u53cd\u9009"><img class="chkbk" src="'+CC.Tpl.BLANK_IMG+'"></span>'},onRender:function(){this.superclass.onRender.call(this);
this.domEvent("click",function(){var a=this.pCt.pCt.content.getSelectionProvider(),b=this.selected=!this.selected;this.checkClass(this.checkedCS,b);a.mode===0&&a.selectAll(b)})}},initialize:function(a){var b=CC.extend({},this.cell);if(a){a.cell&&CC.extend(b,CC.delAttr("cell",a));CC.extend(this,a)}this.grid.header.array&&this.grid.header.array.insert(0,b)},gridEventHandlers:{afteraddcontent:function(a){a.on("selectchange",function(b,e,g){var f=b.getCell("rowCheckerCol"),h=a.grid.header.$("rowCheckerCol");
f.checkClass(h.checkedCS,g.isSelected(b));e&&e.getCell("rowCheckerCol").checkClass(h.checkedCS,g.isSelected(e))})}}});CC.ui.grid.plugins.RowChecker.WEIGHT=CC.ui.grid.plugins.RowChecker.prototype.weight=CC.ui.grid.Header.WEIGHT-2;CC.ui.def("gridrowchecker",CC.ui.grid.plugins.RowChecker);CC.ui.Grid.prototype.sortable=true;CC.ui.grid.Column.prototype.sortable=undefined;CC.ui.grid.Column.prototype.order=undefined;CC.ui.grid.Column.prototype.dt=undefined;
CC.create("CC.ui.grid.plugins.Sorter",null,{trigEvent:"click",order:"desc",dt:"string",initialize:function(a){CC.extend(this,a)},gridEventHandlers:{afteraddheader:function(a){this.grid.sortable&&a.itemAction(this.trigEvent,this.onColClick,false,this)}},onColClick:function(a){if(a.sortable||a.sortable===undefined&&a.dataCol)this.sort(a,a.order===undefined?this.order:a.order==="desc"?"asc":"desc")},sort:function(a,b){var e=a.pCt.indexOf(a),g=a.dt===undefined?this.dt:a.dt;g=a.comparator?a.comparator:
CC.util.TypeConverter.getComparator(g);if(this.grid.fire("sortcol",a,e,b,g)!==false){if(g=this.preSorted)g=CC.Base.byCid(g);if(g&&g!==a)g.order=undefined;this.preSorted=a.cacheId;a.order=b;a.sortDecorator(b,g);this.grid.fire("sortcolend",a,e,b,g)}}});CC.ui.def("gridsorter",CC.ui.grid.plugins.Sorter);CC.ui.Grid.prototype.plugins.push({name:"sorter",ctype:"gridsorter"});CC.ui.grid.Content.prototype.expandableRowContent=false;CC.ui.grid.Cell.prototype._isExpandTrig=false;
CC.create("CC.ui.grid.plugins.ExpandableRow",null,{initialize:function(a){var b=CC.extend({},this.cell);if(a){a.cell&&CC.extend(b,CC.delAttr("cell",a));CC.extend(this,a)}this.grid.header.array&&this.grid.header.array.insert(0,b);if(a=this.grid.content){a.template='<div class="g-grid-ct"><table class="ct-tbl" id="_ct_tbl" cellspacing="0" cellpadding="0" border="0"><colgroup id="_grp"></colgroup></table></div>';a.ct="_ct_tbl";a.createRowView=this._createRowViewProxy}},cell:{dataCol:false,title:"&nbsp;",
maxW:20,minW:20,resizeDisabled:true,sortable:false,cellBrush:function(){this.pCt._rowExpandind=false;this._isExpandTrig=true;this.addClass("exptrigcell");return'<a href="javascript:void(0)" class="trig"></a>'}},_createRowViewProxy:function(a){var b=this.grid.header.children.length,e=this.expandableRowContent;if(e)e=CC.templ(a,e);b=CC.Tpl.forNode(['<table><tbody><tr></tr><tr><td class="g-gridrow-expandtd0"></td>','<td class="g-gridrow-expandtd1" colspan="'+(b-1)+'"><div id="_expand_area" class="g-gridrow-expandarea hid">'+
(e?e:"")+"</div></td>","</tr></tbody></table>"].join(""),a);a.view=b.removeChild(b.firstChild);a.ct=a.view.firstChild;a.expandRowContentEl=a.dom("_expand_area")},gridEventHandlers:{cellclick:function(a,b){if(a._isExpandTrig){a=a.pCt;this.expandRow(a,!a._rowExpandind);CC.Event.stop(b)}}},getRowContentEl:function(a){return a.dom("_expand_area")},expandRow:function(a,b){if(a._rowExpandind!==b)if(this.grid.fire("expandablerow:beforeexpand",a,b)!==false){a._rowExpandind=b;CC.fly(a.expandRowContentEl).display(b).unfly();
a.checkClass("g-gridrow-expand",b);this.grid.fire("expandablerow:afterexpand",a,b)}}});CC.ui.grid.plugins.ExpandableRow.WEIGHT=CC.ui.grid.plugins.ExpandableRow.prototype.weight=CC.ui.grid.Header.WEIGHT-1;CC.ui.def("gridexpandablerow",CC.ui.grid.plugins.ExpandableRow);CC.ui.ContainerBase.prototype.isForm=false;
(function(){var a,b=window.CC,e=b.Base,g=b.Tpl;b.create("CC.ui.form.FormElement",e,{name:false,value:undefined,element:false,elementNode:"_el",eventable:true,validator:false,validateOnblur:true,elementCS:"g-form-el",initComponent:function(){var l=this.view;if(!l)this.view=g.$(this.template||this.type);l=this.element;if(!l){l=this.dom(this.elementNode);if(!l)l=this.view;this.element=l}this.focusNode=l;this.addClass(this.elementCS);e.prototype.initComponent.call(this);this.name&&this.setName(this.name);
if(this.value){l=b.delAttr(this,"value");this.setValue(l)}this.focusCS&&this.bindFocusCS()},bindFocusCS:function(l){if(l)this.focusCS=l;this.on("focus",this._switchFocusCS);this.on("blur",this._switchFocusCS)},_switchFocusCS:function(){if(this.focused){this.addClassIf(this.focusCS);this.focusCallback()}else this.delClass(this.focusCS)},focusCallback:fGo,onFocusTrigger:function(){if(!this.focused){this.focused=true;this.onfocus&&this.onfocus();this.fire("focus")}},onBlurTrigger:function(){if(this.focused){this.focused=
false;this.validateOnblur&&this.validator&&this.checkValid();this.onblur&&this.onblur();this.fire("blur")}},onKeydownTrigger:function(l){this.fire("keydown",l)},checkValid:function(){var l=this.validator?this.validator(this.getValue()):true;this.decorateValid(l);return l},decorateValid:function(l){var d=this.errorCS;d&&this.checkClass(d,l!==true)},setValue:function(l){this.value=this.element.value=l;return this},getValue:function(){return this.element.value},getText:function(){return this.getValue()},
setName:function(l){this.name=this.element.name=l;return this},getForm:function(){for(var l=this.pCt;l;){if(l.isForm)return l;l=l.pCt}return null},active:fGo,deactive:fGo,mouseupCallback:function(l){this.onclick&&this.onclick(l,this.element)}});var f=b.ui.form.FormElement;a=f.prototype;var h=b.ui.form;g.def("Text",'<input type="text" class="g-ipt-text g-corner" />').def("Textarea",'<textarea class="g-textarea g-corner" />').def("Checkbox",'<span tabindex="0" class="g-checkbox"><input type="hidden" id="_el" /><img src="'+
g.BLANK_IMG+'" class="chkbk" /><label id="_tle"></label></span>').def("Select",'<select class="g-corner"/>').def("CC.ui.form.Label",'<span><label id="_tle" class="cap"></label></span>');b.create("CC.ui.form.Text",f,{template:"Text",initComponent:function(){a.initComponent.call(this);this.domEvent("focus",this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger)},maxH:20,focusCS:"g-ipt-text-hover",focusCallback:function(l){a.focusCallback.call(this,l);var d=
this;(function(){d.view.select()}).timeout(20)}});b.ui.def("text",h.Text);b.create("CC.ui.form.Textarea",f,h.Text.constructors,{template:"Textarea",focusCallback:f.prototype.focusCallback,maxH:e.prototype.maxH});b.ui.def("textarea",h.Textarea);b.create("CC.ui.form.Checkbox",f,{template:"Checkbox",hoverCS:"g-check-over",clickCS:"g-check-click",checkedCS:"g-check-checked",initComponent:function(){a.initComponent.call(this);if(this.checked){delete this.checked;this.setChecked(true)}this.domEvent("focus",
this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger)},mouseupCallback:function(l){this.setChecked(!this.checked);a.mouseupCallback.call(this,l)},setChecked:function(l){if(this.checked!==l){this.checked=l;this.element.checked=l;this.checkClass(this.checkedCS,l);this.oncheck&&this.oncheck(l)}return this}});b.ui.def("checkbox",h.Checkbox);b.Tpl.def("CC.ui.form.RadioGroup",'<input type="hidden" />');b.create("CC.ui.form.RadioGroup",f,{getChecked:function(){return this.currentRadio&&
e.byCid(this.currentRadio)},setChecked:function(l,d){if(d){d=this.getChecked();if(!d||d!==l){d&&d.setChecked(false);this.currentRadio=l.cacheId;l=l.getValue();l!==undefined&&this.setValue(l)}}else{this.currentRadio=null;this.setValue("")}}});b.ui.def("radiogrp",b.ui.form.RadioGroup);b.create("CC.ui.form.Radio",f,h.Checkbox.constructors,{innerCS:"g-radio",template:"Checkbox",hoverCS:"g-radio-over",clickCS:"g-radio-click",checkedCS:"g-radio-checked",elementNode:false,mouseupCallback:function(l){this.checked||
this.setChecked(true);a.mouseupCallback.call(this,l)},getGroup:function(){var l=this.getForm();if(l){var d=l._RADIOGROUPS;if(!d)d=l._RADIOGROUPS={};var m=d[this.name];if(m)return e.byCid(m);else{m=b.ui.instance("radiogrp",{pCt:l,showTo:l.ct,name:this.name});l.follow(m);d[this.name]=m.cacheId;return m}}},setChecked:function(l){var d=this.checked;h.Checkbox.prototype.setChecked.apply(this,arguments);if(d!==l&&l&&this.name)(d=this.getGroup())&&d.setChecked(this,true);return this}});b.ui.def("radio",
h.Radio);b.create("CC.ui.form.Select",f,{template:"Select",initComponent:function(){a.initComponent.call(this);this.domEvent("focus",this.onFocusTrigger).domEvent("blur",this.onBlurTrigger).domEvent("keydown",this.onKeydownTrigger).domEvent("change",this.onChangeTrigger);if(this.array){for(var l=0,d=this.array,m=d.length;l<m;l++)this.add(d[l]);delete this.array}if(this.selectedIndex){this.element.selectedIndex=this.selectedIndex;delete this.selectedIndex}},onChangeTrigger:function(){this.onchange&&
this.onchange()},getText:function(){var l=this.element.options[this.element.selectedIndex];return l?l.text:""},add:function(l){var d=document.createElement("OPTION");this.element.appendChild(d);b.extend(d,l)}});b.ui.def("select",h.Select);b.create("CC.ui.form.Label",b.Base,{labelNode:"_tle"});b.ui.def("label",b.ui.form.Label)})();
CC.Tpl.def("CC.ui.form.Line",'<li class="g-form-ln"><label class="desc" id="_lbl"><span id="_tle"></span><span class="req" id="_req">*</span></label><div id="_ctx" class="field-ct"></div></li>').def("CC.ui.form.Layer",'<ul class="g-formfields"></ul>').def("CC.ui.form.FormLayer",'<form><ul id="_ctx" class="g-formfields"></ul></form>').def("CC.ui.form.FieldsetUL",'<fieldset class="g-fieldset g-corner"><legend id="_tle"></legend><div id="_ctx" class="fieldset-ct"></div><div class="g-clear"></div></fieldset>');
CC.create("CC.ui.form.Line",CC.ui.ContainerBase,function(a){return{labelNode:"_lbl",hlabel:false,hlabelCS:"g-form-hln",reqNode:"_req",labelFor:0,ct:"_ctx",title:false,initComponent:function(){a.initComponent.call(this);this.hlabel&&this.addClass(this.hlabelCS);if(this.title===false&&this.labelNode!==false){var b=this.dom(this.labelNode);b.parentNode.removeChild(b)}this.required&&CC.fly(this.reqNode).show().unfly()},onAdd:function(b){a.onAdd.apply(this,arguments);if(this.labelFor!==false&&this.$(this.labelFor)===
b)if(b.element){var e=this.dom(this.labelNode);if(e)e.htmlFor=b.element.id}}}});CC.ui.def("fieldline",CC.ui.form.Line);CC.create("CC.ui.form.Layer",CC.ui.ContainerBase,{itemCls:CC.ui.form.Line,ct:"_ctx"});CC.ui.def("fieldlayer",CC.ui.form.Layer);CC.create("CC.ui.form.FormLayer",CC.ui.ContainerBase,{itemCls:CC.ui.form.Line,ct:"_ctx",getFormEl:function(){return this.view},byName:function(a,b){return this.byId(a,"name",b)}});CC.ui.def("form",CC.ui.form.FormLayer);
CC.ui.form.Fieldset=function(a){return new CC.ui.form.Layer(CC.extendIf(a,{template:"CC.ui.form.FieldsetUL",itemCls:CC.ui.form.Layer,ct:"_ctx"}))};CC.ui.form.Line.prototype.itemCls=CC.ui.form.Layer;CC.ui.def("fieldset",CC.ui.form.Fieldset);CC.Tpl.def("CC.ui.form.Combox",'<div class="g-panel g-combo" tabindex="1" hidefocus="on"><div class="g-panel-wrap g-combo-wrap" id="_wrap"><input type="hidden" id="_el" /><div class="unedit-txt" id="_uetxt"></div><span class="downIco" id="_trigger"></span></div></div>');
CC.create("CC.ui.form.Combox",CC.ui.form.FormElement,function(a){function b(){return true}var e=CC.Event;return{hoverCS:"g-combo-on",uneditCS:"g-combo-unedit",downCS:"g-combo-dwn",selectorCS:"g-combo-list",_leaveFocus:true,maxH:21,filterContent:true,selector:false,initComponent:function(){var g=CC.delAttr(this,"array");this.editor=new CC.ui.form.Text({name:this.name});a.initComponent.call(this);this.uneditNode=this.dom("_uetxt");this.dom("_wrap").insertBefore(this.editor.view,null);var f=this.selector;
f=f?CC.ui.instance(f):this.createDefSelector();var h=this.getSelectioner(f);g&&h.fromArray(g);this.attach(f,h);this._bindKey();if(this.uneditable){delete this.uneditable;this.setEditable(false)}else this.setEditable(true);this.selected&&h.getSelectionProvider().select(this.selected);delete this.selected;this.domEvent("focus",this.onFocusTrigger).domEvent("blur",this.onBodyBlurTrigger).domEvent("focus",this.onFocusTrigger,false,null,this.editor.element).domEvent("blur",this.onBodyBlurTrigger,false,
null,this.editor.element).domEvent("keydown",this.onKeydownTrigger).wheelEvent(this.onMouseWheel,true);this.on("blur",this.checkSelected)},onHide:function(){this.selector.hidden||this.selector.hide();a.onHide.apply(this,arguments)},createDefSelector:function(){return CC.ui.instance({ctype:"folder",showTo:document.body,shadow:true,getScrollor:function(){if(!this.scrollor)this.scrollor=this.dom("_scrollor");return this.scrollor}})},getSelectioner:function(g){return this.selectioner||g},onMouseWheel:function(g){g=
CC.Event.getWheel(g);if(g>0)this.selectioner.selectionProvider.pre();else g<0&&this.selectioner.selectionProvider.next()},onBodyBlurTrigger:function(){this.selector.hidden&&this._leaveFocus&&this.onBlurTrigger()},onBlurTrigger:function(){this.leaveFocusOn();a.onBlurTrigger.call(this)},disable:function(g){a.disable.call(this,g);this.editor.disable(g)},setScrollorHeight:function(g){this.selector.fly("_scrollor").setHeight(g).unfly()},setEditable:function(g){if(this.uneditable!==undefined&&this.uneditable==
g)return this;if(this.uneditable&&g)this.delClass(this.uneditCS).unEvent("click",this.onUneditableClick);else g?this.domEvent("click",this.onUneditableClick,true,null,"_trigger").domEvent("mousedown",this.leaveFocusOff,false,null,"_trigger"):this.addClass(this.uneditCS).domEvent("click",this.onUneditableClick).unEvent("click",this.onUneditableClick,"_trigger").unEvent("mousedown",this.leaveFocusOff,"_trigger");this.uneditable=!g;this.focusNode=!g?this.view:this.editor.element;return this},onKeydownTrigger:function(g){if(this._keyHandler(g)===
false){e.stop(g);return false}a.onKeydownTrigger.apply(this,arguments)},onUneditableClick:function(){var g=!this.selector.hidden;this.leaveFocusOff();!g&&this.filterContent&&this.selectioner.filter(b);this.showBox(!g)},leaveFocusOff:function(){if(this._leaveFocus!==false)this._leaveFocus=false},leaveFocusOn:function(){if(this._leaveFocus!==true)this._leaveFocus=true},attach:function(g,f){this.selector=g;this.selectioner=f;this.follow(g);g.display(false);g.shadow&&g.shadow.setZ(999);g.addClass(this.selectorCS);
f.on("selected",this.onSelected,this);f.on("itemclick",this.onclickEvent,this);this._savSelKeyHdr=g.defKeyNav;var h=this;f.getSelectionProvider().defKeyNav=function(l){h._keyHandler(l,true)}},onBoxContexted:function(g){if(g)if(this.ancestorOf(e.element(g)))return false;this.leaveFocusOn();this.showBox(false);this.leaveFocusOff();this.onBlurTrigger()},onclickEvent:function(){this.showBox(false)},_keyHandler:function(g,f){var h=g.keyCode;if(h==27||h==13)if(!this.selector.hidden){this.showBox(false);
e.stop(g);return false}if(!f)return this.selectioner.selectionProvider.navigateKey(g)},_filtHandler:function(g){g=g.keyCode;var f=this.selectioner,h=f.selectionProvider;if(!(g===h.UP||g===h.DOWN||this.noFilt||g===27||g===13||g===9)){var l=this.editor.element.value;l==""&&h.select(null);h.selected&&g!=e.LEFT&&g!=e.RIGHT&&h.select(null);if(this.filterContent&&l!=this.preValue){f.filter(this.matcher,this);this.preValue=l}this.leaveFocusOff();this.showBox(true)}},showBox:function(g){var f=this.selector,
h=!f.hidden;if(h!=g)if(g){f.display(true);this.preferPosition();f.shadow&&f.shadow.reanchor();this.uneditable?this.focus(true):this.editor.focus(true);if(!h){this.checkSelected();this.addClass(this.downCS);f.bindContext(this.onBoxContexted,false,this).display(true)}}else{f.display(false);this._leaveFocus||(this.uneditable?this.focus(true):this.editor.focus(true));this.delClass(this.downCS)}},active:function(){this.showBox(true)},deactive:function(){this.showBox(false)},checkSelected:function(){var g=
this.selectioner,f=g.getSelectionProvider(),h=this.getValue();if(h===""&&f.selected)f.select(null);else if(!(f.selected&&this.getItemValue(f.selected)==h)){f.select(null);var l=this;g.each(function(d){if(!d.hidden&&!d.disabled&&l.getItemValue(d)===h){f.select(d);return false}})}},preferPosition:function(){var g=this.selector;this.noAutoWidth||g.setWidth(this.preferWidth());g.anchorPos(this,"lb","hr",null,true,true)},preferWidth:function(){return this.getWidth()},_bindKey:function(){this.domEvent("keydown",
this._keyHandler,false,null,this.editor.view);this.domEvent("keyup",this._filtHandler,false,null,this.editor.view)},onSelected:function(g){this.setValueFromItem(g,true);!this.uneditable&&this.focused&&this.editor.focus(true)},getItemValue:function(g){if(g.getValue)return g.getValue();if(g.value!==undefined)return g.value;return g.getTitle()},getItemTitle:function(g){return g.title!==undefined?g.title:g.value},setValue:function(g,f){a.setValue.call(this,g);this.selector&&!f&&this.checkSelected();return this},
getText:function(){if(this.uneditable)return this.title||"";return this.editor.getValue()},setTitle:function(g){if(this.uneditable)this.uneditNode.innerHTML=g;else this.editor.setValue(g);this.title=g;return this},setValueFromItem:function(g,f){var h=this.getItemValue(g);g=this.getItemTitle(g);this.setValue(h,f);this.setTitle(g);return this},getValue:function(){return a.getValue.call(this)},matcher:function(g){var f=this.getItemTitle(g),h=this.editor.element.value;if(h==""){g.setTitle(f);return true}if(f.indexOf(h)>=
0){if(g=g.titleNode||g.dom("_tle"))g.innerHTML=f.replace(h,'<span class="g-match">'+h+"</span>");return true}g.setTitle(f);return false},select:function(g){this.selectioner.selectionProvider.select(g)}}});CC.ui.def("combo",CC.ui.form.Combox);CC.Tpl.def("CC.ui.form.Progressbar",'<table class="g-progressbar" cellspacing="0" cellpadding="0" border="0"><tr><td class="g-progress-l"><i>&nbsp;</i><input type="hidden" id="_el" /></td><td class="g-progress-c"><img id="_img" src="http://www.bgscript.com/s.gif" alt=""/></td><td class="g-progress-r"><i>&nbsp;</i></td></tr></table>');
CC.create("CC.ui.form.Progressbar",CC.ui.form.FormElement,function(a){if(!CC.ui.form.Progressbar.img)CC.ui.form.Progressbar.img="http://www.bgscript.com/images/progressbar.gif";return{range:100,value:0,initComponent:function(){this.createView();if(CC.ui.form.Progressbar.img){this.img=this.dom("_img");this.img.src=CC.ui.form.Progressbar.img}a.initComponent.call(this)},setValue:function(b){if(b>=100){CC.fly(this.img).fastStyleSet("width","100%").unfly();this.onstop();this.fire("progressstop",this);
return a.setValue.call(this,100)}CC.fly(this.img).fastStyleSet("width",b+"%").unfly();return a.setValue.call(this,b)},onstop:fGo}});CC.ui.def("progressbar",CC.ui.form.Progressbar);
(function(){var a=CC.ui.form.FormElement.prototype,b=CC.Event;CC.Tpl.def("CC.ui.form.DatepickerField",'<div class="g-datepicker-field"><div class="field-wrap"><input type="text" class="g-corner" id="_el" /><a title="\u70b9\u51fb\u9009\u62e9\u65e5\u671f" tabindex="-1" class="trigger" id="_trigger" href="javascript:fGo();"></a></div></div>');CC.create("CC.ui.form.DatepickerField",CC.ui.form.FormElement,{focusCS:"g-datepicker-field-focus",triggerHoverCS:"triggerOn",contextCS:"g-datepicker-field-ctx",
_leaveFocus:true,maxH:20,applyTimeout:200,initComponent:function(){a.initComponent.call(this);this.bindHoverStyle(this.triggerHoverCS,true,null,null,null,"_trigger","_trigger").domEvent("click",this.onTriggerClick,false,null,"_trigger").domEvent("mousedown",this.leaveFocusOff,false,null,"_trigger").domEvent("mousedown",this.onFocusTriggerDelay).domEvent("focus",this.onFocusTrigger,false,null,this.element).domEvent("blur",this.onTrackBlur,false,null,this.element).domEvent("keydown",this.onKeydownTrigger,
false,null,this.element)},active:function(){this.showDatepicker(true)},deactive:function(){this.showDatepicker(false)},onHide:function(){this.getDatepicker().hidden||this.getDatepicker().hide();CC.ui.form.FormElement.prototype.onHide.apply(this,arguments)},onTrackBlur:function(){!this._leaveFocus&&this.datepicker&&this.datepicker.hidden?this.leaveFocusOn():this.onBlurTrigger()},onFocusTriggerDelay:function(){var e=this;(function(){e.leaveFocusOn();e.onFocusTrigger()}).timeout(0)},onBlurTrigger:function(){this._leaveFocus&&
a.onBlurTrigger.call(this)},leaveFocusOff:function(){if(this._leaveFocus!==false)this._leaveFocus=false},leaveFocusOn:function(){if(this._leaveFocus!==true)this._leaveFocus=true},onTriggerClick:function(){this.showDatepicker(!!this.getDatepicker().hidden)},showDatepicker:function(e){var g=this.getDatepicker();this.datepicker.display(e);if(e){this.getValue()&&g.setValue(this.getValue(),true);g.anchorPos(this,"rb","hl",null,true,true);g.bindContext(this.onDatepickerContexted,false,this,null,this,this.contextCS).focus(0)}else this.focus()},
onDatepickerContexted:function(e){if(e)this.ancestorOf(b.element(e))||this.onBlurTrigger()},getDatepicker:function(){var e=this.datepicker;if(!e){e=this.datepicker=new CC.ui.Datepicker({showTo:document.body,autoRender:true,hidden:true});this.follow(e);e.on("select",this._onDateSelect).on("keydown",this.onKeydownTrigger,this)}return e},onKeydownTrigger:function(e){if(b.isEscKey(e)||b.isEnterKey(e)){if(!this.getDatepicker().hidden){b.stop(e);this.showDatepicker(false);return false}if(b.isEnterKey(e)){this.getDatepicker().toToday();
return false}}a.onKeydownTrigger.apply(this,arguments)},_onDateSelect:function(e){var g=this.pCt;(function(){g.showDatepicker(false);g.setValue(e)}).timeout(g.applyTimeout)},setSize:function(e,g){a.setSize.apply(this,arguments);if(e.width)g=e.width;g!==false&&this.fly("_trigger").unfly();return this},getText:function(){return this.getValue()}});CC.ui.def("datepicker",CC.ui.form.DatepickerField)})();
CC.create("CC.ui.form.ValidationProvider",CC.util.ValidationProvider,function(){return{validator:function(a,b){a=a.validator?a.validator(a.getValue()):this.htmlValidator.call(a);a!==true&&b.push(a);return a},htmlValidator:function(){return true},each:function(a){this.t.eachH(function(){if(this.element&&a.apply(this,arguments)===false)return false});this.eachHtml(a)},eachHtml:fGo}});CC.ui.def("formvalidation",CC.ui.form.ValidationProvider);CC.ui.form.FormLayer.prototype.validationProvider=CC.ui.form.ValidationProvider;
CC.create("CC.ui.form.StoreProvider",CC.util.StoreProvider,function(){CC.ui.def("formstore",CC.ui.form.StoreProvider);return{queryString:function(){return CC.formQuery(this.t.getFormEl())},save:function(){this.beforeSave()!==false&&this.t.fire("store:beforesave",this)!==false&&this.onSave()},getSaveUrl:function(){return this.mappingUrl(this.saveUrl)},beforeSave:function(){return this.t.getValidationProvider().validateAll()===true}}});CC.ui.form.FormLayer.prototype.storeProvider=CC.ui.form.StoreProvider;
